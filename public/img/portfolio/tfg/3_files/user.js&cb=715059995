define('lib/xhr',[ "jquery", "nbd/trait/promise" ], function(a, b) {
    "use strict";
    return function() {
        var c, d = new b(), e = a.ajax.apply(a, arguments);
        return d.resolve(e), c = d.thenable(), c.abort = e.abort, c;
    };
});
define('be/Controller/Dialog/Roulette',[ "jquery", "nbd/Controller/Responsive", "nbd/Promise" ], function(a, b, c) {
    "use strict";
    var d = b.extend({
        $context: null,
        setContext: function(a) {
            this.$context && this.$context.off("click"), this.$context = a.on("click", function(a) {
                a.isDefaultPrevented() || a.originalEvent.data === this._view || this.toggle(a.delegateTarget);
            }.bind(this));
        },
        render: function(b) {
            var c = a(b).closest(this._view.attachment), d = this._view.render(c.length ? c : document.body);
            return this._view.position(b), d;
        },
        switchView: function() {
            this._view && (this._view.destroy(), this._view = null), this._super.apply(this, arguments);
        },
        toggle: function(a) {
            this._view.$view && this._view.$view.length ? (this._view.toggle(), this._view.position(a)) : c.from(this.render(a || this.$context)).then(this._view.show.bind(this._view));
        }
    });
    return d;
});
define('beff/dom/transitionEnd',[ "nbd/Promise", "nbd/util/diff" ], function(a, b) {
    "use strict";
    function c(a) {
        var b = a.css("transition-duration"), c = a.css("transition-property");
        return "none" !== c && b.split(",").map(parseFloat).some(Boolean);
    }
    function d(a) {
        var b = window.getComputedStyle(a[0]), c = a.css("transition-property");
        return ("all" === c ? h : c.split(",")).reduce(function(a, c) {
            return c = c.trim(), a[c] = b.getPropertyValue(c), a;
        }, {});
    }
    var e = function() {
        var a, b = document.createElement("aside"), c = {
            WebkitTransition: "webkitTransitionEnd",
            MozTransition: "transitionend",
            OTransition: "oTransitionEnd otransitionend",
            transition: "transitionend"
        };
        for (a in c) if (void 0 !== b.style[a]) return c[a];
    }(), f = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame, g = function(b) {
        var c = new a();
        return this.one(e, function(a) {
            a.originalEvent.propertyName === b && c.resolve(a);
        }), c;
    }, h = [ "transform", "transform-origin", "perspective", "perspective-origin", "color", "opacity", "column-width", "column-count", "column-gap", "column-rule-color", "column-rule-width", "letter-spacing", "text-indent", "word-spacing", "text-decoration-color", "text-shadow", "flex-basis", "flex-grow", "flex-shrink", "order", "background-color", "background-position", "background-size", "border-top-color", "border-right-color", "border-bottom-color", "border-left-color", "border-top-width", "border-right-width", "border-bottom-width", "border-left-width", "border-top-left-radius", "border-top-right-radius", "border-bottom-right-radius", "border-bottom-left-radius", "box-shadow", "margin-top", "margin-right", "margin-bottom", "margin-left", "padding-top", "padding-right", "padding-bottom", "padding-left", "max-height", "min-height", "height", "max-width", "min-width", "width", "visibility", "vertical-align", "bottom", "left", "right", "top", "z-index", "font-weight", "font-stretch", "font-size", "font-size-adjust", "line-height", "outline-color", "outline-width", "outline-offset", "clip", "shape-outside", "shape-margin", "shape-image-threshold" ];
    return function(h, i) {
        function j() {
            f(function() {
                var c = b(k, d(h)), e = Object.keys(c);
                e.length ? l.resolve(a.all(e.map(g, h))) : m ? l.resolve(!1) : j();
            });
        }
        var k, l = new a(), m = !1;
        return i = i || 300, e && c(h) ? (k = d(h), j(), setTimeout(function() {
            m = !0;
        }, i)) : l.resolve(!1), l;
    };
});
define('lib/gaq',{
    page: function(a) {
        try {
            void 0 !== _gaq && _gaq.push([ "_trackPageview", a || location.href ]);
        } catch (b) {}
    },
    event: function() {
        try {
            if ("undefined" != typeof _gaq) {
                var a = Array.prototype.slice.call(arguments);
                a.unshift("_trackEvent"), _gaq.push(a);
            }
        } catch (b) {}
    },
    customVar: function(a, b, c) {
        if (a && b && void 0 !== c) try {
            if ("undefined" != typeof _gaq) {
                var d = Array.prototype.slice.call(arguments);
                d.unshift("_setCustomVar"), _gaq.push(d);
            }
        } catch (e) {}
    }
});
define('be/modal/simple',[ "be/Modal" ], function(a) {
    "use strict";
    return a.simple;
});
define('be/View/Follow',[ "jquery", "nbd/View", "be/modal/simple" ], function(a, b, c) {
    "use strict";
    var d = b.extend({
        init: function(a, b) {
            this.$view = a, this._model = b, this.rendered();
        },
        destroy: function() {
            this._model.off(null, null, this);
        },
        rendered: function() {
            var b = this;
            this._model.on("following", function(b) {
                this.$view.toggleClass("following", b), this.$view.data("following", b), b && this.$view.addClass("following-hold").one("mouseleave", function() {
                    a(this).removeClass("following-hold");
                });
            }, this), this.$view.on("click", function() {
                var c = a(this).data(), d = {
                    backfill: c.backfill
                };
                b._controller.follow(d);
            });
        },
        updateCount: function(a) {
            var b = this.$view.parent().find(".gallery-stats-followers-count"), c = +b.html() + a;
            b.html(c > 0 ? c : 0);
        }
    }, {
        rateLimitPopup: function(a) {
            var b = a ? a + "<br /><br />" : "";
            c({
                title: "Following Limit",
                html: b + 'Please read about our <a href="https://help.behance.net/entries/48445480-Following-limits-on-Behance">following limits</a>.',
                buttons: []
            });
        }
    });
    return d;
});
define('be/Controller/Follow',[ "jquery", "nbd/Controller", "nbd/Model", "nbd/trait/pubsub", "be/View/Follow", "lib/gaq", "be/xhr" ], function(a, b, c, d, e, f, g) {
    "use strict";
    var h = b.extend({
        init: function(a, b, d) {
            this.views = [], this.type = d || "user", this._model = new c(a, {
                blocking: !1,
                following: b || !1
            }), this.listenTo(this._model, "all", this.trigger);
        },
        _initView: function(a) {
            var b = new e(a, this._model);
            return b._controller = this, b;
        },
        add: function(a) {
            if (a.data("befollow")) return this;
            var b = this._initView(a);
            return a.data("befollow", b), this.views.push(b), this;
        },
        update: function(a) {
            var b = a ? 1 : -1;
            this.views.forEach(function(a) {
                a.updateCount(b);
            });
        },
        follow: function(a) {
            function b() {
                d.set("blocking", !1);
            }
            if (!this._model.get("blocking")) {
                var c, d = this._model, h = this._model.get("following"), i = this.constructor.url(this.type, this._model.id()), j = h ? "DELETE" : "POST";
                return this._model.set("blocking", !0), c = g({
                    url: i,
                    type: j,
                    data: a
                }).then(function() {
                    d.set("following", !h), f.event("follow", window.location.pathname, window.location.search);
                }, function(a) {
                    var b;
                    429 === a.status && (a.responseJSON && a.responseJSON.messages && (b = a.responseJSON.messages.pop().message), 
                    e.rateLimitPopup(b));
                }), this.trigger("request", c), c.then(b, b), c;
            }
        },
        destroy: function() {
            this.views.forEach(function(a) {
                a.destroy();
            }), this.views = [], this._model.destroy(), this._model = null;
        }
    }, {
        RELATIONS_URL: "/relations",
        url: function(a, b) {
            return this.RELATIONS_URL + "/" + a + "/" + b + window.location.search;
        }
    }).mixin(d);
    return h;
});
define('be/follow',[ "jquery", "nbd/util/extend", "nbd/trait/pubsub", "be/Controller/Follow" ], function(a, b, c, d) {
    "use strict";
    var e = {
        user: {},
        collection: {},
        site: {},
        team: {}
    }, f = function(a, b, c) {
        var e = new d(b, c, a);
        return this.listenTo(e, "following", function(c) {
            this.trigger("following", b, c, a);
        }).listenTo(e, "request", function(c) {
            this.trigger("request", b, c, a);
        }), e;
    }, g = function(a, b) {
        var c = "followee", d = a.data(c) || +a.attr(c), g = a.data("following");
        d && (null == g && (g = a.hasClass("following")), e[b][d] = (e[b][d] || f.call(h, b, d, g)).add(a));
    }, h = {
        init: function(a) {
            this.users(a), this.collections(a), this.sites(a), this.teams(a);
        },
        users: function(b) {
            a(".js-action-follow-user", b).each(function() {
                g(a(this), "user");
            });
        },
        collections: function(b) {
            a(".js-action-follow-collection", b).each(function() {
                g(a(this), "collection");
            });
        },
        sites: function(b) {
            a(".js-action-follow-site", b).each(function() {
                g(a(this), "site");
            });
        },
        teams: function(b) {
            a(".js-action-follow-team", b).each(function() {
                g(a(this), "team");
            });
        }
    };
    return b(h, c), h;
});
define('be/View/Dialog/Menu',[ "jquery", "be/View/Dialog", "nbd/util/async", "jquery/ui/position" ], function(a, b, c) {
    "use strict";
    var d = b.extend({
        init: function() {
            this._super.apply(this, arguments), this.dismiss = function(a) {
                a.originalEvent.data !== this && (this.hide(), a.preventDefault());
            }.bind(this);
        },
        destroy: function() {
            this._unbind(), this._super.apply(this, arguments);
        },
        template: function(b) {
            return this._super(a.extend({
                dialogType: "menu",
                blocking: !1,
                hide_toolbar: !0
            }, b));
        },
        rendered: function() {
            this._super();
            var a = this;
            this.$view.on("click touchend", function(b) {
                b.originalEvent = b.originalEvent || {}, b.originalEvent.data = a;
            });
        },
        _bind: function() {
            a("html").on("click touchend", this.dismiss);
        },
        _unbind: function() {
            a("html").off("click touchend", this.dismiss);
        },
        position: function(b, c) {
            if (this.$view) {
                b && (this._lastContext = b);
                var d = {
                    my: "left top",
                    at: "left bottom+10",
                    of: this._lastContext,
                    collision: "flipfit"
                };
                this.$view.position(a.extend(d, c));
            }
        },
        show: function() {
            return this.$view ? (c(this._bind.bind(this)), this.$view.addClass("shown"), this._super()) : void 0;
        },
        hide: function() {
            return this.$view ? (this._unbind(), this.$view.removeClass("shown"), this._super()) : void 0;
        },
        toggle: function() {
            return this[this.$view.hasClass("shown") ? "hide" : "show"]();
        }
    });
    return d;
});

define("require/hgn!templates/lib/_follow/_button", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div ");if(t.s(t.f("instant_backfill",c,p,1),c,p,0,90,113,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-backfill=\"instant\"");});c.pop();}t.b(" class=\"");t.sub("classes",c,p,i);t.b(" js-action-follow-");t.sub("type",c,p,i);t.b(" follow-button-container");if(t.s(t.f("is_following",c,p,1),c,p,0,243,253,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" following");});c.pop();}t.b("\" data-followee=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");if(t.s(t.f("is_following",c,p,1),c,p,0,312,333,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("data-following=\"true\"");});c.pop();}t.b(">");t.b("\n" + i);t.b("  <a class=\"form-button js-form-button-follow form-button-follow ");t.sub("size",c,p,i);t.b(" form-button-default form-button-left-icon form-button-icon-follow\">");t.sub("follow",c,p,i);t.b("</a>");t.b("\n" + i);t.b("  <a class=\"form-button form-button-following ");t.sub("size",c,p,i);t.b(" form-button-light-and-grey form-button-left-icon form-button-icon-following\">");t.sub("following",c,p,i);t.b("</a>");t.b("\n" + i);t.b("  <a class=\"form-button js-form-button-unfollow form-button-unfollow ");t.sub("size",c,p,i);t.b(" form-button-red form-button-left-icon form-button-icon-unfollow\">");t.sub("unfollow",c,p,i);t.b("</a>");t.b("\n" + i);t.b("</div>");return t.fl(); },partials: {}, subs: { "classes": function(c,p,t,i) {},"type": function(c,p,t,i) {},"size": function(c,p,t,i) {},"follow": function(c,p,t,i) {t.b("Follow");t.b(t.v(t.f("follow_label_postfix",c,p,0)));},"following": function(c,p,t,i) {t.b("Following");t.b(t.v(t.f("follow_label_postfix",c,p,0)));},"unfollow": function(c,p,t,i) {t.b("Unfollow&nbsp;");t.b(t.v(t.f("follow_label_postfix",c,p,0)));} }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/lib/_follow/_buttonUserSmall", ["hogan", "require/hgn!templates/lib/_follow/_button"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");if(!t.s(t.f("is_profile_owner",c,p,1),c,p,1,0,0,"")){t.b(t.rp("<lib/_follow/_button0",c,p,""));};return t.fl(); },partials: {"<lib/_follow/_button0":{name:"lib/_follow/_button", partials: {}, subs: { "classes": function(c,p,t,i) {t.b("user-follow");},"type": function(c,p,t,i) {t.b("user");},"size": function(c,p,t,i) {t.b("form-button-small");} }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "lib/_follow/_button": arguments[1].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/miniProfile", ["hogan", "require/hgn!templates/lib/_follow/_buttonUserSmall"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("user",c,p,1),c,p,0,9,1744,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"mini-profile-wrap hide-phone hide-tablet cfix\">");t.b("\n");t.b("\n" + i);t.b("  <div class=\"user-info-container cfix\">");t.b("\n" + i);t.b("    <a target=\"_blank\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"user-image-wrap user-image-link\">");t.b("\n" + i);t.b("      <img src=\"");t.b(t.v(t.d("images.115",c,p,0)));t.b("\" class=\"user-image\">");t.b("\n" + i);t.b("    </a>");t.b("\n");t.b("\n" + i);t.b("    <div class=\"user-info\">");t.b("\n" + i);t.b("      <a target=\"_blank\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"user-name\">");t.b(t.v(t.f("display_name",c,p,0)));t.b("</a>");t.b("\n" + i);t.b("      <a target=\"_blank\" href=\"");t.b(t.v(t.d("location.link",c,p,0)));t.b("\" class=\"location-link beicons-pre beicons-pre-location\">");t.b(t.v(t.f("city",c,p,0)));if(t.s(t.f("state",c,p,1),c,p,0,483,494,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(", ");t.b(t.v(t.f("state",c,p,0)));});c.pop();}if(t.s(t.f("country",c,p,1),c,p,0,516,529,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(", ");t.b(t.v(t.f("country",c,p,0)));});c.pop();}t.b("</a>");t.b("\n" + i);t.b("    </div> <!-- .user-info -->");t.b("\n" + i);t.b("  </div> <!-- .user-info-container -->");t.b("\n");t.b("\n" + i);t.b(t.rp("<lib/_follow/_buttonUserSmall0",c,p,"  "));t.b("\n" + i);if(t.s(t.f("has_latest_projects",c,p,1),c,p,0,680,1257,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a target=\"_blank\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"cfix user-view-link gallery-projects-wrap\">");t.b("\n" + i);t.b("      <ul class=\"project-cover-container\">");t.b("\n" + i);if(t.s(t.f("latest_projects",c,p,1),c,p,0,837,985,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <li class=\"project-cover-wrap\">");t.b("\n" + i);t.b("          ");if(t.s(t.d("covers.115",c,p,1),c,p,0,903,951,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<img src=\"");t.b(t.v(t.d("covers.115",c,p,0)));t.b("\" class=\"project-cover\">");});c.pop();}t.b("\n" + i);t.b("        </li>");t.b("\n" + i);});c.pop();}t.b("      </ul> <!-- .project-cover-container -->");t.b("\n" + i);t.b("      <span class=\"gallery-cover-overlay\">");t.b("\n" + i);t.b("        <div class=\"gallery-cover-overlay-text\">View Profile&nbsp;<span class=\"rarr\">&rarr;</span></div>");t.b("\n" + i);t.b("      </span>");t.b("\n" + i);t.b("    </a> <!-- .gallery-projects-wrap -->");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(t.s(t.f("stats",c,p,1),c,p,0,1295,1698,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"stats-wrap\">");t.b("\n");t.b("\n" + i);t.b("    <span class=\"cover-stat beicons-pre beicons-pre-eye cover-stat-views\">");t.b("\n" + i);t.b("      ");t.b(t.v(t.f("views",c,p,0)));t.b("\n" + i);t.b("    </span>");t.b("\n");t.b("\n" + i);t.b("    <span class=\"cover-stat beicons-pre beicons-pre-thumb cover-stat-appreciations\">");t.b("\n" + i);t.b("      ");t.b(t.v(t.f("appreciations",c,p,0)));t.b("\n" + i);t.b("    </span>");t.b("\n");t.b("\n" + i);t.b("    <span class=\"cover-stat beicons-pre beicons-pre-followers user-stats-followed\">");t.b("\n" + i);t.b("      ");t.b(t.v(t.f("followers",c,p,0)));t.b("\n" + i);t.b("    </span>");t.b("\n" + i);t.b("  </div> <!-- .stats-wrap -->");t.b("\n" + i);});c.pop();}t.b("</div> <!-- .mini-profile-wrap -->");t.b("\n" + i);});c.pop();}return t.fl(); },partials: {"<lib/_follow/_buttonUserSmall0":{name:"lib/_follow/_buttonUserSmall", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "lib/_follow/_buttonUserSmall": arguments[1].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('be/View/MiniProfile',[ "jquery", "beff/dom/transitionEnd", "lib/gaq", "be/follow", "be/View/Dialog/Menu", "hgn!templates/miniProfile" ], function(a, b, c, d, e, f) {
    "use strict";
    var g = e.extend({
        mustache: f,
        template: function(b) {
            return this._super(a.extend({
                classes: [ "mini-profile", "hide-tablet", "hide-phone" ]
            }, b));
        },
        position: function() {
            var a, b, c, d = this._controller.$context.width() / 2, e = this.constructor.NUB_OFFSET - d, f = 0 > e ? "+" : "-";
            this._super(this._controller.$context, {
                my: "left top",
                at: "left" + f + Math.abs(e) + " bottom+" + this.constructor.NUB_HEIGHT,
                collision: "flipfit",
                within: this._model.get("within")
            }), a = this._controller.$context.offset(), b = this.$view.offset(), this._model.get("bottom") && b.top + this.$view.height() > this._model.get("bottom").offset().top ? (this._super(this._controller.$context, {
                my: "left" + f + Math.abs(e) + " bottom-" + this.constructor.NUB_HEIGHT,
                at: "left top",
                collision: "flipfit none",
                within: this._model.get("within")
            }), c = "bottom") : c = a.top > b.top ? "bottom" : "top", c += Math.floor(a.left) > b.left + Math.abs(e) ? "-right" : "-left", 
            this.$view.removeClass("top-right top-left bottom-right bottom-left").addClass(c);
        },
        rendered: function() {
            this._super(), d.init(this.$view), a(document.body).hasClass("logged-out") ? this.$view.on("click", ".js-action-follow-user", this.hide.bind(this)) : (this.$view.on("click", ".js-form-button-follow", function() {
                c.event("mini_profile", "follow_button", "followed_user");
            }), this.$view.on("click", ".js-form-button-unfollow", function() {
                c.event("mini_profile", "follow_button", "unfollowed_user");
            }));
        },
        show: function() {
            this.$view && (this.$view.removeClass("hide"), this.position()), this._super(), 
            c.event("mini_profile", "mini_profile_shown", window.location.pathname), this._controller.$context.closest(":focusable").focus();
        },
        hide: function() {
            this._super(), b(this.$view).then(this.destroy.bind(this));
        },
        _bind: a.noop,
        _unbind: a.noop
    }, {
        NUB_OFFSET: 55,
        NUB_HEIGHT: 12
    });
    return g;
});
define('be/Controller/MiniProfile',[ "jquery", "be/Controller/Dialog/Roulette", "be/View/MiniProfile" ], function(a, b, c) {
    "use strict";
    var d = b.extend({
        init: function() {
            this._super.apply(this, arguments), this.listenTo(this._view, {
                postrender: function(a) {
                    this._bindHide(a);
                },
                hide: function() {
                    this._unbindHide();
                }
            }), this._keepAlive = this._keepAlive.bind(this), this._setDeath = this._setDeath.bind(this);
        },
        _unbindHide: function() {
            this.$context.off(".miniprofile");
        },
        _bindHide: function(a) {
            a.on({
                "mouseenter.miniprofile": this._keepAlive,
                "mouseleave.miniprofile": this._setDeath,
                "click.miniprofile": this._setDeath
            });
        },
        setContext: function(a) {
            this.$context = a, this._unbindHide(), this._bindHide(this.$context);
        },
        _keepAlive: function() {
            clearTimeout(this._hideTimeout);
        },
        _setDeath: function() {
            this._hideTimeout = setTimeout(function() {
                this._view.hide();
            }.bind(this), this.constructor.HIDE_TIMEOUT);
        }
    }, {
        VIEW_CLASS: c,
        HIDE_TIMEOUT: 500
    });
    return d;
});

define('require/css!styles/profile/mini',[],function(){});
define('be/miniprofile',[ "jquery", "lib/xhr", "nbd/trait/promise", "be/Controller/MiniProfile", "css!styles/profile/mini" ], function(a, b, c, d) {
    "use strict";
    function e(b, c, d) {
        b = b || a(document.body), j = c || a(window), i = d;
        var e, f, l;
        b.on("mouseenter", ".js-mini-profile", function() {
            var b = a(this);
            e = b.data("id"), clearTimeout(f), f = setTimeout(function() {
                b.addClass("wait"), l = g(e), l.then(function(a) {
                    b.removeClass("wait"), h(b, a);
                }, function() {
                    b.removeClass("wait");
                });
            }, k);
        }).on("mouseleave", ".js-mini-profile", function() {
            clearTimeout(f), l && (l.reject(), l = null);
        });
    }
    function f(b) {
        b = b || a(document.body), b.off("mouseenter mouseleave", ".js-mini-profile"), a.each(l, function(a, b) {
            b.destroy();
        });
    }
    function g(a) {
        g._cache = g._cache || {};
        var d, e;
        return (e = g._cache[a]) ? (d = new c(), d.resolve(e), d) : b({
            url: "/user/mini/" + a
        }).then(function(b) {
            return g._cache[a] = b, b;
        });
    }
    function h(b, c) {
        var e = new d(c);
        b.parents(".popup").length ? (c.within = a(window), c.bottom = null) : (c.within = j, 
        c.bottom = i), e.setContext(b), e.render(b), e._view.show();
    }
    var i, j, k = 500, l = {};
    return {
        init: e,
        destroy: f
    };
});
define('profile/lib/Collection',[ "jquery", "nbd/util/construct", "nbd/View/Element" ], function(a, b, c) {
    "use strict";
    return c.extend({
        stolenFunctions: {
            bind: !1,
            unbind: !1
        },
        init: function(a, b, c) {
            this._super(a), this.newViews = [], this.views = [], this.ViewType = b, this._emptyTemplate = c;
        },
        bind: function() {
            return this._useBorrowedFunctions(function() {
                return this._bind();
            });
        },
        unbind: function() {
            return this._useBorrowedFunctions(function() {
                return this._unbind();
            });
        },
        _useBorrowedFunctions: function(a) {
            this._borrowViewFunctions();
            var b = a.call(this);
            return this._giveBackViewFunctions(), b;
        },
        _borrowViewFunctions: function() {
            var b;
            for (b in this.stolenFunctions) this.stolenFunctions[b] = this.ViewType.prototype[b], 
            this["_" + b] = this.stolenFunctions[b].bind(this), this.ViewType.prototype[b] = a.noop;
        },
        _giveBackViewFunctions: function() {
            var b;
            for (b in this.stolenFunctions) this.stolenFunctions[b] && (this.ViewType.prototype[b] = this.stolenFunctions[b], 
            this["_" + b] = a.noop, this.stolenFunctions[b] = !1);
        },
        initChildren: function() {
            this.$parent.children().each(function(b, c) {
                var d = new this.ViewType(this.$parent, a(c));
                d.rendered(), this.newViews.push(d);
            }.bind(this)), this.views = this.newViews;
        },
        setContents: function(a) {
            this.$parent.html(a);
        },
        setEmpty: function(a) {
            return this.setContents(this._emptyTemplate(a));
        },
        render: function(a) {
            return this.trigger("prerender", this.$parent, this.views), this.newViews = a.map(function(a) {
                var b = new this.ViewType(this.$parent);
                return b.render(a), b;
            }, this), this.views = this.views.concat(this.newViews), this.trigger("postrender", this.$parent, this.getNewElements()), 
            this.getNewElements();
        },
        destroy: function() {
            this._useBorrowedFunctions(function() {
                this.views.forEach(function(a) {
                    a.destroy();
                }), this._unbind();
            }.bind(this)), this.$parent.empty(), this.views = this.newViews = [];
        },
        reset: function(a, b) {
            this.destroy(), this.ViewType = a, this._emptyTemplate = b, this.bind();
        },
        getNewElements: function() {
            return a(this.newViews.map(function(a) {
                return a.$view[0];
            }));
        }
    }, {
        init: function() {
            var a = b.apply(this, arguments);
            return a._useBorrowedFunctions(function() {
                a.initChildren(), a._bind(), a.trigger("init", a.$parent, a.getNewElements());
            }), a;
        }
    });
});
define('beff/Component',[ "nbd/Class", "nbd/util/construct", "nbd/trait/log", "nbd/trait/pubsub" ], function(a, b, c, d) {
    "use strict";
    return a.extend({
        bind: function() {
            return this;
        },
        unbind: function() {
            return this;
        },
        destroy: function() {
            this.off().stopListening().unbind();
        }
    }, {
        displayName: "Component",
        init: function() {
            var a = b.apply(this, arguments);
            return a.bind(), a;
        }
    }).mixin(c).mixin(d);
});
define('profile/lib/coordinator',[ "beff/Component" ], function(a) {
    "use strict";
    return new a();
});
define('profile/View/Element',[ "jquery", "nbd/View/Element" ], function(a, b) {
    "use strict";
    return b.extend({
        init: function(a, b) {
            this._super.apply(this, arguments), b && (this.$view = b), this.$parent = !a && b ? this.$view.parent() : a;
        },
        rendered: function() {
            this.bind && this.bind();
        },
        destroy: function() {
            this.unbind && this.unbind(), this._super();
        },
        bind: function() {},
        unbind: function() {}
    });
});
define('be/trait/fatclick',[],function() {
    "use strict";
    function a(a) {
        var c = a.data.touch, d = a.originalEvent.changedTouches[0];
        if (!(Math.sqrt(Math.pow(c.pageX - d.pageX, 2) + Math.pow(c.pageY - d.pageY, 2)) > b)) {
            var e = this.$view.find("a:visible").first().get(0);
            e.click ? e.click() : window.location = e.href;
        }
    }
    var b = 30, c = 300;
    return {
        fatclick: function(b) {
            if (b = b || this.$view) {
                var d = a.bind(this);
                b.on("touchstart", function(a) {
                    function e() {
                        b.off({
                            touchend: d,
                            touchcancel: e
                        });
                    }
                    b.one("touchend", {
                        touch: a.originalEvent.changedTouches[0]
                    }, d).on("touchmove", e).on("touchcancel", e), setTimeout(e, c);
                });
            }
        }
    };
});
define('lib/picturefill',[ "jquery" ], function(a) {
    "use strict";
    var b = window.matchMedia || window.msMatchMedia, c = function() {
        var c = a(this), d = c.find("div[data-src]");
        return d.length ? (b && (d = d.first().add(d.filter(function() {
            var c = a(this).data("media");
            return c && b(c).matches;
        })).last()), c.attr("data-rendered", "rendered"), void a("<img>", {
            alt: c.data("alt"),
            src: d.data("src"),
            "class": d.data("class"),
            title: d.data("title"),
            "data-pin-nopin": "pin"
        }).appendTo(c)) : void c.find("img").remove();
    };
    return a.fn.picturefill = function() {
        return this.find("div[data-picture]:not([data-rendered])").each(c), this;
    };
});
define('profile/View/Content',[ "profile/View/Element", "be/trait/fatclick", "lib/picturefill" ], function(a, b, c) {
    "use strict";
    return a.extend({
        picturefill: function() {
            c.call(this.$view);
        }
    }).mixin(b);
});
define('profile/View/DraftsButton',[ "profile/View/Content" ], function(a) {
    "use strict";
    return a.extend({
        render: function(a) {
            this.$view.find(".js-drafts-count").text(a);
        }
    });
});
define('be/onhistory',[ "vendor/misc/history", "lib/gaq" ], function(a, b) {
    "use strict";
    return function(c, d) {
        var e, f, g = function() {};
        return e = a.enabled ? function(e) {
            var f = "function" == typeof c ? c.call(this) : c;
            b.page(e), a[(d ? "replace" : "push") + "State"](f || {}, document.title, e);
        } : g, f = a.enabled ? function(a) {
            if (!(0 !== a.button || a.altKey || a.ctrlKey || a.metaKey || a.shiftKey)) {
                var b = a.currentTarget.href;
                window.location.href !== b && (a.preventDefault(), e.call(this, b));
            }
        } : g, f.submit = e, f;
    };
});

define('require/css!styles/jquery/plugins/jquery.fancybox',[],function(){});
!function(a, b, c) {
    var d = c(a), e = c(b), f = c.fancybox = function() {
        f.open.apply(this, arguments);
    }, g = !1, h = navigator.userAgent.match(/msie/i), i = null;
    c.extend(f, {
        version: "2.0.4",
        defaults: {
            padding: 15,
            margin: 20,
            width: 800,
            height: 600,
            minWidth: 200,
            minHeight: 200,
            maxWidth: 9999,
            maxHeight: 9999,
            autoSize: !0,
            fitToView: !0,
            aspectRatio: !1,
            topRatio: .5,
            fixed: !1 in b.documentElement || b,
            scrolling: "auto",
            wrapCSS: "fancybox-default",
            arrows: !0,
            closeBtn: !0,
            closeClick: !1,
            nextClick: !1,
            mouseWheel: !0,
            autoPlay: !1,
            playSpeed: 3e3,
            modal: !1,
            loop: !0,
            ajax: {},
            keys: {
                next: [ 13, 32, 34, 39, 40 ],
                prev: [ 8, 33, 37, 38 ],
                close: [ 27 ]
            },
            index: 0,
            type: null,
            href: null,
            content: null,
            title: null,
            tpl: {
                wrap: '<div class="fancybox-wrap"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div>',
                image: '<img class="fancybox-image" src="{href}" alt="" />',
                iframe: '<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0" ' + (h ? 'allowtransparency="true""' : "") + ' scrolling="{scrolling}" src="{href}"></iframe>',
                swf: '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',
                error: '<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',
                closeBtn: '<div title="Close" class="fancybox-item fancybox-close"></div>',
                next: '<a title="Next" class="fancybox-item fancybox-next"><span></span></a>',
                prev: '<a title="Previous" class="fancybox-item fancybox-prev"><span></span></a>'
            },
            openEffect: "fade",
            openSpeed: 250,
            openEasing: "swing",
            openOpacity: !0,
            openMethod: "zoomIn",
            closeEffect: "fade",
            closeSpeed: 250,
            closeEasing: "swing",
            closeOpacity: !0,
            closeMethod: "zoomOut",
            nextEffect: "elastic",
            nextSpeed: 300,
            nextEasing: "swing",
            nextMethod: "changeIn",
            prevEffect: "elastic",
            prevSpeed: 300,
            prevEasing: "swing",
            prevMethod: "changeOut",
            helpers: {
                overlay: {
                    speedIn: 0,
                    speedOut: 300,
                    opacity: .8,
                    css: {
                        cursor: "pointer"
                    },
                    closeClick: !0
                },
                title: {
                    type: "float"
                }
            },
            onCancel: c.noop,
            beforeLoad: c.noop,
            afterLoad: c.noop,
            beforeShow: c.noop,
            afterShow: c.noop,
            beforeClose: c.noop,
            afterClose: c.noop
        },
        group: {},
        opts: {},
        coming: null,
        current: null,
        isOpen: !1,
        isOpened: !1,
        wrap: null,
        outer: null,
        inner: null,
        player: {
            timer: null,
            isActive: !1
        },
        ajaxLoad: null,
        imgPreload: null,
        transitions: {},
        helpers: {},
        open: function(a, b) {
            c.isArray(a) || (a = [ a ]), a.length && (f.close(!0), f.opts = c.extend(!0, {}, f.defaults, b), 
            f.group = a, f._start(f.opts.index || 0));
        },
        cancel: function() {
            f.coming && !1 === f.trigger("onCancel") || (f.coming = null, f.hideLoading(), f.ajaxLoad && f.ajaxLoad.abort(), 
            f.ajaxLoad = null, f.imgPreload && (f.imgPreload.onload = f.imgPreload.onabort = f.imgPreload.onerror = null));
        },
        close: function(a) {
            f.cancel(), f.current && !1 !== f.trigger("beforeClose") && (f.unbindEvents(), !f.isOpen || a && a[0] === !0 ? (c(".fancybox-wrap").stop().trigger("onReset").remove(), 
            f._afterZoomOut()) : (f.isOpen = f.isOpened = !1, c(".fancybox-item").remove(), 
            f.wrap.stop(!0).removeClass("fancybox-opened"), f.inner.css("overflow", "hidden"), 
            f.transitions[f.current.closeMethod]()));
        },
        play: function(a) {
            var b = function() {
                clearTimeout(f.player.timer);
            }, d = function() {
                b(), f.current && f.player.isActive && (f.player.timer = setTimeout(f.next, f.current.playSpeed));
            }, e = function() {
                b(), c("body").unbind(".player"), f.player.isActive = !1, f.trigger("onPlayEnd");
            }, g = function() {
                f.current && (f.current.loop || f.current.index < f.group.length - 1) && (f.player.isActive = !0, 
                c("body").bind({
                    "afterShow.player onUpdate.player": d,
                    "onCancel.player beforeClose.player": e,
                    "beforeLoad.player": b
                }), d(), f.trigger("onPlayStart"));
            };
            f.player.isActive || a && a[0] === !1 ? e() : g();
        },
        next: function() {
            f.current && f.jumpto(f.current.index + 1);
        },
        prev: function() {
            f.current && f.jumpto(f.current.index - 1);
        },
        jumpto: function(a) {
            f.current && (a = parseInt(a, 10), f.group.length > 1 && f.current.loop && (a >= f.group.length ? a = 0 : 0 > a && (a = f.group.length - 1)), 
            "undefined" != typeof f.group[a] && (f.cancel(), f._start(a)));
        },
        reposition: function(a) {
            f.isOpen && f.wrap.css(f._getPosition(a));
        },
        update: function() {
            f.isOpen && (g || (i = setInterval(function() {
                g && (g = !1, clearTimeout(i), f.current && (f.current.autoSize && (f.inner.height("auto"), 
                f.current.height = f.inner.height()), f._setDimension(), f.current.canGrow && f.inner.height("auto"), 
                f.reposition(), f.trigger("onUpdate")));
            }, 100)), g = !0);
        },
        toggle: function() {
            f.isOpen && (f.current.fitToView = !f.current.fitToView, f.update());
        },
        hideLoading: function() {
            c("#fancybox-loading").remove();
        },
        showLoading: function() {
            f.hideLoading(), c('<div id="fancybox-loading"></div>').click(f.cancel).appendTo("body");
        },
        getViewport: function() {
            return {
                x: d.scrollLeft(),
                y: d.scrollTop(),
                w: d.width(),
                h: d.height()
            };
        },
        unbindEvents: function() {
            f.wrap && f.wrap.unbind(".fb"), e.unbind(".fb"), d.unbind(".fb");
        },
        bindEvents: function() {
            var a = f.current, b = a.keys;
            a && (d.bind("resize.fb, orientationchange.fb", f.update), b && e.bind("keydown.fb", function(a) {
                var d;
                a.ctrlKey || a.altKey || a.shiftKey || a.metaKey || !(c.inArray(a.target.tagName.toLowerCase(), [ "input", "textarea", "select", "button" ]) < 0) || (d = a.keyCode, 
                c.inArray(d, b.close) > -1 ? (f.close(), a.preventDefault()) : c.inArray(d, b.next) > -1 ? (f.next(), 
                a.preventDefault()) : c.inArray(d, b.prev) > -1 && (f.prev(), a.preventDefault()));
            }), c.fn.mousewheel && a.mouseWheel && f.group.length > 1 && f.wrap.bind("mousewheel.fb", function(a, b) {
                var d = c(a.target).get(0);
                (0 === d.clientHeight || d.scrollHeight === d.clientHeight) && (a.preventDefault(), 
                f[b > 0 ? "prev" : "next"]());
            }));
        },
        trigger: function(a) {
            var b, d = f[c.inArray(a, [ "onCancel", "beforeLoad", "afterLoad" ]) > -1 ? "coming" : "current"];
            if (d) {
                if (c.isFunction(d[a]) && (b = d[a].apply(d, Array.prototype.slice.call(arguments, 1))), 
                b === !1) return !1;
                d.helpers && c.each(d.helpers, function(b, e) {
                    e && "undefined" != typeof f.helpers[b] && c.isFunction(f.helpers[b][a]) && f.helpers[b][a](e, d);
                }), c.event.trigger(a + ".fb");
            }
        },
        isImage: function(a) {
            return a && a.match(/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i);
        },
        isSWF: function(a) {
            return a && a.match(/\.(swf)(.*)?$/i);
        },
        _start: function(a) {
            var b, d, e, g, h = {}, i = f.group[a] || null;
            return "object" == typeof i && (i.nodeType || i instanceof c) && (b = !0, c.metadata && (h = c(i).metadata())), 
            h = c.extend(!0, {}, f.opts, {
                index: a,
                element: i
            }, c.isPlainObject(i) ? i : h), c.each([ "href", "title", "content", "type" ], function(a, d) {
                h[d] = f.opts[d] || b && c(i).attr(d) || h[d] || null;
            }), "number" == typeof h.margin && (h.margin = [ h.margin, h.margin, h.margin, h.margin ]), 
            h.modal && c.extend(!0, h, {
                closeBtn: !1,
                closeClick: !1,
                nextClick: !1,
                arrows: !1,
                mouseWheel: !1,
                keys: null,
                helpers: {
                    overlay: {
                        css: {
                            cursor: "auto"
                        },
                        closeClick: !1
                    }
                }
            }), f.coming = h, !1 === f.trigger("beforeLoad") ? void (f.coming = null) : (e = h.type, 
            d = h.href, e || (b && (g = c(i).data("fancybox-type"), !g && i.className && (g = i.className.match(/fancybox\.(\w+)/), 
            e = g ? g[1] : null)), !e && d && (f.isImage(d) ? e = "image" : f.isSWF(d) ? e = "swf" : d.match(/^#/) && (e = "inline")), 
            e || (e = b ? "inline" : "html"), h.type = e), "inline" === e || "html" === e ? (h.content = h.content || ("inline" === e && d ? c(d) : i), 
            h.content.length || (e = null)) : (h.href = d || i, h.href || (e = null)), h.group = f.group, 
            void ("image" === e ? f._loadImage() : "ajax" === e ? f._loadAjax() : e ? f._afterLoad() : f._error("type")));
        },
        _error: function(a) {
            c.extend(f.coming, {
                type: "html",
                autoSize: !0,
                minHeight: "0",
                hasError: a,
                content: f.coming.tpl.error
            }), f._afterLoad();
        },
        _loadImage: function() {
            f.imgPreload = new Image(), f.imgPreload.onload = function() {
                this.onload = this.onerror = null, f.coming.width = this.width, f.coming.height = this.height, 
                f._afterLoad();
            }, f.imgPreload.onerror = function() {
                this.onload = this.onerror = null, f._error("image");
            }, f.imgPreload.src = f.coming.href, f.imgPreload.complete || f.showLoading();
        },
        _loadAjax: function() {
            f.showLoading(), f.ajaxLoad = c.ajax(c.extend({}, f.coming.ajax, {
                url: f.coming.href,
                error: function(a, b) {
                    "abort" !== b ? f._error("ajax", a) : f.hideLoading();
                },
                success: function(a, b) {
                    "success" === b && (f.coming.content = a, f._afterLoad());
                }
            }));
        },
        _preload: function() {
            var a = f.group, b = f.current.index, d = function(a) {
                a && f.isImage(a) && (new Image().src = a);
            };
            a.length > 1 && (d(c(a[b + 1] || a[0]).attr("href")), d(c(a[b - 1] || a[a.length - 1]).attr("href")));
        },
        _afterLoad: function() {
            return f.hideLoading(), f.coming && !1 !== f.trigger("afterLoad", f.current) ? (f.isOpened ? (c(".fancybox-item").remove(), 
            f.wrap.stop(!0).removeClass("fancybox-opened"), f.inner.css("overflow", "hidden"), 
            f.transitions[f.current.prevMethod]()) : (c(".fancybox-wrap").stop().trigger("onReset").remove(), 
            f.trigger("afterClose")), f.unbindEvents(), f.isOpen = !1, f.current = f.coming, 
            f.coming = !1, f.wrap = c(f.current.tpl.wrap).addClass("fancybox-tmp " + f.current.wrapCSS).appendTo("body"), 
            f.outer = c(".fancybox-outer", f.wrap).css("padding", f.current.padding + "px"), 
            f.inner = c(".fancybox-inner", f.wrap), f._setContent(), f.trigger("beforeShow"), 
            f._setDimension(), f.wrap.hide().removeClass("fancybox-tmp"), f.bindEvents(), f._preload(), 
            void f.transitions[f.isOpened ? f.current.nextMethod : f.current.openMethod]()) : void (f.coming = !1);
        },
        _setContent: function() {
            var a, b, d = f.current, e = d.type;
            switch (e) {
              case "inline":
              case "ajax":
              case "html":
                a = d.content, "inline" === e && a instanceof c && (a = a.show().detach(), a.parent().hasClass("fancybox-inner") && a.parents(".fancybox-wrap").trigger("onReset").remove(), 
                c(f.wrap).bind("onReset", function() {
                    a.appendTo("body").hide();
                })), d.autoSize && (b = c('<div class="fancybox-tmp"></div>').appendTo(c("body")).append(a), 
                d.width = b.outerWidth(), d.height = b.outerHeight(!0), a = b.contents().detach(), 
                b.remove());
                break;

              case "image":
                a = d.tpl.image.replace("{href}", d.href), d.aspectRatio = !0;
                break;

              case "swf":
                a = d.tpl.swf.replace(/\{width\}/g, d.width).replace(/\{height\}/g, d.height).replace(/\{href\}/g, d.href);
                break;

              case "iframe":
                a = d.tpl.iframe.replace("{href}", d.href).replace("{scrolling}", d.scrolling).replace("{rnd}", new Date().getTime());
            }
            c.inArray(e, [ "image", "swf", "iframe" ]) > -1 && (d.autoSize = !1, d.scrolling = !1), 
            f.inner.append(a);
        },
        _setDimension: function() {
            var a, b, d = f.wrap, e = f.outer, g = f.inner, h = f.current, i = f.getViewport(), j = h.margin, k = 2 * h.padding, l = h.width + k, m = h.height + k, n = h.width / h.height, o = h.maxWidth, p = h.maxHeight, q = h.minWidth, r = h.minHeight;
            if (i.w -= j[1] + j[3], i.h -= j[0] + j[2], l.toString().indexOf("%") > -1 && (l = i.w * parseFloat(l) / 100), 
            m.toString().indexOf("%") > -1 && (m = i.h * parseFloat(m) / 100), h.fitToView && (o = Math.min(i.w, o), 
            p = Math.min(i.h, p)), q = Math.min(l, q), r = Math.min(l, r), o = Math.max(q, o), 
            p = Math.max(r, p), h.aspectRatio ? (l > o && (l = o, m = (l - k) / n + k), m > p && (m = p, 
            l = (m - k) * n + k), q > l && (l = q, m = (l - k) / n + k), r > m && (m = r, l = (m - k) * n + k)) : (l = Math.max(q, Math.min(l, o)), 
            m = Math.max(r, Math.min(m, p))), l = Math.round(l), m = Math.round(m), c(d.add(e).add(g)).width("auto").height("auto"), 
            g.width(l - k).height(m - k), d.width(l), a = d.height(), l > o || a > p) for (;(l > o || a > p) && l > q && a > r; ) m -= 10, 
            h.aspectRatio ? (l = Math.round((m - k) * n + k), q > l && (l = q, m = (l - k) / n + k)) : l -= 10, 
            g.width(l - k).height(m - k), d.width(l), a = d.height();
            h.dim = {
                width: l,
                height: a
            }, h.canGrow = h.autoSize && m > r && p > m, h.canShrink = !1, h.canExpand = !1, 
            l - k < h.width || m - k < h.height ? h.canExpand = !0 : (l > i.w || a > i.h) && l > q && m > r && (h.canShrink = !0), 
            b = a - k, f.innerSpace = b - g.height(), f.outerSpace = b - e.height();
        },
        _getPosition: function(a) {
            var b = f.current, c = f.getViewport(), d = b.margin, e = f.wrap.width() + d[1] + d[3], g = f.wrap.height() + d[0] + d[2], h = {
                position: "absolute",
                top: d[0] + c.y,
                left: d[3] + c.x
            };
            return b.fixed && (!a || a[0] === !1) && g <= c.h && e <= c.w && (h = {
                position: "fixed",
                top: d[0],
                left: d[3]
            }), h.top = Math.ceil(Math.max(h.top, h.top + (c.h - g) * b.topRatio)) + "px", h.left = Math.ceil(Math.max(h.left, h.left + .5 * (c.w - e))) + "px", 
            h;
        },
        _afterZoomIn: function() {
            var a = f.current;
            f.isOpen = f.isOpened = !0, f.wrap.addClass("fancybox-opened").css("overflow", "visible"), 
            f.update(), f.inner.css("overflow", "auto" === a.scrolling ? "auto" : "yes" === a.scrolling ? "scroll" : "hidden"), 
            (a.closeClick || a.nextClick) && f.inner.css("cursor", "pointer").bind("click.fb", a.nextClick ? f.next : f.close), 
            a.closeBtn && c(a.tpl.closeBtn).appendTo(f.wrap).bind("click.fb", f.close), a.arrows && f.group.length > 1 && ((a.loop || a.index > 0) && c(a.tpl.prev).appendTo(f.wrap).bind("click.fb", f.prev), 
            (a.loop || a.index < f.group.length - 1) && c(a.tpl.next).appendTo(f.wrap).bind("click.fb", f.next)), 
            f.trigger("afterShow"), f.opts.autoPlay && !f.player.isActive && (f.opts.autoPlay = !1, 
            f.play());
        },
        _afterZoomOut: function() {
            f.trigger("afterClose"), f.wrap.trigger("onReset").remove(), c.extend(f, {
                group: {},
                opts: {},
                current: null,
                isOpened: !1,
                isOpen: !1,
                wrap: null,
                outer: null,
                inner: null
            });
        }
    }), f.transitions = {
        getOrigPosition: function() {
            var a, b, d = f.current.element, e = {}, g = 50, h = 50;
            return d && d.nodeName && c(d).is(":visible") ? (a = c(d).find("img:first"), a.length ? (e = a.offset(), 
            g = a.outerWidth(), h = a.outerHeight()) : e = c(d).offset()) : (b = f.getViewport(), 
            e.top = b.y + .5 * (b.h - h), e.left = b.x + .5 * (b.w - g)), e = {
                top: Math.ceil(e.top) + "px",
                left: Math.ceil(e.left) + "px",
                width: Math.ceil(g) + "px",
                height: Math.ceil(h) + "px"
            };
        },
        step: function(a, b) {
            var c, d, e;
            ("width" === b.prop || "height" === b.prop) && (d = e = Math.ceil(a - 2 * f.current.padding), 
            "height" === b.prop && (c = (a - b.start) / (b.end - b.start), b.start > b.end && (c = 1 - c), 
            d -= f.innerSpace * c, e -= f.outerSpace * c), f.inner[b.prop](d), f.outer[b.prop](e));
        },
        zoomIn: function() {
            var a, b, d = f.wrap, e = f.current, g = e.dim;
            "elastic" === e.openEffect ? (b = c.extend({}, g, f._getPosition(!0)), delete b.position, 
            a = this.getOrigPosition(), e.openOpacity && (a.opacity = 0, b.opacity = 1), d.css(a).show().animate(b, {
                duration: e.openSpeed,
                easing: e.openEasing,
                step: this.step,
                complete: f._afterZoomIn
            })) : (d.css(c.extend({}, g, f._getPosition())), "fade" === e.openEffect ? d.fadeIn(e.openSpeed, f._afterZoomIn) : (d.show(), 
            f._afterZoomIn()));
        },
        zoomOut: function() {
            var a, b = f.wrap, c = f.current;
            "elastic" === c.closeEffect ? ("fixed" === b.css("position") && b.css(f._getPosition(!0)), 
            a = this.getOrigPosition(), c.closeOpacity && (a.opacity = 0), b.animate(a, {
                duration: c.closeSpeed,
                easing: c.closeEasing,
                step: this.step,
                complete: f._afterZoomOut
            })) : b.fadeOut("fade" === c.closeEffect ? c.closeSpeed : 0, f._afterZoomOut);
        },
        changeIn: function() {
            var a, b = f.wrap, c = f.current;
            "elastic" === c.nextEffect ? (a = f._getPosition(!0), a.opacity = 0, a.top = parseInt(a.top, 10) - 200 + "px", 
            b.css(a).show().animate({
                opacity: 1,
                top: "+=200px"
            }, {
                duration: c.nextSpeed,
                complete: f._afterZoomIn
            })) : (b.css(f._getPosition()), "fade" === c.nextEffect ? b.hide().fadeIn(c.nextSpeed, f._afterZoomIn) : (b.show(), 
            f._afterZoomIn()));
        },
        changeOut: function() {
            var a = f.wrap, b = f.current, d = function() {
                c(this).trigger("onReset").remove();
            };
            a.removeClass("fancybox-opened"), "elastic" === b.prevEffect ? a.animate({
                opacity: 0,
                top: "+=200px"
            }, {
                duration: b.prevSpeed,
                complete: d
            }) : a.fadeOut("fade" === b.prevEffect ? b.prevSpeed : 0, d);
        }
    }, f.helpers.overlay = {
        overlay: null,
        update: function() {
            var a, c, f;
            this.overlay.width(0).height(0), h ? (c = Math.max(b.documentElement.scrollWidth, b.body.scrollWidth), 
            f = Math.max(b.documentElement.offsetWidth, b.body.offsetWidth), a = f > c ? d.width() : c) : a = e.width(), 
            this.overlay.width(a).height(e.height());
        },
        beforeShow: function(a) {
            this.overlay || (this.overlay = c('<div id="fancybox-overlay"></div>').css(a.css || {
                background: "black"
            }).appendTo("body"), this.update(), a.closeClick && this.overlay.bind("click.fb", f.close), 
            d.bind("resize.fb", c.proxy(this.update, this)), this.overlay.fadeTo(a.speedIn || "fast", a.opacity || 1));
        },
        onUpdate: function() {
            this.update();
        },
        afterClose: function(a) {
            this.overlay && this.overlay.fadeOut(a.speedOut || "fast", function() {
                c(this).remove();
            }), this.overlay = null;
        }
    }, f.helpers.title = {
        beforeShow: function(a) {
            var b, d = f.current.title;
            d && (b = c('<div class="fancybox-title fancybox-title-' + a.type + '-wrap">' + d + "</div>").appendTo("body"), 
            "float" === a.type && (b.width(b.width()), b.wrapInner('<span class="child"></span>'), 
            f.current.margin[2] += Math.abs(parseInt(b.css("margin-bottom"), 10))), b.appendTo("over" === a.type ? f.inner : "outside" === a.type ? f.wrap : f.outer));
        }
    }, c.fn.fancybox = function(a) {
        function b(a) {
            var b, e, h = [], i = this.rel;
            a.ctrlKey || a.altKey || a.shiftKey || a.metaKey || (a.preventDefault(), e = c(this).data("fancybox-group"), 
            "undefined" != typeof e ? b = e ? "data-fancybox-group" : !1 : i && "" !== i && "nofollow" !== i && (e = i, 
            b = "rel"), b && (h = g.length ? c(g).filter("[" + b + '="' + e + '"]') : c("[" + b + '="' + e + '"]')), 
            h.length ? (d.index = h.index(this), f.open(h.get(), d)) : f.open(this, d));
        }
        var d = a || {}, g = this.selector || "";
        return g ? e.undelegate(g, "click.fb-start").delegate(g, "click.fb-start", b) : c(this).unbind("click.fb-start").bind("click.fb-start", b), 
        this;
    };
}(window, document, jQuery);
define("jquery/plugins/jquery.fancybox", function(){});

define('be/trait/popupSession',[ "jquery", "has", "log", "nbd/trait/pubsub", "nbd/util/media", "be/onhistory", "vendor/misc/history", "jquery/plugins/jquery.fancybox" ], function(a, b, c, d, e, f, g) {
    "use strict";
    c = c.get("popupSession");
    var h = function(a) {
        if (!this.singleton || !this.singleton._view) return void (this.entrance = g.getStateId());
        var b = g.getState(), c = b.data;
        c && c[a] ? e.is("desktop") ? this.show(b) : location.replace(b.url) : (this.singleton.reset(), 
        this.entrance = g.getCurrentIndex());
    }, i = function(a) {
        var b = {};
        return b[a] = {
            current_title: document.title,
            current_url: window.location.href
        }, b;
    }, j = a('<div class="blocking-div">'), k = {
        init: function(c) {
            if (this.singleton) return this.onhist;
            var d = f(i.bind(this, this.entity));
            return this.onhist = function() {
                e.is("desktop") && !b("touch") && d.apply(this, arguments);
            }, this.singleton = new this.Dialog("object" == typeof c ? c : void 0), this.singleton.on("preload", function() {
                j.appendTo(document.body), a.fancybox.showLoading();
            }).on("postload", function() {
                j.remove();
            }).on("exit", function() {
                var a = g.getStateByIndex(this.entrance);
                g.pushState(a.data, a.title, a.url);
            }, this), this.relay(this.singleton, "dataReceived"), this.entrance = g.getCurrentIndex(), 
            this.stateChange = h.bind(this, this.entity), a(window).on("statechange", this.stateChange), 
            a(document.body).on("click", this.selector, this.onhist), this.onhist;
        },
        show: function(a) {
            var b = this;
            this.trigger("prerender"), this.singleton.close(), this.singleton.open(a.url).then(function(a) {
                b.trigger("postrender", a);
            }, function(a) {
                "readyState" in a && 0 === a.readyState || c.error(a);
            });
        },
        destroy: function() {
            this.singleton && this.singleton.destroy(), this.off(), a(window).off("statechange", this.stateChange), 
            a(document.body).off("click", this.onhist);
        }
    };
    return a.extend(k, d);
});
define('be/Controller/Dialog/EntityPopup',[ "nbd/trait/promise", "nbd/trait/pubsub", "lib/xhr", "be/Controller/Dialog" ], function(a, b, c, d) {
    "use strict";
    function e(b) {
        if (!b.styles) return b;
        var c = b.styles.local || [], d = new a();
        return c = c.filter(function(a) {
            return a;
        }), require(c.map(function(a) {
            return "css!styles/" + a;
        }), d.resolve.bind(null, b), d.reject), d.thenable();
    }
    var f = d.extend({
        prefilter: function(a) {
            return a;
        },
        _initView: function() {
            this._super.apply(this, arguments), this._view && this.listenTo(this._view, "exit", function() {
                this.trigger("exit");
            });
        },
        open: function(a) {
            this.trigger("preload", a);
            var b = c(a).then(this.prefilter).then(e).then(function(a) {
                this._model._data = {}, this._model.set(a), this.trigger("dataReceived", a);
            }.bind(this)).then(this.render.bind(this)), d = this.trigger.bind(this, "postload");
            return b.then(d, d), b;
        },
        close: function() {
            return this.visible() && this._view.hide(!0), this;
        },
        render: function() {
            var a, b;
            return this._view.$view || (a = document.body), b = this._view.render(a), this._view.show(), 
            b;
        },
        reset: function() {
            this.visible() && (this._view.hide(!0), this._view.destroy());
        },
        visible: function() {
            return this._view.$view && this._view.$view.hasClass("shown");
        }
    }).mixin(b);
    return f;
});
define('be/style',[ "jquery" ], function(a) {
    "use strict";
    function b(b, c) {
        "undefined" != typeof b.styleSheet ? b.styleSheet.cssText = (b.styleSheet.cssText || "") + c : a(b).append(c);
    }
    function c(a, b) {
        "string" == typeof b && b.length && (a.styleSheet && "undefined" != typeof a.styleSheet.cssText ? a.styleSheet.cssText = b : a.innerHTML = b);
    }
    function d(a) {
        return a.styleSheet && "undefined" != typeof a.styleSheet.cssText ? a.styleSheet.cssText : a.innerHTML;
    }
    return {
        add: b,
        set: c,
        get: d
    };
});
define('lib/scrollpoint',[ "jquery" ], function(a) {
    "use strict";
    function b(a) {
        return j.test(a) || a > 0 && 1 > a;
    }
    function c(b) {
        if (a.isNumeric(b)) return parseFloat(b);
        var c = j.exec(b);
        return c ? c[1] / 100 : parseInt(b, 10);
    }
    function d(a) {
        return a.is(k) ? l.height() - (window.innerHeight || k.height()) : a.prop("scrollHeight");
    }
    function e(a, c, e) {
        return c > (b(a) ? a * d(e) : parseInt(a, 10));
    }
    function f(b) {
        var c = "window" === b ? k : a(b);
        return function() {
            var a, d, f, g = c.scrollTop();
            for (a in m[b]) d = m[b][a], f = e(a, g, c), d.cache = d.cache || !1, d.cache !== f && (d.fire(f), 
            d.cache = f);
        };
    }
    function g(b, d, e) {
        b = c(b);
        var f = m[e][b];
        f || (f = m[e][b] = new a.Callbacks()), f.add(d);
    }
    function h(a, b, c) {
        c = c || "window";
        var d;
        if (b) {
            if (a) return void m[c][a].remove(b);
            for (d in m[c]) m[c][d].remove(b);
        } else "string" == typeof a && (m[c][a].empty(), delete m[c][a]), c && delete m[c];
    }
    function i(b, c, d) {
        d = d || "window";
        var e, h = "window" === d ? k : a(d);
        m.hasOwnProperty(d) || (m[d] = {}, h.on("scroll", f(d)));
        {
            if ("object" != typeof b) return g(b, c, d);
            for (e in b) g(e, b[e], d);
        }
    }
    var j = /(\d+)%/, k = a(window), l = a(document), m = {};
    return i.on = i, i.off = h, i;
});
define('lib/adobeanalytics',[ "log" ], function(a) {
    "use strict";
    return a = a.get("adobeanalytics"), {
        page: function() {
            if ("undefined" != typeof s_adobe) try {
                s_adobe.pageName = (window.location.hostname + window.location.pathname).replace(/\//g, ":").replace(/^www\./, ""), 
                s_adobe.t();
            } catch (b) {
                a.error(b);
            }
        }
    };
});
if ("function" != typeof define) var define = require("amdefine")(module);

define('nbd/event',[ "./util/extend", "./trait/pubsub" ], function(a, b) {
    "use strict";
    var c = a({}, b);
    return c.bind = c.on, c.unbind = c.off, c.fire = c.trigger, c;
});
define('be/moreToggle',[ "jquery" ], function(a) {
    "use strict";
    function b(b, c) {
        c = c || {}, b.each(function() {
            function b() {
                return e.css("height", "auto").removeClass("hide"), {
                    extended: e.height(),
                    "short": d.height()
                };
            }
            var d = a(this), e = d.next(), f = c.$more || d.find(".variable-text-link"), g = c.$less || e.find(".variable-text-link"), h = "speed" in c ? c.speed : 250;
            e.css({
                overflow: "hidden"
            }), f.on("click", function() {
                var a = b();
                d.addClass("hide"), e.css("height", a["short"] + "px").animate({
                    height: a.extended + "px"
                }, h);
            }), g.on("click", function() {
                e.animate({
                    height: b()["short"] + "px"
                }, h, function() {
                    d.removeClass("hide"), e.addClass("hide");
                });
            });
        });
    }
    return b.off = function(b, c) {
        c = c || {}, b.each(function() {
            var b = a(this), d = b.next(), e = c.$more || b.find(".variable-text-link"), f = c.$less || d.find(".variable-text-link");
            e.off("click"), f.off("click");
        });
    }, b;
});
define('be/spam',[ "be/xhr", "be/modal/simple" ], function(a, b) {
    "use strict";
    function c(c, f, g) {
        b({
            title: "Mark as Spam",
            html: "Are you sure you want to mark this " + e[c] + " as spam?"
        }).then(function() {
            a({
                type: "POST",
                url: d + c + "/" + f
            }).then(function() {
                g && g.text("Marked as Spam");
            });
        });
    }
    var d = "/v2/report/spam/", e = {
        user: "person",
        project: "project",
        wip: "work in progress",
        projectcomment: "comment",
        wip_revisioncomment: "comment",
        message: "message",
        team: "team"
    };
    return {
        report: c
    };
});
define('beff/util/error',[ "nbd/Promise" ], function(a) {
    "use strict";
    var b = [], c = function(c) {
        var d = new a();
        return d.reject(c), (this || b).reduce(function(a, b) {
            return a["catch"](b);
        }, d);
    };
    return Object.defineProperty(c, "handlers", {
        value: b
    }), c;
});
define('beff/Component/Form',[ "nbd/Promise", "nbd/util/extend", "nbd/util/pipe", "../Component", "../util/xhr", "../util/error" ], function(a, b, c, d, e, f) {
    "use strict";
    function g(a) {
        return a.reduce(function(a, b) {
            var c = a[b.name];
            return a[b.name] = c ? [].concat(c, b.value) : b.value, a;
        }, {});
    }
    var h = function(a) {
        switch (a.which) {
          case 1:
          case 13:
          case 32:
            this.$form.submit();
        }
    }, i = function(b) {
        var c = new a(), d = c.thenable(), e = "function" == typeof this.commit ? this.commit.call(d, b) : this.commit;
        return c.resolve(e === d ? this.xhr(b) : e), this.trigger("commit"), c;
    }, j = d.extend({
        xhr: e,
        init: function(a) {
            if (!a) throw new Error("The context of the form cannot be empty");
            if (this.$form = a.is("form") ? a : a.find("form"), !this.$form.length) throw new Error("Unable to find form within context");
            this._normalizeSubmitter = h.bind(this), this.submit = this.submit.bind(this), Object.defineProperty(this, "handlers", {
                value: [ this._handleFormError.bind(this) ]
            });
        },
        destroy: function() {
            if (!this.$form) throw new Error("Cannot destroy null form");
            this._super(), this.$form = null;
        },
        reset: function() {
            return this.$form[0].reset(), this;
        },
        validator: function() {
            return !0;
        },
        commit: function() {
            return this;
        },
        _handleFormError: function(a) {
            if (!(a instanceof j.Error)) throw a;
            Object.keys(a).forEach(function(b) {
                var c = this.$form.find("[name=" + b + "], #" + b).first(), d = this;
                c.length && (c.one("input change", function e() {
                    c.off("input change", e), d.trigger("error:hide", c);
                }), this.trigger("error:show", c, a[b]));
            }, this);
        },
        _handleError: function(a) {
            return this.trigger("error", a), f.call(this.handlers, a)["catch"](f)["finally"](function() {
                delete this._cacheMeta;
            }.bind(this));
        },
        _findFormError: function(a) {
            if (!(a instanceof Object)) throw a;
            var b, c = this._cacheMeta || this.toJSON(), d = {};
            for (b in c.data) a.hasOwnProperty(b) && (d[b] = a[b]);
            if (Object.keys(d).length) throw new this.constructor.Error(d);
            throw a;
        },
        submit: function(a) {
            if (!this.$form) throw new Error("The form cannot be null");
            this.trigger("before", a);
            var b = this._submit(a);
            return b["catch"](this._findFormError.bind(this)).then(this.trigger.bind(this, "success"), this._handleError.bind(this))["finally"](this.trigger.bind(this, "after")), 
            b;
        },
        _submit: function(b) {
            var d, e, f, g = Array.isArray(this.validator) ? c.apply(null, this.validator.map(function(a) {
                return a.bind(this);
            }, this)) : this.validator.bind(this), h = new a();
            this._cacheMeta = d = this.toJSON();
            try {
                e = g(d.data);
            } catch (j) {
                e = !1, f = j;
            }
            return e = e !== !1, !b || e && "function" != typeof this.commit || b.preventDefault(), 
            e ? h.resolve(d) : h.reject(f), h.then(i.bind(this));
        },
        toJSON: function() {
            return {
                url: this.$form.attr("action"),
                type: this.$form.attr("method") || "POST",
                data: this.constructor.decompose(this.$form.serializeArray())
            };
        },
        _submitSelector: ".js-submit:not([type=submit])",
        bind: function() {
            return this.$form.on("click keydown", this._submitSelector, this._normalizeSubmitter).on("submit", this.submit), 
            this;
        },
        unbind: function() {
            return this.$form.off("click keydown", this._submitSelector, this._normalizeSubmitter).off("submit", this.submit), 
            this;
        }
    }, {
        decompose: g,
        Error: function(a) {
            b(this, a);
        }
    });
    return j;
});
define('beff/util/validate',[],function() {
    "use strict";
    function a(a) {
        var b, c, d = !1, e = 0, f = [];
        for (b = 0; b < a.length; ++b) "[" !== a[b] ? "]" !== a[b] ? "," !== a[b] || d || (c = a.substring(e, b), 
        c && f.push(c), e = b + 1) : d = !1 : d = !0;
        return c = a.substring(e), c && f.push(c), f;
    }
    function b(d, e) {
        return delete b.message, e = e ? a(e) : [], null == d && (d = ""), -1 === e.indexOf("required") && "" === d ? !0 : e.every(c, d);
    }
    var c, d = RegExp.prototype.test, e = {
        Generic: {
            test: d.bind(/^[^<>]+$/),
            message: "This field may not contain less than signs (&lt) or greater than signs (&gt;)"
        },
        AlphaNumeric: {
            test: d.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F]+$/),
            message: "This field must contain only alphanumeric characters"
        },
        Alpha: {
            test: d.bind(/^[A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F]+$/),
            message: "This field must contain only alpha characters"
        },
        AlphaDash: {
            test: d.bind(/^[A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\-]+$/),
            message: "This field must contain only alpha characters or dashes"
        },
        ANDash: {
            test: d.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\-]+$/),
            message: "This field must contain only alphanumeric characters or dashes"
        },
        ANUnder: {
            test: d.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F_]+$/),
            message: "This field must contain only alphanumeric characters with or without underscores"
        },
        ANUSpace: {
            test: d.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F_ ]+$/),
            message: "This field must contain only alphanumeric characters with or without underscores and spaces"
        },
        ANEmail: {
            test: d.bind(/^([_\dA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\-]+|[\w\.\+\-]+@(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9]))$/),
            message: "This field must contain a valid username or email"
        },
        Integer: {
            test: d.bind(/^\-?\d+$/),
            message: "This field must only contain numbers, without any spaces"
        },
        CreditCardNumber: {
            test: d.bind(/^\d{13,16}$/),
            message: "This field must only contain numbers, without any spaces or dashes"
        },
        Decimal: {
            test: d.bind(/^\-?\d+(\.\d+)?$/),
            message: "This field must be a valid decimal number"
        },
        Date: {
            test: d.bind(/^\d{1,2}\-\d{1,2}-\d{4}( \d{2}:\d{2}:\d{2})?$/),
            message: "This field must be a valid date"
        },
        SqlDate: {
            test: d.bind(/^\d{4}\-\d{2}\-\d{2}$/),
            message: "This field must be a valid date"
        },
        SqlDateTime: {
            test: d.bind(/^\d{4}\-\d{2}\-\d{2}\s\d{2}\:\d{2}\:\d{2}$/),
            message: "This field must be a valid datetime"
        },
        SlashDate: {
            test: d.bind(/^\d{1,2}\/\d{1,2}\/\d{4}$/),
            message: "This field must be a valid date"
        },
        Email: {
            test: d.bind(/^[\w\.\+\-]+@(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/),
            message: "This field must be a valid email address"
        },
        Name: {
            test: d.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\'. \-]{2,50}$/),
            message: "This field must be a valid name"
        },
        Username: {
            test: d.bind(/^[A-Za-z0-9_\-]+$/),
            message: "This field contains invalid characters. Please use only letters, numbers, dash or underscore characters."
        },
        Password: {
            test: d.bind(/^\S{6,32}$/),
            message: "This field must be between 6 and 32 characters"
        },
        Address: {
            test: d.bind(/^[\w0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F# \' \.\,\&\-]+$/),
            message: "This field must be a valid address"
        },
        City: {
            test: d.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F \' \. \/ \-]+$/),
            message: "This field must be a valid city"
        },
        Province: {
            test: d.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F ]+$/),
            message: "This field must be a valid province"
        },
        IntZip: {
            test: d.bind(/^[A-Za-z0-9#\. \-]+$/),
            message: "This field must be a valid zipcode"
        },
        UsZip: {
            test: d.bind(/^\d{5}(\-\d{4})?$/),
            message: "This field must be a valid US zipcode"
        },
        Country: {
            test: d.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\'. \-]{2,50}$/),
            message: "This field must be a valid country"
        },
        IntPhone: {
            test: d.bind(/^[0-9\+ \(\)\#\-]+$/),
            message: "This field must be a valid phone"
        },
        UsPhone: {
            test: d.bind(/^\d{3}\-\d{3}\-\d{4}$/),
            message: "This field must be a valid US phone"
        },
        PicExt: {
            test: d.bind(/^((jpg)|(jpeg)|(png)|(gif)){1}$/),
            message: "This field must be a valid image extension"
        },
        VideoExt: {
            test: d.bind(/^((mpg)|(mpeg)|(mov)|(avi)|(dv)|(qt)|(asf)|(flv)){1}$/),
            message: "This field must be a valid video extension"
        },
        Url: {
            test: d.bind(/^(http(?:s)?:\/\/|www.)[^<>]*$/),
            message: "This field must be a URL starting with http:// or www."
        },
        UrlExt: {
            test: d.bind(/^((?:https?):\/\/)?(?:(?:(?:[\w\.\-\+!$&\'\(\)*\+,;=_]|%[0-9a-f]{2})+:)*(?:[\w\.\-\+%!$&\'\(\)*\+,;=]|%[0-9a-f]{2})+@)?(?:[A-Za-z0-9_\-]+\.)(?:[A-Za-z0-9\-\._])+(?::\d+)?(?:[\/|\?](?:[\w#!:\.\?\+=&@$\'~*,;_\/\(\)\[\]\-]|%[0-9a-f]{2})*)?$/),
            message: "This field must be a valid URL"
        },
        Html: {
            test: function() {
                return !d.apply(/<((?!\/?span|\/?h1|\/?h2|\/?h3|\/?h4|\/?h5|\/?h6|\/?a|\/?b|\/?ol|\/?ul|\/?li|\/?i|\/?u|\/?strong|\/?em(?!bed)|\/?p|\/?div|\/?br|\/?unb|\/?uni|\/?\s|\/?\>)[^\>]*\>)/i, arguments);
            },
            message: "This field must be properly formed HTML"
        },
        Twitter: {
            test: d.bind(/^[A-Za-z0-9_\-]{1,15}$/),
            message: "This field must be a valid twitter username (without the @ character)"
        },
        required: {
            test: d.bind(/.+/),
            message: "This field is required"
        },
        length: {
            test: function(a, b) {
                var c = /\[(,?\d+(?:,\d+)?)\]/.exec(b);
                return a = String(a).replace(/[\s]+/g, " "), c ? new RegExp("^.{" + c[1] + "}$").test(a) : !1;
            },
            message: function(a, b) {
                var c;
                return (c = /\[(\d+),(\d+)\]/.exec(b)) ? "Must be between " + c[1] + " and " + c[2] + " characters." : (c = /\[,(\d+)\]/.exec(b)) ? "Must be at most " + c[1] + " characters." : (c = /\[(\d+),\]/.exec(b)) ? "Must be at least " + c[1] + " characters." : (c = /\[(\d+)\]/.exec(b), 
                c ? "Must be exactly " + c[1] + " characters." : void 0);
            }
        }
    }, f = /(\w+)(.*)/;
    return c = function(a) {
        var c, d = f.exec(a);
        return d && (a = d[1], c = d[2]), e[a] && e[a].test ? (d = e[a].test(this, c), d || (b.message = "function" == typeof e[a].message ? e[a].message(this, c) : e[a].message), 
        d) : !0;
    }, b;
});
define('be/form/validator',[ "jquery", "beff/util/validate" ], function(a, b) {
    "use strict";
    return function(c, d) {
        return c.reduce(function(c, e) {
            var f = a(e), g = f.data("validate"), h = f.attr("name") || f.attr("id");
            return b(d[h], g) || (c[h] = b.message), c;
        }, {});
    };
});
define('be/form',[ "jquery", "lib/showMessages", "beff/Component/Form", "be/form/errors", "be/form/validator", "be/handleResponse", "be/xhr", "be/buttons", "jquery/plugins/jquery.changeinput" ], function(a, b, c, d, e, f, g, h) {
    "use strict";
    function i(a) {
        return Object.keys(a).forEach(function(b) {
            var c, d = a[b];
            "string" == typeof d && (c = d.trim(), a[b] = 0 === c.length ? c : d);
        }), a;
    }
    var j = function(a) {
        var b = this.$form.find("[data-validate]:not(:disabled)").toArray(), c = e(b, a);
        if (Object.keys(c).length) throw c;
        return a;
    };
    return c.extend({
        xhr: g,
        hideButtonText: "Saving...",
        validator: [ i, j ],
        _submitSelector: ".form-submit:not([type=submit]):not([disabled]), .js-submit:not([type=submit]):not([disabled])",
        _displayError: function(a, b) {
            var c = {
                errors: {}
            };
            return c.errors[a.attr("name")] = b, d.displayAll(this.$form)(c);
        },
        init: function(a) {
            this._super(a), this.$context = a, this.on({
                "error:show": this._displayError.bind(this),
                "error:hide": d.removeErrors,
                error: function() {
                    this.showButtons();
                },
                before: function() {
                    this.hideButtons();
                }
            }), this.handlers.push(this.showMessages.bind(this)), this.bind();
        },
        reset: function() {
            return this._super(), this.$form.find("select").each(function() {
                var b = this.value;
                a(this).changeInput("value", "").changeInput("value", b);
            }), this;
        },
        _getMessageContainer: function() {
            return this.$form;
        },
        showMessages: function(a) {
            if (a = f.error(a), !a.messages) throw a;
            b(this._getMessageContainer(), a.messages);
        },
        submit: function(a) {
            return this.wasSubmittedFromButton = !!a, d.removeAll(this.$form), this._super.apply(this, arguments);
        },
        commit: function(a) {
            return g(a);
        },
        showButtons: function() {
            h.show(this._getButtonContainer());
        },
        hideButtons: function() {
            var a = this.hideButtonText;
            "function" == typeof a && (a = a()), h.hide(this._getButtonContainer(), a);
        },
        _getButtonContainer: function() {
            var a = this.$context.find(this._submitSelector).closest(".form-item").parent();
            if (!a.length && this.wasSubmittedFromButton) throw new Error("Unable to find button container:" + this.$context.html());
            return a;
        },
        _findFormError: function(a) {
            var b = f.error(a);
            if (!b.errors && "object" == typeof a.responseJSON) throw a;
            return this._super(b.errors || b);
        },
        bind: function() {
            return this.alreadyBound ? this : (this.alreadyBound = !0, this.$context.on("click keydown", this._submitSelector, this._normalizeSubmitter), 
            this.$form.on("submit", this.submit), this);
        },
        unbind: function() {
            return this.$context.off("click keydown", this._submitSelector, this._normalizeSubmitter), 
            this.$form.off("submit", this.submit), this;
        }
    });
});

define("require/hgn!templates/lib/_savingSpinner", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-spin label-spin\"></div><span class=\"js-spin-label-saving label-spin-status label-spin-status-saving hide\">Saving&hellip;</span><span class=\"js-spin-label-saved label-spin-status label-spin-status-saved beicons-pre beicons-pre-check-circle hide\">Saved</span><span class=\"js-spin-label-error label-spin-status label-spin-status-error beicons-pre beicons-pre-x-circle hide\">Error Saving</span>");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/form/textarea", ["hogan", "require/hgn!templates/lib/_savingSpinner"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"form-item form-item-textarea");if(t.s(t.f("containerClasses",c,p,1),c,p,0,61,67,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.v(t.d(".",c,p,0)));});c.pop();}t.b("\">");t.b("\n" + i);t.b("  ");if(t.s(t.f("label",c,p,1),c,p,0,103,204,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<label for=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b(t.t(t.f("label",c,p,0)));if(t.s(t.f("saving_spinner",c,p,1),c,p,0,153,177,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<lib/_savingSpinner0",c,p,""));});c.pop();}t.b("</label>");});c.pop();}t.b("\n" + i);t.b("  <textarea id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));if(!t.s(t.f("name",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("id",c,p,0)));};t.b("\" class=\"form-textarea");if(t.s(t.f("classes",c,p,1),c,p,0,311,317,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.v(t.d(".",c,p,0)));});c.pop();}t.b("\"");t.b("\n" + i);t.b("    ");if(t.s(t.f("maxlength",c,p,1),c,p,0,349,375,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" maxlength=\"");t.b(t.v(t.f("maxlength",c,p,0)));t.b("\"");});c.pop();}t.b("\n" + i);t.b("    ");if(t.s(t.f("placeholder",c,p,1),c,p,0,410,440,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" placeholder=\"");t.b(t.v(t.f("placeholder",c,p,0)));t.b("\"");});c.pop();}t.b("\n" + i);t.b("    ");if(t.s(t.f("autocomplete",c,p,1),c,p,0,478,510,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" autocomplete=\"");t.b(t.v(t.f("autocomplete",c,p,0)));t.b("\"");});c.pop();}t.b("\n" + i);t.b("    data-validate=\"");t.b(t.v(t.f("validate",c,p,0)));t.b("\">");t.b(t.v(t.f("value",c,p,0)));t.b("</textarea>");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<lib/_savingSpinner0":{name:"lib/_savingSpinner", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "lib/_savingSpinner": arguments[1].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/form/_checkbox", ["hogan", "require/hgn!templates/lib/_savingSpinner"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"form-item form-item-checkbox");if(t.s(t.f("containerClasses",c,p,1),c,p,0,61,67,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.v(t.d(".",c,p,0)));});c.pop();}t.b("\" id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("-container\">");t.b("\n" + i);t.b("  <label for=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" class=\"form-label checkbox\">");t.b("\n" + i);t.b("    <input type=\"checkbox\" id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" name=\"");t.b(t.v(t.f("name",c,p,0)));if(!t.s(t.f("name",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("id",c,p,0)));};t.b("\" class=\"form-checkbox");if(t.s(t.f("classes",c,p,1),c,p,0,275,281,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.v(t.d(".",c,p,0)));});c.pop();}if(t.s(t.f("validate",c,p,1),c,p,0,306,329,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" validate[");t.b(t.v(t.f("validate",c,p,0)));t.b("]");});c.pop();}t.b("\" value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\" ");if(t.s(t.f("checked",c,p,1),c,p,0,374,381,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}if(t.s(t.f("validate",c,p,1),c,p,0,406,435,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" data-validate=\"");t.b(t.v(t.f("validate",c,p,0)));t.b("\"");});c.pop();}t.b(">");t.b("\n" + i);t.b("    <div class=\"checkbox-checkmark\"></div>");t.b("\n" + i);t.b("    ");t.b(t.t(t.f("label",c,p,0)));if(t.s(t.f("saving_spinner",c,p,1),c,p,0,527,551,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<lib/_savingSpinner0",c,p,""));});c.pop();}t.b("\n" + i);t.b("  </label>");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<lib/_savingSpinner0":{name:"lib/_savingSpinner", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "lib/_savingSpinner": arguments[1].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/message", ["hogan", "require/hgn!templates/form/textarea", "require/hgn!templates/form/_checkbox"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form class=\"send-message js-send-message\">");t.b("\n" + i);if(t.s(t.f("recipient",c,p,1),c,p,0,60,413,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"message-label\">Recipient</div>");t.b("\n" + i);t.b("  <div class=\"recipient\">");t.b("\n" + i);t.b("    <img src=\"");t.b(t.v(t.f("image",c,p,0)));t.b("\" class=\"recipient-image\">");t.b("\n" + i);t.b("    <div class=\"recipient-info\">");t.b("\n" + i);t.b("      <div class=\"recipient-name\">");t.b(t.v(t.f("name",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("      <div class=\"recipient-meta beicons-pre beicons-pre-");t.b(t.v(t.f("icon",c,p,0)));t.b("\">");t.b(t.v(t.f("status",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("    </div>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);t.b("  <div class=\"message-label\">Message</div>");t.b("\n" + i);});c.pop();}if(t.s(t.f("body",c,p,1),c,p,0,439,458,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<form/textarea0",c,p,""));});c.pop();}if(t.s(t.f("has_talent_search",c,p,1),c,p,0,492,566,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("job_checkbox",c,p,1),c,p,0,514,546,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<form/_checkbox1",c,p,"      "));});c.pop();}});c.pop();}t.b("</form>");t.b("\n");return t.fl(); },partials: {"<form/textarea0":{name:"form/textarea", partials: {}, subs: {  }},"<form/_checkbox1":{name:"form/_checkbox", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "form/textarea": arguments[1].template,"form/_checkbox": arguments[2].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('be/trait/message',[ "page_config", "nbd/util/extend", "be/form", "lib/showMessages", "hgn!templates/message" ], function(a, b, c, d, e) {
    "use strict";
    return {
        mustache: e,
        templateData: function() {
            var c = this._super();
            return b({
                classes: [ "message" ],
                title: "Message",
                has_talent_search: a.has_talent_search,
                buttons: [ {
                    label: "Send Message",
                    classes: [ "form-button-default", "form-submit" ]
                } ],
                job_checkbox: {
                    label: 'Mark as "Job Opportunity" to recipient',
                    id: "is_job",
                    name: "is_job",
                    value: 1,
                    containerClasses: [ "cfix" ]
                },
                body: {
                    id: "message",
                    name: "message",
                    placeholder: "Your message to " + c.name,
                    containerClasses: [ "message-body" ],
                    validate: "required,Generic",
                    classes: [ "form-text-normal", "js-body" ]
                }
            }, c);
        },
        show: function() {
            this._super.apply(this, arguments), this._$body && this._$body.focus();
        },
        hide: function() {
            this._super.apply(this, arguments), this._$body && this._$body.val("");
        },
        rendered: function() {
            var a = this;
            this._form = new c(this.$view), this._$body = this.$view.find(".js-body"), this._form.commit = function(b) {
                return a._controller.create(b.data.message, b.data.is_job);
            }, this._form.on("success", function() {
                d(a.$view.find(".js-send-message"), [ {
                    message: "Message Sent",
                    type: "success"
                } ]), setTimeout(function() {
                    a.hide();
                }, 1500);
            }.bind(this)), this._super.apply(this, arguments);
        }
    };
});
define('be/Controller/Dialog/Message',[ "jquery", "be/xhr", "be/Controller/Dialog/Roulette", "be/View/Dialog/Layover", "be/View/Dialog/Menu", "be/View/Dialog/Popup", "be/trait/message" ], function(a, b, c, d, e, f, g) {
    "use strict";
    var h, i = "/v2/inbox/threads";
    return h = c.extend({
        create: function(a, c) {
            var d;
            return d = b({
                url: i,
                type: "POST",
                data: {
                    recipients: this._model.get("id"),
                    message: a,
                    is_job: c
                }
            }), d.then(function() {
                this.trigger("sent");
            }.bind(this)), d;
        },
        render: function(b) {
            a(document.body).hasClass("logged-in") && (this.$source = a(b), this._model.set({
                id: this.$source.data("contact_id"),
                name: this.$source.data("contact_name")
            }), this._super(b));
        }
    }, {
        init: function(a, b) {
            var c = new this(b);
            return c.setContext(a.find(".js-action-message-user")), c;
        },
        VIEW_CLASS: {
            phone: d.extend(g),
            tablet: e.extend(g),
            desktop: f.extend(g).extend({
                templateData: function() {
                    var a = this._super();
                    return a.title = "Send Message to " + a.name, a;
                }
            })
        }
    });
});
define('be/trait/form/list',[ "jquery" ], function(a) {
    "use strict";
    function b(b, c) {
        var d = a("<select>", {
            name: b[0].id,
            multiple: c || !1
        }).hide();
        return c || a("<option>", {
            selected: !0,
            disabled: !0
        }).appendTo(d), b.children("li").each(function() {
            a("<option>", {
                value: a(this).data("value")
            }).appendTo(d);
        }), d.insertAfter(b), d;
    }
    function c(c, d) {
        return c.each(function() {
            var e = b(a(this).on("click", ">li", function() {
                var b = a(this), f = b.data("value"), g = e.find('[value="' + f + '"]'), h = !g.prop("selected");
                g.prop("selected", h), h = g.prop("selected"), (d ? c.find('[data-value="' + f + '"]') : b.siblings().removeClass("active").end()).toggleClass("active", h);
            }), d);
        }), c;
    }
    return {
        selectList: function(a) {
            return c(a || this.$view.find("ul,ol"), !1);
        },
        multiList: function(a) {
            return c(a || this.$view.find("ul,ol"), !0);
        }
    };
});

define("require/hgn!templates/addToTalentSearch", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form action=\"");t.b(t.v(t.f("action",c,p,0)));t.b("\" method=\"");t.b(t.v(t.f("method",c,p,0)));t.b("\">");t.b("\n" + i);if(t.s(t.d("options.0",c,p,1),c,p,0,63,322,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <ul id=\"searches\" class=\"divided-list menu-section\">");t.b("\n" + i);if(t.s(t.f("options",c,p,1),c,p,0,139,212,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li class=\"divided-item\" data-value=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b(t.v(t.f("title",c,p,0)));t.b("</li>");t.b("\n" + i);});c.pop();}t.b("    </ul>");t.b("\n" + i);t.b("    <div>");t.b("\n" + i);t.b("      or <a href=\"/talent/create\">Start a New Talent Search</a>");t.b("\n" + i);t.b("    </div>");t.b("\n" + i);});c.pop();}if(!t.s(t.f("options",c,p,1),c,p,1,0,0,"")){t.b("    <div class=\"no-searches\">");t.b("\n" + i);t.b("      <p>You Don't Have Any Active Talent Searches</p>");t.b("\n" + i);t.b("      <p><a href=\"/talent/create\">Start a New Search &rarr;</a></p>");t.b("\n" + i);t.b("    </div>");t.b("\n" + i);};t.b("</form>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('be/View/Dialog/AddToTalentSearch',[ "nbd/util/extend", "be/View/Dialog/Layover", "be/View/Dialog/Menu", "be/View/Dialog/Popup", "be/trait/form/list", "be/form", "hgn!templates/addToTalentSearch", "jquery/plugins/jquery.changeinput" ], function(a, b, c, d, e, f, g) {
    "use strict";
    var h = {
        mustache: g,
        templateData: function() {
            var b = a({
                title: "Add to Talent Search",
                classes: [ "list-popup", "add-to-ts-popup" ],
                buttons: [ {
                    label: "Save",
                    classes: [ "form-button-default", "js-submit" ]
                } ]
            }, this._super());
            return b.options.length || (b.buttons = [ {
                label: "Okay",
                classes: [ "form-button-default", "js-close" ]
            } ]), b;
        },
        rendered: function() {
            var a = new f(this.$view), b = this.$view.find(".js-submit");
            this.form = a, a.on("success", function() {
                this.showButtons();
            }), a.commit = function(a) {
                var b, c, d = this._model.preselected(), e = Array.isArray(a.data.searches) ? a.data.searches : [ a.data.searches ];
                return e = e.filter(Boolean).map(Number), b = e.filter(function(a) {
                    return !~d.indexOf(+a);
                }), c = d.filter(function(a) {
                    return !~e.indexOf(a);
                }), this._controller.update({
                    add: b,
                    remove: c
                }).then(function(a) {
                    this._model.data().options.forEach(function(b) {
                        ~a.added.indexOf(b.id) ? b.is_discovered = !0 : ~a.removed.indexOf(b.id) && (b.is_discovered = b.is_shortlisted = b.is_recommended = !1);
                    });
                }.bind(this)).then(this.hide.bind(this)).then(function() {
                    var a = this._model.data(), b = a.options, c = [];
                    b.forEach(function(a) {
                        a.is_discovered && c.push(a.title);
                    }), this._controller.trigger("update", c);
                }.bind(this));
            }.bind(this), this._super(), this.multiList().on("click", function() {
                b.changeInput("enable");
            }), this._model.preselected().forEach(function(a) {
                this.$view.find("li[data-value=" + a + "]").click();
            }, this), b.changeInput("disable");
        }
    };
    return {
        desktop: d.extend(h).mixin(e),
        tablet: c.extend(h).mixin(e),
        phone: b.extend(h).mixin(e)
    };
});
define('be/Controller/Dialog/AddToTalentSearch',[ "be/xhr", "nbd/Model", "be/Controller/Dialog/Roulette", "be/View/Dialog/AddToTalentSearch" ], function(a, b, c, d) {
    "use strict";
    var e = c.extend({
        endpoint: function() {
            return "/v2/jobs/discovered/" + this._model.id();
        },
        read: function() {
            return a(this.endpoint()).then(function(a) {
                this._model.set("options", a.jobs.sort(function(a, b) {
                    return b.is_discovered + b.is_shortlisted + b.is_recommended - (a.is_discovered + a.is_shortlisted + a.is_recommended);
                }));
            }.bind(this));
        },
        update: function(b) {
            return a({
                url: this.endpoint(),
                type: "PATCH",
                data: b
            });
        },
        render: function(a) {
            var b = this._super.bind(this);
            return this.read().then(function() {
                return a;
            }).then(b);
        }
    }, {
        VIEW_CLASS: d,
        MODEL_CLASS: b.extend({
            preselected: function() {
                return this.get("options").map(function(a) {
                    return a.is_discovered || a.is_shortlisted || a.is_recommended ? a.id : void 0;
                }).filter(Boolean);
            }
        })
    });
    return e;
});
define('be/trait/form/toggle',[ "jquery" ], function(a) {
    "use strict";
    function b(b) {
        var c = a("<input>", {
            type: "checkbox",
            name: b[0].id,
            value: "1",
            checked: b.hasClass("active")
        }).hide();
        return c.insertAfter(b), c;
    }
    return {
        toggleElement: function(c) {
            c.each(function(c) {
                var d = b(c = a(this).on("click", function() {
                    var a = !d.prop("checked");
                    d.prop("checked", a).change(), c.toggleClass("active", a);
                }));
            });
        }
    };
});
define('be/trait/form/submit',[ "jquery", "nbd/trait/promise", "nbd/util/media", "beff/util/validate", "lib/tooltip", "lib/showMessages" ], function(a, b, c, d, e, f) {
    "use strict";
    function g(a, b) {
        var c = a[b.name];
        return a[b.name] = c ? [].concat(c, b.value) : b.value, a;
    }
    var h = function(a) {
        var b = {};
        if (Object.keys(a).forEach(function(c) {
            var e = this.find('[name="' + c + '"]').data("validate");
            d(a[c], e) || (b[c] = d.message);
        }, this), Object.keys(b).length) throw b;
        return a;
    };
    return {
        onSubmit: function(d, i, j) {
            i = i || this.$view;
            var k = i.is("form") ? i : i.find("form");
            i.on("click keydown", ".form-submit:not([type=submit])", function(a) {
                switch (a.which) {
                  case 1:
                  case 13:
                  case 32:
                    k.submit();
                }
            }), k.on("submit", function(i) {
                var l = new b(), m = k.serializeArray().reduce(g, {}), n = {
                    url: k.attr("action"),
                    type: k.attr("method") || "POST"
                };
                return i.originalEvent = i.originalEvent || {}, k.find(".form-error").remove(), 
                k.find(".form-item-error").removeClass("form-item-error"), i.originalEvent.promise = (i.isDefaultPrevented() && !k.attr("onsubmit") ? l : l.then(h.bind(k))).then(function(c) {
                    if (n.data = c, "function" != typeof d) return a.ajax(n);
                    var e = new b(), f = e.thenable(), g = d.call(f, c);
                    return e.resolve(g === f ? a.ajax(n) : g), e;
                }).then(function() {
                    j || k.find(":input").val("").removeAttr("checked selected");
                }, function(a) {
                    var b, d;
                    if (a instanceof Error) return void console.error(a);
                    throw a.responseJSON && (a = a.responseJSON), a.messages && f(k, a.messages), console.warn(a), 
                    b = a.errors || a, d = c.is("desktop") ? [ "form-error" ] : [ "form-error", "form-error-right" ], 
                    Object.keys(b).forEach(function(a) {
                        e(k.find("[name=" + a + "]"), b[a], d);
                    }), a;
                }), l.resolve(m), !1;
            });
        },
        onCancel: function(a) {
            this.$view.on("click", ".form-button-cancel", function() {
                this.$view.find(".form-text, .form-textarea").val(""), "function" == typeof a && a();
            }.bind(this));
        }
    };
});
define('be/trait/form',[ "nbd/util/extend", "be/trait/form/list", "be/trait/form/toggle", "be/trait/form/submit" ], function(a, b, c, d) {
    "use strict";
    return a({}, d, b, c);
});
define('lib/recaptcha',[ "nbd/trait/promise" ], function(a) {
    "use strict";
    return function(b, c, d, e) {
        var f = new a();
        return "object" != typeof d && (e = d, d = {}), e = e || "//www.google.com/recaptcha/api/js/recaptcha_ajax.js", 
        require([ e ], function() {
            Recaptcha.create(b, c, d), f.resolve(Recaptcha);
        }, f.reject), f.thenable();
    };
});

define("require/hgn!templates/form/text", ["hogan", "require/hgn!templates/lib/_savingSpinner"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"");if(!t.s(t.f("unstyled",c,p,1),c,p,1,0,0,"")){t.b("form-item form-item-text");};t.b(" be-placeholder");if(t.s(t.f("containerClasses",c,p,1),c,p,0,98,104,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.v(t.d(".",c,p,0)));});c.pop();}t.b("\" id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("-container\">");t.b("\n" + i);t.b("  ");if(t.s(t.f("label",c,p,1),c,p,0,162,263,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<label for=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b(t.t(t.f("label",c,p,0)));if(t.s(t.f("saving_spinner",c,p,1),c,p,0,212,236,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<lib/_savingSpinner0",c,p,""));});c.pop();}t.b("</label>");});c.pop();}t.b("\n" + i);t.b("  <input name=\"");t.b(t.v(t.f("name",c,p,0)));if(!t.s(t.f("name",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("id",c,p,0)));};t.b("\" type=\"");if(t.s(t.f("type",c,p,1),c,p,0,338,346,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("type",c,p,0)));});c.pop();}if(!t.s(t.f("type",c,p,1),c,p,1,0,0,"")){t.b("text");};t.b("\" class=\"");if(!t.s(t.f("unstyled",c,p,1),c,p,1,0,0,"")){t.b("form-text");};if(t.s(t.f("classes",c,p,1),c,p,0,433,439,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.v(t.d(".",c,p,0)));});c.pop();}t.b(" validate[");t.b(t.v(t.f("validate",c,p,0)));t.b("]\" id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");t.b("\n" + i);t.b("  ");if(t.s(t.f("disabled",c,p,1),c,p,0,503,523,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" disabled=\"disabled\"");});c.pop();}t.b("\n" + i);t.b("  ");if(t.s(t.f("placeholder",c,p,1),c,p,0,555,587,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" placeholder=\"");t.b(t.t(t.f("placeholder",c,p,0)));t.b("\"");});c.pop();}t.b("\n" + i);t.b("  ");if(t.s(t.f("autocomplete",c,p,1),c,p,0,623,655,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" autocomplete=\"");t.b(t.v(t.f("autocomplete",c,p,0)));t.b("\"");});c.pop();}t.b("\n" + i);t.b("  ");if(t.s(t.f("autocapitalize",c,p,1),c,p,0,694,730,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" autocapitalize=\"");t.b(t.v(t.f("autocapitalize",c,p,0)));t.b("\"");});c.pop();}t.b("\n" + i);t.b("  ");if(t.s(t.f("autocorrect",c,p,1),c,p,0,768,798,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" autocorrect=\"");t.b(t.v(t.f("autocorrect",c,p,0)));t.b("\"");});c.pop();}t.b("\n" + i);t.b("  ");if(t.s(t.f("value",c,p,1),c,p,0,827,845,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\"");});c.pop();}t.b("\n" + i);t.b("  ");if(t.s(t.f("maxlength",c,p,1),c,p,0,872,898,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" maxlength=\"");t.b(t.v(t.f("maxlength",c,p,0)));t.b("\"");});c.pop();}t.b("\n" + i);t.b("  data-validate=\"");t.b(t.v(t.f("validate",c,p,0)));t.b("\">");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<lib/_savingSpinner0":{name:"lib/_savingSpinner", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "lib/_savingSpinner": arguments[1].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/lib/_report", ["hogan", "require/hgn!templates/form/textarea", "require/hgn!templates/form/text"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"entity-report\">");t.b("\n" + i);t.b("  <div class=\"header-text\">Report</div>");t.b("\n" + i);t.b("  <form>");t.b("\n" + i);if(t.s(t.f("disclaimer",c,p,1),c,p,0,96,159,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <span class=\"disclaimer-wrap\">");t.b(t.t(t.f("disclaimer",c,p,0)));t.b("</span>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(t.s(t.d("options.0",c,p,1),c,p,0,194,376,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <ul id=\"reason\" class=\"divided-list menu-section\">");t.b("\n" + i);if(t.s(t.f("options",c,p,1),c,p,0,268,349,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li class=\"divided-item reason\" data-value=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b(t.v(t.f("reason",c,p,0)));t.b("</li>");t.b("\n" + i);});c.pop();}t.b("    </ul>");t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("    <div class=\"menu-section\">");t.b("\n" + i);if(t.s(t.f("comments",c,p,1),c,p,0,442,461,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<form/textarea0",c,p,""));});c.pop();}t.b("    </div>");t.b("\n");t.b("\n" + i);t.b("    <div class=\"menu-section\">");t.b("\n" + i);if(t.s(t.f("email",c,p,1),c,p,0,534,549,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<form/text1",c,p,""));});c.pop();}t.b("    </div>");t.b("\n");t.b("\n" + i);if(t.s(t.f("captcha",c,p,1),c,p,0,588,970,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div id=\"becaptcha\" class=\"menu-section\">");t.b("\n" + i);t.b("      <div id=\"recaptcha_image\"></div>");t.b("\n" + i);t.b("      <div class=\"form-item form-item-text\">");t.b("\n" + i);t.b("        <input id=\"recaptcha_response_field\" name=\"recaptcha_response_field\" class=\"form-text form-text-normal\" type=\"text\" placeholder=\"Enter the code shown above\">");t.b("\n" + i);t.b("      </div>");t.b("\n" + i);t.b("      <div class=\"recaptcha-generate\">Generate new</div>");t.b("\n" + i);t.b("    </div>");t.b("\n" + i);});c.pop();}t.b("  </form>");t.b("\n");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<form/textarea0":{name:"form/textarea", partials: {}, subs: {  }},"<form/text1":{name:"form/text", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "form/textarea": arguments[1].template,"form/text": arguments[2].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('be/trait/report',[ "jquery", "nbd/util/extend", "lib/recaptcha", "hgn!templates/lib/_report" ], function(a, b, c, d) {
    "use strict";
    return {
        mustache: d,
        templateData: function() {
            return b({
                title: "Report",
                classes: [ "report" ],
                buttons: [ {
                    label: "Send",
                    classes: [ "left", "form-button-default", "form-submit" ]
                }, {
                    label: "Cancel",
                    classes: [ "left", "form-button-cancel" ]
                } ],
                comments: {
                    id: "message",
                    placeholder: "Comments",
                    classes: [ "form-text-normal" ]
                }
            }, this._model.data(), a(document.body).hasClass("logged-out") ? {
                email: {
                    id: "email",
                    placeholder: "Email Address",
                    classes: [ "form-text-normal" ]
                }
            } : {});
        },
        captcha: function() {
            var a = this._model.get("captcha"), b = this.$view.find("#becaptcha");
            a && c(a.api_key, b[0], {
                theme: "custom",
                custom_theme_widget: "becaptcha"
            }, a.script_url).then(function(a) {
                b.on("click", ".recaptcha-generate", function() {
                    a.reload();
                });
            });
        },
        rendered: function() {
            this.selectList(), this.captcha(), this.onSubmit(function(a) {
                this._controller.create(a).then(this.hide.bind(this));
            }.bind(this)), this.onCancel(), this._super();
        },
        hide: function() {
            this._super.apply(this, arguments), this.$view = null;
        }
    };
});
define('be/Controller/Report',[ "lib/xhr", "be/Controller/Dialog/Roulette", "be/View/Dialog/Layover", "be/View/Dialog/Menu", "be/View/Dialog/Popup", "be/trait/form", "be/trait/report" ], function(a, b, c, d, e, f, g) {
    "use strict";
    var h = b.extend({
        init: function() {
            this._super.apply(this, arguments), this.path = this._model.get("CONSTANTS").REPORT_URL + this._model.id();
        },
        create: function(b) {
            return a({
                url: this.path,
                type: "POST",
                data: b
            });
        },
        read: function() {
            var b = a({
                url: this.path
            });
            return b.then(this._model.set.bind(this._model)), b;
        },
        render: function() {
            var a = this, b = this._super, c = arguments;
            this.read().then(function() {
                b.apply(a, c);
            }).then(this._view.show.bind(this._view));
        }
    }, {
        VIEW_CLASS: {
            phone: c.extend(g).mixin(f),
            tablet: d.extend(g).mixin(f),
            desktop: e.extend(g).mixin(f)
        }
    });
    return h;
});

define("require/hgn!templates/project/collection", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form>");t.b("\n" + i);t.b("  <div class=\"form-item form-item-text form-item-conjoined left\">");t.b("\n" + i);t.b("    <input type=\"text\" placeholder=\"Create a New Collection\"");t.b("\n" + i);t.b("    name=\"collection\" class=\"form-text\">");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);t.b("  <div class=\"form-item form-item-a form-item-conjoined left\">");t.b("\n" + i);t.b("    <a class=\"form-button form-submit form-button-light-and-grey\">Add</a>");t.b("\n" + i);t.b("  </div>");t.b("\n");t.b("\n" + i);t.b("  <ul id=\"collection_ids\" class=\"divided-list");if(!t.s(t.f("collections",c,p,1),c,p,1,0,0,"")){t.b(" empty");};t.b("\">");t.b("\n" + i);if(t.s(t.f("collections",c,p,1),c,p,0,437,515,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li class=\"divided-item collection\" data-key=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b(t.v(t.f("title",c,p,0)));t.b("</li>");t.b("\n" + i);});c.pop();}t.b("  </ul>");t.b("\n" + i);t.b("</form>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('project/trait/collection',[ "jquery", "hgn!templates/project/collection", "jquery/plugins/jquery.changeinput" ], function(a, b) {
    "use strict";
    return {
        mustache: b,
        title: "Collections",
        templateData: function() {
            return a.extend({
                classes: [ "list-popup" ],
                title: this.title,
                buttons: [ {
                    label: "Save",
                    classes: [ "form-button-default", "collections-save" ]
                } ]
            }, this._model.data());
        },
        rendered: function() {
            this._$saveButton = this.$view.find(".collections-save"), this._super(), this.bindSelections(), 
            this.newCollection(), this.saveCollections();
        },
        saveCollections: function() {
            this.$view.on("click", ".collections-save:not([disabled])", function() {
                this._controller.update(), this.hide(), this._$saveButton.changeInput("disable");
            }.bind(this));
        },
        newCollection: function() {
            var a = this.$view.find("form");
            a.on("submit", function() {
                var b = a.serializeArray(), c = b[0].value;
                return this._controller.create(c).then(function() {
                    this.render(), this.show(), this.position(), this._$saveButton.changeInput("enable");
                }.bind(this)), !1;
            }.bind(this)).on("click", ".form-submit", function() {
                a.submit();
            });
        },
        bindSelections: function() {
            var b = this;
            this._$saveButton.changeInput("disable"), this.select(this._model.get("project_collection_ids")), 
            this.listenTo(this._model, "project_collection_ids", this.select), this.$view.on("click", ".collection", function() {
                var c, d = a(this).data("key"), e = b._model.get("project_collection_ids");
                ~(c = e.indexOf(d)) ? e.splice(c, 1) : e.push(d), b._model.trigger("project_collection_ids", e), 
                b._$saveButton.changeInput("enable");
            });
        },
        select: function(a) {
            return this.$view.find(".collection").removeClass("active"), a && a.forEach(function(a) {
                this.$view.find(".collection[data-key=" + a + "]").addClass("active");
            }, this);
        }
    };
});
define('project/Controller/Collection',[ "moment", "be/xhr", "be/Controller/Dialog/Roulette", "be/View/Dialog/Layover", "be/View/Dialog/Menu", "be/View/Dialog/Popup", "project/trait/collection" ], function(a, b, c, d, e, f, g) {
    "use strict";
    return c.extend({
        create: function(c) {
            return b({
                url: "/collection/create",
                type: "POST",
                data: {
                    collection_name: c
                }
            }).then(function(b) {
                var d = b.id, e = +a().format("X");
                if (!d) throw b;
                return {
                    id: d,
                    title: c,
                    owners: [],
                    url: "/collection/" + encodeURIComponent(c) + "/" + d,
                    created_on: e,
                    modified_on: e
                };
            }).then(function(a) {
                return this._model.get("collections").unshift(a), this._model.get("project_collection_ids").unshift(a.id), 
                this.update(), a;
            }.bind(this));
        },
        read: function() {
            var a = b({
                url: "/gallery/collections/" + this._model.id()
            }).then(function(a) {
                if (!a.project_collection_ids) throw a;
                return a.collections.sort(function(b, c) {
                    return a.project_collection_ids.indexOf(+c.id) - a.project_collection_ids.indexOf(+b.id);
                }), a;
            });
            return a.then(this._model.set.bind(this._model)), a;
        },
        update: function() {
            return b({
                url: "/collection/project/" + this._model.id(),
                type: "POST",
                data: {
                    collection_ids: this._model.get("project_collection_ids").join("|")
                }
            });
        },
        render: function() {
            var a = this, b = this._super, c = arguments;
            this.read().then(function() {
                b.apply(a, c);
            }).then(this._view.show.bind(this._view));
        }
    }, {
        VIEW_CLASS: {
            phone: d.extend(g),
            tablet: e.extend(g),
            desktop: f.extend(g).mixin({
                title: "Add to Collections"
            })
        }
    });
});

define("require/hgn!templates/talent/_addedTalentSearchList", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.f("searches_added_to",c,p,1),c,p,0,22,116,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"ts-added\">");t.b("\n" + i);t.b("      <strong>ADDED TO:</strong> ");t.b(t.v(t.f("searches_added_to",c,p,0)));t.b("\n" + i);t.b("    </div>");t.b("\n" + i);});c.pop();}return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('project/lib/updateTalent',[ "jquery", "be/Controller/Dialog/AddToTalentSearch", "hgn!templates/talent/_addedTalentSearchList" ], function(a, b, c) {
    "use strict";
    return {
        updateTalent: function(a) {
            var d = a.find(".js-add-talent");
            d.length && (this.talent = new b(d.data("id")), this.talent.setContext(d), this.talent.on("update", function(b) {
                a.find(".js-added-talent-searches").html(c({
                    searches_added_to: b.join(", ")
                }));
            }.bind(this)));
        }
    };
});

define("require/hgn!templates/project/viralIcons", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<a href=\"https://twitter.com/share\" class=\"twitter-share-button viral-button-twitter\" data-url=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" data-text=\"");t.b(t.v(t.f("title",c,p,0)));t.b("\" data-via=\"Behance\" data-count=\"none\">Tweet</a>");t.b("\n" + i);t.b("<span class=\"viral-button-linkedin\"><script type=\"IN/Share\" data-url=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\"></script></span>");t.b("\n" + i);if(!t.s(t.f("no_pinterest",c,p,1),c,p,1,0,0,"")){t.b("<div class=\"viral-button-pinterest\"></div>");t.b("\n" + i);};t.b("<span class=\"viral-button-stumble\"><su:badge layout=\"4\" location=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\"></su:badge></span>");t.b("\n" + i);t.b("<div class=\"fb-like\" data-send=\"false\" data-layout=\"button_count\" data-width=\"90\" data-show-faces=\"false\"></div>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('project/lib/stickyBar',[ "jquery", "nbd/util/extend", "nbd/util/async", "lib/scrollpoint", "be/social", "be/follow", "be/Controller/Dialog/Message", "be/Controller/Dialog/AddToTalentSearch", "project/Controller/Collection", "project/lib/updateTalent", "hgn!templates/project/viralIcons", "jquery/plugins/jquery.sticky" ], function(a, b, c, d, e, f, g, h, i, j, k) {
    "use strict";
    return b({
        init: function(b, h, j) {
            var l = h.is(a(document.body)), m = l ? b.height() + b.offset().top : b.height(), n = l ? a(".js-nav-primary").outerHeight() : 0, o = a('<div id="sticky-sidebar"></div>)').append(a(".sidebar-owner", b).clone()).append(a(".sidebar-actions", b).clone()).append(a(".talent-search-block", b).clone());
            return f.init(o), this.message = g.init(o), this.collection = new i(j.id), this.collection.setContext(o.find(".add-to-collection")), 
            this.updateTalent(o.find(".talent-search-block")), o.find(".viral-icons").html(k({
                url: document.location.href,
                title: document.title,
                no_pinterest: "no-use" === j.copyright.license
            })), c(function() {
                d(m, function(c) {
                    c && b.find("#sticky-sidebar").length < 1 && (b.append(o), e.init(o), o.sticky({
                        topSpacing: n,
                        bottomSpacing: a("#site-footer").height() + parseInt(a("#content-container").css("margin-bottom"), 10)
                    }, l ? a(window) : h));
                }, l ? "window" : "#project-popup");
            }), o;
        },
        destroy: function(a) {
            d.off(null, null, a);
        }
    }, j);
});
define('project/lib/info',[ "jquery", "nbd/util/async", "nbd/util/media", "nbd/util/extend", "nbd/event", "be/follow", "be/moreToggle", "be/spam", "be/Controller/Dialog/Message", "be/Controller/Dialog/AddToTalentSearch", "be/Controller/Report", "project/Controller/Collection", "project/lib/updateTalent", "project/lib/stickyBar", "lib/picturefill" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
    "use strict";
    return d({
        init: function(c, d, j) {
            g(c.find(".variable-text-short"), {
                speed: 0
            }), this._initStickyBar(c, d), b(function() {
                c.find("#project-header-main").picturefill();
            }), f.init(c), this.message = i.init(c), this.collection = new l(d.id), this.collection.setContext(c.find(".add-to-collection")), 
            this.updateTalent(c);
            var m = function(a, b) {
                return function() {
                    o[a]("viewing-all"), n.height(b);
                };
            }, n = c.find("#object-tags"), o = c.find("#object-tags-see-all");
            n.length && (n.prop("scrollHeight") > n.height() ? (o.find(".viewing-less-copy").on("click", m("addClass", n[0].scrollHeight)), 
            o.find(".viewing-more-copy").on("click", m("removeClass", n.height())), o.show()) : n.height("auto")), 
            this.report = new k(d.id, {
                CONSTANTS: j
            }), this.report.setContext(c.find(".js-report")), e.on("report:open", this.report.toggle, this.report), 
            c.on("click", ".js-spam-project", function(b) {
                h.report("project", d.id, a(this)), b.preventDefault();
            });
        },
        _initStickyBar: function(b, d) {
            return b.is(a(document.body)) && !c.is("desktop") ? void c.on("desktop:enter", function() {
                n.init(b.find("#project-sidebar"), b, d);
            }) : void n.init(b.find("#project-sidebar"), b, d);
        },
        destroy: function() {
            n.destroy("#project-popup"), this.message && this.message.destroy(), this.collection && this.collection.destroy(), 
            this.talent && this.talent.destroy(), this.report && (this.report.destroy(), e.off(null, null, this.report));
        }
    }, m);
});
define('be/stats',[ "jquery", "beff/util/xhr" ], function(a, b) {
    "use strict";
    function c(c, d) {
        var e = a.isFunction(d.back) ? d.back : a.noop, f = d.a;
        if (delete d.a, delete d.back, "s" === f && !d.ids) throw new Error("be/stats called without ids");
        return b({
            url: c + "/" + f,
            data: d
        }).then(e);
    }
    function d(a) {
        var b, c = {};
        document.referrer && (a.referrer = document.referrer);
        for (b in a) a.hasOwnProperty(b) && i.hasOwnProperty(b) && (c[i[b]] = a[b]);
        return c;
    }
    var e, f, g, h = "/c", i = {
        action: "a",
        callback: "back",
        entity: "e",
        ids: "ids",
        id: "id",
        type: "t",
        time: "ti",
        contest: "c",
        source: "s",
        referrer: "r"
    };
    return e = function(a) {
        return c(h, d(a));
    }, f = function(a, b, c, d) {
        return e({
            action: a,
            entity: b,
            id: c,
            callback: d
        }), this;
    }, g = {
        get: e,
        view: f.bind(g, "v"),
        appreciate: f.bind(g, "a")
    };
});

define("require/hgn!templates/appreciate", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"appreciated-on-content\">");t.b("\n" + i);t.b("  <div class=\"app-content app-img-container beicons-pre beicons-pre-thumb\"></div>");t.b("\n" + i);t.b("  <div class=\"app-content app-date\">Appreciated on ");t.b(t.v(t.f("date",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('project/View/Appreciation',[ "jquery", "moment", "nbd/View", "be/stats", "hgn!templates/appreciate" ], function(a, b, c, d, e) {
    "use strict";
    var f = c.extend({
        id: 0,
        init: function(a) {
            this.id = a;
        },
        render: function(a) {
            a && (this.$view = a, this.$sticker = this.$view.find("#appreciation-sticker"), 
            this.$tooltip = this.$view.find(".tooltipi"), this.$view.find(".following").hide(), 
            d.view("project", this.id, function(a) {
                this.$view && (a.t > 0 ? this.hide(a.t) : this.show());
            }.bind(this)));
        },
        show: function() {
            var b = this.$view.offset();
            this.$view.find("#appreciate-it").show().on("click", function() {
                b && a("html").animate({
                    scrollTop: b.top - 200
                }, 600), this.$sticker.click();
            }.bind(this)), this.$sticker.addClass("icon-project-appreciate ccn-appreciation-sprite").one("click", this.appreciate.bind(this));
        },
        hide: function(a) {
            this.$sticker.after(e({
                date: b.unix(a).format("MMMM Do, YYYY")
            })), this.$tooltip.addClass("tooltipi-project-appreciate-show tooltipi-project-appreciated").show();
        },
        appreciate: function() {
            d.appreciate("project", this.id), this.$sticker.removeClass("icon-project-appreciate").addClass("icon-project-appreciate-thanks"), 
            this.$tooltip.addClass("tooltipi-project-appreciate-show"), (0 !== this.$view.find(".following").length || 0 === this.$view.find(".js-action-follow-user").length) && this.$tooltip.addClass("tooltipi-no-follow-button"), 
            this.$view.find("#appreciate-it").hide(), a("#appreNum").text(+a("#appreNum").text() + 1);
        }
    });
    return f;
});
define('project/lib/highdef',[ "jquery", "jquery/plugins/jquery.fancybox" ], function(a) {
    "use strict";
    var b = {
        padding: 0,
        loop: !0,
        nextEffect: "fade",
        prevEffect: "fade",
        title: "",
        helpers: {
            title: {
                type: "outside"
            }
        }
    }, c = function() {
        var b, c = a(this), d = c.data("hd-src"), e = c.attr("original") || c.attr("src");
        return d ? d : ~(b = e.lastIndexOf("/")) ? e.substring(0, b + 1) + "hd_" + e.substring(b + 1) : e;
    }, d = function() {
        a(this).attr("data-fancybox-group", "gallery").attr("href", c.call(this)).fancybox(b);
    };
    return function(a) {
        return a.each(d), [ "-moz-zoom-in", "-webkit-zoom-in", "zoom-in", 'url("/assets/img/site/-ie-zoom-in.cur"), pointer, hand' ].forEach(function(b) {
            a.css("cursor", b);
        }), this;
    };
});
define('project/trait/mature',[ "nbd/util/extend", "hgn!templates/html" ], function(a, b) {
    "use strict";
    var c = {
        "restricted-safe": [ {
            label: "Turn off Safe Browsing",
            classes: [ "form-button-default", "form-submit" ]
        }, {
            label: "Cancel",
            classes: [ "form-button-cancel" ]
        } ]
    };
    return {
        mustache: b,
        templateData: function() {
            var b = a({
                classes: [ "mature-blocker", "safe" ]
            }, this._model.data());
            return b.buttons = c[b.access], b;
        },
        rendered: function() {
            this.$view.on("click", ".form-submit", function() {
                this._controller.disableSafeBrowsing().then(this.hide.bind(this)).then(this.destroy.bind(this));
            }.bind(this)).filter(".blocking-div").on("click", function(a) {
                a.stopImmediatePropagation();
            }), this._super();
        }
    };
});
define('project/Controller/MatureContent',[ "be/xhr", "be/Controller/Dialog", "be/View/Dialog/Layover", "be/View/Dialog/Popup", "project/trait/mature" ], function(a, b, c, d, e) {
    "use strict";
    var f = d.extend(e), g = c.extend(e), h = b.extend({
        render: function() {
            this._view && (this._view.render(document.body), this._view.position());
        },
        disableSafeBrowsing: function() {
            return a({
                type: "PATCH",
                url: "/account/safe_browsing_setting",
                data: {
                    safe_browsing_setting: 0
                }
            }).then(function() {
                window.location.reload();
            }, console.error);
        }
    }, {
        VIEW_CLASS: {
            phone: g,
            tablet: f,
            desktop: f
        }
    });
    return h;
});

define("require/hgn!templates/project/matureLogin", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"mature-message\">");t.b("\n" + i);t.b("  You must log in or sign up for Behance<br class=\"hide-phone\">");t.b("\n" + i);t.b("  to view projects containing adult content.");t.b("\n" + i);if(t.s(t.f("login",c,p,1),c,p,0,150,162,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<button0",c,p,""));});c.pop();}t.b("</div>");t.b("\n");t.b("\n" + i);t.b("<div class=\"popup-buttons\">");t.b("\n" + i);t.b("  Don't Have an Account? <a class=\"signup\" href=\"/signup\">Sign up for Behance</a>");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<button0":{name:"button", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('project/Controller/MatureLogin',[ "be/Controller/Dialog", "be/View/Dialog/Layover", "be/View/Dialog/Popup", "vendor/misc/history", "hgn!templates/project/matureLogin" ], function(a, b, c, d, e) {
    "use strict";
    var f = {
        mustache: e,
        hide: function() {
            d.back();
        }
    }, g = c.extend(f), h = b.extend(f), i = a.extend({
        render: function() {
            this._view && (this._view.render(document.body), this._view.position());
        }
    }, {
        VIEW_CLASS: {
            phone: h,
            tablet: g,
            desktop: g
        }
    });
    return i;
});
define('project/lib/mature',[ "project/Controller/MatureContent", "project/Controller/MatureLogin" ], function(a, b) {
    "use strict";
    var c = {
        init: function(c, d, e) {
            if (d.mature_content) {
                var f, g;
                if ("logged-out" === d.mature_access) f = new b({
                    classes: [ "mature-blocker", "log-in" ],
                    title: "Log In",
                    login: {
                        classes: [ "form-button-default", "form-button-large", "js-adobeid-signin" ],
                        label: "Log In"
                    }
                }); else {
                    if (g = e.MATURE_ACCESS[d.mature_access], !g) return;
                    f = new a(c, {
                        title: "This project contains adult content",
                        html: g,
                        access: d.mature_access
                    });
                }
                f.render(), this.popup = f;
            }
        },
        destroy: function() {
            this.popup && this.popup.destroy();
        }
    };
    return c;
});
define('project/lib/embed',[ "jquery", "nbd/util/async" ], function(a, b) {
    "use strict";
    var c = function() {
        var c = a(this).removeAttr("allowscriptaccess"), d = c.closest(".module");
        "transparent" !== c.attr("wmode") && (d.height() && d.height(d.height()), c.attr("wmode", "transparent").hide(), 
        b(function() {
            c.show();
        }));
    }, d = function(a) {
        return a.each(c);
    };
    return d.init = function(b) {
        a("#primary-project-content .module embed", b).embedFix();
    }, d;
});
define('project/lib/content',[ "jquery", "nbd/util/async", "lib/scrollpoint", "project/View/Appreciation", "project/lib/highdef", "project/lib/mature", "project/lib/embed" ], function(a, b, c, d, e, f, g) {
    "use strict";
    return {
        init: function(a, c, h) {
            f.init(c.id, c, h), this.appreciate = new d(c.id), this.appreciate.render(a.find("#appreciation")), 
            b(function() {
                this.lazyload(a);
            }.bind(this)), g(a.find(".module embed")), a.is(".hd_images_enabled") && e(a.find(".hd_avail"));
        },
        lazyload: function(b) {
            var d = b.find(".module.image img:not(.lazy-load):last").offset() || b.find(".module.image img.lazy-load:first").offset(), e = b.closest(".popup");
            d && c(d.top - b.offset().top - window.innerHeight, function() {
                b.find(".module.image img.lazy-load").each(function() {
                    var b = a(this);
                    b.attr("src", b.attr("original")).css("opacity", 0).one("load", function() {
                        b.animate({
                            opacity: 1
                        }, 150), b.removeClass("lazy-load");
                    });
                });
            }, e.length ? "#project-popup" : "window");
        },
        destroy: function() {
            this.appreciate && this.appreciate.destroy(), f.destroy();
        }
    };
});

define("require/hgn!templates/comment", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"comment-container cfix ");if(t.s(t.d("user.owner",c,p,1),c,p,0,49,62,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("owner-comment");});c.pop();}if(!t.s(t.d("user.owner",c,p,1),c,p,1,0,0,"")){t.b("user-comment");};t.b("\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);t.b("  <a class=\"comment-user-image-link left\" href=\"");t.b(t.v(t.d("user.url",c,p,0)));t.b("\">");t.b("\n" + i);t.b("    <img class=\"comment-user-image js-mini-profile\" data-id=\"");t.b(t.v(t.d("user.id",c,p,0)));t.b("\" src=\"");t.b(t.v(t.d("user.image",c,p,0)));t.b("\">");t.b("\n" + i);t.b("  </a>");t.b("\n" + i);t.b("  <div class=\"comment-text-container left relative\">");t.b("\n" + i);t.b("    <div class=\"comment-user-date-wrap ui-corner cfix\">");t.b("\n" + i);t.b("      <a class=\"user-name-link bold js-mini-profile\" data-id=\"");t.b(t.v(t.d("user.id",c,p,0)));t.b("\" href=\"");t.b(t.v(t.d("user.url",c,p,0)));t.b("\">");t.b(t.v(t.d("user.name",c,p,0)));t.b("</a>");t.b("\n" + i);if(t.s(t.f("replied_to",c,p,1),c,p,0,548,639,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <span class=\"bold\">replied to <a href=\"");t.b(t.v(t.d("user.url",c,p,0)));t.b("\">");t.b(t.v(t.d("user.name",c,p,0)));t.b("</a></span>");t.b("\n" + i);});c.pop();}t.b("      <span class=\"comment-date hide-phone\">");t.b(t.v(t.f("posted_on",c,p,0)));t.b("</span>");t.b("\n" + i);t.b("    </div>");t.b("\n" + i);t.b("    <div class=\"comment-text-wrap\"><div class=\"comment-text\">");t.b(t.t(t.f("comment",c,p,0)));t.b("</div></div>");t.b("\n" + i);t.b("    <span class=\"comment-date show-phone\">");t.b(t.v(t.f("posted_on",c,p,0)));t.b("</span>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);t.b("  <div class=\"comment-actions\">");t.b("\n" + i);if(t.s(t.d("permissions.flag",c,p,1),c,p,0,947,1008,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a class=\"comment-action comment-spam js-spam\"></a>");t.b("\n" + i);});c.pop();}if(t.s(t.d("permissions.close",c,p,1),c,p,0,1056,1120,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a class=\"comment-action comment-close js-delete\"></a>");t.b("\n" + i);});c.pop();}t.b("  </div>");t.b("\n" + i);t.b("</li>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('be/View/Comment',[ "jquery", "nbd/View/Entity", "nbd/util/pipe", "be/modal/simple", "hgn!templates/comment" ], function(a, b, c, d, e) {
    "use strict";
    var f = {
        3e3: "close",
        5e3: "flag"
    }, g = b.extend({
        template: c(e, a),
        templateData: function() {
            var a = this._super();
            return a.permissions = a.permissions.reduce(function(a, b) {
                return a[f[b]] = !0, a;
            }, {}), a;
        },
        rendered: function() {
            this.$view.hide().fadeIn().on("click", ".js-delete", function() {
                this.$view.fadeOut(this.trigger.bind(this, "remove"));
            }.bind(this)).on("click", ".js-spam", function() {
                d({
                    title: "Mark as Spam",
                    html: "Are you sure you want to mark this comment as spam?"
                }).then(function() {
                    this.$view.find(".js-spam").remove(), this.trigger("spam");
                }.bind(this));
            }.bind(this));
        }
    });
    return g;
});
define('be/Controller/Comment',[ "nbd/Controller/Entity", "nbd/Model", "be/View/Comment", "nbd/trait/pubsub" ], function(a, b, c, d) {
    "use strict";
    var e = a.extend({
        id: function() {
            return this._model && this._model.id();
        },
        _initView: function() {
            this._super.apply(this, arguments), this.listenTo(this._view, "all", this.trigger);
        },
        destroy: function() {
            this.stopListening(), this._super();
        }
    }, {
        MODEL_CLASS: b,
        VIEW_CLASS: c
    }).mixin(d);
    return e;
});
define('be/comments',[ "jquery", "nbd/util/extend", "beff/Component", "be/xhr", "be/Controller/Comment" ], function(a, b, c, d, e) {
    "use strict";
    return c.extend({
        _posts: [],
        loading: !1,
        moreSelector: ".see-more-button-container",
        init: function(a, b, c) {
            var d = a.find(".js-comments-list");
            this.data = b || {}, this.callback = c, this.loading = !1, this.$content = d, this.$more = a.find(this.moreSelector), 
            this.get = this.more.bind(this, void 0), this.$more.on("click", this.get);
        },
        set: function(a) {
            return b(this.data, a), this;
        },
        more: function(a) {
            var b;
            return this.loading = !0, b = this.load(a), b.then(this.render.bind(this))["finally"](this.after.bind(this)), 
            b["finally"](this.callback), b;
        },
        destroy: function() {
            this.stopListening(), this.clear(), this.$more.off("click", this.get);
        },
        load: function(a) {
            return d({
                url: "/comments/" + this.data.type,
                data: b({
                    sort_order: "desc"
                }, this.data, a)
            });
        },
        render: function(a) {
            var b;
            return a && a.comments && (b = a.comments.map(this._makePost, this), this._posts = this._posts.concat(b)), 
            this._posts["asc" === this.data.order ? "reduceRight" : "reduce"](function(a, b) {
                return b.render(a.$content), a;
            }, this), a;
        },
        after: function() {
            this.data.offset = this._posts.length ? this._posts[this._posts.length - 1].id() : void 0;
        },
        _makePost: function(a) {
            var b = new e(a.id, a);
            return this.listenTo(b, "remove", this.remove.bind(this, b)).listenTo(b, "spam", this.spam.bind(this, b)), 
            b;
        },
        add: function(a) {
            var b = a instanceof e ? a : this._makePost(a);
            this._posts.unshift(b), this.render();
        },
        remove: function(a) {
            var b;
            ~(b = this._posts.indexOf(a)) && (d({
                type: "DELETE",
                url: "/comments/" + this.data.type + "?comment_id=" + a.id()
            }), this._posts.splice(b, 1), a.destroy());
        },
        spam: function(a) {
            d({
                type: "POST",
                url: "/v2/report/spam/" + this.data.type + "comment/" + a.id()
            });
        },
        clear: function() {
            return this._posts.forEach(function(a) {
                a.destroy();
            }), this._posts = [], this;
        }
    });
});

define("require/hgn!templates/error", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"error-bar\">");t.b(t.t(t.f("message",c,p,0)));t.b("</div>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('be/error',[ "jquery", "nbd/View/Element", "nbd/util/pipe", "hgn!templates/error" ], function(a, b, c, d) {
    "use strict";
    function e(a) {
        return ~a.indexOf("&lt;") ? g.html(a).text() : a;
    }
    var f, g = a("<div>"), h = b.extend({
        template: c(d, a),
        templateData: function() {
            return {
                message: "Oops, an error occurred. | <a class='js-reload'>Please Refesh.</a>"
            };
        },
        render: function(a) {
            return a = a ? {
                message: e(a)
            } : null, this._super(a);
        },
        rendered: function() {
            this.$view.on("click", ".js-reload", function() {
                window.location.reload();
            }).show();
        },
        hide: function() {
            return this.$view && this.$view.hide();
        }
    }), i = {
        init: function(a) {
            return f = new h(a);
        },
        show: function(a) {
            f && f.render(a);
        },
        hide: function() {
            f && f.hide();
        },
        Errorline: h
    };
    return i;
});
define('be/mentionSource',[ "log", "nbd/trait/promise", "lib/xhr" ], function(a, b, c) {
    "use strict";
    function d(a) {
        for (var b = {}, c = 0; c < a.length; ++c) b[a[c].id] = a[c];
        return b;
    }
    function e(a) {
        var b = {};
        return a.filter(function(a) {
            return a.id in b ? !1 : (b[a.id] = a, !0);
        });
    }
    function f(a) {
        return j = d(a);
    }
    function g() {
        var a;
        return j ? (a = new b(), a.resolve(j)) : a = c(k.local).then(f), a;
    }
    function h(a) {
        return g().then(r.bind(a));
    }
    function i(a, d) {
        i._cache = i._cache || {}, i._cache[a] = i._cache[a] || {};
        var e, f;
        return d.length < l && (f = []), i._cache[a][d] && (f = i._cache[a][d]), f ? (e = new b(), 
        e.resolve(f), e) : c({
            url: a,
            data: {
                q: d
            }
        }).then(function(b) {
            return f = p.call(b, d), i._cache[a][d] = f, f;
        });
    }
    var j, k = {
        global: "/mentions/search",
        following: "/mentions/search/following",
        local: ""
    }, l = 2, m = 5, n = function(a) {
        return this[a];
    }, o = function(a) {
        var b = this.toLocaleLowerCase();
        return 0 === a.first_name.toLocaleLowerCase().indexOf(b) || 0 === a.last_name.toLocaleLowerCase().indexOf(b) || 0 === a.username.toLocaleLowerCase().indexOf(b);
    }, p = function(a) {
        return this.filter(o, a);
    }, q = function(a) {
        return Object.keys(this).map(n, this).filter(o, a);
    }, r = function(a) {
        return q.call(a, this);
    };
    a = a.get("be/mentionSource");
    var s = i.bind(null, k.following), t = i.bind(null, k.global);
    return {
        init: function(a) {
            return a.maxResults && (m = a.maxResults), a.minLength && (l = a.minLength), a.local && (k.local = a.local), 
            j = null, this;
        },
        getLocal: g,
        source: function(b, c) {
            function d() {
                c(e(g).slice(0, m));
            }
            var f = [ h, s, t ].map(function(a) {
                return a(b.term);
            }), g = [];
            f.reduce(function(b, c) {
                return (b ? b.then(function() {
                    return c;
                }) : c).then(function(a) {
                    a.forEach(function(a) {
                        a.value = a.username;
                    }), g = g.concat(a), d();
                }, function(b) {
                    a.error(b);
                });
            }, null).then(null, d);
        }
    };
});

define("require/hgn!templates/lib/_menu/_user", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"ui-menu-item\">");t.b("\n" + i);t.b("  <a class=\"mention-user-wrap\">");t.b("\n" + i);t.b("    <img class=\"mention-user-image\" src=\"");t.b(t.v(t.d("images.50",c,p,0)));t.b("\" />");t.b("\n" + i);t.b("    <div class=\"mention-displayname\">");t.b(t.v(t.f("display_name",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("    <div class=\"mention-minor\">@");t.b(t.v(t.f("username",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("  </a>");t.b("\n" + i);t.b("</li>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
!function(a) {
    "use strict";
    return "function" == typeof define && define.amd ? void define('jquery/be/automention',[ "jquery", "jquery/be/autosuggest" ], function() {
        var b = a.apply(this, arguments);
        return b;
    }) : jQuery && a.call(this, jQuery);
}(function(a) {
    "use strict";
    var b = /(?:^|[^\w])@(\w+)/;
    return a.widget("be.automention", a.be.autosuggest, {
        _create: function() {
            this._super(), this._on(this.element, {
                mouseup: this.check,
                input: this.check,
                keyup: this.check,
                blur: this._clear
            }), this.menu.element.addClass("mention-menu");
        },
        _mention: {
            value: "",
            start: 0,
            end: 0
        },
        _last: null,
        _value: function(a) {
            if (!a) return this._mention.value;
            var b = this._super(), c = b.indexOf("@", this._mention.start) + 1;
            a = b.substring(0, c) + a, " " !== b.charAt(this._mention.end) && (a += " "), a += b.substring(this._mention.end), 
            this._super(a), this.element.trigger("input");
        },
        _clear: function() {
            this._last = null;
        },
        check: function(a) {
            if (this.element.is(document.activeElement)) {
                var c, d, e, f = document.activeElement.value, g = document.activeElement.selectionStart;
                g && f && (d = f.lastIndexOf(" ", g - 1), e = f.indexOf(" ", g), e = ~e ? e : 1/0, 
                c = f.substring(d, e), c = b.exec(c), c = c && c[1], this._last !== c && (this._mention.value = c || "", 
                this._mention.start = d, this._mention.end = e, this.search(null, a), this._trigger("value", a, c)), 
                this._last = c);
            }
        }
    }), a.extend(a.be.automention, {
        usernameMatch: b
    }), a.be.automention;
});
define('be/automention',[ "jquery", "be/error", "be/mentionSource", "hgn!templates/lib/_menu/_user", "jquery/be/automention" ], function(a, b, c, d, e) {
    "use strict";
    var f = new RegExp(e.usernameMatch.source, "g");
    return function(e, g) {
        g = a.extend({
            maxMentions: 5
        }, g), c.init(g), e.length && e.parent().addClass("ui-front").end().one("focus", c.getLocal).automention({
            delay: 50,
            itemTemplate: d,
            source: c.source,
            appendTo: g.appendTo
        }).on("automentionopen", function() {
            var c, d, e = this.value, h = {}, i = a(this);
            e.replace(f, function(a, b) {
                h[a] = b;
            }), Object.keys(h).length > g.maxMentions && (c = i.data("beAutomention"), d = i.data("errorbar") || new b.Errorline(c.menu.element), 
            d.render("<strong>You may only mention " + g.maxMentions + " users</strong>"), d.$view.prependTo(c.menu.element), 
            i.data("errorbar", d));
        });
    };
});
define('be/form/Reset',[ "be/form" ], function(a) {
    "use strict";
    var b = a.extend({
        _submit: function(a) {
            return this._super(a).then(function() {
                this.$form.find(":input").val("").removeAttr("checked selected");
            }.bind(this));
        }
    });
    return b;
});
define('be/charCounter',[ "jquery" ], function(a) {
    "use strict";
    function b(a) {
        var b = a.match(/length\[(\d+)(,(\d+))?\]/), c = {
            min: 0,
            max: 0
        };
        return b && b.length && (b[3] ? (c.min = b[1] ? parseInt(b[1], 10) : 0, c.max = b[3] ? parseInt(b[3], 10) : 0) : c.max = b[1] ? parseInt(b[1], 10) : 0), 
        c;
    }
    var c = {
        init: function(c, d) {
            var e = c.find(".js-characters-limited");
            e.each(function() {
                var e = a(this), f = a('<div class="js-char-limiter character-counter counter-normal">').insertAfter(e), g = e.data("validate") || "", h = c.find(".js-char-limiter"), i = b(g), j = .1 * (i.max + i.min), k = function() {
                    var b = i.max - a(this).val().length, c = i.min;
                    f.html('<span class="letters-remaining">Characters left:</span> ' + b), b > c && f.addClass("counter-normal"), 
                    c > b || 0 === b ? f.removeClass("counter-normal").addClass("counter-max") : f.removeClass("counter-max"), 
                    j > b && b > c ? f.addClass("counter-warn").removeClass("counter-normal") : f.removeClass("counter-warn");
                };
                h.append('<span class="letters-remaining">Characters left:</span> ' + i.max), e.attr("maxlength", i.max), 
                d && e.removeAttr("maxlength"), e.on("input", k), k.call(this);
            });
        }
    };
    return c;
});
define('project/lib/comments',[ "jquery", "be/comments", "be/automention", "be/form/Reset", "nbd/util/media", "nbd/util/async", "be/charCounter", "jquery/plugins/jquery.changeinput" ], function(a, b, c, d, e, f, g) {
    "use strict";
    return {
        init: function(a, b) {
            this.$view = a.find(".post-comment-block");
            var d, e = b.id, f = a.find(".comment_text");
            c(f, {
                local: "/mentions/project/" + e
            }), g.init(a), d = this.view(e, a), this.create(e, d);
        },
        destroy: function() {
            this.$view && this.$view.remove();
        },
        view: function(a, c) {
            var d = c.find(".comments-total"), e = c.find(".comments-pagination"), f = b.init(c, {
                type: "project",
                entity_id: a
            }, function(a) {
                e.toggleClass("hide", !a.more), +a.total && d.text(a.total).siblings().text(a.total > 1 ? "Comments" : "Comment").end().parent().toggle(!!a.total);
            });
            return f.get(), f;
        },
        create: function(a, b) {
            function c(a) {
                if (!a.id || !a.user) throw a;
                b.add({
                    id: a.id,
                    user: a.user,
                    comment: a.comment,
                    posted_on: "Just now",
                    permissions: [ 3e3 ]
                });
            }
            var e = this.$view.find(".form-submit");
            e.length && (this._form = new d(this.$view), this._form.commit = function(b) {
                return b.data.entity_id = a, this.then(c), this;
            }, this._form.on("success", this._form.showButtons.bind(this._form)));
        }
    };
});

define("require/hgn!templates/project/info", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"project-info\">");t.b("\n" + i);if(t.s(t.d("teams.0",c,p,1),c,p,0,41,135,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"menu-group\">");t.b("\n" + i);t.b("    <h2 class=\"menu-title\">");t.b("\n" + i);t.b("      Made for");t.b("\n" + i);t.b("    </h2>");t.b("\n" + i);t.b("    <ul>");t.b("\n" + i);});c.pop();}if(t.s(t.f("teams",c,p,1),c,p,0,164,415,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li class=\"sidebar-team cfix\">");t.b("\n" + i);t.b("        <a class=\"sidebar-team-link\" href=\"");t.b(t.v(t.d("urls.relative",c,p,0)));t.b("\">");t.b("\n" + i);t.b("          <img class=\"sidebar-team-img\" src=\"");t.b(t.v(t.d("images.50",c,p,0)));t.b("\">");t.b("\n" + i);t.b("          <span class=\"sidebar-team-name\">");t.b(t.v(t.f("name",c,p,0)));t.b("</span>");t.b("\n" + i);t.b("        </a>");t.b("\n" + i);t.b("      </li>");t.b("\n" + i);});c.pop();}if(t.s(t.d("teams.0",c,p,1),c,p,0,442,464,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    </ul>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("  <div class=\"menu-group\">");t.b("\n" + i);t.b("    <h2 class=\"menu-title\">");t.b("\n" + i);t.b("      Project Info");t.b("\n" + i);t.b("    </h2>");t.b("\n" + i);t.b("    <div class=\"menu-section\">");t.b("\n" + i);t.b("      <span class=\"menu-label\">Created:</span> ");t.b(t.v(t.f("created_on",c,p,0)));t.b("\n" + i);t.b("    </div>");t.b("\n" + i);t.b("    <div class=\"menu-section\">");t.b("\n" + i);t.b("      <span class=\"menu-label\">Last Edited:</span> ");t.b(t.v(t.f("modified_on",c,p,0)));t.b("\n" + i);t.b("    </div>");t.b("\n" + i);t.b("    <div class=\"menu-section\">");t.b("\n" + i);t.b("      <span class=\"menu-label\">About:</span> ");t.b(t.v(t.f("description",c,p,0)));t.b("\n" + i);t.b("    </div>");t.b("\n");t.b("\n" + i);t.b("    <div class=\"menu-section\">");t.b("\n" + i);t.b("      <span class=\"menu-label\">Tools:</span>");t.b("\n" + i);if(t.s(t.f("tools",c,p,1),c,p,0,971,1016,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">");t.b(t.v(t.f("title",c,p,0)));t.b("</a>");t.b("\n" + i);});c.pop();}t.b("    </div>");t.b("\n");t.b("\n" + i);t.b("    <div class=\"menu-section\">");t.b("\n" + i);t.b("      <span class=\"menu-label\">Tags:</span>");t.b("\n" + i);if(t.s(t.f("tags",c,p,1),c,p,0,1129,1174,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">");t.b(t.v(t.f("title",c,p,0)));t.b("</a>");t.b("\n" + i);});c.pop();}t.b("    </div>");t.b("\n" + i);t.b("  </div>");t.b("\n");t.b("\n" + i);t.b("  <div class=\"menu-group\">");t.b("\n" + i);t.b("    <h2 class=\"menu-title\">");t.b("\n" + i);t.b("      Copyright Info");t.b("\n" + i);t.b("    </h2>");t.b("\n" + i);t.b("    <div class=\"menu-section\">");t.b("\n" + i);if(t.s(t.f("copyright",c,p,1),c,p,0,1342,1373,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      ");t.b(t.t(t.f("description",c,p,0)));t.b("\n" + i);});c.pop();}t.b("    </div>");t.b("\n" + i);t.b("  </div>");t.b("\n");t.b("\n" + i);t.b("  <div class=\"menu-section\">");t.b("\n" + i);t.b("    <a class=\"js-report\">Report</a> | <a class=\"js-spam-project\">Mark as Spam</a>");t.b("\n" + i);t.b("  </div>");t.b("\n");t.b("\n" + i);t.b("</div> <!-- /project-info -->");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('project/trait/info',[ "moment", "nbd/util/extend", "hgn!templates/project/info" ], function(a, b, c) {
    "use strict";
    return {
        mustache: c,
        templateData: function() {
            var c = b({
                title: "Project Info",
                classes: [ "project-info" ]
            }, this._model.data()), d = this._model.get("constants").LICENSE_TEXTS;
            return [ "created_on", "modified_on" ].forEach(function(b) {
                c[b] = a.unix(c[b]).format("M/D/YY");
            }), c.copyright.description = d[c.copyright.license], c;
        },
        rendered: function() {
            this._super(), this.$view.on("click", ".js-report", function() {
                this.hide(), this._controller.report();
            }.bind(this));
        }
    };
});
define('project/Controller/Info',[ "be/Controller/Dialog/Roulette", "be/View/Dialog/Layover", "be/View/Dialog/Menu", "project/trait/info", "nbd/event" ], function(a, b, c, d, e) {
    "use strict";
    var f = a.extend({
        report: function() {
            e.trigger("report:open", this.$source);
        },
        render: function(a) {
            this.$source = a, this._super(a);
        }
    }, {
        VIEW_CLASS: {
            phone: b.extend(d),
            tablet: c.extend(d)
        }
    });
    return f;
});
define('project/lib/footer',[ "jquery", "project/lib/comments", "project/Controller/Info" ], function(a, b, c) {
    "use strict";
    return {
        init: function(d, e, f) {
            var g = a.extend({}, e, {
                constants: f
            });
            this.info = new c(e.id, g), this.info.setContext(d.find("#collect-and-share .project-info")), 
            b.init(d, e);
        },
        destroy: function() {
            this.info && this.info.destroy();
        }
    };
});
define('be/View/Dialog/Popup/Project',[ "jquery", "nbd/util/async", "nbd/util/media", "be/View/Dialog/Popup", "be/onhistory", "be/style", "be/social", "lib/scrollpoint", "lib/adobeanalytics", "project/lib/info", "project/lib/content", "project/lib/footer", "hgn!templates/html", "jquery/plugins/jquery.fancybox" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
    "use strict";
    var n = d.extend({
        $styles: null,
        init: function() {
            this._super.apply(this, arguments), this.on("prerender", function() {
                document.title = this._model.get("title"), this.$styles = this.$styles || a("<style>", {
                    type: "text/css"
                }).appendTo("head"), f.set(this.$styles[0], this._model.get("styles").inline[0]), 
                this.$view && this.$view.parent().length && this.innerDestroy();
            }, this);
        },
        destroy: function() {
            this.$styles.remove(), this.$styles = null, c.off(null, null, this), this.$view && (this.$view.remove(), 
            this.$view = null);
        },
        innerDestroy: function() {
            j.destroy(), k.destroy(), l.destroy(), h.off(null, null, "#project-popup");
        },
        mustache: m,
        template: function() {
            var a = this._super.apply(this, arguments);
            return a = a.filter(function() {
                return "SCRIPT" !== this.tagName;
            }), a.filter(".popup").prepend(this._model.get("upsell")), a;
        },
        templateData: function() {
            var b = this._super();
            return a.extend({
                toolbar: !1,
                classes: [ "project-view" ]
            }, b);
        },
        rendered: function() {
            var c = this.$view.filter(".popup"), d = this._model.get("data"), f = this._model.get("constants");
            c.find(".action-login").addClass("action-login-noremoval").end().attr("id", "project-popup").find("#project-container").on("click", function(a) {
                a.originalEvent.origin = this;
            }.bind(this)).end().find(".popup-inner-wrap").on("click", function(a) {
                a.originalEvent.origin !== this && this.hide();
            }.bind(this)), j.init(c, d, f), k.init(c.find("#primary-project-content"), d, f), 
            l.init(c.find("#project-footer"), d, f), g.init(c), b(function() {
                h(c.find("#project-container").css("margin-top"), function(a) {
                    c.find(".showcase-bar").toggleClass("shown", a);
                }, "#project-popup");
            }), this.$view.on("click", "#other-projects a", e({
                project: {
                    current_title: document.title
                }
            })), this._super(), a.fancybox.hideLoading(), i.page();
        },
        show: function() {
            this._super(), this.block(!0), this.$view.addClass("shown"), c.on("desktop:exit", function() {
                this.hide();
            }, this);
        },
        hide: function(a) {
            this.$view && (this._super(), c.off(null, null, this), this.block(!1), this.$view.removeClass("shown"), 
            this.innerDestroy(), a !== !0 && this.trigger("exit"));
        },
        block: function(b) {
            b = b !== !1, a(document.body).toggleClass("project-popup-open", b).add("html").css("overflow", b ? "hidden" : "");
        }
    });
    return n;
});
define('be/Controller/Dialog/Project',[ "be/Controller/Dialog/EntityPopup", "be/View/Dialog/Popup/Project" ], function(a, b) {
    "use strict";
    var c = a.extend({
        prefilter: function(a) {
            var b;
            return a.styles && (b = [].concat(a.styles.project, a.styles.local), a.styles.local = b), 
            a;
        },
        open: function() {
            return this._view && this._view.block(), this._super.apply(this, arguments);
        }
    }, {
        VIEW_CLASS: {
            desktop: b
        }
    });
    return c;
});
define('project/popup',[ "nbd/util/extend", "be/trait/popupSession", "be/Controller/Dialog/Project" ], function(a, b, c) {
    "use strict";
    return a({
        selector: ".cover-name-link, .cover-img-link, a.cover-img",
        entity: "project",
        Dialog: c
    }, b);
});
define('profile/lib/decorateModal',[ "nbd/util/extend" ], function(a) {
    "use strict";
    return function(b) {
        return a({
            classes: [ "profile-popup" ]
        }, b);
    };
});

define("require/hgn!templates/lib/_projectDropdownCover", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"project-dropdown-cover js-project-cover cfix\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n");t.b("\n" + i);t.b("  <div class=\"cover-img\">");t.b("\n" + i);t.b("    <a href=\"");if(t.s(t.f("is_team",c,p,1),c,p,0,128,135,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("url",c,p,0)));});c.pop();}if(!t.s(t.f("is_team",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.f("edit_url",c,p,0)));};t.b("\"");if(t.s(t.f("is_team",c,p,1),c,p,0,196,211,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" target=\"blank\"");});c.pop();}t.b(">");t.b("\n" + i);t.b("      <div data-picture=\"\" data-alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">");t.b("\n" + i);if(t.s(t.d("covers.202",c,p,1),c,p,0,296,646,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-src=\"");t.b(t.v(t.d("covers.202",c,p,0)));t.b("\" data-class=\"cover-img-el cover-img-2x\" data-title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-media=\"(-webkit-min-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("          (min--moz-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("          (-o-min-device-pixel-ratio: 4/3),");t.b("\n" + i);t.b("          (min-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("          (min-resolution: 1.3dppx)\"></div>");t.b("\n" + i);});c.pop();}if(!t.s(t.d("covers.202",c,p,1),c,p,1,0,0,"")){t.b("        <div class=\"no-image-yet cover-img\">No Image Yet</div>");t.b("\n" + i);};t.b("      </div>");t.b("\n" + i);t.b("      <noscript><img alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" src=\"");t.b(t.v(t.d("covers.202",c,p,0)));t.b("\" class=\"cover-img-el cover-img-standard\"></noscript>");t.b("\n" + i);t.b("    </a>");t.b("\n" + i);t.b("  </div>");t.b("\n");t.b("\n" + i);t.b("  <div class=\"cover-info-stats\">");t.b("\n" + i);t.b("    <div class=\"cover-info\">");t.b("\n" + i);t.b("      <div class=\"cover-name\">");t.b("\n" + i);t.b("        ");t.b(t.v(t.f("name",c,p,0)));t.b("\n" + i);t.b("      </div>");t.b("\n");t.b("\n" + i);t.b("      ");if(t.s(t.f("modified_date",c,p,1),c,p,0,1079,1155,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"project-draft-modified\">Last modified: ");t.b(t.v(t.f("modified_date",c,p,0)));t.b("</span>");});c.pop();}t.b("\n" + i);t.b("    </div>");t.b("\n" + i);t.b("  </div>");t.b("\n");t.b("\n" + i);t.b("  <div id=\"project-dropdown-cover-actions\">");t.b("\n" + i);if(!t.s(t.f("is_team",c,p,1),c,p,1,0,0,"")){t.b("    <a class=\"form-button form-button-small form-button-default\" href=\"");t.b(t.v(t.f("edit_url",c,p,0)));t.b("\">Edit</a> <a href=\"#\" class=\"js-project-delete draft-delete\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Delete</a>");t.b("\n" + i);};if(t.s(t.f("is_team",c,p,1),c,p,0,1456,1831,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    ");if(t.s(t.f("in_team",c,p,1),c,p,0,1473,1537,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<input type=\"hidden\" name=\"project_ids_before[]\" value=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");});c.pop();}t.b("\n" + i);t.b("    <input type=\"checkbox\" id=\"project-dropdown-project-");t.b(t.v(t.f("id",c,p,0)));t.b("\" name=\"project_ids_after[]\" value=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" ");if(t.s(t.f("in_team",c,p,1),c,p,0,1668,1675,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("checked");});c.pop();}t.b(" class=\"form-checkbox js-project-dropdown-checkbox\"> <label for=\"project-dropdown-project-");t.b(t.v(t.f("id",c,p,0)));t.b("\" class=\"form-label\">Add to team page</label>");t.b("\n" + i);});c.pop();}t.b("  </div>");t.b("\n");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('profile/View/ProjectDraft',[ "page_constants", "jquery", "nbd/util/pipe", "lib/xhr", "be/modal/validate", "project/popup", "profile/lib/coordinator", "profile/lib/decorateModal", "profile/View/Content", "hgn!templates/lib/_projectDropdownCover", "jquery/ui/sortable" ], function(a, b, c, d, e, f, g, h, i, j) {
    "use strict";
    return f.init(), i.extend({
        rendered: function() {
            this.fatclick(), this.picturefill();
        },
        bind: function() {
            this.$parent.on("mouseenter mouseleave", ".cover-name-link, .cover-img", function(a) {
                b(this).closest(".project-cover").toggleClass("hover", "mouseenter" === a.type);
            }).on("click", ".js-project-delete", function() {
                var c = b(this).data("id");
                e(h({
                    title: "Delete Project Draft",
                    html: "Are you sure you want to delete this project draft? All images, text, and information associated with this project will be permanently deleted."
                }), {
                    waitingText: "Deleting...",
                    promiseGenerator: function() {
                        return d({
                            url: a.PROJECTS.DELETE_URL,
                            data: {
                                id: c
                            },
                            type: "POST"
                        }).then(function(a) {
                            g.trigger("draft-remove", c, a.count);
                        });
                    }
                });
            });
        },
        unbind: function() {
            this.$parent.off("mouseenter mouseleave", ".cover-name-link, .cover-img").off("click", ".js-project-delete");
        },
        template: c(j, b)
    });
});

define("require/hgn!templates/profile/user/_nav/_projectDropdown", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-project-dropdown-collection-inner project-dropdown-collection-inner\"></div>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('profile/Controller/MemberDrafts',[ "page_config", "jquery", "be/Controller/Dialog/Roulette", "be/View/Dialog/Layover", "be/View/Dialog/Menu", "profile/lib/Collection", "profile/lib/coordinator", "profile/View/DraftsButton", "profile/View/ProjectDraft", "hgn!templates/profile/user/_nav/_projectDropdown" ], function(a, b, c, d, e, f, g, h, i, j) {
    "use strict";
    var k = {
        mustache: j,
        templateData: function() {
            var a = this._super();
            return a.classes = [ "profile-dropdown", "project-dropdown-collection" ], a;
        },
        position: function(a) {
            this._super(a, {
                collision: "none"
            });
        },
        rendered: function() {
            this._super.apply(this, arguments), this.collection = f.init(this.$view.find(".js-project-dropdown-collection-inner"), i), 
            this.collection.render(a.drafts);
        },
        addProject: function(a) {
            return this.collection.render([ a ]).prependTo(this.collection.$parent), this;
        },
        removeProject: function(a) {
            this.$view.find(".js-project-cover[data-id=" + a + "]").remove();
        }
    };
    return c.extend({
        _draftsButton: null,
        init: function() {
            this._super.apply(this, arguments), g.on("draft-add", this.addProject.bind(this)), 
            g.on("draft-remove", this.removeProject.bind(this));
        },
        addProject: function(a, b) {
            1 === b && this._draftsButton.$view.removeClass("hide"), this._draftsButton.render(b), 
            this.toggle(), this._view.addProject(a);
        },
        removeProject: function(a, b) {
            this._view.removeProject(a), 0 === b ? this._draftsButton.$view.addClass("hide") : this._view.toggle(), 
            this._draftsButton.render(b);
        }
    }, {
        VIEW_CLASS: {
            phone: d.extend(k),
            tablet: e.extend(k).extend({
                attachment: ".js-profile-nav"
            }),
            desktop: e.extend(k).extend({
                attachment: ".js-profile-header-actions"
            })
        },
        init: function(a) {
            var b = new this();
            return b.setContext(a), b._draftsButton = new h(null, a), b._draftsButton.rendered(), 
            b;
        }
    });
});
define('lib/infinitescroll',[ "jquery", "log" ], function(a, b) {
    "use strict";
    function c(a) {
        a();
    }
    function d(a) {
        var b, c;
        return a.is(g) ? (b = window.innerHeight || g.height(), c = h.height() - b - g.scrollTop()) : (b = a.prop("clientHeight"), 
        c = a.prop("scrollHeight") - b - a.scrollTop()), c / b;
    }
    function e(b) {
        var e = "window" === b ? g : a(b);
        return function() {
            var a, f = d(e);
            for (a in j[b]) f <= Number(a) && j[b][a].wrapped.forEach(c);
        };
    }
    function f(c, d, f) {
        function h() {
            if (!h.blocking) {
                h.blocking = !0;
                var a = d.apply(null, arguments);
                a && "function" == typeof a.then ? a.then(function() {
                    h.blocking = !1, i[f]();
                }, function(a) {
                    a instanceof Error && b.warn(a);
                }) : h.blocking = !1;
            }
        }
        "function" == typeof c && (f = d, d = c, c = 1), f = f || "window", c = Number(c).toString();
        var k, l = "window" === f ? g : a(f);
        j[f] || (j[f] = {}, i[f] = e(f), l.on("scroll", i[f])), k = j[f][c], k || (k = j[f][c] = {
            wrapped: [],
            original: []
        }), k.original.push(d), k.wrapped.push(h), i[f]();
    }
    var g = a(window), h = a(document), i = {}, j = {};
    return f.remove = function(b, c) {
        c = c || "window";
        var d, e, f, h = "window" === c ? g : a(c);
        for (d in j[c]) e = j[c][d], f = e.original.indexOf(b), ~f && (e.original.splice(f, 1), 
        e.wrapped.splice(f, 1), e.original.length || delete j[c][d]);
        Object.keys(j[c]).length || (h.off("scroll", i[c]), delete j[c]);
    }, f.check = function(a) {
        a = a || "window", i[a]();
    }, f;
});
define('lib/InfiniteLoader',[ "nbd/Class", "nbd/trait/pubsub", "nbd/util/construct", "nbd/util/extend", "lib/infinitescroll", "lib/xhr" ], function(a, b, c, d, e, f) {
    "use strict";
    return a.extend({
        init: function(a, b) {
            this.context = a || "window", this.resetParams(b);
        },
        breakpoint: 1,
        offsetKey: "offset",
        offset: 0,
        data: {},
        url: void 0,
        _infinitescroll: e,
        _xhr: f,
        hasMoreResults: function() {
            throw "InfiniteLoader requires a 'hasMoreResults(response)' function. Please extend and implement.";
        },
        getNextOffset: function() {
            throw "InfiniteLoader requires a 'getNextOffset(response)' function. Please extend and implement.";
        },
        loaded: function() {
            throw "InfiniteLoader requires a 'loaded(response)' function. Please extend and implement.";
        },
        resetParams: function(a, b, c) {
            return delete this.offset, delete this.data, delete this.url, this.setParams(a, b, c);
        },
        setParams: function(a, b, c) {
            return null != a && (this.offset = a), null != b && (this.data = b), null != c && (this.url = c), 
            this;
        },
        bind: function() {
            return this._boundLoad ? void 0 : (this._boundLoad = this.load.bind(this), this._infinitescroll(this.breakpoint, this._boundLoad, this.context), 
            this);
        },
        _stop: function() {
            this._request && this._request.abort();
        },
        unbind: function() {
            return this._boundLoad ? (this._infinitescroll.remove(this._boundLoad, this.context), 
            delete this._boundLoad, this) : void 0;
        },
        load: function() {
            this.trigger("before"), this._request = this._xhr(this._xhrOptions());
            var a = this._request.then(this.loaded.bind(this));
            return a.then(this.trigger.bind(this, "success"), this.trigger.bind(this, "error")), 
            this._request.then(this._trackState.bind(this)).then(function() {
                return a;
            });
        },
        _xhrOptions: function() {
            var a = "function" == typeof this.data ? this.data() : this.data;
            return a = d({}, a), a[this.offsetKey] = this.offset, {
                url: this.url,
                data: a
            };
        },
        _trackState: function(a) {
            if (this.offset = this.getNextOffset(a), !this.hasMoreResults(a)) throw "No more results";
            return a;
        },
        reload: function(a, b, c) {
            this.resetParams(a, b, c), this._stop(), this.unbind();
            var d = this.load();
            return d.then(this.bind.bind(this)), d;
        }
    }, {
        init: function() {
            return c.apply(this, arguments).bind();
        }
    }).mixin(b);
});
define('profile/lib/ActiveSectionLoader',[ "nbd/util/extend", "lib/InfiniteLoader", "profile/lib/Collection" ], function(a, b, c) {
    "use strict";
    return b.extend({
        init: function(a, b) {
            this._super("window", a), this.section = b;
        },
        _firstLoad: !0,
        initCollection: function(a, b, d, e) {
            this._viewMap = b, this._emptyTemplateMap = d, this._emptyTemplateData = e, this.collection = c.init(a, this._viewMap(this.section), this._emptyTemplateMap(this.section));
        },
        hasMoreResults: function(a) {
            return a.section_content.length > 0;
        },
        getNextOffset: function(a) {
            return a.offset;
        },
        reload: function() {
            return this.collection.$parent.attr("data-section", this.section), this.collection.reset(this._viewMap(this.section), this._emptyTemplateMap(this.section)), 
            this._firstLoad = !0, this._super(0, {}, document.location.href);
        },
        loaded: function(b) {
            var c = 0 === this.offset && this._firstLoad && !this.hasMoreResults(b), d = a({}, this._emptyTemplateData);
            return this._firstLoad = !1, b.search && (d.search = b.search), c ? this.collection.setEmpty(d) : this.collection.render(b.section_content);
        }
    });
});

define("require/hgn!templates/lib/_nav/breadcrumbs", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"navmenui-breadcrumbs\" class=\"js-navmenui-breadcrumbs\">");t.b("\n" + i);if(t.s(t.f("breadcrumbs",c,p,1),c,p,0,80,256,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<span class=\"breadcrumb-text\" classes=\"breadcrumb\">");if(!t.s(t.f("last",c,p,1),c,p,1,0,0,"")){t.b("<a href=\"");t.b(t.v(t.f("href",c,p,0)));t.b("\">");};t.b(t.v(t.f("text",c,p,0)));if(!t.s(t.f("last",c,p,1),c,p,1,0,0,"")){t.b("</a>");};t.b("</span>");if(!t.s(t.f("last",c,p,1),c,p,1,0,0,"")){t.b("<span class=\"rarr\">&rarr;</span>");};});c.pop();}t.b("\n" + i);t.b("</div>");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('profile/lib/model',[ "nbd/Model", "page_config" ], function(a, b) {
    "use strict";
    return new a(b.profile.id, b.profile || {});
});
!function() {
    var a = Math, b = function(a) {
        return a >> 0;
    }, c = /webkit/i.test(navigator.appVersion) ? "webkit" : /firefox/i.test(navigator.userAgent) ? "Moz" : /trident/i.test(navigator.userAgent) ? "ms" : "opera" in window ? "O" : "", d = /android/gi.test(navigator.appVersion), e = /iphone|ipad/gi.test(navigator.appVersion), f = /playbook/gi.test(navigator.appVersion), g = /hp-tablet/gi.test(navigator.appVersion), h = document.all && !document.getElementsByClassName, i = "WebKitCSSMatrix" in window && "m11" in new WebKitCSSMatrix(), j = "ontouchstart" in window && !g, k = c + "Transform" in document.documentElement.style, l = e || f, m = function() {
        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(a) {
            return setTimeout(a, 1);
        };
    }(), n = function() {
        return window.cancelRequestAnimationFrame || window.webkitCancelAnimationFrame || window.webkitCancelRequestAnimationFrame || window.mozCancelRequestAnimationFrame || window.oCancelRequestAnimationFrame || window.msCancelRequestAnimationFrame || clearTimeout;
    }(), o = "onorientationchange" in window ? "orientationchange" : "resize", p = j ? "touchstart" : "mousedown", q = j ? "touchmove" : "mousemove", r = j ? "touchend" : "mouseup", s = j ? "touchcancel" : "mouseup", t = "Moz" == c ? "DOMMouseScroll" : "mousewheel", u = document.attachEvent ? "mouseleave" : "mouseout", v = "translate" + (i ? "3d(" : "("), w = i ? ",0)" : ")", x = function(a, b) {
        var f, g = this, m = document;
        g.wrapper = "object" == typeof a ? a : m.getElementById(a), g.wrapper.style.overflow = "hidden", 
        g.scroller = g.wrapper.children[0], g.options = {
            hScroll: !0,
            vScroll: !0,
            x: 0,
            y: 0,
            bounce: !0,
            bounceLock: !1,
            momentum: !0,
            lockDirection: !0,
            useTransform: !0,
            useTransition: !1,
            topOffset: 0,
            checkDOMChanges: !1,
            handleClick: !0,
            hScrollbar: !0,
            vScrollbar: !0,
            fixedScrollbar: d,
            hideScrollbar: e,
            fadeScrollbar: e && i,
            scrollbarClass: "",
            zoom: !1,
            zoomMin: 1,
            zoomMax: 4,
            doubleTapZoom: 2,
            wheelAction: "scroll",
            snap: !1,
            snapThreshold: 1,
            onRefresh: null,
            onBeforeScrollStart: function(a) {
                a.preventDefault ? a.preventDefault() : a.returnValue = !1;
            },
            onScrollStart: null,
            onBeforeScrollMove: null,
            onScrollMove: null,
            onBeforeScrollEnd: null,
            onScrollEnd: null,
            onTouchEnd: null,
            onDestroy: null,
            onZoomStart: null,
            onZoom: null,
            onZoomEnd: null
        };
        for (f in b) g.options[f] = b[f];
        g.x = g.options.x, g.y = g.options.y, g.options.useTransform = k ? g.options.useTransform : !1, 
        g.options.hScrollbar = g.options.hScroll && g.options.hScrollbar, g.options.vScrollbar = g.options.vScroll && g.options.vScrollbar, 
        g.options.zoom = g.options.useTransform && g.options.zoom, g.options.useTransition = l && g.options.useTransition, 
        g.options.zoom && d && (v = "translate(", w = ")"), g.scroller.style[c + "TransitionProperty"] = g.options.useTransform ? "-" + c.toLowerCase() + "-transform" : "top left", 
        g.scroller.style[c + "TransitionDuration"] = "0", g.scroller.style[c + "TransformOrigin"] = "0 0", 
        g.options.useTransition && (g.scroller.style[c + "TransitionTimingFunction"] = "cubic-bezier(0.33,0.66,0.66,1)"), 
        g.options.useTransform ? g.scroller.style[c + "Transform"] = v + g.x + "px," + g.y + "px" + w : g.scroller.style.cssText += ";position:absolute;top:" + g.y + "px;left:" + g.x + "px", 
        g.options.useTransition && (g.options.fixedScrollbar = !0), g.refresh(), h && (g.scroller.ondragstart = function() {
            return !1;
        }), g._bind(o, window), g._bind(p), j || (g._bind(u, g.wrapper), "none" != g.options.wheelAction && g._bind(t)), 
        g.options.checkDOMChanges && (g.checkDOMTime = setInterval(function() {
            g._checkDOMChanges();
        }, 500));
    };
    x.prototype = {
        enabled: !0,
        x: 0,
        y: 0,
        steps: [],
        scale: 1,
        currPageX: 0,
        currPageY: 0,
        pagesX: [],
        pagesY: [],
        aniTime: null,
        wheelZoomCount: 0,
        handleEvent: function(a) {
            var b = this;
            switch (a.type) {
              case p:
                if (!j && a.button - (h ? 1 : 0) !== 0) return;
                b._start(a);
                break;

              case q:
                b._move(a);
                break;

              case r:
              case s:
                b._end(a);
                break;

              case o:
                b._resize();
                break;

              case t:
                b._wheel(a);
                break;

              case u:
                b._mouseout(a);
                break;

              case "webkitTransitionEnd":
                b._transitionEnd(a);
            }
        },
        _checkDOMChanges: function() {
            this.moved || this.zoomed || this.animating || this.scrollerW == this.scroller.offsetWidth * this.scale && this.scrollerH == this.scroller.offsetHeight * this.scale || this.refresh();
        },
        _scrollbar: function(d) {
            var e, f = this, g = document;
            return f[d + "Scrollbar"] ? (f[d + "ScrollbarWrapper"] || (e = g.createElement("div"), 
            f.options.scrollbarClass ? e.className = f.options.scrollbarClass + d.toUpperCase() : e.style.cssText = "position:absolute;z-index:100;" + ("h" == d ? "height:7px;bottom:1px;left:2px;right:" + (f.vScrollbar ? "7" : "2") + "px" : "width:7px;bottom:" + (f.hScrollbar ? "7" : "2") + "px;top:2px;right:1px"), 
            e.style.cssText += ";pointer-events:none;-" + c + "-transition-property:opacity;-" + c + "-transition-duration:" + (f.options.fadeScrollbar ? "350ms" : "0") + ";overflow:hidden;opacity:" + (f.options.hideScrollbar ? "0" : "1"), 
            f.wrapper.appendChild(e), f[d + "ScrollbarWrapper"] = e, e = g.createElement("div"), 
            f.options.scrollbarClass || (e.style.cssText = "position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-" + c + "-background-clip:padding-box;-" + c + "-box-sizing:border-box;" + ("h" == d ? "height:100%" : "width:100%") + ";-" + c + "-border-radius:3px;border-radius:3px"), 
            e.style.cssText += ";pointer-events:none;-" + c + "-transition-property:-" + c + "-transform;-" + c + "-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-" + c + "-transition-duration:0;-" + c + "-transform:" + v + "0,0" + w, 
            f.options.useTransition && (e.style.cssText += ";-" + c + "-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"), 
            f[d + "ScrollbarWrapper"].appendChild(e), f[d + "ScrollbarIndicator"] = e), "h" == d ? (f.hScrollbarSize = f.hScrollbarWrapper.clientWidth, 
            f.hScrollbarIndicatorSize = a.max(b(f.hScrollbarSize * f.hScrollbarSize / f.scrollerW), 8), 
            f.hScrollbarIndicator.style.width = f.hScrollbarIndicatorSize + "px", f.hScrollbarMaxScroll = f.hScrollbarSize - f.hScrollbarIndicatorSize, 
            f.hScrollbarProp = f.hScrollbarMaxScroll / f.maxScrollX) : (f.vScrollbarSize = f.vScrollbarWrapper.clientHeight, 
            f.vScrollbarIndicatorSize = a.max(b(f.vScrollbarSize * f.vScrollbarSize / f.scrollerH), 8), 
            f.vScrollbarIndicator.style.height = f.vScrollbarIndicatorSize + "px", f.vScrollbarMaxScroll = f.vScrollbarSize - f.vScrollbarIndicatorSize, 
            f.vScrollbarProp = f.vScrollbarMaxScroll / f.maxScrollY), void f._scrollbarPos(d, !0)) : void (f[d + "ScrollbarWrapper"] && (k && (f[d + "ScrollbarIndicator"].style[c + "Transform"] = ""), 
            f[d + "ScrollbarWrapper"].parentNode.removeChild(f[d + "ScrollbarWrapper"]), f[d + "ScrollbarWrapper"] = null, 
            f[d + "ScrollbarIndicator"] = null));
        },
        _resize: function() {
            var a = this;
            setTimeout(function() {
                a.refresh();
            }, d ? 200 : 0);
        },
        _pos: function(a, d) {
            this.zoomed || (a = this.hScroll ? a : 0, d = this.vScroll ? d : 0, this.options.useTransform ? this.scroller.style[c + "Transform"] = v + a + "px," + d + "px" + w + " scale(" + this.scale + ")" : (a = b(a), 
            d = b(d), this.scroller.style.left = a + "px", this.scroller.style.top = d + "px"), 
            this.x = a, this.y = d, this._scrollbarPos("h"), this._scrollbarPos("v"));
        },
        _scrollbarPos: function(a, d) {
            var e, f = this, g = "h" == a ? f.x : f.y;
            f[a + "Scrollbar"] && (g = f[a + "ScrollbarProp"] * g, 0 > g ? (f.options.fixedScrollbar || (e = f[a + "ScrollbarIndicatorSize"] + b(3 * g), 
            8 > e && (e = 8), f[a + "ScrollbarIndicator"].style["h" == a ? "width" : "height"] = e + "px"), 
            g = 0) : g > f[a + "ScrollbarMaxScroll"] && (f.options.fixedScrollbar ? g = f[a + "ScrollbarMaxScroll"] : (e = f[a + "ScrollbarIndicatorSize"] - b(3 * (g - f[a + "ScrollbarMaxScroll"])), 
            8 > e && (e = 8), f[a + "ScrollbarIndicator"].style["h" == a ? "width" : "height"] = e + "px", 
            g = f[a + "ScrollbarMaxScroll"] + (f[a + "ScrollbarIndicatorSize"] - e))), f[a + "ScrollbarWrapper"].style.opacity = d && f.options.hideScrollbar ? "0" : "1", 
            h ? (f[a + "ScrollbarIndicator"].style.position = "absolute", "h" == a ? f[a + "ScrollbarIndicator"].style.left = g + "px" : f[a + "ScrollbarIndicator"].style.top = g + "px") : (f[a + "ScrollbarWrapper"].style[c + "TransitionDelay"] = "0", 
            f[a + "ScrollbarIndicator"].style[c + "Transform"] = v + ("h" == a ? g + "px,0" : "0," + g + "px") + w));
        },
        _start: function(b) {
            var d, e, f, g, h, i = this, k = j ? b.touches[0] : b, l = document.body, m = document.documentElement;
            i.enabled && (i.options.onBeforeScrollStart && i.options.onBeforeScrollStart.call(i, b), 
            (i.options.useTransition || i.options.zoom) && i._transitionTime(0), i.moved = !1, 
            i.animating = !1, i.zoomed = !1, i.distX = 0, i.distY = 0, i.absDistX = 0, i.absDistY = 0, 
            i.dirX = 0, i.dirY = 0, i.options.zoom && j && b.touches.length > 1 && (g = a.abs(b.touches[0].pageX - b.touches[1].pageX), 
            h = a.abs(b.touches[0].pageY - b.touches[1].pageY), i.touchesDistStart = a.sqrt(g * g + h * h), 
            i.originX = a.abs(b.touches[0].pageX + b.touches[1].pageX - 2 * i.wrapperOffsetLeft) / 2 - i.x, 
            i.originY = a.abs(b.touches[0].pageY + b.touches[1].pageY - 2 * i.wrapperOffsetTop) / 2 - i.y, 
            i.options.onZoomStart && i.options.onZoomStart.call(i, b)), i.options.momentum && (i.options.useTransform ? (d = getComputedStyle(i.scroller, null)[c + "Transform"].replace(/[^0-9-.,]/g, "").split(","), 
            e = 1 * d[4], f = 1 * d[5]) : (e = 1 * (i.scroller.currentStyle || getComputedStyle(i.scroller, null)).left.replace(/[^0-9-]/g, ""), 
            f = 1 * (i.scroller.currentStyle || getComputedStyle(i.scroller, null)).top.replace(/[^0-9-]/g, "")), 
            (e != i.x || f != i.y) && (i.options.useTransition ? i._unbind("webkitTransitionEnd") : n(i.aniTime), 
            i.steps = [], i._pos(e, f))), i.absStartX = i.x, i.absStartY = i.y, i.startX = i.x, 
            i.startY = i.y, i.pointX = k.pageX || k.clientX + l.scrollLeft + m.scrollLeft, i.pointY = k.pageY || k.clientY + l.scrollTop + m.scrollTop, 
            i.startTime = b.timeStamp || new Date().getTime(), i.options.onScrollStart && i.options.onScrollStart.call(i, b), 
            i._bind(q), i._bind(r), i._bind(s));
        },
        _move: function(b) {
            var d, e, f, g = this, h = j ? b.touches[0] : b, i = document.body, k = document.documentElement, l = (h.pageX || h.clientX + i.scrollLeft + k.scrollLeft) - g.pointX, m = (h.pageY || h.clientY + i.scrollTop + k.scrollTop) - g.pointY, n = g.x + l, o = g.y + m, p = b.timeStamp || new Date().getTime();
            return g.options.onBeforeScrollMove && g.options.onBeforeScrollMove.call(g, b), 
            g.options.zoom && j && b.touches.length > 1 ? (d = a.abs(b.touches[0].pageX - b.touches[1].pageX), 
            e = a.abs(b.touches[0].pageY - b.touches[1].pageY), g.touchesDist = a.sqrt(d * d + e * e), 
            g.zoomed = !0, f = 1 / g.touchesDistStart * g.touchesDist * this.scale, f < g.options.zoomMin ? f = .5 * g.options.zoomMin * Math.pow(2, f / g.options.zoomMin) : f > g.options.zoomMax && (f = 2 * g.options.zoomMax * Math.pow(.5, g.options.zoomMax / f)), 
            g.lastScale = f / this.scale, n = this.originX - this.originX * g.lastScale + this.x, 
            o = this.originY - this.originY * g.lastScale + this.y, this.scroller.style[c + "Transform"] = v + n + "px," + o + "px" + w + " scale(" + f + ")", 
            void (g.options.onZoom && g.options.onZoom.call(g, b))) : (g.pointX = h.pageX || h.clientX + i.scrollLeft + k.scrollLeft, 
            g.pointY = h.pageY || h.clientY + i.scrollTop + k.scrollTop, (n > 0 || n < g.maxScrollX) && (n = g.options.bounce ? g.x + l / 2 : n >= 0 || g.maxScrollX >= 0 ? 0 : g.maxScrollX), 
            (o > g.minScrollY || o < g.maxScrollY) && (o = g.options.bounce ? g.y + m / 2 : o >= g.minScrollY || g.maxScrollY >= 0 ? g.minScrollY : g.maxScrollY), 
            g.distX += l, g.distY += m, g.absDistX = a.abs(g.distX), g.absDistY = a.abs(g.distY), 
            void (g.absDistX < 6 && g.absDistY < 6 || (g.options.lockDirection && (g.absDistX > g.absDistY + 5 ? (o = g.y, 
            m = 0) : g.absDistY > g.absDistX + 5 && (n = g.x, l = 0)), g.moved = !0, g._pos(n, o), 
            g.dirX = l > 0 ? -1 : 0 > l ? 1 : 0, g.dirY = m > 0 ? -1 : 0 > m ? 1 : 0, p - g.startTime > 300 && (g.startTime = p, 
            g.startX = g.x, g.startY = g.y), g.options.onScrollMove && g.options.onScrollMove.call(g, b))));
        },
        _end: function(d) {
            if (!j || 0 == d.touches.length) {
                var e, f, g, h, i, k, l, m = this, n = j ? d.changedTouches[0] : d, o = {
                    dist: 0,
                    time: 0
                }, p = {
                    dist: 0,
                    time: 0
                }, t = (d.timeStamp || new Date().getTime()) - m.startTime, u = m.x, x = m.y;
                if (m._unbind(q), m._unbind(r), m._unbind(s), m.options.onBeforeScrollEnd && m.options.onBeforeScrollEnd.call(m, d), 
                m.zoomed) return l = m.scale * m.lastScale, l = Math.max(m.options.zoomMin, l), 
                l = Math.min(m.options.zoomMax, l), m.lastScale = l / m.scale, m.scale = l, m.x = m.originX - m.originX * m.lastScale + m.x, 
                m.y = m.originY - m.originY * m.lastScale + m.y, m.scroller.style[c + "TransitionDuration"] = "200ms", 
                m.scroller.style[c + "Transform"] = v + m.x + "px," + m.y + "px" + w + " scale(" + m.scale + ")", 
                m.zoomed = !1, m.refresh(), void (m.options.onZoomEnd && m.options.onZoomEnd.call(m, d));
                if (!m.moved) return j && (m.doubleTapTimer && m.options.zoom ? (clearTimeout(m.doubleTapTimer), 
                m.doubleTapTimer = null, m.options.onZoomStart && m.options.onZoomStart.call(m, d), 
                m.zoom(m.pointX, m.pointY, 1 == m.scale ? m.options.doubleTapZoom : 1), m.options.onZoomEnd && setTimeout(function() {
                    m.options.onZoomEnd.call(m, d);
                }, 200)) : this.options.handleClick && (m.doubleTapTimer = setTimeout(function() {
                    for (m.doubleTapTimer = null, e = n.target; 1 != e.nodeType; ) e = e.parentNode;
                    "SELECT" != e.tagName && "INPUT" != e.tagName && "TEXTAREA" != e.tagName && (f = document.createEvent("MouseEvents"), 
                    f.initMouseEvent("click", !0, !0, d.view, 1, n.screenX, n.screenY, n.clientX, n.clientY, d.ctrlKey, d.altKey, d.shiftKey, d.metaKey, 0, null), 
                    f._fake = !0, e.dispatchEvent(f));
                }, m.options.zoom ? 250 : 0))), m._resetPos(200), void (m.options.onTouchEnd && m.options.onTouchEnd.call(m, d));
                if (300 > t && m.options.momentum && (o = u ? m._momentum(u - m.startX, t, -m.x, m.scrollerW - m.wrapperW + m.x, m.options.bounce ? m.wrapperW : 0) : o, 
                p = x ? m._momentum(x - m.startY, t, -m.y, m.maxScrollY < 0 ? m.scrollerH - m.wrapperH + m.y - m.minScrollY : 0, m.options.bounce ? m.wrapperH : 0) : p, 
                u = m.x + o.dist, x = m.y + p.dist, (m.x > 0 && u > 0 || m.x < m.maxScrollX && u < m.maxScrollX) && (o = {
                    dist: 0,
                    time: 0
                }), (m.y > m.minScrollY && x > m.minScrollY || m.y < m.maxScrollY && x < m.maxScrollY) && (p = {
                    dist: 0,
                    time: 0
                })), o.dist || p.dist) return i = a.max(a.max(o.time, p.time), 10), m.options.snap && (g = u - m.absStartX, 
                h = x - m.absStartY, a.abs(g) < m.options.snapThreshold && a.abs(h) < m.options.snapThreshold ? m.scrollTo(m.absStartX, m.absStartY, 200) : (k = m._snap(u, x), 
                u = k.x, x = k.y, i = a.max(k.time, i))), m.scrollTo(b(u), b(x), i), void (m.options.onTouchEnd && m.options.onTouchEnd.call(m, d));
                if (m.options.snap) return g = u - m.absStartX, h = x - m.absStartY, a.abs(g) < m.options.snapThreshold && a.abs(h) < m.options.snapThreshold ? m.scrollTo(m.absStartX, m.absStartY, 200) : (k = m._snap(m.x, m.y), 
                (k.x != m.x || k.y != m.y) && m.scrollTo(k.x, k.y, k.time)), void (m.options.onTouchEnd && m.options.onTouchEnd.call(m, d));
                m._resetPos(200), m.options.onTouchEnd && m.options.onTouchEnd.call(m, d);
            }
        },
        _resetPos: function(a) {
            var b = this, d = b.x >= 0 ? 0 : b.x < b.maxScrollX ? b.maxScrollX : b.x, e = b.y >= b.minScrollY || b.maxScrollY > 0 ? b.minScrollY : b.y < b.maxScrollY ? b.maxScrollY : b.y;
            return d == b.x && e == b.y ? (b.moved && (b.moved = !1, b.options.onScrollEnd && b.options.onScrollEnd.call(b)), 
            b.hScrollbar && b.options.hideScrollbar && ("webkit" == c && (b.hScrollbarWrapper.style[c + "TransitionDelay"] = "300ms"), 
            b.hScrollbarWrapper.style.opacity = "0"), void (b.vScrollbar && b.options.hideScrollbar && ("webkit" == c && (b.vScrollbarWrapper.style[c + "TransitionDelay"] = "300ms"), 
            b.vScrollbarWrapper.style.opacity = "0"))) : void b.scrollTo(d, e, a || 0);
        },
        _wheel: function(a) {
            var b, c, d, e, f, g = this;
            if ("wheelDeltaX" in a) b = a.wheelDeltaX / 12, c = a.wheelDeltaY / 12; else if ("wheelDelta" in a) b = c = a.wheelDelta / 12; else {
                if (!("detail" in a)) return;
                b = c = 3 * -a.detail;
            }
            return "zoom" == g.options.wheelAction ? (f = g.scale * Math.pow(2, 1 / 3 * (c ? c / Math.abs(c) : 0)), 
            f < g.options.zoomMin && (f = g.options.zoomMin), f > g.options.zoomMax && (f = g.options.zoomMax), 
            void (f != g.scale && (!g.wheelZoomCount && g.options.onZoomStart && g.options.onZoomStart.call(g, a), 
            g.wheelZoomCount++, g.zoom(a.pageX, a.pageY, f, 400), setTimeout(function() {
                g.wheelZoomCount--, !g.wheelZoomCount && g.options.onZoomEnd && g.options.onZoomEnd.call(g, a);
            }, 400)))) : (d = g.x + b, e = g.y + c, d > 0 ? d = 0 : d < g.maxScrollX && (d = g.maxScrollX), 
            e > g.minScrollY ? e = g.minScrollY : e < g.maxScrollY && (e = g.maxScrollY), void (g.maxScrollY < 0 && g.scrollTo(d, e, 0)));
        },
        _mouseout: function(a) {
            var b = a.relatedTarget;
            if (!b) return void this._end(a);
            for (;b = b.parentNode; ) if (b == this.wrapper) return;
            this._end(a);
        },
        _transitionEnd: function(a) {
            var b = this;
            a.target == b.scroller && (b._unbind("webkitTransitionEnd"), b._startAni());
        },
        _startAni: function() {
            var b, c, d, e = this, f = e.x, g = e.y, h = new Date().getTime();
            if (!e.animating) {
                if (!e.steps.length) return void e._resetPos(400);
                if (b = e.steps.shift(), b.x == f && b.y == g && (b.time = 0), e.animating = !0, 
                e.moved = !0, e.options.useTransition) return e._transitionTime(b.time), e._pos(b.x, b.y), 
                e.animating = !1, void (b.time ? e._bind("webkitTransitionEnd") : e._resetPos(0));
                d = function() {
                    var i, j, k = new Date().getTime();
                    return k >= h + b.time ? (e._pos(b.x, b.y), e.animating = !1, e.options.onAnimationEnd && e.options.onAnimationEnd.call(e), 
                    void e._startAni()) : (k = (k - h) / b.time - 1, c = a.sqrt(1 - k * k), i = (b.x - f) * c + f, 
                    j = (b.y - g) * c + g, e._pos(i, j), void (e.animating && (e.aniTime = m(d))));
                }, d();
            }
        },
        _transitionTime: function(a) {
            a += "ms", this.scroller.style[c + "TransitionDuration"] = a, this.hScrollbar && (this.hScrollbarIndicator.style[c + "TransitionDuration"] = a), 
            this.vScrollbar && (this.vScrollbarIndicator.style[c + "TransitionDuration"] = a);
        },
        _momentum: function(c, d, e, f, g) {
            var h = 6e-4, i = a.abs(c) / d, j = i * i / (2 * h), k = 0, l = 0;
            return c > 0 && j > e ? (l = g / (6 / (j / i * h)), e += l, i = i * e / j, j = e) : 0 > c && j > f && (l = g / (6 / (j / i * h)), 
            f += l, i = i * f / j, j = f), j *= 0 > c ? -1 : 1, k = i / h, {
                dist: j,
                time: b(k)
            };
        },
        _offset: function(a) {
            for (var b = 0, c = 0; a; ) b -= a.offsetLeft, c -= a.offsetTop, a = a.offsetParent;
            return a != this.wrapper && (b *= this.scale, c *= this.scale), {
                left: b,
                top: c
            };
        },
        _snap: function(c, d) {
            var e, f, g, h, i, j, k = this;
            for (g = k.pagesX.length - 1, e = 0, f = k.pagesX.length; f > e; e++) if (c >= k.pagesX[e]) {
                g = e;
                break;
            }
            for (g == k.currPageX && g > 0 && k.dirX < 0 && g--, c = k.pagesX[g], i = a.abs(c - k.pagesX[k.currPageX]), 
            i = i ? a.abs(k.x - c) / i * 500 : 0, k.currPageX = g, g = k.pagesY.length - 1, 
            e = 0; g > e; e++) if (d >= k.pagesY[e]) {
                g = e;
                break;
            }
            return g == k.currPageY && g > 0 && k.dirY < 0 && g--, d = k.pagesY[g], j = a.abs(d - k.pagesY[k.currPageY]), 
            j = j ? a.abs(k.y - d) / j * 500 : 0, k.currPageY = g, h = b(a.max(i, j)) || 200, 
            {
                x: c,
                y: d,
                time: h
            };
        },
        _bind: function(a, b, c) {
            var d = this;
            document.addEventListener ? (b || this.scroller).addEventListener(a, this, !!c) : (this.events && "object" == typeof this.events || (this.events = {}), 
            this.events[a] = function(a) {
                d.handleEvent.call(d, a);
            }, (b || this.scroller).attachEvent("on" + a, this.events[a]));
        },
        _unbind: function(a, b, c) {
            document.removeEventListener ? (b || this.scroller).removeEventListener(a, this, !!c) : this.events[a] && (b || this.scroller).detachEvent("on" + a, this.events[a]);
        },
        destroy: function() {
            var a = this;
            a.scroller.style[c + "Transform"] = "", a.hScrollbar = !1, a.vScrollbar = !1, a._scrollbar("h"), 
            a._scrollbar("v"), a._unbind(o, window), a._unbind(p), a._unbind(q), a._unbind(r), 
            a._unbind(s), a.options.hasTouch || (a._unbind(u, a.wrapper), a._unbind(t)), a.options.useTransition && a._unbind("webkitTransitionEnd"), 
            a.options.checkDOMChanges && clearInterval(a.checkDOMTime), a.options.onDestroy && a.options.onDestroy.call(a);
        },
        refresh: function() {
            var a, d, e, f, g = this, h = 0, i = 0;
            if (g.scale < g.options.zoomMin && (g.scale = g.options.zoomMin), g.wrapperW = g.wrapper.clientWidth || 1, 
            g.wrapperH = g.wrapper.clientHeight || 1, g.minScrollY = -g.options.topOffset || 0, 
            g.scrollerW = b(g.scroller.offsetWidth * g.scale), g.scrollerH = b((g.scroller.offsetHeight + g.minScrollY) * g.scale), 
            g.maxScrollX = g.wrapperW - g.scrollerW, g.maxScrollY = g.wrapperH - g.scrollerH + g.minScrollY, 
            g.dirX = 0, g.dirY = 0, g.options.onRefresh && g.options.onRefresh.call(g), g.hScroll = g.options.hScroll && g.maxScrollX < 0, 
            g.vScroll = g.options.vScroll && (!g.options.bounceLock && !g.hScroll || g.scrollerH > g.wrapperH), 
            g.hScrollbar = g.hScroll && g.options.hScrollbar, g.vScrollbar = g.vScroll && g.options.vScrollbar && g.scrollerH > g.wrapperH, 
            a = g._offset(g.wrapper), g.wrapperOffsetLeft = -a.left, g.wrapperOffsetTop = -a.top, 
            "string" == typeof g.options.snap) for (g.pagesX = [], g.pagesY = [], f = g.scroller.querySelectorAll(g.options.snap), 
            d = 0, e = f.length; e > d; d++) h = g._offset(f[d]), h.left += g.wrapperOffsetLeft, 
            h.top += g.wrapperOffsetTop, g.pagesX[d] = h.left < g.maxScrollX ? g.maxScrollX : h.left * g.scale, 
            g.pagesY[d] = h.top < g.maxScrollY ? g.maxScrollY : h.top * g.scale; else if (g.options.snap) {
                for (g.pagesX = []; h >= g.maxScrollX; ) g.pagesX[i] = h, h -= g.wrapperW, i++;
                for (g.maxScrollX % g.wrapperW && (g.pagesX[g.pagesX.length] = g.maxScrollX - g.pagesX[g.pagesX.length - 1] + g.pagesX[g.pagesX.length - 1]), 
                h = 0, i = 0, g.pagesY = []; h >= g.maxScrollY; ) g.pagesY[i] = h, h -= g.wrapperH, 
                i++;
                g.maxScrollY % g.wrapperH && (g.pagesY[g.pagesY.length] = g.maxScrollY - g.pagesY[g.pagesY.length - 1] + g.pagesY[g.pagesY.length - 1]);
            }
            g._scrollbar("h"), g._scrollbar("v"), g.zoomed || (g.scroller.style[c + "TransitionDuration"] = "0", 
            g._resetPos(200));
        },
        scrollTo: function(a, b, c, d) {
            var e, f, g = this, h = a;
            for (g.stop(), h.length || (h = [ {
                x: a,
                y: b,
                time: c,
                relative: d
            } ]), e = 0, f = h.length; f > e; e++) h[e].relative && (h[e].x = g.x - h[e].x, 
            h[e].y = g.y - h[e].y), g.steps.push({
                x: h[e].x,
                y: h[e].y,
                time: h[e].time || 0
            });
            g._startAni();
        },
        scrollToElement: function(b, c) {
            var d, e = this;
            b = b.nodeType ? b : e.scroller.querySelector(b), b && (d = e._offset(b), d.left += e.wrapperOffsetLeft, 
            d.top += e.wrapperOffsetTop, d.left = d.left > 0 ? 0 : d.left < e.maxScrollX ? e.maxScrollX : d.left, 
            d.top = d.top > e.minScrollY ? e.minScrollY : d.top < e.maxScrollY ? e.maxScrollY : d.top, 
            c = void 0 === c ? a.max(2 * a.abs(d.left), 2 * a.abs(d.top)) : c, e.scrollTo(d.left, d.top, c));
        },
        scrollToPage: function(a, b, c) {
            var d, e, f = this;
            c = void 0 === c ? 400 : c, f.options.onScrollStart && f.options.onScrollStart.call(f), 
            f.options.snap ? (a = "next" == a ? f.currPageX + 1 : "prev" == a ? f.currPageX - 1 : a, 
            b = "next" == b ? f.currPageY + 1 : "prev" == b ? f.currPageY - 1 : b, a = 0 > a ? 0 : a > f.pagesX.length - 1 ? f.pagesX.length - 1 : a, 
            b = 0 > b ? 0 : b > f.pagesY.length - 1 ? f.pagesY.length - 1 : b, f.currPageX = a, 
            f.currPageY = b, d = f.pagesX[a], e = f.pagesY[b]) : (d = -f.wrapperW * a, e = -f.wrapperH * b, 
            d < f.maxScrollX && (d = f.maxScrollX), e < f.maxScrollY && (e = f.maxScrollY)), 
            f.scrollTo(d, e, c);
        },
        disable: function() {
            this.stop(), this._resetPos(0), this.enabled = !1, this._unbind(q), this._unbind(r), 
            this._unbind(s);
        },
        enable: function() {
            this.enabled = !0;
        },
        stop: function() {
            this.options.useTransition ? this._unbind("webkitTransitionEnd") : n(this.aniTime), 
            this.steps = [], this.moved = !1, this.animating = !1;
        },
        zoom: function(a, b, d, e) {
            var f = this, g = d / f.scale;
            f.options.useTransform && (f.zoomed = !0, e = void 0 === e ? 200 : e, a = a - f.wrapperOffsetLeft - f.x, 
            b = b - f.wrapperOffsetTop - f.y, f.x = a - a * g + f.x, f.y = b - b * g + f.y, 
            f.scale = d, f.refresh(), f.x = f.x > 0 ? 0 : f.x < f.maxScrollX ? f.maxScrollX : f.x, 
            f.y = f.y > f.minScrollY ? f.minScrollY : f.y < f.maxScrollY ? f.maxScrollY : f.y, 
            f.scroller.style[c + "TransitionDuration"] = e + "ms", f.scroller.style[c + "Transform"] = v + f.x + "px," + f.y + "px" + w + " scale(" + d + ")", 
            f.zoomed = !1);
        },
        isReady: function() {
            return !this.moved && !this.zoomed && !this.animating;
        }
    }, "undefined" != typeof exports ? exports.iScroll = x : window.iScroll = x;
}();
define("vendor/misc/iscroll", (function (global) {
    return function () {
        var ret, fn;
        return ret || global.iScroll;
    };
}(this)));

define('be/iscrollnav',[ "jquery", "vendor/misc/iscroll" ], function(a, b) {
    "use strict";
    return function(c, d) {
        var e = 0;
        return c.find(".js-iscroll-item").each(function() {
            a(this).is(":visible") && (e += a(this).outerWidth(!0));
        }), d && (e += parseInt(c.find(".js-iscroll").css("padding-right"), 10)), c.find(".js-iscroll").width(e), 
        new b(c.find(".js-iscroll-wrap")[0], {
            vScroll: !1,
            vScrollbar: !1,
            hScrollbar: !1
        });
    };
});
define('jquery/plugins/jquery.autoselectmenu',[ "jquery", "jquery/plugins/jquery.ui.selectmenu" ], function(a) {
    "use strict";
    a.fn.autoselectmenu = function() {
        return this.each(function() {
            var b = a(this), c = (b.find("option").outerWidth(), {}), d = function() {
                b.changeInput("value", this.value);
            };
            !b.data("uiSelectmenu") && b.is(":visible") && (c = {
                style: "dropdown",
                maxHeight: 200,
                menuWidth: b.outerWidth()
            }, b.hasClass("ui-selectmenu-dropdown-right") && (c.positionOptions = {
                my: "right top",
                at: "right bottom",
                offset: null
            }), b.width() > 0 && (c.width = "auto"), b.selectmenu(c).on("change keyup", d));
        });
    };
});
define('profile/lib/nav',[ "jquery", "has", "hgn!templates/lib/_nav/breadcrumbs", "profile/lib/model", "nbd/util/media", "vendor/misc/history", "be/iscrollnav", "jquery/plugins/jquery.autoselectmenu", "jquery/plugins/jquery.changeinput" ], function(a, b, c, d, e, f, g) {
    "use strict";
    function h() {
        e.is("phone") && !p && (p = g(a(".js-profile-nav"), !0));
    }
    function i(a) {
        return "following" === a || "followers" === a || "team_members" === a ? "connections" : "gallery";
    }
    function j(b) {
        "collections_following" === b && (b = "collections");
        var c = i(b);
        a(".js-section-header").addClass("hide").filter("[data-section-header='" + c + "']").removeClass("hide").find(".js-section").removeClass("active").addClass("not-active").filter("[data-section='" + b + "']").addClass("active").removeClass("not-active"), 
        a(".js-gallery").attr("data-section", b);
    }
    function k() {
        a(".js-profile-nav").insertAfter(e.is("phone") ? ".js-nav-phone" : ".js-nav-desktop-tablet");
    }
    function l(b) {
        var c = "collections_following" === b || "collections" === b, d = a(".js-profile-collection-select select");
        a(".js-profile-collection-select").toggleClass("hide", !c), r || d.autoselectmenu(), 
        c && d.changeInput("value", window.location.href);
    }
    function m(b) {
        a(".js-search-form").toggleClass("hide", "connections" !== i(b)), q ? a(".js-search-form-input").val("") : q = !0;
    }
    function n(b) {
        a(".js-profile-info-wrap").removeClass("hide-phone").removeClass("hide-tablet").toggleClass("hide", !e.is("desktop") && "info" !== b), 
        a(".js-profile-stats").removeClass("hide-phone").removeClass("hide-tablet").toggleClass("hide", e.is("phone") && "info" !== b), 
        a(".js-gallery").toggleClass("hide", !e.is("desktop") && "info" === b);
    }
    function o(b) {
        var e = [ {
            text: "Discover",
            href: "/search"
        }, {
            text: d.get("display_name"),
            href: d.get("url")
        } ];
        "connections" === b && e.push({
            text: "Connections"
        }), e[e.length - 1].last = !0, a(".js-navmenui-breadcrumbs").replaceWith(c({
            breadcrumbs: e
        }));
    }
    var p, q = !1, r = b("touch");
    return {
        update: function(a) {
            var b = i(a);
            k(), j(a), n(a), o(b), l(a), m(a), h();
        }
    };
});
define('profile/lib/spinner',[ "jquery", "be/spinner" ], function(a, b) {
    "use strict";
    return b.init(a(".js-gallery")).hide();
});
define('profile/lib/PopStateListener',[ "jquery", "vendor/misc/history", "nbd/Class" ], function(a, b, c) {
    "use strict";
    var d, e, f;
    return c.extend({
        init: function(a, b, c) {
            this.segmentDepth = a || 1, this.defaultSegment = b || "", this.ignoredSegments = c || [], 
            this.isInPath = !0, this.prefixPath = this._getPrefixPath(), this.hrefPrefix = window.location.protocol + "//" + window.location.host + "/" + this.prefixPath;
        },
        bind: function(c) {
            var g = this;
            b.enabled && (d = function(a) {
                var b = this.href;
                g._isInPrefixPath(b) && (g.push(b), a.preventDefault());
            }, e = function() {
                var b = a(this).val();
                g._isInPrefixPath(b) && g.push(b);
            }, f = function() {
                var d = b.getState();
                d.data.prefixPath === this.prefixPath ? (this.isInPath && (c(this.getSegment(d.hash)), 
                a("select.js-popstate-listener").val(d.cleanUrl)), this.isInPath = !0) : this.isInPath = !1;
            }.bind(this), a(document.body).on("click", "a", d).on("change", "select.js-popstate-listener", e), 
            a(window).on("statechange", f));
        },
        push: function(a) {
            b.pushState({
                prefixPath: this.prefixPath
            }, document.title, a);
        },
        destroy: function() {
            a(document.body).off("click", "a", d).off("change", "select.js-popstate-listener", e), 
            a(window).off("statechange", f);
        },
        getSegment: function(a) {
            return this._getSegments(a).slice(this.segmentDepth).join("/") || this.defaultSegment;
        },
        _isInPrefixPath: function(a) {
            var c = this.getSegment(b.getShortUrl(a)), d = decodeURIComponent(a), e = d === this.hrefPrefix || 0 === d.indexOf(this.hrefPrefix + "/");
            return e && -1 === this.ignoredSegments.indexOf(c);
        },
        _getSegments: function(a) {
            return (a || window.location.pathname).replace(/[\?\#].*/, "").split("/").slice(1);
        },
        _getPrefixPath: function(a) {
            return this._getSegments(a).slice(0, this.segmentDepth).join("/");
        }
    }, {
        init: function(a, b) {
            var c = new this(a);
            return c.bind(b), c;
        }
    });
});
define('profile/lib/activeSection',[ "page_constants", "page_config", "jquery", "profile/lib/ActiveSectionLoader", "profile/lib/nav", "profile/lib/spinner", "profile/lib/PopStateListener", "be/form", "lib/showMessages", "nbd/util/media" ], function(a, b, c, d, e, f, g, h, i, j) {
    "use strict";
    var k = "projects", l = [ "resume", "stats", "editor" ], m = c(".js-profile-gallery-content"), n = new g(a.SEGMENT_DEPTH, k, l), o = new d(b.offset, n.getSegment());
    return o.init = function(a, d, g) {
        function k(a) {
            o.section = a, "info" !== a && o.reload(a), e.update(o.section);
        }
        var l;
        o.initCollection(m, a, d, g), b.is_empty || o.bind(), n.bind(function(a) {
            k(a);
        }), l = h.extend({
            _getButtonContainer: function() {
                return c();
            }
        }).init(c(".js-search-form")), l.commit = function(a) {
            n.push(window.location.protocol + "//" + window.location.host + window.location.pathname + "?" + c.param(a.data));
        }, c(".js-profile-nav").on("click", ".js-section", function(a) {
            var b = c(this).data("section");
            ("info" === b || b === n.getSegment() && o.section !== b) && (a.stopPropagation(), 
            a.preventDefault(), k(b));
        }), j.on("phone:enter tablet:enter desktop:enter", function() {
            e.update(o.section);
        }), e.update(o.section), o.on("before", function() {
            f.show();
        }).on("success error", function() {
            f.hide();
        }).on("error", function(a) {
            var b = c(".js-profile-nav");
            i(b, a.messages);
        }), o.trigger("init");
    }, o;
});
define('profile/lib/emptyTemplateData',[ "page_constants", "page_config", "profile/lib/model" ], function(a, b, c) {
    "use strict";
    return {
        PAGE_URLS: a.PAGE_URLS,
        layout: {
            is_member: b.is_member || !1
        },
        is_team: b.is_team,
        profile: c.toJSON()
    };
});

define("require/hgn!templates/profile/user/_empty/_collections", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"empty-wrap\">");t.b("\n" + i);if(t.s(t.d("profile.is_profile_owner",c,p,1),c,p,0,56,217,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <h1 class=\"empty-header\">You haven't started a collection yet.</h1>");t.b("\n" + i);t.b("    To create one, click the \"Add to Collection\" button at the bottom of any project.");t.b("\n" + i);});c.pop();}if(!t.s(t.d("profile.is_profile_owner",c,p,1),c,p,1,0,0,"")){t.b("    <h1 class=\"empty-header\">");t.b(t.v(t.d("profile.display_name",c,p,0)));t.b(" hasn't started a collection yet.</h1>");t.b("\n" + i);};t.b("  Use the <a href=\"");t.b(t.v(t.d("PAGE_URLS.SEARCH",c,p,0)));t.b("\">Discover</a> tab");t.b("\n" + i);t.b("  or browse <a href=\"");t.b(t.v(t.d("PAGE_URLS.GALLERIES",c,p,0)));t.b("\">galleries</a> of creative work,");t.b("\n" + i);t.b("  to discover great projects.");t.b("\n" + i);t.b("</div>");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/profile/user/_empty/_collectionsFollowing", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"empty-wrap\">");t.b("\n" + i);if(t.s(t.d("profile.is_profile_owner",c,p,1),c,p,0,56,309,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <h1 class=\"empty-header\">You haven't followed a collection yet.</h1>");t.b("\n" + i);t.b("    To follow a collection, click the \"Follow Collection\" button.  Get started by checking out a gallery of <a href=\"");t.b(t.v(t.d("PAGE_URLS.POPULAR_COLLECTIONS",c,p,0)));t.b("\">popular collections</a>.");t.b("\n" + i);});c.pop();}if(!t.s(t.d("profile.is_profile_owner",c,p,1),c,p,1,0,0,"")){t.b("    <h1 class=\"empty-header\">");t.b(t.v(t.d("profile.display_name",c,p,0)));t.b(" hasn't followed a collection yet.</h1>");t.b("\n" + i);t.b("    Use the <a href=\"");t.b(t.v(t.d("PAGE_URLS.SEARCH",c,p,0)));t.b("\">Discover</a> tab");t.b("\n" + i);t.b("    or browse <a href=\"");t.b(t.v(t.d("PAGE_URLS.GALLERIES",c,p,0)));t.b("\">galleries</a> of creative work,");t.b("\n" + i);t.b("    to discover great projects.");t.b("\n" + i);};t.b("</div>");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/profile/_empty/_followers", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"empty-wrap\">");t.b("\n" + i);if(t.s(t.f("is_team",c,p,1),c,p,0,37,541,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("search",c,p,1),c,p,0,51,268,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <h1 class=\"empty-header\">");t.b(t.v(t.d("profile.display_name",c,p,0)));t.b(" does not have any followers with the name ");t.b(t.v(t.f("search",c,p,0)));t.b(".</h1>");t.b("\n" + i);t.b("    Explore our <a href=\"");t.b(t.v(t.d("PAGE_URLS.CREATIVES_TO_FOLLOW",c,p,0)));t.b("\">curated list of creatives to follow.</a>");t.b("\n" + i);});c.pop();}if(!t.s(t.f("search",c,p,1),c,p,1,0,0,"")){t.b("    <h1 class=\"empty-header\">");t.b(t.v(t.d("profile.display_name",c,p,0)));t.b(" doesn't have any followers.</h1>");t.b("\n" + i);t.b("    Please check back soon.  Until then, you can explore our <a href=\"");t.b(t.v(t.d("PAGE_URLS.CREATIVES_TO_FOLLOW",c,p,0)));t.b("\">curated list of creatives to follow.</a>");t.b("\n" + i);};});c.pop();}t.b("\n" + i);if(!t.s(t.f("is_team",c,p,1),c,p,1,0,0,"")){if(t.s(t.d("profile.is_profile_owner",c,p,1),c,p,0,597,927,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("search",c,p,1),c,p,0,611,704,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <h1 class=\"empty-header\">You do not have any followers with the name ");t.b(t.v(t.f("search",c,p,0)));t.b(".</h1>");t.b("\n" + i);});c.pop();}if(!t.s(t.f("search",c,p,1),c,p,1,0,0,"")){t.b("    <h1 class=\"empty-header\">You don't have any followers.</h1>");t.b("\n" + i);};t.b("  To get started, <a href=\"");t.b(t.v(t.d("PAGE_URLS.PROJECT_EDITOR",c,p,0)));t.b("\">publish a project</a> and promote it on your social networks.");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(!t.s(t.d("profile.is_profile_owner",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("search",c,p,1),c,p,0,1001,1217,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <h1 class=\"empty-header\">");t.b(t.v(t.d("profile.display_name",c,p,0)));t.b(" doesn't have any followers with the name ");t.b(t.v(t.f("search",c,p,0)));t.b(".</h1>");t.b("\n" + i);t.b("    Explore our <a href=\"");t.b(t.v(t.d("PAGE_URLS.CREATIVES_TO_FOLLOW",c,p,0)));t.b("\">curated list of creatives to follow.</a>");t.b("\n" + i);});c.pop();}if(!t.s(t.f("search",c,p,1),c,p,1,0,0,"")){t.b("    <h1 class=\"empty-header\">");t.b(t.v(t.d("profile.display_name",c,p,0)));t.b(" doesn't have any followers</h1>");t.b("\n" + i);t.b("    Please check back soon. Until then, you can explore our <a href=\"");t.b(t.v(t.d("PAGE_URLS.CREATIVES_TO_FOLLOW",c,p,0)));t.b("\">curated list of creatives to follow.</a>");t.b("\n" + i);};};};t.b("</div>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/profile/user/_empty/_following", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"empty-wrap\">");t.b("\n" + i);if(t.s(t.d("profile.is_profile_owner",c,p,1),c,p,0,54,370,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("search",c,p,1),c,p,0,68,163,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <h1 class=\"empty-header\">You are not following any users with the name ");t.b(t.v(t.f("search",c,p,0)));t.b(".</h1>");t.b("\n" + i);});c.pop();}if(!t.s(t.f("search",c,p,1),c,p,1,0,0,"")){t.b("    <h1 class=\"empty-header\">You aren't following any members.</h1>");t.b("\n" + i);};t.b("  Explore our <a href=\"");t.b(t.v(t.d("PAGE_URLS.CREATIVES_TO_FOLLOW",c,p,0)));t.b("\">curated list of creatives to follow.</a>");t.b("\n" + i);});c.pop();}if(!t.s(t.d("profile.is_profile_owner",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("search",c,p,1),c,p,0,443,556,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <h1 class=\"empty-header\">");t.b(t.v(t.d("profile.display_name",c,p,0)));t.b(" isn't following any members with the name ");t.b(t.v(t.f("search",c,p,0)));t.b("</h1>");t.b("\n" + i);});c.pop();}if(!t.s(t.f("search",c,p,1),c,p,1,0,0,"")){t.b("  <h1 class=\"empty-header\">");t.b(t.v(t.d("profile.display_name",c,p,0)));t.b(" isn't following any members.</h1>");t.b("\n" + i);};t.b("  Please check back soon. Until then, you can explore our <a href=\"");t.b(t.v(t.d("PAGE_URLS.CREATIVES_TO_FOLLOW",c,p,0)));t.b("\">curated list of creatives to follow.</a>");t.b("\n" + i);};t.b("</div>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/profile/_empty/_projects", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"empty-projects\" class=\"empty-wrap\">");t.b("\n" + i);if(t.s(t.f("is_team",c,p,1),c,p,0,57,432,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <h1 class=\"empty-header\">This team has no projects</h1>");t.b("\n" + i);if(t.s(t.d("layout.is_member",c,p,1),c,p,0,139,238,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    You can add projects to a team profile from the project settings section in project editor.");t.b("\n" + i);});c.pop();}if(!t.s(t.d("layout.is_member",c,p,1),c,p,1,0,0,"")){t.b("    Please check back soon. Until then, you can explore other creative work in <a href=\"");t.b(t.v(t.d("PAGE_URLS.SEARCH",c,p,0)));t.b("\">Discover</a>.");t.b("\n" + i);};});c.pop();}t.b("\n" + i);if(!t.s(t.f("is_team",c,p,1),c,p,1,0,0,"")){if(t.s(t.d("profile.is_profile_owner",c,p,1),c,p,0,488,1157,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\n" + i);t.b("  <div class=\"profile-empty-sprite profile-empty-projects-empty\"></div>");t.b("\n" + i);t.b("  <h1 class=\"empty-header\">Add Projects to Your Portfolio</h1>");t.b("\n" + i);t.b("  <div class=\"hide-phone hide-tablet\">");t.b("\n" + i);t.b("    Projects added to your portfolio (and made public) are submitted to the gallery and eligible to be \"featured\".");t.b("\n");t.b("\n" + i);t.b("    <a href=\"");t.b(t.v(t.d("PAGE_URLS.PROJECT_EDITOR",c,p,0)));t.b("\" id=\"upload-project\" class=\"form-button form-button-massive form-button-default\">Upload My First Project</a>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);t.b("  <div class=\"show-phone show-tablet\">");t.b("\n" + i);t.b("    You haven't uploaded any projects. Add projects to your portfolio from the desktop or our <a href=\"");t.b(t.v(t.d("PAGE_URLS.APPS_DOWNLOAD_NETWORK",c,p,0)));t.b("\" target=\"_blank\">iOS app</a>.");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(!t.s(t.d("profile.is_profile_owner",c,p,1),c,p,1,0,0,"")){t.b("  <h1 class=\"empty-header\">");t.b(t.v(t.d("profile.display_name",c,p,0)));t.b(" hasn't uploaded any projects.</h1>");t.b("\n" + i);t.b("  Please check back soon. Until then, you can explore other creative work in <a href=\"");t.b(t.v(t.d("PAGE_URLS.SEARCH",c,p,0)));t.b("\">Discover</a>.");t.b("\n" + i);};};t.b("</div>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/profile/user/_empty/_teamMembers", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"empty-wrap\">");t.b("\n" + i);if(t.s(t.d("profile.is_profile_owner",c,p,1),c,p,0,54,371,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("search",c,p,1),c,p,0,68,164,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <h1 class=\"empty-header\">You do not have any team members with the name ");t.b(t.v(t.f("search",c,p,0)));t.b(".</h1>");t.b("\n" + i);});c.pop();}if(!t.s(t.f("search",c,p,1),c,p,1,0,0,"")){t.b("    <h1 class=\"empty-header\">You do not have any team members.</h1>");t.b("\n" + i);};t.b("  Explore our <a href=\"");t.b(t.v(t.d("PAGE_URLS.CREATIVES_TO_FOLLOW",c,p,0)));t.b("\">curated list of creatives to follow.</a>");t.b("\n" + i);});c.pop();}if(!t.s(t.d("profile.is_profile_owner",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("search",c,p,1),c,p,0,444,560,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <h1 class=\"empty-header\">");t.b(t.v(t.d("profile.display_name",c,p,0)));t.b(" does not have any team members with the name ");t.b(t.v(t.f("search",c,p,0)));t.b("</h1>");t.b("\n" + i);});c.pop();}if(!t.s(t.f("search",c,p,1),c,p,1,0,0,"")){t.b("  <h1 class=\"empty-header\">");t.b(t.v(t.d("profile.display_name",c,p,0)));t.b(" does not have any team members.</h1>");t.b("\n" + i);};t.b("  Please check back soon. Until then, you can explore our <a href=\"");t.b(t.v(t.d("PAGE_URLS.CREATIVES_TO_FOLLOW",c,p,0)));t.b("\">curated list of creatives to follow.</a>");t.b("\n" + i);};t.b("</div>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/profile/_empty/_wip", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"empty-wips\" class=\"empty-wrap\">");t.b("\n" + i);if(t.s(t.f("is_team",c,p,1),c,p,0,53,194,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <h1 class=\"empty-header\">This team has no works in progress</h1>");t.b("\n" + i);t.b("  You can add works in progress to a team profile from the WIP settings.");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(!t.s(t.f("is_team",c,p,1),c,p,1,0,0,"")){if(t.s(t.d("profile.is_profile_owner",c,p,1),c,p,0,250,875,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"profile-empty-sprite profile-empty-wips-empty\"></div>");t.b("\n" + i);t.b("  <h1 class=\"empty-header\">Upload Work In Progress</h1>");t.b("\n" + i);t.b("  <div class=\"hide-phone hide-tablet\">");t.b("\n" + i);t.b("    \"Work In Progress\" helps you get feedback from your network.  Snapshots can be shared publicly or privately.");t.b("\n" + i);t.b("    <a id=\"new-wip\" class=\"js-wip-create form-button form-button-massive form-button-default\">Upload My First WIP</a>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);t.b("  <div class=\"show-phone show-tablet\">");t.b("\n" + i);t.b("    You haven't uploaded any Work in Progress. Add WIPs to your portfolio from the desktop or our <a href=\"");t.b(t.v(t.d("PAGE_URLS.APPS_DOWNLOAD_NETWORK",c,p,0)));t.b("\" target=\"_blank\">iOS app</a>.");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(!t.s(t.d("profile.is_profile_owner",c,p,1),c,p,1,0,0,"")){t.b("  <h1 class=\"empty-header\">");t.b(t.v(t.d("profile.display_name",c,p,0)));t.b(" hasn't uploaded any work in progress.</h1>");t.b("\n" + i);t.b("  Please check back soon. Until then, you can explore other creative work in <a href=\"");t.b(t.v(t.d("PAGE_URLS.SEARCH",c,p,0)));t.b("\">Discover</a>.");t.b("\n" + i);};};t.b("</div>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('profile/user/lib/emptyTemplateMap',[ "hgn!templates/profile/user/_empty/_collections", "hgn!templates/profile/user/_empty/_collectionsFollowing", "hgn!templates/profile/_empty/_followers", "hgn!templates/profile/user/_empty/_following", "hgn!templates/profile/_empty/_projects", "hgn!templates/profile/user/_empty/_teamMembers", "hgn!templates/profile/_empty/_wip" ], function(a, b, c, d, e, f, g) {
    "use strict";
    var h = {
        projects: e,
        wip: g,
        followers: c,
        following: d,
        team_members: f,
        collections: a,
        collections_following: b,
        appreciated: a
    };
    return function(a) {
        return h[a];
    };
});
define('be/sortableScrollHack',[ "jquery" ], function(a) {
    "use strict";
    return {
        init: function() {
            var b = a(window), c = a("html");
            b.scrollTop() > 0 ? c.css("overflow", "visible") : b.one("scroll", function() {
                c.css("overflow", "visible");
            });
        }
    };
});

define("require/hgn!templates/profile/_nav/_teamList", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<h1 class=\"teams-dropdown-header\">");t.b("\n" + i);t.b("  My Teams");t.b("\n" + i);t.b("</h1>");t.b("\n" + i);t.b("<ul class=\"teams-dropdown-list\">");t.b("\n" + i);if(t.s(t.f("data",c,p,1),c,p,0,96,224,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <li class=\"teams-dropdown-team\"><a href=\"");t.b(t.v(t.d("urls.relative",c,p,0)));t.b("\" class=\"");if(t.s(t.f("is_active",c,p,1),c,p,0,182,188,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("active");});c.pop();}t.b("\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a></li>");t.b("\n" + i);});c.pop();}t.b("</ul>");t.b("\n" + i);t.b("<a class=\"teams-dropdown-add-team\" href=\"");t.b(t.v(t.f("onboarding_url",c,p,0)));t.b("\">+ Add New Page</a>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('profile/lib/TeamListDropdown',[ "jquery", "be/Controller/Dialog/Roulette", "be/View/Dialog/Layover", "be/View/Dialog/Menu", "hgn!templates/profile/_nav/_teamList" ], function(a, b, c, d, e) {
    "use strict";
    var f, g;
    return f = {
        mustache: e,
        templateData: function() {
            var a = this._super();
            return a.title = "My Teams", a.classes = [ "teams-dropdown" ], a;
        }
    }, g = {
        position: function() {
            this.$view.appendTo(".js-teams-dropdown-wrap");
        }
    }, b.extend({}, {
        VIEW_CLASS: {
            phone: c.extend(f),
            tablet: d.extend(f).extend(g),
            desktop: d.extend(f).extend(g)
        }
    });
});
define('profile/lib/headerNav',[ "page_config", "jquery", "nbd/util/media", "be/iscrollnav", "profile/lib/TeamListDropdown" ], function(a, b, c, d, e) {
    "use strict";
    function f(a) {
        c.is("phone") && !g && (g = d(a));
    }
    var g;
    return {
        init: function() {
            var d, g = b(".js-profile-owner-header");
            g.length && (d = new e(a.team_links), d.setContext(g.find(".js-teams-dropdown-toggle")), 
            c.on("phone:enter", function() {
                f(g);
            }), f(g));
        }
    };
});
define('profile/lib/bindings',[ "page_config", "jquery", "be/error", "be/follow", "be/moreToggle", "be/sortableScrollHack", "be/spam", "be/stats", "profile/lib/coordinator", "profile/lib/headerNav" ], function(a, b, c, d, e, f, g, h, i, j) {
    "use strict";
    return {
        init: function(a, b, c) {
            this._$context = a, this.render(), this.stats(b, c), this.readMore(), this.follow(b, c), 
            this.errors(), f.init(), this.spam(b, c), j.init();
        },
        spam: function(a, c) {
            this._$context.find(".js-spam").on("click", function(d) {
                d.preventDefault(), g.report(a, c, b(this));
            });
        },
        errors: function() {
            c.init(".js-gallery"), i.on("error", function(a) {
                this._$context.find(".js-gallery").addClass("error"), c.show(a);
            }.bind(this));
        },
        render: function() {
            b(document.body).picturefill();
        },
        readMore: function() {
            e(this._$context.find(".variable-text-short"));
        },
        stats: function(a, b) {
            "team" !== a && h.get({
                action: "s",
                entity: a,
                type: "views",
                time: "all",
                ids: b,
                callback: function(a) {
                    this._$context.find(".js-project-views-count").html(a.proj_views), this._$context.find(".js-appreciations-count").html(a.appreciations);
                }
            }), h.view(a, b);
        },
        follow: function(a, b) {
            var c = this._$context.find(".js-followers-count"), e = this._$context.find(".js-following-count");
            d.init(this._$context.find(".js-profile-action-follow")), d.init(this._$context.find(".js-profile-info-wrap")), 
            d.on("following", function(d, f, g) {
                var h = d === b && g === a ? c : e;
                h.text(+h.text() + (f ? 1 : -1));
            });
        }
    };
});
define('profile/user/lib/bindings',[ "be/Controller/Dialog/AddToTalentSearch", "be/Controller/Dialog/Message", "be/spam", "profile/lib/bindings", "profile/lib/model", "hgn!templates/talent/_addedTalentSearchList" ], function(a, b, c, d, e, f) {
    "use strict";
    return {
        init: function(a) {
            var c = "user", f = e.id();
            this._$context = a, d.init(this._$context, c, f), b.init(this._$context), this.talent();
        },
        talent: function() {
            var b = this._$context.find(".js-add-talent");
            b.length && (this.talent = new a(b.data("id")), this.talent.setContext(b), this.talent.on("update", function(a) {
                this._$context.find(".js-added-talent-searches").html(f({
                    searches_added_to: a.join(", ")
                }));
            }.bind(this)));
        }
    };
});

define("require/hgn!templates/lib/_editButton", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span class=\"js-edit-icon content-edit edit-icon beicons-pre beicons-pre-edit hide-tablet hide-phone\"></span>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/lib/_reorderButton", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-controls-overlay-reorder controls-overlay-action controls-overlay-reorder\">");t.b("\n" + i);t.b("    <span class=\"beicons-pre beicons-pre-hamburger edit-icon\"></span>");t.b("\n" + i);t.b("</div>");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/profile/_overlays/_projectOverlay", ["hogan", "require/hgn!templates/lib/_reorderButton", "require/hgn!templates/lib/_editButton"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"controls-overlay hide-phone hide-tablet\">");t.b("\n" + i);if(t.s(t.f("is_team",c,p,1),c,p,0,68,157,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("is_admin_editable",c,p,1),c,p,0,95,132,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<lib/_reorderButton0",c,p,"      "));});c.pop();}});c.pop();}if(!t.s(t.f("is_team",c,p,1),c,p,1,0,0,"")){t.b(t.rp("<lib/_reorderButton1",c,p,"    "));};t.b("  <div class=\"controls-overlay-action controls-overlay-menu tooltipi-container\">");t.b("\n" + i);t.b(t.rp("<lib/_editButton2",c,p,"    "));t.b("    <ul class=\"tooltipi tooltipi-white controls-overlay-menu-items\">");t.b("\n" + i);if(!t.s(t.f("is_team",c,p,1),c,p,1,0,0,"")){t.b("        <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("          <a href=\"");t.b(t.v(t.f("edit_url",c,p,0)));t.b("\" class=\"js-project-edit beicons-pre beicons-pre-edit\">");t.b("\n" + i);t.b("            Edit");t.b("\n" + i);t.b("          </a>");t.b("\n" + i);t.b("        </li>");t.b("\n" + i);t.b("        <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("          <a href=\"#\" class=\"js-project-clone beicons-pre beicons-pre-clone\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);t.b("            Clone");t.b("\n" + i);t.b("          </a>");t.b("\n" + i);t.b("        </li>");t.b("\n" + i);if(t.s(t.f("share_url",c,p,1),c,p,0,819,1034,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("          <a href=\"");t.b(t.v(t.f("share_url",c,p,0)));t.b("\" class=\"js-project-promote beicons-pre beicons-pre-share\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);t.b("            Promote");t.b("\n" + i);t.b("          </a>");t.b("\n" + i);t.b("        </li>");t.b("\n" + i);});c.pop();}t.b("        <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("          <a href=\"#\" class=\"js-project-unpublish beicons-pre beicons-pre-unpublish\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);t.b("            Unpublish");t.b("\n" + i);t.b("          </a>");t.b("\n" + i);t.b("        </li>");t.b("\n" + i);t.b("        <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("          <a href=\"#\" class=\"js-project-delete beicons-pre beicons-pre-delete\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);t.b("            Delete");t.b("\n" + i);t.b("          </a>");t.b("\n" + i);t.b("        </li>");t.b("\n" + i);};if(t.s(t.f("is_team",c,p,1),c,p,0,1481,2008,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.f("is_member_editable",c,p,1),c,p,0,1513,1713,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("            <a href=\"");t.b(t.v(t.f("edit_url",c,p,0)));t.b("\" class=\"js-project-edit beicons-pre beicons-pre-edit\">");t.b("\n" + i);t.b("              Edit");t.b("\n" + i);t.b("            </a>");t.b("\n" + i);t.b("          </li>");t.b("\n" + i);});c.pop();}if(t.s(t.f("is_admin_editable",c,p,1),c,p,0,1767,1979,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("            <a href=\"#\" class=\"js-project-remove beicons-pre beicons-pre-delete\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);t.b("              Remove");t.b("\n" + i);t.b("            </a>");t.b("\n" + i);t.b("          </li>");t.b("\n" + i);});c.pop();}});c.pop();}t.b("    </ul>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<lib/_reorderButton0":{name:"lib/_reorderButton", partials: {}, subs: {  }},"<lib/_reorderButton1":{name:"lib/_reorderButton", partials: {}, subs: {  }},"<lib/_editButton2":{name:"lib/_editButton", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "lib/_reorderButton": arguments[1].template,"lib/_editButton": arguments[2].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/lib/_projectCover", ["hogan", "require/hgn!templates/lib/_editButton", "require/hgn!templates/profile/_overlays/_projectOverlay"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-item cover-block project-cover js-project-cover editable cfix\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");if(t.s(t.f("ordinal_id",c,p,1),c,p,0,109,139,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" data-ordinal=\"");t.b(t.v(t.f("ordinal_id",c,p,0)));t.b("\"");});c.pop();}t.b(">");t.b("\n" + i);if(t.s(t.f("is_collection_editable",c,p,1),c,p,0,185,215,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<lib/_editButton0",c,p,"    "));});c.pop();}if(!t.s(t.f("is_collection_editable",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("is_editable",c,p,1),c,p,0,291,339,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<profile/_overlays/_projectOverlay1",c,p,"    "));});c.pop();}};t.b("  <div class=\"cover-img\">");t.b("\n" + i);t.b("    <a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"cover-img-link\">");t.b("\n" + i);if(t.s(t.d("covers.404",c,p,1),c,p,0,479,1208,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div data-picture=\"\" data-alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">");t.b("\n" + i);t.b("          <div alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-src=\"");t.b(t.v(t.d("covers.202",c,p,0)));t.b("\" data-class=\"cover-img-el cover-img-standard\" data-title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-pin-nopin=\"nopin\"></div>");t.b("\n" + i);t.b("          <div alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-src=\"");t.b(t.v(t.d("covers.404",c,p,0)));t.b("\" data-class=\"cover-img-el cover-img-2x\" data-title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-pin-nopin=\"nopin\" data-media=\"(-webkit-min-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("             (min--moz-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("             (-o-min-device-pixel-ratio: 4/3),");t.b("\n" + i);t.b("             (min-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("             (min-resolution: 1.3dppx)\"></div>");t.b("\n" + i);t.b("      </div>");t.b("\n" + i);t.b("      <noscript><img alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" src=\"");t.b(t.v(t.d("covers.202",c,p,0)));t.b("\" class=\"cover-img-el cover-img-standard\" /></noscript>");t.b("\n" + i);});c.pop();}if(!t.s(t.d("covers.404",c,p,1),c,p,1,0,0,"")){t.b("        <img src=\"");t.b(t.v(t.d("covers.202",c,p,0)));t.b("\" alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" class=\"cover-img-el cover-img-standard\" data-pin-nopin=\"nopin\" />");t.b("\n" + i);};t.b("    </a>");t.b("\n" + i);t.b("  </div>");t.b("\n");t.b("\n" + i);if(t.s(t.f("private",c,p,1),c,p,0,1433,1697,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\n" + i);t.b("    <div class=\"tooltipi-container project-private pointer\">");t.b("\n");t.b("\n" + i);t.b("      <div class=\"beicons-pre beicons-pre-privacy\"></div>");t.b("\n");t.b("\n" + i);t.b("      <div class=\"tooltipi\">");t.b("\n" + i);t.b("        This project is marked as private.");t.b("\n" + i);t.b("      </div>");t.b("\n" + i);t.b("    </div> <!-- .tooltipi-container .wip-private -->");t.b("\n");t.b("\n" + i);});c.pop();}t.b("\n");t.b("\n" + i);t.b("  <div class=\"cover-info-stats\">");t.b("\n");t.b("\n" + i);t.b("    <div class=\"cover-info\">");t.b("\n");t.b("\n" + i);t.b("      <div class=\"cover-name\">");t.b("\n" + i);t.b("        <a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"projectName cover-name-link\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a>");t.b("\n" + i);t.b("      </div>");t.b("\n");t.b("\n" + i);t.b("      <div class=\"cover-by-wrap\">");t.b("\n" + i);t.b("        <div class=\"cover-by\">by</div>");t.b("\n" + i);t.b("        <div class=\"cover-by-link ");if(t.s(t.f("multiple_owners",c,p,1),c,p,0,2023,2040,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("multiple-cover-by");});c.pop();}t.b("\">");t.b("\n" + i);if(t.s(t.f("multiple_owners",c,p,1),c,p,0,2093,2238,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <div class=\"multiple-owners-list tooltipi-container\">");t.b("\n" + i);t.b("            Multiple Owners<ul class=\"tooltipi tooltipi-white-links\">");t.b("\n" + i);});c.pop();}if(t.s(t.f("owners",c,p,1),c,p,0,2284,2962,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              ");if(t.s(t.f("multiple_owners",c,p,1),c,p,0,2319,2337,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<li class=\"clear\">");});c.pop();}t.b("\n" + i);t.b("                <a class=\"");if(t.s(t.f("multiple_owners",c,p,1),c,p,0,2404,2423,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("multiple-owner-link");});c.pop();}if(!t.s(t.f("multiple_owners",c,p,1),c,p,1,0,0,"")){t.b("text-ellipsis single-owner-link");};t.b("\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">");t.b("\n");t.b("\n" + i);if(t.s(t.f("multiple_owners",c,p,1),c,p,0,2571,2732,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("                    <span class=\"multiple-owner-image-container\"><img class=\"multiple-owner-image js-mini-profile\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" src=\"");t.b(t.v(t.d("images.50",c,p,0)));t.b("\"/></span>");});c.pop();}t.b("<!--this must touch to avoid extra space--><span class=\"js-mini-profile\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b(t.v(t.f("display_name",c,p,0)));t.b("</span>");t.b("\n" + i);t.b("                </a>");t.b("\n");t.b("\n" + i);t.b("              ");if(t.s(t.f("multiple_owners",c,p,1),c,p,0,2922,2927,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("</li>");});c.pop();}t.b("\n" + i);});c.pop();}if(t.s(t.f("multiple_owners",c,p,1),c,p,0,3004,3048,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          </ul>");t.b("\n" + i);t.b("          </div>");t.b("\n" + i);});c.pop();}t.b("        </div>");t.b("\n" + i);t.b("      </div><!-- .cover-by-wrap -->");t.b("\n");t.b("\n" + i);t.b("    </div><!-- .cover-info -->");t.b("\n");t.b("\n" + i);t.b("    <div class=\"cover-stat-fields-wrap\">");t.b("\n");t.b("\n" + i);t.b("      <div class=\"cover-stat-wrap\">");t.b("\n");t.b("\n" + i);t.b("        <span class=\"cover-stat cover-stat-");t.b(t.v(t.d("footer.top_title",c,p,0)));t.b(" ");if(t.s(t.d("footer.highlighted",c,p,1),c,p,0,3319,3341,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("cover-stat-highlighted");});c.pop();}if(t.s(t.d("footer.top_icon",c,p,1),c,p,0,3384,3428,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" beicons-pre beicons-pre-");t.b(t.v(t.d("footer.top_icon",c,p,0)));});c.pop();}t.b("\">");t.b(t.v(t.d("footer.top_value",c,p,0)));t.b("</span>");t.b("\n" + i);t.b("        <span class=\"cover-stat cover-stat-");t.b(t.v(t.d("footer.bottom_title",c,p,0)));t.b(" beicons-pre beicons-pre-");t.b(t.v(t.d("footer.bottom_icon",c,p,0)));t.b(" hide-phone\">");t.b(t.v(t.d("footer.bottom_value",c,p,0)));t.b("</span>");t.b("\n");t.b("\n" + i);if(t.s(t.f("featured_on",c,p,1),c,p,0,3660,3912,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <div class=\"featured tooltipi-container beicons-pre beicons-pre-featured-small\">");t.b("\n");t.b("\n" + i);t.b("            <div class=\"tooltipi\">");t.b("\n" + i);t.b("              Featured On: <strong>");t.b(t.v(t.f("featured_on",c,p,0)));t.b("</strong>");t.b("\n" + i);t.b("            </div>");t.b("\n");t.b("\n" + i);t.b("          </div> <!-- .featured -->");t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("      </div><!-- .cover-stat-wrap -->");t.b("\n");t.b("\n" + i);t.b("      <div class=\"cover-fields\">");t.b("\n" + i);if(t.s(t.f("field_links",c,p,1),c,p,0,4026,4140,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" class=\"field-link\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a>");if(t.s(t.f("separate",c,p,1),c,p,0,4116,4118,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(", ");});c.pop();}t.b("\n" + i);});c.pop();}t.b("      </div><!-- .cover-fields -->");t.b("\n");t.b("\n" + i);t.b("    </div><!-- .cover-info -->");t.b("\n");t.b("\n" + i);t.b("  </div><!-- #cover-stat-fields-wrap -->");t.b("\n");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<lib/_editButton0":{name:"lib/_editButton", partials: {}, subs: {  }},"<profile/_overlays/_projectOverlay1":{name:"profile/_overlays/_projectOverlay", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "lib/_editButton": arguments[1].template,"profile/_overlays/_projectOverlay": arguments[2].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('profile/user/View/Project',[ "page_constants", "jquery", "nbd/util/pipe", "be/xhr", "be/handleResponse", "be/modal/validate", "profile/lib/coordinator", "profile/lib/decorateModal", "profile/lib/emptyTemplateData", "profile/lib/model", "profile/View/Content", "project/popup", "hgn!templates/lib/_projectCover", "jquery/ui/sortable" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
    "use strict";
    l.init();
    var n = function(a) {
        b(this).closest(".project-cover").toggleClass("hover", "mouseenter" === a.type);
    }, o = function() {
        this.$parent.sortable({
            handle: ".js-controls-overlay-reorder",
            containment: ".js-gallery",
            tolerance: "pointer",
            forcePlaceholderSize: !0
        }).on("sortupdate", function(b, c) {
            d({
                url: a.PROJECTS.ORDER_URL,
                type: "POST",
                data: {
                    id: c.item.data("id"),
                    after_id: c.item.prev().data("id") || 0
                }
            }).then(null, function(a) {
                g.trigger("error", e.singleError(a));
            });
        }), this.on("postrender", function() {
            this.$parent.sortable("refresh");
        });
    }, p = function() {
        var c = this;
        this.$parent.on("click", ".js-project-delete", function() {
            var e = b(this).data("id");
            f(h({
                title: "Delete Project",
                html: "Are you sure you want to delete this project? All images, text, appreciations, and views associated with this project will be permanently deleted.",
                buttons: [ {
                    label: "Delete",
                    classes: [ "form-button-default", "js-confirm" ]
                }, {
                    label: "Cancel",
                    classes: [ "form-button-cancel", "js-cancel" ]
                } ]
            }), {
                waitingText: "Deleting...",
                promiseGenerator: function() {
                    return d({
                        url: a.PROJECTS.DELETE_URL,
                        data: {
                            id: e
                        },
                        type: "POST"
                    }).then(function(a) {
                        return s.call(c, e, a.count), a;
                    });
                }
            });
        });
    }, q = function() {
        var c = this;
        this.$parent.on("click", ".js-project-unpublish", function() {
            var e = b(this).data("id");
            f(h({
                title: "Unpublish Project",
                html: "Are you sure you want to unpublish this project?",
                buttons: [ {
                    label: "Unpublish",
                    classes: [ "form-button-default", "js-confirm" ]
                }, {
                    label: "Cancel",
                    classes: [ "form-button-cancel", "js-cancel" ]
                } ]
            }), {
                waitingText: "Unpublishing...",
                promiseGenerator: function() {
                    return d({
                        url: a.PROJECTS.UNPUBLISH_URL,
                        data: {
                            id: e
                        },
                        type: "POST"
                    }).then(function(a) {
                        return s.call(c, e, a.count.published), t(a.project, a.count.unpublished), a;
                    });
                }
            });
        });
    }, r = function() {
        this.$parent.on("click", ".js-project-clone", function() {
            var c = b(this).data("id");
            f(h({
                title: "Clone Project as New Draft",
                html: "This creates a new, unpublished clone of your project. Everything in the project will be duplicated, except project settings and project stats.",
                buttons: [ {
                    label: "Create Draft",
                    classes: [ "form-button-default", "js-confirm" ]
                }, {
                    label: "Cancel",
                    classes: [ "form-button-cancel", "js-cancel" ]
                } ]
            }), {
                waitingText: "Cloning...",
                promiseGenerator: function() {
                    return d({
                        url: a.PROJECTS.CLONE_URL,
                        data: {
                            id: c
                        },
                        type: "POST"
                    }).then(function(a) {
                        return t(a.project, a.count), a;
                    });
                }
            });
        });
    }, s = function(a, c) {
        b(".js-project-cover[data-id=" + a + "]").remove(), 0 === c && this.setEmpty(i);
    }, t = function(a, b) {
        g.trigger("draft-add", a, b);
    };
    return k.extend({
        rendered: function() {
            this.fatclick(), this.picturefill();
        },
        bind: function() {
            this.$parent.on("mouseenter mouseleave", ".cover-name-link, .cover-img, .controls-overlay, .edit-icon", n), 
            j.get("is_profile_owner") && (o.call(this), p.call(this), q.call(this), r.call(this));
        },
        unbind: function() {
            this.$parent.off("mouseenter mouseleave", ".cover-name-link, .cover-img, .controls-overlay, .edit-icon", n), 
            j.get("is_profile_owner") && (this.off("postrender"), this.$parent.sortable("destroy").off("sortupdate").off("click", ".js-project-delete").off("click", ".js-project-clone").off("click", ".js-project-unpublish"));
        },
        template: c(m, b)
    });
});

define("require/hgn!templates/profile/user/_overlays/_wipOverlay", ["hogan", "require/hgn!templates/lib/_editButton"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"controls-overlay hide-phone hide-tablet\">");t.b("\n" + i);t.b("  <div class=\"controls-overlay-action controls-overlay-menu tooltipi-container\">");t.b("\n" + i);t.b(t.rp("<lib/_editButton0",c,p,"    "));t.b("    <ul class=\"tooltipi tooltipi-white controls-overlay-menu-items\">");t.b("\n" + i);if(!t.s(t.f("is_team",c,p,1),c,p,1,0,0,"")){t.b("      <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("        <a href=\"#\" class=\"beicons-pre beicons-pre-edit js-wip-edit\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-revision-id=\"");t.b(t.v(t.f("latest_revision",c,p,0)));t.b("\">Edit</a>");t.b("\n" + i);t.b("      </li>");t.b("\n" + i);t.b("      <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("        <a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("?share=1\" class=\"beicons-pre beicons-pre-share js-wip-promote wip-action-popup\">Promote</a>");t.b("\n" + i);t.b("      </li>");t.b("\n" + i);t.b("      <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("        <a href=\"#\" class=\"beicons-pre beicons-pre-delete js-wip-delete js-wip-delete-all\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-revision-id=\"");t.b(t.v(t.f("latest_revision",c,p,0)));t.b("\">Delete</a>");t.b("\n" + i);t.b("      </li>");t.b("\n" + i);};if(t.s(t.f("is_team",c,p,1),c,p,0,869,1035,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("        <a href=\"#\" class=\"beicons-pre beicons-pre-delete js-wip-remove\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">Remove</a>");t.b("\n" + i);t.b("      </li>");t.b("\n" + i);});c.pop();}t.b("    </ul>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<lib/_editButton0":{name:"lib/_editButton", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "lib/_editButton": arguments[1].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/lib/_wipCover", ["hogan", "require/hgn!templates/profile/user/_overlays/_wipOverlay"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" class=\"js-wip-cover cover-block wip-block left cfix editable\" wip_id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\"");if(t.s(t.f("ordinal_id",c,p,1),c,p,0,114,144,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" data-ordinal=\"");t.b(t.v(t.f("ordinal_id",c,p,0)));t.b("\"");});c.pop();}t.b(">");t.b("\n" + i);if(t.s(t.f("is_editable",c,p,1),c,p,0,179,228,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<profile/user/_overlays/_wipOverlay0",c,p,"    "));});c.pop();}t.b("\n" + i);t.b("  <div class=\"wip-cover-img-container\" data-aspect-ratio=\"");if(t.s(t.f("safe",c,p,1),c,p,0,313,335,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.d("image.aspect_ratio",c,p,0)));});c.pop();}if(!t.s(t.f("safe",c,p,1),c,p,1,0,0,"")){t.b("1");};t.b("\" data-width=\"");t.b(t.v(t.d("image.width",c,p,0)));t.b("\" data-min-height=\"");t.b(t.v(t.d("image.min_height",c,p,0)));t.b("\" data-max-height=\"");t.b(t.v(t.d("image.max_height",c,p,0)));t.b("\">");t.b("\n");t.b("\n" + i);t.b("    <a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"wip-action wip-action-popup\">");t.b("\n" + i);if(t.s(t.f("safe",c,p,1),c,p,0,548,1282,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.d("latest_thumbs.limit_640",c,p,1),c,p,0,583,1097,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div data-picture=\"\" data-alt=\"");t.b(t.v(t.f("title",c,p,0)));t.b("\">");t.b("\n" + i);t.b("      <div data-src=\"");t.b(t.v(t.d("latest_thumbs.limit_320",c,p,0)));t.b("\" data-class=\"wip-cover-img wip-image\" data-pin-nopin=\"nopin\"></div>");t.b("\n" + i);t.b("      <div data-src=\"");t.b(t.v(t.d("latest_thumbs.limit_640",c,p,0)));t.b("\" data-class=\"wip-cover-img wip-image\" data-pin-nopin=\"nopin\" data-media=\"(-webkit-min-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("        (min--moz-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("        (-o-min-device-pixel-ratio: 4/3),");t.b("\n" + i);t.b("        (min-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("        (min-resolution: 1.3dppx)\"></div>");t.b("\n" + i);t.b("      </div>");t.b("\n" + i);});c.pop();}if(!t.s(t.d("latest_thumbs.limit_640",c,p,1),c,p,1,0,0,"")){t.b("      <img class=\"wip-cover-img wip-image\" src=\"");t.b(t.v(t.d("latest_thumbs.limit_320",c,p,0)));t.b("\" />");t.b("\n" + i);};});c.pop();}if(!t.s(t.f("safe",c,p,1),c,p,1,0,0,"")){t.b("      <div data-picture=\"\" data-alt=\"");t.b(t.v(t.f("title",c,p,0)));t.b("\">");t.b("\n" + i);t.b("      <div data-src=\"");t.b(t.v(t.f("mature_cover",c,p,0)));t.b("\" data-class=\"wip-cover-img wip-image\" data-pin-nopin=\"nopin\"></div>");t.b("\n" + i);t.b("      <div data-src=\"");t.b(t.v(t.f("mature_cover_2x",c,p,0)));t.b("\" data-class=\"wip-cover-img wip-image\" data-pin-nopin=\"nopin\" data-media=\"(-webkit-min-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("        (min--moz-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("        (-o-min-device-pixel-ratio: 4/3),");t.b("\n" + i);t.b("        (min-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("        (min-resolution: 1.3dppx)\"></div>");t.b("\n" + i);t.b("      </div>");t.b("\n" + i);};t.b("\n" + i);t.b("      <span class=\"wip-tall-shadow\"></span>");t.b("\n");t.b("\n" + i);t.b("    </a>");t.b("\n");t.b("\n" + i);t.b("  </div> <!-- .wip-cover-img-container -->");t.b("\n");t.b("\n" + i);t.b("  <div class=\"wip-info\">");t.b("\n");t.b("\n" + i);t.b("    <div class=\"wip-title text-ellipsis\">");t.b("\n" + i);t.b("      <a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"wip-action wip-title-link wip-action-popup\">");t.b(t.v(t.f("title",c,p,0)));t.b("</a>");t.b("\n" + i);t.b("    </div>");t.b("\n" + i);t.b("    <div class=\"wip-owner wip-owner-link text-ellipsis\">by <a href=\"");t.b(t.v(t.d("owner.url",c,p,0)));t.b("\" class=\"js-mini-profile wip-owner-link\" data-id=\"");t.b(t.v(t.d("owner.id",c,p,0)));t.b("\">");t.b(t.v(t.d("owner.display_name",c,p,0)));t.b("</a></div>");t.b("\n");t.b("\n" + i);t.b("  </div> <!-- .wip-info -->");t.b("\n");t.b("\n" + i);if(t.s(t.d("stats.revisions",c,p,1),c,p,0,2310,3370,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\n" + i);if(t.s(t.d("revisions.0",c,p,1),c,p,0,2332,3350,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"wip-revisions wip-section cfix\">");t.b("\n");t.b("\n" + i);if(t.s(t.f("revisions",c,p,1),c,p,0,2405,3296,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\n" + i);t.b("        <a data-revision_id=\"");t.b(t.v(t.d("revisions.wip_id",c,p,0)));t.b("\" class=\"wip-thumbnail wip-image wip-thumbnail-");t.b(t.v(t.d("revision.count",c,p,0)));t.b(" wip-action wip-action-popup\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" data-aspect-ratio=\"1\">");t.b("\n" + i);if(t.s(t.f("safe",c,p,1),c,p,0,2608,3108,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <div data-picture=\"\" data-alt=\"");t.b(t.v(t.f("title",c,p,0)));t.b("\">");t.b("\n" + i);t.b("              <div data-src=\"");t.b(t.v(t.d("images.thumb_40.url",c,p,0)));t.b("\" data-pin-nopin=\"nopin\"></div>");t.b("\n" + i);t.b("              <div data-src=\"");t.b(t.v(t.d("images.thumb_80.url",c,p,0)));t.b("\" data-pin-nopin=\"nopin\" data-media=\"(-webkit-min-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("                 (min--moz-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("                 (-o-min-device-pixel-ratio: 4/3),");t.b("\n" + i);t.b("                 (min-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("                 (min-resolution: 1.3dppx)\"></div>");t.b("\n" + i);t.b("            </div>");t.b("\n" + i);});c.pop();}if(!t.s(t.f("safe",c,p,1),c,p,1,0,0,"")){t.b("            <img src=\"");t.b(t.v(t.f("mature_cover",c,p,0)));t.b("\" />");t.b("\n" + i);};t.b("          <span class=\"wip-revision-overlay\">");t.b(t.v(t.d("revisions.number",c,p,0)));t.b("</span>");t.b("\n" + i);t.b("        </a>");t.b("\n");t.b("\n" + i);});c.pop();}t.b("    </div> <!-- .wip-revisions -->");t.b("\n" + i);});c.pop();}t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("  <div class=\"gallery-stats wip-section\">");t.b("\n");t.b("\n" + i);t.b("    <span class=\"beicons-pre beicons-pre-eye\">");t.b(t.v(t.d("stats.views",c,p,0)));t.b("</span>");t.b("\n" + i);t.b("    <span class=\"gallery-stat-divided beicons-pre beicons-pre-comment\">");t.b(t.v(t.d("stats.comments",c,p,0)));t.b("</span>");t.b("\n" + i);t.b("    <span class=\"gallery-stat-divided beicons-pre beicons-pre-wip show-phone show-tablet\">");t.b(t.v(t.d("stats.revisions",c,p,0)));t.b("</span>");t.b("\n");t.b("\n" + i);t.b("    <div class=\"wip-revisions-count hide-phone hide-tablet\">Revision ");t.b(t.v(t.d("stats.revisions",c,p,0)));t.b("</div>");t.b("\n");t.b("\n" + i);t.b("  </div>");t.b("\n");t.b("\n" + i);if(t.s(t.f("private",c,p,1),c,p,0,3839,4108,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\n" + i);t.b("    <div class=\"tooltipi-container wip-private pointer\">");t.b("\n");t.b("\n" + i);t.b("      <div class=\"beicons-pre beicons-pre-privacy\"></div>");t.b("\n");t.b("\n" + i);t.b("      <div class=\"tooltipi\">");t.b("\n" + i);t.b("        This work in progress is marked as private.");t.b("\n" + i);t.b("      </div>");t.b("\n" + i);t.b("    </div> <!-- .tooltipi-container .wip-private -->");t.b("\n");t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<profile/user/_overlays/_wipOverlay0":{name:"profile/user/_overlays/_wipOverlay", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "profile/user/_overlays/_wipOverlay": arguments[1].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('be/form/response',[],function() {
    "use strict";
    function a(a) {
        if (0 === a.valid || "no" === a.valid) throw a;
        return a;
    }
    function b(a) {
        throw a;
    }
    return {
        success: a,
        failure: b
    };
});

define("require/hgn!templates/wip/shareToggle", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"sharepop_");t.b(t.v(t.f("name",c,p,0)));t.b("\" class=\"sharepop-service relative cfix active\" data-service=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">");t.b("\n" + i);t.b("  <div class=\"sharepop-service-title social-icon-dark ");t.b(t.v(t.f("name",c,p,0)));t.b("-icon-dark left\"></div>");t.b("\n" + i);t.b("  <div class=\"sharepop-service-switch right relative\">");t.b("\n" + i);t.b("    <span class=\"sharepop-service-status status-on\">ON</span>");t.b("\n" + i);t.b("    <span class=\"sharepop-service-status status-off\">OFF</span>");t.b("\n" + i);t.b("    <span class=\"sharepop-service-slider\"></span>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/wip/share", ["hogan", "require/hgn!templates/form/textarea", "require/hgn!templates/wip/shareToggle"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form id=\"sharepop-form-container\" class=\"sharepop cfix\" action = \"/share/post");if(t.s(t.f("sid",c,p,1),c,p,0,86,98,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("?sid=");t.b(t.v(t.f("sid",c,p,0)));});c.pop();}t.b("\">");t.b("\n");t.b("\n" + i);if(t.s(t.f("share",c,p,1),c,p,0,122,141,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<form/textarea0",c,p,""));});c.pop();}t.b("\n" + i);t.b("  <div id=\"sharepop-services\" class=\"left\">");t.b("\n");t.b("\n" + i);if(t.s(t.d("services.twitter",c,p,1),c,p,0,223,254,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<wip/shareToggle1",c,p,"    "));});c.pop();}if(!t.s(t.d("services.twitter",c,p,1),c,p,1,0,0,"")){t.b("    <div id=\"sharepop-twitter-connect\" class=\"sharepop-service relative cfix not-connected\">");t.b("\n" + i);t.b("      <a href=\"");t.b(t.v(t.d("constants.TWITTER",c,p,0)));t.b(t.v(t.f("redirect",c,p,0)));t.b("\" class=\"form-button form-button-small signup-button-social signup-button-twitter sharepop-service-connect\">");t.b("\n" + i);t.b("        <span class=\"social-icon twitter-icon\"></span>");t.b("\n" + i);t.b("        Sign in with Twitter");t.b("\n" + i);t.b("      </a>");t.b("\n" + i);t.b("    </div>");t.b("\n" + i);};t.b("\n" + i);if(t.s(t.f("allow_facebook",c,p,1),c,p,0,708,1208,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.d("services.facebook",c,p,1),c,p,0,735,766,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<wip/shareToggle2",c,p,"    "));});c.pop();}if(!t.s(t.d("services.facebook",c,p,1),c,p,1,0,0,"")){t.b("    <div id=\"sharepop-facebook-connect\" class=\"sharepop-service relative cfix not-connected\">");t.b("\n" + i);t.b("      <a href=\"");t.b(t.v(t.d("constants.FACEBOOK",c,p,0)));t.b(t.v(t.f("redirect",c,p,0)));t.b("\" class=\"form-button form-button-small signup-button-social signup-button-facebook sharepop-service-connect\">");t.b("\n" + i);t.b("        <span class=\"social-icon facebook-icon\"></span>");t.b("\n" + i);t.b("        Sign in with Facebook");t.b("\n" + i);t.b("      </a>");t.b("\n" + i);t.b("    </div>");t.b("\n" + i);};});c.pop();}t.b("\n" + i);if(t.s(t.d("services.linkedin",c,p,1),c,p,0,1255,1286,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<wip/shareToggle3",c,p,"    "));});c.pop();}if(!t.s(t.d("services.linkedin",c,p,1),c,p,1,0,0,"")){t.b("    <div id=\"sharepop-linkedin-connect\" class=\"sharepop-service relative cfix not-connected\">");t.b("\n" + i);t.b("      <a href=\"");t.b(t.v(t.d("constants.LINKEDIN",c,p,0)));t.b(t.v(t.f("redirect",c,p,0)));t.b("\" class=\"form-button form-button-small signup-button-social signup-button-linkedin sharepop-service-connect\">");t.b("\n" + i);t.b("        <span class=\"social-icon linkedin-icon\"></span>");t.b("\n" + i);t.b("        Sign in with LinkedIn");t.b("\n" + i);t.b("      </a>");t.b("\n" + i);t.b("    </div>");t.b("\n" + i);};t.b("\n" + i);t.b("  </div>");t.b("\n" + i);t.b("</form>");t.b("\n");return t.fl(); },partials: {"<form/textarea0":{name:"form/textarea", partials: {}, subs: {  }},"<wip/shareToggle1":{name:"wip/shareToggle", partials: {}, subs: {  }},"<wip/shareToggle2":{name:"wip/shareToggle", partials: {}, subs: {  }},"<wip/shareToggle3":{name:"wip/shareToggle", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "form/textarea": arguments[1].template,"wip/shareToggle": arguments[2].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('be/share/View/Share',[ "nbd/util/extend", "be/form", "be/form/response", "be/xhr", "be/View/Dialog/Popup", "be/trait/form/toggle", "be/charCounter", "vendor/misc/history", "hgn!templates/wip/share" ], function(a, b, c, d, e, f, g, h, i) {
    "use strict";
    return e.extend({
        mustache: i,
        hide: function() {
            this._super(), h.replaceState(h.getState().data, document.title, window.location.search.replace(/share=1&?/, ""));
        },
        templateData: function() {
            return a({
                share: {
                    id: "sharepop_share_text",
                    classes: [ "form-text-normal", "js-characters-limited" ],
                    containerClasses: [ "left" ],
                    validate: "required,Generic,length[0,140]"
                },
                buttons: [ {
                    label: "Post",
                    classes: [ "form-button-default", "form-submit" ]
                }, {
                    label: "Skip",
                    classes: [ "form-button-cancel", "form-cancel" ]
                } ]
            }, this._super());
        },
        rendered: function(a) {
            function e() {
                var a = j.toArray().some(function(a) {
                    return a.checked;
                });
                i.toggleClass("disabled", !a).prop("disabled", !a), k.$view.find(".form-submit").toggleClass("form-button-disabled", !a);
            }
            var f, h, i, j, k = this;
            this._super(), g.init(a, !0), this.toggleElement(this.$view.find(".sharepop-service")), 
            h = this.$view.find(".form-submit").on("click", function(a) {
                h.hasClass("form-button-disabled") && a.stopImmediatePropagation();
            }), f = new b(this.$view), f.commit = function(a) {
                var b, e = a.data;
                for (b in k._model.get("services")) b = "sharepop_" + b, e[b] = e[b] || 0;
                return e.sharepop_entity_type = k._model.get("entity"), e.sharepop_entity_id = k.id(), 
                d(a).then(c.success, c.failure).then(function() {
                    k.hide();
                });
            }, i = this.$view.find("textarea").on("change", e), j = this.$view.find("#sharepop-services input").on("change", e), 
            e(), i.focus();
        }
    }).mixin(f);
});
define('be/share/Controller/Share',[ "be/Controller/Dialog/Roulette", "be/share/View/Share" ], function(a, b) {
    "use strict";
    return a.extend({}, {
        VIEW_CLASS: {
            desktop: b
        }
    });
});
define('be/share/init',[ "log", "nbd/util/extend", "lib/xhr", "be/share/Controller/Share" ], function(a, b, c, d) {
    "use strict";
    return a = a.get("be/share/init"), function(a) {
        return c({
            url: "/share/init"
        }).then(function(c) {
            var e, f;
            for (e in c.services) c.services[e] && (c.services[e] = {
                name: e
            });
            return b(c, {
                title: a.title,
                value: a.value,
                redirect: a.redirect,
                entity: a.entity,
                id: a.id
            }), f = new d(c.id, c), f.render(), f;
        });
    };
});
define('wip/createloader',[ "nbd/trait/promise", "be/modal/simple" ], function(a, b) {
    "use strict";
    return function() {
        var c = new a();
        return require([ "wip/create" ], c.resolve.bind(c), function() {
            b({
                title: "There was a problem with your request",
                html: "Please refresh the page to try again.",
                buttons: [ {
                    label: "Close",
                    classes: [ "form-button-default", "js-close" ]
                } ]
            });
        }), c;
    };
});
define('wip/lib/timeline',[ "jquery", "has", "nbd/Controller", "nbd/util/async", "nbd/util/construct", "vendor/misc/iscroll" ], function(a, b, c, d, e, f) {
    "use strict";
    return c.extend({
        init: function(c) {
            this.$context = c, this.$slider = c.find(".wip-timeline-slider").css("display", "inline-block"), 
            b("touch") ? this.initIScroll() : this.initScrollers(), a(window).on("resize", this.updateTimeline);
        },
        initIScroll: function() {
            var a = this.iscroll = new f(this.$context[0], {
                hScroll: !0,
                vScroll: !1,
                lockDirection: !1,
                hideScrollbar: !0
            });
            this.updateTimeline = function() {
                d(a.refresh.bind(a));
            }, this.scrollTo = function(b) {
                a.scrollToElement(b[0]);
            };
        },
        initScrollers: function() {
            function b() {
                return parseFloat(h.css("left")) || 0;
            }
            function c() {
                var a = b(), c = g.width();
                e.toggle(0 > a), f.toggle(c - a < h.width());
            }
            function d(a) {
                a = Math.max(g.width() - h.outerWidth(), a), a = Math.min(0, a), h.animate({
                    left: a
                }, {
                    duration: 200,
                    always: c
                });
            }
            var e, f, g = this.$context, h = this.$slider, i = [ "prev", "next" ].map(function(b) {
                return a("<div>", {
                    "class": "wip-page wip-page-" + b
                }).append('<div class="wip-sprite wip-page-arrow"></div>');
            });
            e = i[0], f = i[1], g.append(e, f), h.css("position", "relative"), e.on("click", function() {
                d(b() + h.width() / 2);
            }), f.on("click", function() {
                d(b() - h.width() / 2);
            }), c(), this.updateTimeline = c, this.scrollTo = function(a) {
                var b = a.position();
                d(-b.left);
            };
        },
        destroy: function() {
            a(window).off("resize", this.updateTimeline), this.iscroll && (this.iscroll.destroy(), 
            this.iscroll = null);
        }
    }, {
        init: function() {
            return e.apply(this, arguments);
        }
    });
});
define('wip/View/Content',[ "jquery", "log", "nbd/util/media", "nbd/View/Entity", "beff/ux/keyboard", "be/onhistory", "wip/createloader", "wip/lib/timeline", "vendor/misc/history" ], function(a, b, c, d, e, f, g, h, i) {
    "use strict";
    b = b.get("wip/View/Content");
    var j = d.extend({
        init: function() {
            this._super.apply(this, arguments), this.listenTo(this._model, "revision", this.render);
        },
        destroy: function() {
            this.timeline && this.timeline.destroy(), this._super();
        },
        render: function(b) {
            if (b instanceof a) return this.$view = b, this.timeline = h.init(this.$view.find("#wip-timeline")), 
            this.update(), void this.rendered();
            var c = this.$view.find(".wip-image"), d = this.$view.find(".wip-enlarge"), e = this._model.image();
            e && (this.constrain(), c.prop("src", e.url), d.attr("href", this._model.image(!0).url), 
            this.update());
        },
        rendered: function() {
            function b() {
                var a = e._model.image(!0);
                c.is("desktop") || window.open(a.url, "_blank");
            }
            var d = f(function() {
                var b = a(this);
                return {
                    wip: {
                        rev: b.data("id") || b.attr("revision_id")
                    }
                };
            }), e = this;
            this.$view.on("click", "a.wip-thumbnail-container", d).on("click", "a.wip-thumbnail-container", !1).on("click", ".wip-action-create", this.create.bind(this)).on("click", "#wip-next", function() {
                e.adj("next");
            }).on("click", "#wip-prev", function() {
                e.adj("prev");
            });
            var g = this.$view.find(".wip-image").on("click", b);
            g.css("min-height", (this._model.get("safe") ? 0 : 400) + "px");
        },
        adj: function(a) {
            var b, c = this._model.adjacent();
            c && c[a] && (b = this._model.get("wip").revisions[c[a]], i.pushState({
                wip: {
                    rev: c[a]
                }
            }, document.title, b.url));
        },
        onkey: function() {
            var a = this;
            e.add({
                left: function() {
                    a.adj("prev");
                },
                right: function() {
                    a.adj("next");
                }
            });
        },
        create: function() {
            var a = this._model.get("wip").id;
            g().then(function(b) {
                b.render(a);
            });
        },
        update: function() {
            var a = this._model.get("revision"), b = this._model.adjacent();
            a = a.id || a, b && this.$view.find("#wip-prev").toggle(!!b.prev).end().find("#wip-next").toggle(!!b.next).end();
            var c = this.$view.find("#wip-timeline").find(".wip-thumbnail-container.timeline-active").removeClass("timeline-active").end().find(".wip-thumbnail-container[revision_id=" + a + "]").addClass("timeline-active").offsetParent();
            this.timeline && c.length && this.timeline.scrollTo(c);
        },
        constrain: function() {
            var a = this.$view.find(".wip-image"), c = a.closest(".wip-image-container"), d = Math.max(a.height(), c.height());
            b.info("height constraint", d), c.css({
                "min-height": d + "px",
                "line-height": d - (2 - d % 2) + "px"
            });
        }
    }, {
        _: !0
    });
    return j;
});
define('wip/Model/Content',[ "nbd/Model" ], function(a) {
    "use strict";
    var b = a.extend({
        revision: function() {
            var a = this.get("revision"), b = "object" == typeof a ? a : this.get("wip").revisions[a];
            return b;
        },
        revisionIds: function() {
            return Object.keys(this.get("wip").revisions).map(function(a) {
                return +a;
            }).sort(function(a, b) {
                return a - b;
            });
        },
        image: function(a) {
            var b = this.revision();
            return b && b.images ? (a ? b.images.full_screen : null) || b.images.high_definition || b.images.normal_resolution : null;
        },
        ordinality: function() {
            var a = this.get("revision"), b = this.revisionIds();
            return a = +(a.id || a), b.indexOf(a) + 1;
        },
        adjacent: function() {
            var a, b = this.revision().id, c = this.revisionIds();
            return ~(a = c.indexOf(b)) ? {
                prev: c[a + 1],
                next: c[a - 1]
            } : void 0;
        }
    });
    return b;
});
define('wip/Controller/Content',[ "be/stats", "nbd/Controller/Entity", "wip/View/Content", "wip/Model/Content" ], function(a, b, c, d) {
    "use strict";
    var e = b.extend({
        init: function() {
            this._super.apply(this, arguments), this._model.on("revision", this.stats, this), 
            this.stats();
        },
        stats: function() {
            a.view("wip_revision", this._model.revision().id);
        },
        render: function(a) {
            this._view.render(a);
        }
    }, {
        VIEW_CLASS: c,
        MODEL_CLASS: d
    });
    return e;
});
define('wip/lib/session',[ "jquery", "vendor/misc/history" ], function(a, b) {
    "use strict";
    function c(a) {
        if (a.originalEvent) {
            var c = b.getState();
            c.data.wip || window.location.href === c.url || window.location.replace(c.url);
        }
    }
    var d, e = function() {
        var a = b.getState().data, c = a.wip && a.wip.rev;
        c && this.set("revision", c);
    };
    return {
        init: function(f) {
            d = e.bind(f);
            var g = b.getState().data;
            g && g.wip && !g.wip.rev && b.replaceState({
                wip: {
                    rev: f.revision().id
                }
            }, document.title, window.location.href), a(window).on({
                popstate: c,
                statechange: d
            });
        },
        destroy: function() {
            a(window).off({
                popstate: c,
                statechange: d
            });
        }
    };
});
define('wip/lib/header',[ "be/follow", "be/social", "wip/createloader" ], function(a, b, c) {
    "use strict";
    return {
        init: function(c, d) {
            a.init(c), b.init(c), c.on("click", ".wip-action-update", function() {
                var a = d.get("wip").id, b = d.get("revision");
                b = b.id || b, this.edit(a, b);
            }.bind(this));
        },
        edit: function(a, b) {
            c().then(function(c) {
                c.render(a, b, !0);
            });
        }
    };
});
define('wip/lib/description',[ "jquery", "nbd/trait/pubsub" ], function(a, b) {
    "use strict";
    return a.extend({
        init: function(a, b) {
            this.$view = a, this._model = b, this.listenTo(b, "revision", this.update);
        },
        update: function() {
            var a = this._model.revision().description;
            this.$view.find("#description").text(a).parent().toggleClass("hide", !a);
        },
        destroy: function() {
            this.$view = null, this.stopListening();
        }
    }, b);
});
define('wip/lib/comments',[ "jquery", "log", "nbd/util/async", "nbd/util/media", "be/form/Reset", "be/comments", "be/automention", "be/mentionSource", "be/charCounter", "hgn!templates/form/textarea", "hgn!templates/button" ], function(a, b, c, d, e, f, g, h, i, j, k) {
    "use strict";
    b = b.get("wip/lib/comments");
    var l = {
        init: function(b, c) {
            var e, g, h = c.get("revision"), i = a(document.body).hasClass("logged-in");
            h = h.id || h, e = b.find(".comments-pagination"), g = b.find("#comment-count"), 
            this.$view = b.find(".comments-container"), this._model = c, this._view = f.init(this.$view, {
                type: "wip_revision",
                order: "asc",
                entity_id: h
            }, function(a) {
                e.toggleClass("hide", !a.more).parent().toggleClass("has-more", !!a.more);
            });
            var j = function(a) {
                this.$view.toggleClass("inline-comments-container", a).toggleClass("big-comments", !a);
            }.bind(this);
            d.on("desktop", j), j(d.is("desktop")), this._model.on("revision", this.view, this), 
            this.view(), i && this.create();
        },
        view: function(a) {
            h.init({
                local: "/mentions/wip_revision/" + this._model.revision().id
            }), this.$view.addClass("loading"), (a ? this._view.set({
                entity_id: a,
                offset: void 0
            }).clear() : this._view).get().then(function(a) {
                this.$view.removeClass("loading").find(".empty-state").toggleClass("hide", !(!a.comments || !a.comments.length));
            }.bind(this));
        },
        create: function() {
            function b(a) {
                if (!a.id || !a.user) throw a;
                c.add({
                    id: a.id,
                    user: a.user,
                    comment: a.comment,
                    posted_on: "Just now",
                    permissions: [ 3e3 ]
                });
            }
            var c = this._view, d = this._model, f = a(k({
                label: "Post Comment",
                classes: [ "form-button-default", "form-button-submit", "form-submit" ]
            })).hide(), h = a(j({
                id: "comment",
                autocomplete: "off",
                maxlength: 800,
                classes: [ "inline-comment-input", "js-characters-limited", "form-text-normal" ],
                containerClasses: [ "inline-comment-input-container", "ui-front" ],
                placeholder: "Write a comment...",
                validate: "required,Generic,length[0,800]"
            }));
            i.init(h), g(h.find("textarea").on("input propertychange", function() {
                var b = a(this);
                a(this).height(this.scrollHeight - (this.clientHeight - b.height())), f.toggle(!!this.value.length);
            }), {
                appendTo: ".wip-view"
            }), this.$view.find(".inline-comment-form").append(h, f), h.find("textarea").val(""), 
            this._form = new e(this.$view), this._form.on("success", this._form.showButtons.bind(this._form)), 
            this._form.commit = function(a) {
                var c = d.get("revision");
                return c = c.id || c, a.data.entity_id = c, this.then(b).then(function() {
                    h.find("textarea").height(""), f.hide();
                }), this;
            }, this.$view.on("click", "#post-comment", function(b) {
                b.preventDefault(), a(a(this).attr("href")).focus();
            });
        },
        destroy: function() {
            this._model.off(null, null, this), this._view.destroy(), this._model = this._view = null;
        }
    };
    return l;
});
define('wip/lib/tags',[], function() {
    "use strict";
    return {
        init: function(a, b) {
            this.$view = a, this.model = b, b.on("revision", function() {
                this.update(b.revision().tags);
            }, this);
        },
        update: function(a) {
            this.$view.toggleClass("hide", !a.length).find("#object-tags").html(a.map(function(a) {
                return '<a class="object-tag" href="' + a.url + '">' + a.title + "</a>";
            }).join(""));
        },
        destroy: function() {
            this.model.off(null, null, this), this.$view = this.model = null;
        }
    };
});

define("require/hgn!templates/wip/revision", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span id=\"revision-number\">Revision ");t.b(t.v(t.f("ordinality",c,p,0)));t.b(" of ");t.b(t.v(t.f("cardinality",c,p,0)));t.b("</span>");t.b("\n" + i);t.b("<span id=\"revision-date\">( ");t.b(t.v(t.f("date",c,p,0)));t.b(" )</span>");t.b("\n" + i);t.b("<a id=\"post-comment\" href=\"#comment\">Post a Comment</a>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('wip/lib/revision',[ "jquery", "moment", "nbd/util/async", "nbd/util/pipe", "nbd/util/media", "nbd/View/Element", "hgn!templates/wip/revision" ], function(a, b, c, d, e, f, g) {
    "use strict";
    return {
        init: function(c, h) {
            this._model = h, this._view = new (f.extend({
                template: d(g, a),
                templateData: function() {
                    var a = h.revision().created_on;
                    return a = "string" == typeof a ? a : b.unix(a).format("MMMM D, YYYY"), {
                        ordinality: h.ordinality(),
                        cardinality: Object.keys(h.get("wip").revisions).length,
                        date: a
                    };
                }
            }))(c), h.on("revision", this.render, this), e.on("desktop", this.render, this), 
            this.render();
        },
        render: function() {
            this._view.destroy(), e.is("desktop") || this._view.render();
        },
        destroy: function() {
            e.off(null, null, this), this._model.off(null, null, this), this._view.destroy(), 
            this._view = this._model = null;
        }
    };
});
define('wip/lib/actions',[ "jquery", "be/spam", "be/Controller/Report" ], function(a, b, c) {
    "use strict";
    return {
        init: function(d, e) {
            var f = new c(e.get("wip").id, {
                CONSTANTS: e.get("constants")
            });
            f.setContext(d.find(".js-report")), d.on("click", ".wip-spam", function() {
                b.report("wip", e.get("wip").id, a(this));
            });
        }
    };
});
define('wip/lib/core',[ "be/share/init", "wip/Controller/Content", "wip/lib/session", "wip/lib/header", "wip/lib/description", "wip/lib/comments", "wip/lib/tags", "wip/lib/revision", "wip/lib/actions", "project/lib/mature" ], function(a, b, c, d, e, f, g, h, i, j) {
    "use strict";
    return {
        init: function(a, k) {
            var l = new b(k);
            this._wip = l, l.render(a.find(".wip-main .wip-main-content")), c.init(l._model), 
            e.init(a.find(".wip-sidebar"), l._model), f.init(a.find(".wip-sidebar"), l._model), 
            d.init(a.find("#wip-header"), l._model), g.init(a.find("#wip-tags"), l._model), 
            h.init(a.find("#comments-header"), l._model), i.init(a.find(".wip-actions"), l._model, k.constants), 
            j.init(k.wip.id, k.wip, k.constants), k.share && this.share(l._model);
        },
        share: function(b) {
            var c = b.get("wip"), d = b.revision();
            a({
                id: d.id,
                redirect: "?callback=wip&wip_id=" + c.id + "&revision_id=" + d.id,
                value: 'Give me feedback on "' + c.title + '", a work-in-progress on @Behance :: ' + d.short_url,
                title: "Request Feedback",
                entity: "wip_revision"
            });
        },
        destroy: function() {
            c.destroy(), e.destroy(), f.destroy(), g.destroy(), h.destroy(), j.destroy(), this._wip && (this._wip.destroy(), 
            this._wip = null);
        }
    };
});

define("require/hgn!templates/wip", ["hogan", "require/hgn!templates/lib/_follow/_buttonUserSmall"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"wip-container\">");t.b("\n" + i);t.b("  <div id=\"wip-header\" class=\"cfix");if(t.s(t.f("linked_project",c,p,1),c,p,0,78,93,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" linked-project");});c.pop();}t.b("\">");t.b("\n");t.b("\n" + i);t.b("    <div class=\"wip-header-left left relative\">");t.b("\n");t.b("\n" + i);t.b("      <div class=\"inline-block wip-user-info relative\">");t.b("\n");t.b("\n" + i);t.b("        <h1 class=\"wip-title\">");t.b(t.v(t.d("wip.title",c,p,0)));t.b("</h1>");t.b("\n");t.b("\n" + i);t.b("        <ul id=\"wip-stats\" class=\"inline-block\">");t.b("\n");t.b("\n" + i);if(t.s(t.d("wip.private",c,p,1),c,p,0,348,460,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <li class=\"project-stat project-stat-private beicons-pre beicons-pre-privacy\">PRIVATE</li>");t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("          <li class=\"project-stat project-stat-views beicons-pre beicons-pre-eye\">");t.b("\n" + i);t.b("            ");t.b(t.v(t.d("wip.stats.views",c,p,0)));t.b("\n" + i);t.b("          </li>");t.b("\n");t.b("\n" + i);t.b("          <li class=\"project-stat project-stat-comments beicons-pre beicons-pre-comment\">");t.b("\n" + i);t.b("            ");t.b(t.v(t.d("wip.stats.comments",c,p,0)));t.b("\n" + i);t.b("          </li>");t.b("\n");t.b("\n" + i);t.b("          <li class=\"project-stat project-stat-revisions beicons-pre beicons-pre-wip\">");t.b("\n" + i);t.b("            ");t.b(t.v(t.d("wip.stats.revisions",c,p,0)));t.b("\n" + i);t.b("          </li>");t.b("\n");t.b("\n" + i);t.b("        </ul> <!-- #wip-stats -->");t.b("\n");t.b("\n" + i);t.b("        <div class=\"project-published inline-block\">");t.b(t.v(t.d("revision.created_on",c,p,0)));t.b("</div>");t.b("\n");t.b("\n" + i);if(t.s(t.d("user.owner",c,p,1),c,p,0,1033,1272,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <span class=\"fake-link wip-action js-wip-action-update wip-action-update hide-phone hide-tablet\" data-id=\"");t.b(t.v(t.d("wip.id",c,p,0)));t.b("\" data-revision-id=\"");t.b(t.v(t.d("revision.id",c,p,0)));t.b("\" wip_id=\"");t.b(t.v(t.d("wip.id",c,p,0)));t.b("\" revision_id=\"");t.b(t.v(t.d("revision.id",c,p,0)));t.b("\">Edit Info</span>");t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("      </div> <!-- .inline-block -->");t.b("\n");t.b("\n" + i);t.b("    </div> <!-- wip-header-left -->");t.b("\n");t.b("\n" + i);t.b("    <div class=\"wip-owner\">");t.b("\n");t.b("\n" + i);t.b("      <a class=\"user-image-link\" href=\"");t.b(t.v(t.d("user.url",c,p,0)));t.b("\"><img class=\"inline-block user-image js-mini-profile\" src=\"");t.b(t.v(t.d("user.image",c,p,0)));t.b("\" data-id=\"");t.b(t.v(t.d("user.id",c,p,0)));t.b("\" /></a>");t.b("\n" + i);t.b("      <a href=\"");t.b(t.v(t.d("wip.owner.url",c,p,0)));t.b("\" class=\"wip-author-link text-ellipsis js-mini-profile\" data-id=\"");t.b(t.v(t.d("wip.owner.id",c,p,0)));t.b("\">");t.b(t.v(t.d("wip.owner.display_name",c,p,0)));t.b("</a>");t.b("\n");t.b("\n" + i);t.b("      <div class=\"wip-owner-buttons\">");t.b("\n");t.b("\n" + i);if(!t.s(t.d("user.owner",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("user",c,p,1),c,p,0,1777,1810,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<lib/_follow/_buttonUserSmall0",c,p,""));});c.pop();}};t.b("\n" + i);if(!t.s(t.d("wip.private",c,p,1),c,p,1,0,0,"")){t.b("\n" + i);t.b("          <div class=\"inline-block tooltipi-container wip-share-container tooltipi-share-container\">");t.b("\n" + i);t.b("            <span id=\"wip-share\" class=\"form-button form-button-small form-button-light-and-grey form-button-down-arrow\">Share</span>");t.b("\n");t.b("\n" + i);t.b("            <div class=\"tooltipi tooltipi-white tooltipi-share\">");t.b("\n");t.b("\n" + i);t.b("              ");t.b(t.t(t.d("content.sharing",c,p,0)));t.b("\n");t.b("\n" + i);t.b("            </div>");t.b("\n");t.b("\n" + i);t.b("          </div>");t.b("\n");t.b("\n" + i);};t.b("\n" + i);t.b("      </div> <!-- .wip-owner-buttons -->");t.b("\n" + i);t.b("    </div> <!-- .wip-owner -->");t.b("\n");t.b("\n" + i);t.b("  </div>");t.b("\n");t.b("\n" + i);t.b("  <div class=\"wip-content cfix\">");t.b("\n");t.b("\n" + i);t.b("    <div class=\"wip-main left\">");t.b("\n");t.b("\n" + i);t.b("      <div class=\"wip-main-content relative\">");t.b("\n");t.b("\n" + i);if(t.s(t.f("safe",c,p,1),c,p,0,2488,2671,"{{ }}")){t.rs(c,p,function(c,p,t){if(t.s(t.d("revision.original_image",c,p,1),c,p,0,2525,2634,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <a class=\"wip-enlarge\" href=\"");t.b(t.v(t.d("revision.original_image",c,p,0)));t.b("\" target=\"_blank\">Original Size</a>");t.b("\n" + i);});c.pop();}});c.pop();}t.b("        <div id=\"wip-prev\" class=\"wip-arrow\"></div>");t.b("\n" + i);t.b("        <div id=\"wip-next\" class=\"wip-arrow\"></div>");t.b("\n");t.b("\n" + i);t.b("        <div class=\"wip-image-container overflow-hidden\">");t.b("\n");t.b("\n" + i);if(t.s(t.f("safe",c,p,1),c,p,0,2864,2942,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <img src=\"");t.b(t.v(t.d("revision.image_path",c,p,0)));t.b("\" class=\"wip-image\"/>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(!t.s(t.f("safe",c,p,1),c,p,1,0,0,"")){t.b("            <div class=\"wip-image wip-image-mature\" style=\"max-height:");t.b(t.v(t.d("revision.image_properties.height",c,p,0)));t.b("px;\">&nbsp;</div>");t.b("\n" + i);};t.b("\n" + i);t.b("        </div>");t.b("\n");t.b("\n" + i);t.b("        ");t.b(t.t(t.d("content.timeline",c,p,0)));t.b("\n");t.b("\n" + i);t.b("      </div> <!-- .wip-main-content -->");t.b("\n");t.b("\n" + i);t.b("    </div> <!-- .wip-main -->");t.b("\n");t.b("\n" + i);t.b("    <div class=\"wip-sidebar left");if(t.s(t.f("linked_project",c,p,1),c,p,0,3289,3304,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" linked-project");});c.pop();}t.b("\">");t.b("\n");t.b("\n" + i);t.b("      <div class=\"wip-sidebar-content\">");t.b("\n");t.b("\n" + i);t.b("        <div class=\"hide-phone hide-tablet");if(!t.s(t.d("revision.description",c,p,1),c,p,1,0,0,"")){t.b(" hide");};t.b("\">");t.b("\n" + i);t.b("          <div class=\"wip-sidebar-label\">Description</div>");t.b("\n" + i);t.b("          <div id=\"description\" class=\"wip-description\">");t.b(t.v(t.d("revision.description",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("        </div>");t.b("\n");t.b("\n" + i);t.b("        <div id=\"comments-list-container\" class=\"comments-container inline-comments-container\">");t.b("\n");t.b("\n" + i);t.b("          <div id=\"wip-comments-header\">");t.b("\n");t.b("\n" + i);t.b("            <div class=\"comments-pagination see-more-button-container hide\">");t.b("\n" + i);t.b("              <div class=\"comments-total comments-offset fake-link cfix\">");t.b("\n" + i);t.b("                <span class=\"comments-total-text fake-link left beicons-pre beicons-pre-comment\">Load More &darr;</span>");t.b("\n" + i);t.b("              </div>");t.b("\n" + i);t.b("            </div>");t.b("\n");t.b("\n" + i);t.b("            <div class=\"empty-state hide hide-phone hide-tablet\">Discuss This Work in Progress:</div>");t.b("\n");t.b("\n" + i);t.b("            <div id=\"comments-header\" class=\"show-tablet show-phone\"></div>");t.b("\n");t.b("\n" + i);if(t.s(t.d("revision.description",c,p,1),c,p,0,4299,4560,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <div id=\"wip-description-wrap\" class=\"show-phone show-tablet\">");t.b("\n" + i);t.b("              <div class=\"wip-sidebar-label\">Description</div>");t.b("\n" + i);t.b("              <div id=\"description\" class=\"wip-description\">");t.b(t.v(t.d("revision.description",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("            </div>");t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("          </div>");t.b("\n");t.b("\n" + i);t.b("          <ul id=\"comments-list\" class=\"js-comments-list\"></ul>");t.b("\n");t.b("\n" + i);t.b("          <div id=\"comment-form-header\" class=\"show-tablet\">");t.b("\n" + i);t.b("            Discuss This Work in Progress:");t.b("\n" + i);t.b("          </div>");t.b("\n");t.b("\n" + i);t.b("          <form class=\"inline-comment-form cfix relative\" action=\"");t.b(t.v(t.f("comment_action",c,p,0)));t.b("\"></form>");t.b("\n");t.b("\n" + i);if(!t.s(t.f("logged_in",c,p,1),c,p,1,0,0,"")){t.b("          <div class=\"comment-logged-out\">You must <a class=\"js-adobeid-signup\">sign up</a> or <a class=\"js-adobeid-signin\">log in</a> to join the conversation.</div>");t.b("\n" + i);};t.b("\n" + i);t.b("        </div> <!-- .comments-container  -->");t.b("\n");t.b("\n" + i);t.b("      </div> <!-- .wip-sidebar-content -->");t.b("\n");t.b("\n" + i);t.b("    </div> <!-- .wip-sidebar -->");t.b("\n");t.b("\n" + i);if(t.s(t.f("linked_project",c,p,1),c,p,0,5252,5798,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\n" + i);t.b("        <div class=\"wip-linked-project-block absolute unselectable\">");t.b("\n");t.b("\n" + i);t.b("          <a class=\"wip-linked-project cfix bordered-item\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" target=\"_blank\">");t.b("\n");t.b("\n" + i);t.b("            <img class=\"left project-cover\" src=\"");t.b(t.v(t.f("cover",c,p,0)));t.b("\" />");t.b("\n" + i);t.b("            <div class=\"left project-info\">");t.b("\n" + i);t.b("              <div class=\"project-title bold\">");t.b(t.v(t.f("name",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("              <div class=\"project-link bold fake-link\">View Full Project &rarr;</div>");t.b("\n" + i);t.b("              <div class=\"project-fields grey ellipsis\">");t.b(t.v(t.f("fields",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("            </div>");t.b("\n");t.b("\n" + i);t.b("          </a>");t.b("\n");t.b("\n" + i);t.b("        </div>");t.b("\n");t.b("\n" + i);});c.pop();}t.b("  </div> <!-- .wip-content -->");t.b("\n");t.b("\n" + i);t.b("  <div class=\"wip-actions\">");t.b("\n");t.b("\n" + i);t.b("    <a class=\"beicons-pre beicons-pre-report flag-spam flag-spam-project js-report wip-report\" data-id=\"");t.b(t.v(t.d("wip.id",c,p,0)));t.b("\">Report</a>");t.b("\n");t.b("\n" + i);if(t.s(t.f("signed_in",c,p,1),c,p,0,6025,6104,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("\n" + i);t.b("      <a class=\"beicons-pre beicons-pre-spam wip-spam\">Mark as Spam</a>");t.b("\n");t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("  </div> <!-- .wip-actions -->");t.b("\n");t.b("\n" + i);t.b("  <div class=\"cfix ");if(!t.s(t.d("revision.tags",c,p,1),c,p,1,0,0,"")){t.b("hide");};t.b("\" id=\"wip-tags\">");t.b("\n" + i);t.b("    <div class=\"wip-tags-label inline-block\">Tags:</div>");t.b("\n" + i);t.b("    <div class=\"cfix\" id=\"object-tags\">");t.b("\n" + i);if(t.s(t.d("revision.tags",c,p,1),c,p,0,6349,6413,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <a class=\"object-tag\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">");t.b(t.v(t.f("title",c,p,0)));t.b("</a>");t.b("\n" + i);});c.pop();}t.b("    </div>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<lib/_follow/_buttonUserSmall0":{name:"lib/_follow/_buttonUserSmall", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "lib/_follow/_buttonUserSmall": arguments[1].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('be/View/Dialog/Popup/Wip',[ "jquery", "nbd/util/async", "nbd/util/extend", "nbd/util/media", "be/spinner", "be/View/Dialog/Popup", "be/social", "lib/adobeanalytics", "wip/lib/core", "hgn!templates/wip", "jquery/plugins/jquery.fancybox" ], function(a, b, c, d, e, f, g, h, i, j) {
    "use strict";
    function k(a, b, c) {
        var d = a.map(function(d, e) {
            return d = Math.max(c ? c[e] : -1/0, d), d = Math.min(b ? b[e] : 1/0, d), d / a[e];
        }).reduce(function(a, b) {
            return Math.min(a, b);
        }, 1/0);
        return a.map(function(a) {
            return ~~(a * d);
        });
    }
    var l = f.extend({
        init: function() {
            this._super.apply(this, arguments), d.on("desktop:exit", function() {
                this.hide();
            }, this), this.on("show", function() {
                try {
                    i._wip._view.onkey();
                } catch (a) {}
            });
        },
        destroy: function() {
            d.off(null, null, this), this._super();
        },
        innerDestroy: function() {
            return this.$view.find(".wip-image").css("max-height", ""), i.destroy();
        },
        mustache: j,
        templateData: function() {
            var a = this._super();
            return c({
                classes: [ "wip-view" ],
                toolbar: !1
            }, a);
        },
        rendered: function() {
            var c, d;
            this.$view.appendTo(document.body), document.title = this._model.get("title"), this._super(), 
            i.init(this.$view, this._model.data()), this.$view.find(".wip-owner").append('<div class="close popup-close">'), 
            this.findMax(), this.constrain(), this.listenTo(i._wip._model, "revision", this.constrain), 
            c = function() {
                this.position(), a.fancybox.hideLoading();
            }.bind(this), d = this.$view.find(".wip-image-container"), i._wip._model.get("safe") || c(), 
            d.find(".wip-image").css("max-width", "100%").on("load", function() {
                d.css({
                    "min-width": d.width(),
                    "min-height": d.height()
                }), b(c);
            }), h.page();
        },
        findMax: function() {
            var a = [ window.innerWidth, window.innerHeight ], b = [ 0, 0 ];
            return b[0] += .1 * a[0], b[0] += this.$view.find(".wip-sidebar").outerWidth(), 
            b[1] += .1 * a[1], b[1] += this.$view.find("#wip-header").outerHeight(), b[1] += this.$view.find("#wip-timeline").outerHeight(), 
            a = a.map(function(a, c) {
                return a - b[c];
            }, b), this.max = a;
        },
        constrain: function() {
            var a = i._wip._model.image(), b = k([ a.width, a.height ], this.max);
            this.$view.find(".wip-image").css("max-height", b[1] + "px");
        },
        position: function() {
            this._super();
            var a = this.$view.filter(".popup"), b = parseFloat(a.css("top")) || 0;
            a.css("top", b + 30);
        },
        hide: function(a) {
            return this.$view ? (this._super(), this.$view.removeClass("shown"), this.innerDestroy(), 
            a !== !0 && this.trigger("exit"), this) : void 0;
        }
    });
    return l;
});
define('be/Controller/Dialog/Wip',[ "be/Controller/Dialog/EntityPopup", "be/View/Dialog/Popup/Wip" ], function(a, b) {
    "use strict";
    var c = a.extend({}, {
        VIEW_CLASS: {
            desktop: b
        }
    });
    return c;
});
define('wip/popup',[ "nbd/util/extend", "be/trait/popupSession", "be/Controller/Dialog/Wip" ], function(a, b, c) {
    "use strict";
    return a({}, b, {
        selector: ".wip-action-popup",
        entity: "wip",
        Dialog: c,
        show: function(a) {
            var c = a.data;
            if (this.singleton._view.$view && c && c.wip && c.wip.rev) {
                var d = this.singleton._view.$view.toArray().every(function(a) {
                    return document.body.contains(a);
                });
                if (d) return;
            }
            b.show.call(this, a);
        }
    });
});
define('be/decorator/waitsforimages',[ "jquery", "nbd/Promise" ], function(a, b) {
    "use strict";
    function c(c) {
        var d, e = c.find("img:not(.js-loaded)");
        return d = e.toArray().map(function(c) {
            var d = new Image(), e = new b(), f = function() {
                a(c).addClass("js-loaded"), e.resolve();
            };
            return d.src = c.src, d.addEventListener("load", f), d.addEventListener("error", f), 
            e;
        }), b.all(d);
    }
    return c;
});
!function(a) {
    var b = document.documentElement, c = function() {};
    b.addEventListener ? c = function(a, b, c) {
        a.addEventListener(b, c, !1);
    } : b.attachEvent && (c = function(b, c, d) {
        b[c + d] = d.handleEvent ? function() {
            var b = a.event;
            b.target = b.target || b.srcElement, d.handleEvent.call(d, b);
        } : function() {
            var c = a.event;
            c.target = c.target || c.srcElement, d.call(b, c);
        }, b.attachEvent("on" + c, b[c + d]);
    });
    var d = function() {};
    b.removeEventListener ? d = function(a, b, c) {
        a.removeEventListener(b, c, !1);
    } : b.detachEvent && (d = function(a, b, c) {
        a.detachEvent("on" + b, a[b + c]);
        try {
            delete a[b + c];
        } catch (d) {
            a[b + c] = void 0;
        }
    });
    var e = {
        bind: c,
        unbind: d
    };
    "function" == typeof define && define.amd ? define("eventie/eventie", e) : a.eventie = e;
}(this), function(a) {
    function b(a) {
        "function" == typeof a && (b.isReady ? a() : f.push(a));
    }
    function c(a) {
        var c = "readystatechange" === a.type && "complete" !== e.readyState;
        if (!b.isReady && !c) {
            b.isReady = !0;
            for (var d = 0, g = f.length; g > d; d++) {
                var h = f[d];
                h();
            }
        }
    }
    function d(d) {
        return d.bind(e, "DOMContentLoaded", c), d.bind(e, "readystatechange", c), d.bind(a, "load", c), 
        b;
    }
    var e = a.document, f = [];
    b.isReady = !1, "function" == typeof define && define.amd ? (b.isReady = "function" == typeof requirejs, 
    define("doc-ready/doc-ready", [ "eventie/eventie" ], d)) : a.docReady = d(a.eventie);
}(this), function() {
    function a() {}
    function b(a, b) {
        for (var c = a.length; c--; ) if (a[c].listener === b) return c;
        return -1;
    }
    function c(a) {
        return function() {
            return this[a].apply(this, arguments);
        };
    }
    var d = a.prototype;
    d.getListeners = function(a) {
        var b, c, d = this._getEvents();
        if ("object" == typeof a) {
            b = {};
            for (c in d) d.hasOwnProperty(c) && a.test(c) && (b[c] = d[c]);
        } else b = d[a] || (d[a] = []);
        return b;
    }, d.flattenListeners = function(a) {
        var b, c = [];
        for (b = 0; b < a.length; b += 1) c.push(a[b].listener);
        return c;
    }, d.getListenersAsObject = function(a) {
        var b, c = this.getListeners(a);
        return c instanceof Array && (b = {}, b[a] = c), b || c;
    }, d.addListener = function(a, c) {
        var d, e = this.getListenersAsObject(a), f = "object" == typeof c;
        for (d in e) e.hasOwnProperty(d) && -1 === b(e[d], c) && e[d].push(f ? c : {
            listener: c,
            once: !1
        });
        return this;
    }, d.on = c("addListener"), d.addOnceListener = function(a, b) {
        return this.addListener(a, {
            listener: b,
            once: !0
        });
    }, d.once = c("addOnceListener"), d.defineEvent = function(a) {
        return this.getListeners(a), this;
    }, d.defineEvents = function(a) {
        for (var b = 0; b < a.length; b += 1) this.defineEvent(a[b]);
        return this;
    }, d.removeListener = function(a, c) {
        var d, e, f = this.getListenersAsObject(a);
        for (e in f) f.hasOwnProperty(e) && (d = b(f[e], c), -1 !== d && f[e].splice(d, 1));
        return this;
    }, d.off = c("removeListener"), d.addListeners = function(a, b) {
        return this.manipulateListeners(!1, a, b);
    }, d.removeListeners = function(a, b) {
        return this.manipulateListeners(!0, a, b);
    }, d.manipulateListeners = function(a, b, c) {
        var d, e, f = a ? this.removeListener : this.addListener, g = a ? this.removeListeners : this.addListeners;
        if ("object" != typeof b || b instanceof RegExp) for (d = c.length; d--; ) f.call(this, b, c[d]); else for (d in b) b.hasOwnProperty(d) && (e = b[d]) && ("function" == typeof e ? f.call(this, d, e) : g.call(this, d, e));
        return this;
    }, d.removeEvent = function(a) {
        var b, c = typeof a, d = this._getEvents();
        if ("string" === c) delete d[a]; else if ("object" === c) for (b in d) d.hasOwnProperty(b) && a.test(b) && delete d[b]; else delete this._events;
        return this;
    }, d.emitEvent = function(a, b) {
        var c, d, e, f, g = this.getListenersAsObject(a);
        for (e in g) if (g.hasOwnProperty(e)) for (d = g[e].length; d--; ) c = g[e][d], 
        c.once === !0 && this.removeListener(a, c.listener), f = c.listener.apply(this, b || []), 
        f === this._getOnceReturnValue() && this.removeListener(a, c.listener);
        return this;
    }, d.trigger = c("emitEvent"), d.emit = function(a) {
        var b = Array.prototype.slice.call(arguments, 1);
        return this.emitEvent(a, b);
    }, d.setOnceReturnValue = function(a) {
        return this._onceReturnValue = a, this;
    }, d._getOnceReturnValue = function() {
        return this.hasOwnProperty("_onceReturnValue") ? this._onceReturnValue : !0;
    }, d._getEvents = function() {
        return this._events || (this._events = {});
    }, "function" == typeof define && define.amd ? define("eventEmitter/EventEmitter", [], function() {
        return a;
    }) : "object" == typeof module && module.exports ? module.exports = a : this.EventEmitter = a;
}.call(this), function(a) {
    function b(a) {
        if (a) {
            if ("string" == typeof d[a]) return a;
            a = a.charAt(0).toUpperCase() + a.slice(1);
            for (var b, e = 0, f = c.length; f > e; e++) if (b = c[e] + a, "string" == typeof d[b]) return b;
        }
    }
    var c = "Webkit Moz ms Ms O".split(" "), d = document.documentElement.style;
    "function" == typeof define && define.amd ? define("get-style-property/get-style-property", [], function() {
        return b;
    }) : a.getStyleProperty = b;
}(window), function(a) {
    function b(a) {
        var b = parseFloat(a), c = -1 === a.indexOf("%") && !isNaN(b);
        return c && b;
    }
    function c() {
        for (var a = {
            width: 0,
            height: 0,
            innerWidth: 0,
            innerHeight: 0,
            outerWidth: 0,
            outerHeight: 0
        }, b = 0, c = g.length; c > b; b++) {
            var d = g[b];
            a[d] = 0;
        }
        return a;
    }
    function d(a) {
        function d(a) {
            if ("string" == typeof a && (a = document.querySelector(a)), a && "object" == typeof a && a.nodeType) {
                var d = f(a);
                if ("none" === d.display) return c();
                var i = {};
                i.width = a.offsetWidth, i.height = a.offsetHeight;
                for (var j = i.isBorderBox = !(!h || !d[h] || "border-box" !== d[h]), k = 0, l = g.length; l > k; k++) {
                    var m = g[k], n = d[m], o = parseFloat(n);
                    i[m] = isNaN(o) ? 0 : o;
                }
                var p = i.paddingLeft + i.paddingRight, q = i.paddingTop + i.paddingBottom, r = i.marginLeft + i.marginRight, s = i.marginTop + i.marginBottom, t = i.borderLeftWidth + i.borderRightWidth, u = i.borderTopWidth + i.borderBottomWidth, v = j && e, w = b(d.width);
                w !== !1 && (i.width = w + (v ? 0 : p + t));
                var x = b(d.height);
                return x !== !1 && (i.height = x + (v ? 0 : q + u)), i.innerWidth = i.width - (p + t), 
                i.innerHeight = i.height - (q + u), i.outerWidth = i.width + r, i.outerHeight = i.height + s, 
                i;
            }
        }
        var e, h = a("boxSizing");
        return function() {
            if (h) {
                var a = document.createElement("div");
                a.style.width = "200px", a.style.padding = "1px 2px 3px 4px", a.style.borderStyle = "solid", 
                a.style.borderWidth = "1px 2px 3px 4px", a.style[h] = "border-box";
                var c = document.body || document.documentElement;
                c.appendChild(a);
                var d = f(a);
                e = 200 === b(d.width), c.removeChild(a);
            }
        }(), d;
    }
    var e = document.defaultView, f = e && e.getComputedStyle ? function(a) {
        return e.getComputedStyle(a, null);
    } : function(a) {
        return a.currentStyle;
    }, g = [ "paddingLeft", "paddingRight", "paddingTop", "paddingBottom", "marginLeft", "marginRight", "marginTop", "marginBottom", "borderLeftWidth", "borderRightWidth", "borderTopWidth", "borderBottomWidth" ];
    "function" == typeof define && define.amd ? define("get-size/get-size", [ "get-style-property/get-style-property" ], d) : a.getSize = d(a.getStyleProperty);
}(window), function(a, b) {
    function c(a, b) {
        return a[h](b);
    }
    function d(a) {
        if (!a.parentNode) {
            var b = document.createDocumentFragment();
            b.appendChild(a);
        }
    }
    function e(a, b) {
        d(a);
        for (var c = a.parentNode.querySelectorAll(b), e = 0, f = c.length; f > e; e++) if (c[e] === a) return !0;
        return !1;
    }
    function f(a, b) {
        return d(a), c(a, b);
    }
    var g, h = function() {
        if (b.matchesSelector) return "matchesSelector";
        for (var a = [ "webkit", "moz", "ms", "o" ], c = 0, d = a.length; d > c; c++) {
            var e = a[c], f = e + "MatchesSelector";
            if (b[f]) return f;
        }
    }();
    if (h) {
        var i = document.createElement("div"), j = c(i, "div");
        g = j ? c : f;
    } else g = e;
    "function" == typeof define && define.amd ? define("matches-selector/matches-selector", [], function() {
        return g;
    }) : window.matchesSelector = g;
}(this, Element.prototype), function(a) {
    function b(a, b) {
        for (var c in b) a[c] = b[c];
        return a;
    }
    function c(a, c, d) {
        function f(a, b) {
            a && (this.element = a, this.layout = b, this.position = {
                x: 0,
                y: 0
            }, this._create());
        }
        var g = d("transition"), h = d("transform"), i = g && h, j = !!d("perspective"), k = {
            WebkitTransition: "webkitTransitionEnd",
            MozTransition: "transitionend",
            OTransition: "otransitionend",
            transition: "transitionend"
        }[g], l = [ "transform", "transition", "transitionDuration", "transitionProperty" ], m = function() {
            for (var a = {}, b = 0, c = l.length; c > b; b++) {
                var e = l[b], f = d(e);
                f && f !== e && (a[e] = f);
            }
            return a;
        }();
        b(f.prototype, a.prototype), f.prototype._create = function() {
            this.css({
                position: "absolute"
            });
        }, f.prototype.handleEvent = function(a) {
            var b = "on" + a.type;
            this[b] && this[b](a);
        }, f.prototype.getSize = function() {
            this.size = c(this.element);
        }, f.prototype.css = function(a) {
            var b = this.element.style;
            for (var c in a) {
                var d = m[c] || c;
                b[d] = a[c];
            }
        }, f.prototype.getPosition = function() {
            var a = e(this.element), b = this.layout.options, c = b.isOriginLeft, d = b.isOriginTop, f = parseInt(a[c ? "left" : "right"], 10), g = parseInt(a[d ? "top" : "bottom"], 10);
            f = isNaN(f) ? 0 : f, g = isNaN(g) ? 0 : g;
            var h = this.layout.size;
            f -= c ? h.paddingLeft : h.paddingRight, g -= d ? h.paddingTop : h.paddingBottom, 
            this.position.x = f, this.position.y = g;
        }, f.prototype.layoutPosition = function() {
            var a = this.layout.size, b = this.layout.options, c = {};
            b.isOriginLeft ? (c.left = this.position.x + a.paddingLeft + "px", c.right = "") : (c.right = this.position.x + a.paddingRight + "px", 
            c.left = ""), b.isOriginTop ? (c.top = this.position.y + a.paddingTop + "px", c.bottom = "") : (c.bottom = this.position.y + a.paddingBottom + "px", 
            c.top = ""), this.css(c), this.emitEvent("layout", [ this ]);
        };
        var n = j ? function(a, b) {
            return "translate3d(" + a + "px, " + b + "px, 0)";
        } : function(a, b) {
            return "translate(" + a + "px, " + b + "px)";
        };
        f.prototype._transitionTo = function(a, b) {
            this.getPosition();
            var c = this.position.x, d = this.position.y, e = parseInt(a, 10), f = parseInt(b, 10), g = e === this.position.x && f === this.position.y;
            if (this.setPosition(a, b), g && !this.isTransitioning) return void this.layoutPosition();
            var h = a - c, i = b - d, j = {}, k = this.layout.options;
            h = k.isOriginLeft ? h : -h, i = k.isOriginTop ? i : -i, j.transform = n(h, i), 
            this.transition({
                to: j,
                onTransitionEnd: this.layoutPosition,
                isCleaning: !0
            });
        }, f.prototype.goTo = function(a, b) {
            this.setPosition(a, b), this.layoutPosition();
        }, f.prototype.moveTo = i ? f.prototype._transitionTo : f.prototype.goTo, f.prototype.setPosition = function(a, b) {
            this.position.x = parseInt(a, 10), this.position.y = parseInt(b, 10);
        }, f.prototype._nonTransition = function(a) {
            this.css(a.to), a.isCleaning && this._removeStyles(a.to), a.onTransitionEnd && a.onTransitionEnd.call(this);
        }, f.prototype._transition = function(a) {
            var b = this.layout.options.transitionDuration;
            if (!parseFloat(b)) return void this._nonTransition(a);
            var c = a.to, d = [];
            for (var e in c) d.push(e);
            var f = {};
            if (f.transitionProperty = d.join(","), f.transitionDuration = b, this.element.addEventListener(k, this, !1), 
            (a.isCleaning || a.onTransitionEnd) && (this.onTransitionEnd = function() {
                a.isCleaning && this._removeStyles(c), a.onTransitionEnd && a.onTransitionEnd.call(this);
            }), a.from) {
                this.css(a.from);
                var g = this.element.offsetHeight;
                g = null;
            }
            this.css(f), this.css(c), this.isTransitioning = !0;
        }, f.prototype.transition = f.prototype[g ? "_transition" : "_nonTransition"], f.prototype.onwebkitTransitionEnd = function(a) {
            this.ontransitionend(a);
        }, f.prototype.onotransitionend = function(a) {
            this.ontransitionend(a);
        }, f.prototype.ontransitionend = function(a) {
            a.target === this.element && (this.removeTransitionStyles(), this.element.removeEventListener(k, this, !1), 
            this.isTransitioning = !1, this.onTransitionEnd && (this.onTransitionEnd.call(this), 
            delete this.onTransitionEnd), this.emitEvent("transitionEnd", [ this ]));
        }, f.prototype._removeStyles = function(a) {
            var b = {};
            for (var c in a) b[c] = "";
            this.css(b);
        };
        var o = {
            transitionProperty: "",
            transitionDuration: ""
        };
        return f.prototype.removeTransitionStyles = function() {
            this.css(o);
        }, f.prototype.removeElem = function() {
            this.element.parentNode.removeChild(this.element), this.emitEvent("remove", [ this ]);
        }, f.prototype.remove = function() {
            if (!g || !parseFloat(this.layout.options.transitionDuration)) return void this.removeElem();
            var a = this;
            this.on("transitionEnd", function() {
                return a.removeElem(), !0;
            }), this.hide();
        }, f.prototype.reveal = function() {
            delete this.isHidden, this.css({
                display: ""
            });
            var a = this.layout.options;
            this.transition({
                from: a.hiddenStyle,
                to: a.visibleStyle,
                isCleaning: !0
            });
        }, f.prototype.hide = function() {
            this.isHidden = !0, this.css({
                display: ""
            });
            var a = this.layout.options;
            this.transition({
                from: a.visibleStyle,
                to: a.hiddenStyle,
                isCleaning: !0,
                onTransitionEnd: function() {
                    this.css({
                        display: "none"
                    });
                }
            });
        }, f.prototype.destroy = function() {
            this.css({
                position: "",
                left: "",
                right: "",
                top: "",
                bottom: "",
                transition: "",
                transform: ""
            });
        }, f;
    }
    var d = document.defaultView, e = d && d.getComputedStyle ? function(a) {
        return d.getComputedStyle(a, null);
    } : function(a) {
        return a.currentStyle;
    };
    "function" == typeof define && define.amd ? define("outlayer/item", [ "eventEmitter/EventEmitter", "get-size/get-size", "get-style-property/get-style-property" ], c) : (a.Outlayer = {}, 
    a.Outlayer.Item = c(a.EventEmitter, a.getSize, a.getStyleProperty));
}(window), function(a) {
    function b(a, b) {
        for (var c in b) a[c] = b[c];
        return a;
    }
    function c(a) {
        return "[object Array]" === k.call(a);
    }
    function d(a) {
        var b = [];
        if (c(a)) b = a; else if (a && "number" == typeof a.length) for (var d = 0, e = a.length; e > d; d++) b.push(a[d]); else b.push(a);
        return b;
    }
    function e(a) {
        return a.replace(/(.)([A-Z])/g, function(a, b, c) {
            return b + "-" + c;
        }).toLowerCase();
    }
    function f(c, f, k, n, o, p) {
        function q(a, c) {
            if ("string" == typeof a && (a = g.querySelector(a)), !a || !l(a)) return void (h && h.error("Bad " + this.settings.namespace + " element: " + a));
            this.element = a, this.options = b({}, this.options), this.option(c);
            var d = ++s;
            this.element.outlayerGUID = d, t[d] = this, this._create(), this.options.isInitLayout && this.layout();
        }
        function r(a, c) {
            a.prototype[c] = b({}, q.prototype[c]);
        }
        var s = 0, t = {};
        return q.prototype.settings = {
            namespace: "outlayer",
            item: p
        }, q.prototype.options = {
            containerStyle: {
                position: "relative"
            },
            isInitLayout: !0,
            isOriginLeft: !0,
            isOriginTop: !0,
            isResizeBound: !0,
            transitionDuration: "0.4s",
            hiddenStyle: {
                opacity: 0,
                transform: "scale(0.001)"
            },
            visibleStyle: {
                opacity: 1,
                transform: "scale(1)"
            }
        }, b(q.prototype, k.prototype), q.prototype.option = function(a) {
            b(this.options, a);
        }, q.prototype._create = function() {
            this.reloadItems(), this.stamps = [], this.stamp(this.options.stamp), b(this.element.style, this.options.containerStyle), 
            this.options.isResizeBound && this.bindResize();
        }, q.prototype.reloadItems = function() {
            this.items = this._getItems(this.element.children);
        }, q.prototype._getItems = function(a) {
            for (var b = this._filterFindItemElements(a), c = this.settings.item, d = [], e = 0, f = b.length; f > e; e++) {
                var g = b[e], h = new c(g, this, this.options.itemOptions);
                d.push(h);
            }
            return d;
        }, q.prototype._filterFindItemElements = function(a) {
            a = d(a);
            for (var b = this.options.itemSelector, c = [], e = 0, f = a.length; f > e; e++) {
                var g = a[e];
                if (l(g)) if (b) {
                    o(g, b) && c.push(g);
                    for (var h = g.querySelectorAll(b), i = 0, j = h.length; j > i; i++) c.push(h[i]);
                } else c.push(g);
            }
            return c;
        }, q.prototype.getItemElements = function() {
            for (var a = [], b = 0, c = this.items.length; c > b; b++) a.push(this.items[b].element);
            return a;
        }, q.prototype.layout = function() {
            this._resetLayout(), this._manageStamps();
            var a = void 0 !== this.options.isLayoutInstant ? this.options.isLayoutInstant : !this._isLayoutInited;
            this.layoutItems(this.items, a), this._isLayoutInited = !0;
        }, q.prototype._init = q.prototype.layout, q.prototype._resetLayout = function() {
            this.getSize();
        }, q.prototype.getSize = function() {
            this.size = n(this.element);
        }, q.prototype._getMeasurement = function(a, b) {
            var c, d = this.options[a];
            d ? ("string" == typeof d ? c = this.element.querySelector(d) : l(d) && (c = d), 
            this[a] = c ? n(c)[b] : d) : this[a] = 0;
        }, q.prototype.layoutItems = function(a, b) {
            a = this._getItemsForLayout(a), this._layoutItems(a, b), this._postLayout();
        }, q.prototype._getItemsForLayout = function(a) {
            for (var b = [], c = 0, d = a.length; d > c; c++) {
                var e = a[c];
                e.isIgnored || b.push(e);
            }
            return b;
        }, q.prototype._layoutItems = function(a, b) {
            if (!a || !a.length) return void this.emitEvent("layoutComplete", [ this, a ]);
            this._itemsOn(a, "layout", function() {
                this.emitEvent("layoutComplete", [ this, a ]);
            });
            for (var c = [], d = 0, e = a.length; e > d; d++) {
                var f = a[d], g = this._getItemLayoutPosition(f);
                g.item = f, g.isInstant = b, c.push(g);
            }
            this._processLayoutQueue(c);
        }, q.prototype._getItemLayoutPosition = function() {
            return {
                x: 0,
                y: 0
            };
        }, q.prototype._processLayoutQueue = function(a) {
            for (var b = 0, c = a.length; c > b; b++) {
                var d = a[b];
                this._positionItem(d.item, d.x, d.y, d.isInstant);
            }
        }, q.prototype._positionItem = function(a, b, c, d) {
            d ? a.goTo(b, c) : a.moveTo(b, c);
        }, q.prototype._postLayout = function() {
            var a = this._getContainerSize();
            a && (this._setContainerMeasure(a.width, !0), this._setContainerMeasure(a.height, !1));
        }, q.prototype._getContainerSize = j, q.prototype._setContainerMeasure = function(a, b) {
            if (void 0 !== a) {
                var c = this.size;
                c.isBorderBox && (a += b ? c.paddingLeft + c.paddingRight + c.borderLeftWidth + c.borderRightWidth : c.paddingBottom + c.paddingTop + c.borderTopWidth + c.borderBottomWidth), 
                a = Math.max(a, 0), this.element.style[b ? "width" : "height"] = a + "px";
            }
        }, q.prototype._itemsOn = function(a, b, c) {
            function d() {
                return e++, e === f && c.call(g), !0;
            }
            for (var e = 0, f = a.length, g = this, h = 0, i = a.length; i > h; h++) {
                var j = a[h];
                j.on(b, d);
            }
        }, q.prototype.ignore = function(a) {
            var b = this.getItem(a);
            b && (b.isIgnored = !0);
        }, q.prototype.unignore = function(a) {
            var b = this.getItem(a);
            b && delete b.isIgnored;
        }, q.prototype.stamp = function(a) {
            if (a = this._find(a)) {
                this.stamps = this.stamps.concat(a);
                for (var b = 0, c = a.length; c > b; b++) {
                    var d = a[b];
                    this.ignore(d);
                }
            }
        }, q.prototype.unstamp = function(a) {
            if (a = this._find(a)) for (var b = 0, c = a.length; c > b; b++) {
                var d = a[b], e = m(this.stamps, d);
                -1 !== e && this.stamps.splice(e, 1), this.unignore(d);
            }
        }, q.prototype._find = function(a) {
            return a ? ("string" == typeof a && (a = this.element.querySelectorAll(a)), a = d(a)) : void 0;
        }, q.prototype._manageStamps = function() {
            if (this.stamps && this.stamps.length) {
                this._getBoundingRect();
                for (var a = 0, b = this.stamps.length; b > a; a++) {
                    var c = this.stamps[a];
                    this._manageStamp(c);
                }
            }
        }, q.prototype._getBoundingRect = function() {
            var a = this.element.getBoundingClientRect(), b = this.size;
            this._boundingRect = {
                left: a.left + b.paddingLeft + b.borderLeftWidth,
                top: a.top + b.paddingTop + b.borderTopWidth,
                right: a.right - (b.paddingRight + b.borderRightWidth),
                bottom: a.bottom - (b.paddingBottom + b.borderBottomWidth)
            };
        }, q.prototype._manageStamp = j, q.prototype._getElementOffset = function(a) {
            var b = a.getBoundingClientRect(), c = this._boundingRect, d = n(a), e = {
                left: b.left - c.left - d.marginLeft,
                top: b.top - c.top - d.marginTop,
                right: c.right - b.right - d.marginRight,
                bottom: c.bottom - b.bottom - d.marginBottom
            };
            return e;
        }, q.prototype.handleEvent = function(a) {
            var b = "on" + a.type;
            this[b] && this[b](a);
        }, q.prototype.bindResize = function() {
            this.isResizeBound || (c.bind(a, "resize", this), this.isResizeBound = !0);
        }, q.prototype.unbindResize = function() {
            c.unbind(a, "resize", this), this.isResizeBound = !1;
        }, q.prototype.onresize = function() {
            function a() {
                b.resize();
            }
            this.resizeTimeout && clearTimeout(this.resizeTimeout);
            var b = this;
            this.resizeTimeout = setTimeout(a, 100);
        }, q.prototype.resize = function() {
            var a = n(this.element), b = this.size && a;
            b && a.innerWidth === this.size.innerWidth || (this.layout(), delete this.resizeTimeout);
        }, q.prototype.addItems = function(a) {
            var b = this._getItems(a);
            if (b.length) return this.items = this.items.concat(b), b;
        }, q.prototype.appended = function(a) {
            var b = this.addItems(a);
            b.length && (this.layoutItems(b, !0), this.reveal(b));
        }, q.prototype.prepended = function(a) {
            var b = this._getItems(a);
            if (b.length) {
                var c = this.items.slice(0);
                this.items = b.concat(c), this._resetLayout(), this.layoutItems(b, !0), this.reveal(b), 
                this.layoutItems(c);
            }
        }, q.prototype.reveal = function(a) {
            if (a && a.length) for (var b = 0, c = a.length; c > b; b++) {
                var d = a[b];
                d.reveal();
            }
        }, q.prototype.hide = function(a) {
            if (a && a.length) for (var b = 0, c = a.length; c > b; b++) {
                var d = a[b];
                d.hide();
            }
        }, q.prototype.getItem = function(a) {
            for (var b = 0, c = this.items.length; c > b; b++) {
                var d = this.items[b];
                if (d.element === a) return d;
            }
        }, q.prototype.getItems = function(a) {
            if (a && a.length) {
                for (var b = [], c = 0, d = a.length; d > c; c++) {
                    var e = a[c], f = this.getItem(e);
                    f && b.push(f);
                }
                return b;
            }
        }, q.prototype.remove = function(a) {
            a = d(a);
            var b = this.getItems(a);
            if (b && b.length) {
                this._itemsOn(b, "remove", function() {
                    this.emitEvent("removeComplete", [ this, b ]);
                });
                for (var c = 0, e = b.length; e > c; c++) {
                    var f = b[c];
                    f.remove();
                    var g = m(this.items, f);
                    this.items.splice(g, 1);
                }
            }
        }, q.prototype.destroy = function() {
            var a = this.element.style;
            a.height = "", a.position = "", a.width = "";
            for (var b = 0, c = this.items.length; c > b; b++) {
                var d = this.items[b];
                d.destroy();
            }
            this.unbindResize(), delete this.element.outlayerGUID, i && i.removeData(this.element, this.settings.namespace);
        }, q.data = function(a) {
            var b = a && a.outlayerGUID;
            return b && t[b];
        }, q.create = function(a, c) {
            function d() {
                q.apply(this, arguments);
            }
            return b(d.prototype, q.prototype), r(d, "options"), r(d, "settings"), b(d.prototype.options, c), 
            d.prototype.settings.namespace = a, d.data = q.data, d.Item = function() {
                p.apply(this, arguments);
            }, d.Item.prototype = new p(), d.prototype.settings.item = d.Item, f(function() {
                for (var b = e(a), c = g.querySelectorAll(".js-" + b), f = "data-" + b + "-options", j = 0, k = c.length; k > j; j++) {
                    var l, m = c[j], n = m.getAttribute(f);
                    try {
                        l = n && JSON.parse(n);
                    } catch (o) {
                        h && h.error("Error parsing " + f + " on " + m.nodeName.toLowerCase() + (m.id ? "#" + m.id : "") + ": " + o);
                        continue;
                    }
                    var p = new d(m, l);
                    i && i.data(m, a, p);
                }
            }), i && i.bridget && i.bridget(a, d), d;
        }, q.Item = p, q;
    }
    var g = a.document, h = a.console, i = a.jQuery, j = function() {}, k = Object.prototype.toString, l = "object" == typeof HTMLElement ? function(a) {
        return a instanceof HTMLElement;
    } : function(a) {
        return a && "object" == typeof a && 1 === a.nodeType && "string" == typeof a.nodeName;
    }, m = Array.prototype.indexOf ? function(a, b) {
        return a.indexOf(b);
    } : function(a, b) {
        for (var c = 0, d = a.length; d > c; c++) if (a[c] === b) return c;
        return -1;
    };
    "function" == typeof define && define.amd ? define("outlayer/outlayer", [ "eventie/eventie", "doc-ready/doc-ready", "eventEmitter/EventEmitter", "get-size/get-size", "matches-selector/matches-selector", "./item" ], f) : a.Outlayer = f(a.eventie, a.docReady, a.EventEmitter, a.getSize, a.matchesSelector, a.Outlayer.Item);
}(window), function(a) {
    function b(a, b) {
        var d = a.create("masonry");
        return d.prototype._resetLayout = function() {
            this.getSize(), this._getMeasurement("columnWidth", "outerWidth"), this._getMeasurement("gutter", "outerWidth"), 
            this.measureColumns();
            var a = this.cols;
            for (this.colYs = []; a--; ) this.colYs.push(0);
            this.maxY = 0;
        }, d.prototype.measureColumns = function() {
            if (this.getContainerWidth(), !this.columnWidth) {
                var a = this.items[0], c = a && a.element;
                this.columnWidth = c && b(c).outerWidth || this.containerWidth;
            }
            this.columnWidth += this.gutter, this.cols = Math.floor((this.containerWidth + this.gutter) / this.columnWidth), 
            this.cols = Math.max(this.cols, 1);
        }, d.prototype.getContainerWidth = function() {
            var a = this.options.isFitWidth ? this.element.parentNode : this.element, c = b(a);
            this.containerWidth = c && c.innerWidth;
        }, d.prototype._getItemLayoutPosition = function(a) {
            a.getSize();
            var b = Math.ceil(a.size.outerWidth / this.columnWidth);
            b = Math.min(b, this.cols);
            for (var d = this._getColGroup(b), e = Math.min.apply(Math, d), f = c(d, e), g = {
                x: this.columnWidth * f,
                y: e
            }, h = e + a.size.outerHeight, i = this.cols + 1 - d.length, j = 0; i > j; j++) this.colYs[f + j] = h;
            return g;
        }, d.prototype._getColGroup = function(a) {
            if (2 > a) return this.colYs;
            for (var b = [], c = this.cols + 1 - a, d = 0; c > d; d++) {
                var e = this.colYs.slice(d, d + a);
                b[d] = Math.max.apply(Math, e);
            }
            return b;
        }, d.prototype._manageStamp = function(a) {
            var c = b(a), d = this._getElementOffset(a), e = this.options.isOriginLeft ? d.left : d.right, f = e + c.outerWidth, g = Math.floor(e / this.columnWidth);
            g = Math.max(0, g);
            var h = Math.floor(f / this.columnWidth);
            h = Math.min(this.cols - 1, h);
            for (var i = (this.options.isOriginTop ? d.top : d.bottom) + c.outerHeight, j = g; h >= j; j++) this.colYs[j] = Math.max(i, this.colYs[j]);
        }, d.prototype._getContainerSize = function() {
            this.maxY = Math.max.apply(Math, this.colYs);
            var a = {
                height: this.maxY
            };
            return this.options.isFitWidth && (a.width = this._getContainerFitWidth()), a;
        }, d.prototype._getContainerFitWidth = function() {
            for (var a = 0, b = this.cols; --b && 0 === this.colYs[b]; ) a++;
            return (this.cols - a) * this.columnWidth - this.gutter;
        }, d.prototype.resize = function() {
            var a = this.containerWidth;
            this.getContainerWidth(), a !== this.containerWidth && this.layout();
        }, d;
    }
    var c = Array.prototype.indexOf ? function(a, b) {
        return a.indexOf(b);
    } : function(a, b) {
        for (var c = 0, d = a.length; d > c; c++) {
            var e = a[c];
            if (e === b) return c;
        }
        return -1;
    };
    "function" == typeof define && define.amd ? define('vendor/misc/masonry',[ "outlayer/outlayer", "get-size/get-size" ], b) : a.Masonry = b(a.Outlayer, a.getSize);
}(window);
define('be/layout/mason',[ "jquery", "log", "nbd/util/extend", "nbd/util/media", "nbd/Promise", "be/decorator/waitsforimages", "vendor/misc/masonry" ], function(a, b, c, d, e, f, g) {
    "use strict";
    b = b.get("be/layout/mason");
    var h, i = a(window), j = {
        itemSelector: ".js-item",
        isInitLayout: !1,
        isResizeBound: !1,
        hiddenStyle: {
            visibility: "hidden"
        },
        visibleStyle: {
            visibility: "visible"
        },
        transitionDuration: 0
    };
    return {
        init: function(e, f) {
            if (!e) throw b.error("A context must be provided to init"), new Error("[be/layout/mason] A context must be provided to init");
            f = f || {};
            var g = f.toggleQuery;
            delete f.toggleQuery, this.$context = e, this.options = c(j, f), this._adjustMasonry = this._adjustMasonry.bind(this), 
            f.columnWidth && (this.$sizer = a("<div>", {
                "class": f.columnWidth.replace(/\./, "")
            }).css({
                visibility: "hidden",
                position: "absolute",
                top: 0,
                left: 0
            }).prependTo(e)), h || void 0 === g || (d("mason-min", g), h = !0), d.on("mason-min", this._toggle, this), 
            this._toggle(d.is("mason-min"));
        },
        destroy: function() {
            d.off(null, null, this), i.off("resize", this._adjustMasonry), this.$context = null, 
            this.$sizer && (this.$sizer.remove(), this.$sizer = null), this._mason && (this._mason.off("layoutComplete"), 
            this._mason.destroy(), this._mason = null);
        },
        update: function() {
            this.ready() && (this._forceContainerSize(this.$context), this._mason.layout());
        },
        prepend: function(a) {
            return this._addItems(a, "prepended");
        },
        append: function(a) {
            return this._addItems(a, "appended");
        },
        ready: function() {
            return !!this._mason;
        },
        onLayoutCompleted: function(a) {
            this.ready && this._mason.on("layoutComplete", a);
        },
        _adjustMasonry: function() {
            this.ready() && (this._adjustmentTimeoutId && window.clearTimeout(this._adjustmentTimeoutId), 
            this.$context.css("visibility", "hidden"), this._adjustmentTimeoutId = window.setTimeout(function() {
                this._forceContainerSize(this.$context), this.ready() && this._mason.layout(), this.$context.css("visibility", "visible");
            }.bind(this), 100));
        },
        _create: function(a) {
            return new g(a[0], this.options);
        },
        _addItems: function(a, c) {
            return this.ready() ? (this._mason.on("layoutComplete", this._layoutCompleted.bind(this)), 
            new e(function(d) {
                a && (a.css("visibility", "hidden"), this._forceContainerSize(a.addClass("js-item")), 
                this._mason[c](a), this._mason.layout(), a.css("visibility", "visible"), b.info("Added " + a.length + " items"), 
                d());
            }.bind(this))) : e.resolve();
        },
        _layoutCompleted: function(a, c) {
            return b.info("Laid out " + c.length + " items"), !0;
        },
        _forceContainerSize: function(b) {
            b.find("[data-aspect-ratio] img").each(function(b, c) {
                var d = a(c), e = d.closest("[data-aspect-ratio]"), f = e.data(), g = e.width(), h = g / f.width, i = Math.ceil(g / f.aspectRatio), j = f.minHeight ? Math.ceil(h * f.minHeight) : i, k = f.maxHeight ? Math.ceil(h * f.maxHeight) : i, l = Math.max(Math.min(i, k), j);
                d.addClass("js-loaded"), e.css("height", l);
            }.bind(this));
        },
        _toggle: function(a) {
            a ? this._mason && (i.off("resize", this._adjustMasonry), setTimeout(function() {
                this.destroy();
            }.bind(this._mason), 101), this._mason.destroy(), this._mason = null) : this._mason || (this._mason = this._create(this.$context), 
            i.on("resize", this._adjustMasonry), this._forceContainerSize(this.$context), this._mason.layout());
        }
    };
});
define('deprecated/pluck',[],function() {
    "use strict";
    return function(a, b, c) {
        return a.toArray().map(function(a) {
            var d = a.getAttribute(b);
            return c ? 0 | d : d;
        }).filter(function(a) {
            return null != a;
        });
    };
});

define("require/hgn!templates/wip-option", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"wip-option-wrap cfix\">");t.b("\n" + i);t.b("  <div class=\"wip-option-image-wrap left wip-thumbnail size-50\"><img class=\"wip-option-image ui-corner size-50\" src=\"");t.b(t.v(t.f("latest_thumb",c,p,0)));t.b("\"></div>");t.b("\n" + i);t.b("  <div class=\"wip-option-info-wrap left\">");t.b("\n" + i);t.b("    <div class=\"wip-option-title bold text-ellipsis\">");t.b(t.v(t.f("title",c,p,0)));t.b("</div>");t.b("\n" + i);if(t.s(t.f("subtitle",c,p,1),c,p,0,305,368,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"wip-option-subtitle\">");t.b(t.v(t.f("subtitle",c,p,0)));t.b("</div>");t.b("\n" + i);});c.pop();}if(!t.s(t.f("subtitle",c,p,1),c,p,1,0,0,"")){t.b("      <div class=\"wip-option-count\">");t.b(t.v(t.f("revision_count",c,p,0)));t.b(" Revisions</div>");t.b("\n" + i);};t.b("  </div>");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
!function(a) {
    function b(d) {
        return this.filter(b.resizableFilterSelector).each(function() {
            new c(a(this), d);
        }), this;
    }
    function c(c, d) {
        c.data("AutoResizer") && c.data("AutoResizer").destroy(), d = this.config = a.extend({}, b.defaults, d), 
        this.el = c, this.nodeName = c[0].nodeName.toLowerCase(), this.originalHeight = c.height(), 
        this.previousScrollTop = null, this.value = c.val(), "original" === d.maxWidth && (d.maxWidth = c.width()), 
        "original" === d.minWidth && (d.minWidth = c.width()), "original" === d.maxHeight && (d.maxHeight = c.height()), 
        "original" === d.minHeight && (d.minHeight = c.height()), "textarea" === this.nodeName && c.css({
            resize: "none",
            overflowY: "hidden"
        }), c.data("AutoResizer", this), this.createClone(), this.injectClone(), this.bind();
    }
    {
        var d = "ar" + Math.random().toString();
        b.defaults = {
            onResize: function() {},
            animate: {
                duration: 200,
                complete: function() {}
            },
            extraSpace: 50,
            minHeight: "original",
            maxHeight: 500,
            minWidth: "original",
            maxWidth: 500
        };
    }
    b.cloneCSSProperties = [ "lineHeight", "textDecoration", "letterSpacing", "fontSize", "fontFamily", "fontStyle", "fontWeight", "textTransform", "textAlign", "direction", "wordSpacing", "fontSizeAdjust", "paddingLeft", "paddingRight", "paddingTop", "paddingBottom", "width" ], 
    b.cloneCSSValues = {
        position: "absolute",
        top: -9999,
        left: -9999,
        opacity: 0,
        overflow: "hidden"
    }, b.resizableFilterSelector = [ "textarea:not(textarea." + d + ")", "input:not(input[type])", "input[type=text]", "input[type=password]", "input[type=email]", "input[type=url]" ].join(","), 
    b.AutoResizer = c, a.fn.autoResize = b, c.prototype = {
        bind: function() {
            var b = a.proxy(function() {
                return this.check(), !0;
            }, this);
            this.unbind(), this.el.bind("keyup.autoResize", b).bind("change.autoResize", b), 
            this.check(null, !0);
        },
        unbind: function() {
            this.el.unbind(".autoResize");
        },
        createClone: function() {
            var c = this.el, e = "textarea" === this.nodeName ? c.clone() : a("<span/>");
            this.clone = e, a.each(b.cloneCSSProperties, function(a, b) {
                e[0].style[b] = c.css(b);
            }), e.removeAttr("name").removeAttr("id").addClass(d).attr("tabIndex", -1).css(b.cloneCSSValues), 
            "textarea" === this.nodeName ? e.height("auto") : e.width("auto").css({
                whiteSpace: "nowrap"
            });
        },
        check: function(a, b) {
            var c, d, e, f, g = this.config, h = this.clone, i = this.el, j = i.val();
            return "input" === this.nodeName ? (h.text(j), c = h.width(), f = i.width(), e = c + g.extraSpace >= g.minWidth ? c + g.extraSpace : g.minWidth, 
            e = Math.min(e, g.maxWidth), void ((f > e && e >= g.minWidth || e >= g.minWidth && e <= g.maxWidth) && (g.onResize.call(i), 
            i.scrollLeft(0), g.animate && !b ? i.stop(1, 1).animate({
                width: e
            }, g.animate) : i.width(e)))) : (h.width(i.width()).height(0).val(j).scrollTop(1e4), 
            d = h[0].scrollTop, void (this.previousScrollTop !== d && (this.previousScrollTop = d, 
            d + g.extraSpace >= g.maxHeight ? (i.css("overflowY", ""), d = g.maxHeight) : d <= g.minHeight ? d = g.minHeight : (i.css("overflowY", "hidden"), 
            d += g.extraSpace), g.onResize.call(i), g.animate && !b ? i.stop(1, 1).animate({
                height: d
            }, g.animate) : i.height(d))));
        },
        destroy: function() {
            this.unbind(), this.el.removeData("AutoResizer"), this.clone.remove(), delete this.el, 
            delete this.clone;
        },
        injectClone: function() {
            var c = b.cloneContainer;
            c || (c = a("<arclones/>").appendTo("body")), c.append(this.clone);
        }
    };
}(jQuery);
define("jquery/plugins/jquery.autoresize", function(){});

!function(a) {
    "use strict";
    return "function" == typeof define && define.amd ? void define('jquery/be/bubblelist',[ "jquery", "jquery/ui/core" ], function() {
        var b = a.apply(this, arguments);
        return b;
    }) : jQuery && a.call(this, jQuery);
}(function(a) {
    "use strict";
    function b(a) {
        return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g, "\\$&");
    }
    return {
        widgetEventPrefix: "bubble",
        options: {
            blacklist: [],
            btn_classes: [ "form-button", "form-button-light-and-grey", "right" ],
            close_classes: [ "pointer", "sprite-site-elements" ],
            data: {},
            data_src: null,
            defaultValues: null,
            delimiter: ",",
            display_classes: [],
            icon_classes: [],
            limit: 3,
            list_classes: [ "form-list" ],
            item_classes: [ "item" ]
        },
        _data: null,
        _delimiter: null,
        _optionHandler: {
            disabled: function(a, b) {
                this.widget()[b ? "addClass" : "removeClass"](this.widgetFullName + "-disabled ui-state-disabled").attr("aria-disabled", b);
            },
            data_src: function(b, c) {
                var d, e = this;
                if (c) {
                    if (c instanceof a) try {
                        d = a.when(a.parseJSON(c.html()));
                    } catch (f) {} else if ("string" == typeof c) try {
                        d = a.ajax(c).pipe(function(a) {
                            return a.json || a;
                        });
                    } catch (f) {} else "function" == typeof c.promise && (d = c.promise());
                    this._data = d ? d.pipe(function(b) {
                        return a.extend(b, e.options.data);
                    }) : null;
                }
                this._data || (this._data = a.when(this.options.data));
            },
            delimiter: function(c, d) {
                this._delimiter = new RegExp("[" + b(a.isArray(d) ? d.join("") : d.toString()) + "]", "g");
            },
            defaultValues: function(b, c) {
                c ? a.isArray(c) || (this.options.defaultValues = c.toString().split(this._delimiter)) : this.options.defaultValues = this.element.is("input") ? this.element.val() : [];
            },
            blacklist: function(b, c) {
                a.isArray(c) || (this.options.blacklist = c.toString().split(this._delimiter));
            }
        },
        _make_bubble: function(b, c) {
            return b instanceof a || (c = b, b = a("<li />").addClass(this.options.item_classes.join(" ")).addClass(this.options.item_classes.concat(this.widgetName + "-item").join(" "))), 
            a('<span class="text" />').addClass(this.options.display_classes.join(" ")).text(c).appendTo(b.empty()), 
            a('<span class="close-btn" />').addClass(this.options.close_classes.join(" ")).on("click", {
                that: this,
                parent: b
            }, this._remove_bubble).appendTo(b), b;
        },
        _remove_bubble: function(a) {
            a.data.parent.remove(), a.stopPropagation();
        }
    };
});
!function(a) {
    "use strict";
    return "function" == typeof define && define.amd ? void define('jquery/be/textbubble',[ "jquery", "jquery/be/bubblelist", "jquery/ui/widget" ], function() {
        var b = a.apply(this, arguments);
        return b;
    }) : jQuery && a.call(this, jQuery);
}(function(a, b) {
    "use strict";
    a.widget("ui.textboxlist", a.extend({}, b, {
        options: {
            allow_numbers: !1,
            word_limit: 3,
            char_buffer: 5,
            min_length: 2,
            adtl_close_classes: [ "pointer", "sprite-site-elements" ],
            adtl_display_classes: [],
            create_keys: [ a.ui.keyCode.ENTER, a.ui.keyCode.NUMPAD_ENTER, a.ui.keyCode.TAB, a.ui.keyCode.COMMA, a.ui.keyCode.COLON, a.ui.keyCode.SEMICOLON ],
            add_from_input: !0,
            blacklist: [],
            list_classes: [],
            ignore_blur_override: !1,
            limit: 0,
            valueSeparator: ",",
            grow: !1
        },
        keycodes: {},
        _id: "",
        _$hiddenWidth: !1,
        $_list: !1,
        _init: function() {
            var b = this, c = !1;
            return this.keycodes[a.ui.keyCode.COMMA] = ",", this.keycodes[a.ui.keyCode.COLON] = ":", 
            this.keycodes[a.ui.keyCode.SEMICOLON] = ";", this._id = this.element.attr("id"), 
            this._$hiddenWidth = a('<div id="' + this._id + '-hidden" class="ui-textboxlist-hidden-width" />'), 
            this.$_list = a('<div id="' + this._id + '-list" class="ui-textboxlist" />'), this.placeholder = this.element.attr("placeholder"), 
            this.$_list.addClass(this.options.list_classes.join(" ")).on("focus blur", "input", function(a) {
                b.$_list.toggleClass("focus", "focusin" === a.type);
            }), this.element.addClass("ui-textboxlist-hidden-text").after(this.$_list), this.options.grow && this.$_list.css({
                minHeight: this.$_list.height(),
                height: "auto"
            }), this.options.display_classes = this.options.adtl_display_classes.concat("ui-textboxlist-selection-display", this.options.display_classes), 
            this.options.close_classes = this.options.adtl_close_classes.concat("ui-textboxlist-deletebutton", this.options.close_classes), 
            "" !== this.element.val() && this.element.val().split(",").forEach(function(a) {
                b.addValue(a);
            }), this._update_hidden_text(), this.$_list.addClass("ui-textboxlist"), this.element.after(this._$hiddenWidth), 
            this.options.ignore_blur_override !== !0 && this.$_list.on("blur", "input", function() {
                return c === !0 ? void (c = !1) : void (b._good_value(this.value) ? b._create_bubble_from_input(this, !1) : this.value = "");
            }), -1 !== this.options.create_keys.indexOf(a.ui.keyCode.COMMA) && this.$_list.on("paste", "input", function() {
                var c = this;
                setTimeout(function() {
                    if (b.options.add_from_input !== !0) return void b.element.trigger("textboxlist.change", [ c.value ]);
                    var d, e, f = c.value, g = f.split(" "), h = 0, i = "";
                    b.options.word_limit > 0 && g.length > b.options.word_limit && (g.forEach(function(c) {
                        i += " " + c, ++h, i = a.trim(i), h === b.options.word_limit && (i += ",", h = 0);
                    }), "," === i.substr(-1) && (i = i.substr(0, i.length - 1)), c.value = i), -1 !== c.value.indexOf(",") && (d = c.value.split(","), 
                    a.each(d, function(c, d) {
                        b.addValue(a.trim(d));
                    }), e = b.$_list.find("input"), e.val(""));
                }, 5);
            }), this.$_list.on("keydown", "input", function(d) {
                a.inArray(d.keyCode, b.options.create_keys) && (c = !0);
                var e = this, f = this.value;
                setTimeout(function() {
                    c = !1;
                    var g = [], h = 0, i = !0, j = !1;
                    if (b._update_hidden(e), "" === f && "" === e.value && d.keyCode === a.ui.keyCode.BACKSPACE) return j = b.$_list.find(".ui-textboxlist-deletebutton").last(), 
                    void (j.length ? j.trigger("click") : b.element.trigger("textboxlist.change", [ e.value ]));
                    if (b.options.add_from_input !== !0) return void b.element.trigger("textboxlist.change", [ e.value ]);
                    if (-1 !== b.options.create_keys.indexOf(d.keyCode)) {
                        switch (i = d.keyCode !== a.ui.keyCode.TAB, d.keyCode) {
                          case a.ui.keyCode.TAB:
                          case a.ui.keyCode.ENTER:
                          case a.ui.keyCode.NUMPAD_ENTER:
                            break;

                          default:
                            e.value = e.value.substr(0, e.value.length - 1);
                        }
                        return void b._create_bubble_from_input(e, i);
                    }
                    d.keyCode === a.ui.keyCode.SPACE && b.options.word_limit > 0 && (g = e.value.split(" "), 
                    h = g.length - 1, h >= b.options.word_limit && (e.value = e.value.substr(0, e.value.length - 1), 
                    b._create_bubble_from_input(e)));
                }, 1), (d.keyCode === a.ui.keyCode.ENTER || d.keyCode === a.ui.keyCode.NUMPAD_ENTER) && (d.stopPropagation(), 
                d.preventDefault());
            }), this.$_list.on("click", function() {
                a(this).find("input").focus();
            }), this.$_list.on("focus", "input", function() {
                b._update_hidden(this);
            }), this._add_input(!1), this.placeholder && this.refresh(), this.$_list;
        },
        _create_bubble: function(a, b) {
            var c = this.keycodes, d = "";
            return this.options.create_keys.forEach(function(a) {
                c[a] && (d += c[a]);
            }), d = new RegExp("[" + d + "]+", "gi"), b = b.replace(d, ""), a = this._make_bubble(a, b), 
            a.addClass("ui-textboxlist-bit-done"), this._update_hidden_text(), a.find(".ui-textboxlist-deletebutton");
        },
        _good_value: function(b) {
            b = a.trim(b.toString());
            var c = b.toLowerCase();
            return -1 !== a.inArray(c, this.options.blacklist) ? (this.element.trigger("textboxlist.blacklisted", [ b ]), 
            !1) : "" === b || b.match(/^\s+$/) ? (this.element.trigger("textboxlist.empty", [ b ]), 
            !1) : !this.options.allow_numbers && b.match(/^\d+$/) ? (this.element.trigger("textboxlist.numbersonly", [ b ]), 
            !1) : b.length < this.options.min_length ? (this.element.trigger("textboxlist.min_length", [ b ]), 
            !1) : -1 !== a.inArray(b, this.dataArray()) ? (this.element.trigger("textboxlist.duplicate", [ b ]), 
            !1) : this.options.limit && this.dataArray().length >= this.options.limit ? (this.element.trigger("textboxlist.limitHit", [ b ]), 
            !1) : !0;
        },
        _create_bubble_from_input: function(b, c) {
            c = c === !1 ? !1 : !0;
            var d = a.trim(b.value), e = a(b), f = e.parent();
            if (this._good_value(d)) return f.html(d), this._create_bubble(f, d), this._add_input(c);
        },
        _remove_bubble: function(a) {
            var b = a.data.parent, c = a.data.that;
            b.remove(), c._update_hidden_text(), c.refresh(), a.stopPropagation(), c.element.trigger("textboxlist.removedBit", [ b ]), 
            c.options.limit && c.dataArray().length < c.options.limit && c.element.trigger("textboxlist.limitNotHit");
        },
        _update_hidden: function(b) {
            var c, d = b.value, e = !!this.element.val();
            e ? a(b).removeAttr("placeholder") : (d = this.placeholder, a(b).attr("placeholder", this.placeholder)), 
            this._$hiddenWidth[0].innerHTML = d, c = this._$hiddenWidth.width() + this.options.char_buffer, 
            b.style.width = 50 > c ? "50px" : c + "px";
        },
        _add_item: function(b) {
            var c = a("<li />");
            return b && b.length ? b.before(c) : this.$_list.append(c), c.addClass("ui-textboxlist-bit"), 
            c;
        },
        _add_input: function(b) {
            b = b === !1 ? !1 : !0;
            var c = this.$_list.find(".ui-textboxlist-bit-input"), d = this._add_item(), e = c.parent();
            return c.length ? e.remove() : c = a('<input type="text" />'), d.append(c), c.addClass("ui-textboxlist-bit-input"), 
            b === !0 && c.focus(), c;
        },
        _update_hidden_text: function() {
            var b = [];
            this.$_list.find(".ui-textboxlist-bit-done").each(function() {
                b[b.length] = a(this).text();
            }), this.element.val(b.join(this.options.valueSeparator)), this.element.trigger("textboxlist.change");
        },
        list: function() {
            return this.$_list;
        },
        refresh: function() {
            this._update_hidden(this.$_list.find("input")[0]);
        },
        addValue: function(a) {
            if (this._good_value(a)) {
                var b = this._add_item(this.$_list.find(".ui-textboxlist-bit-input").closest("li"));
                return this._create_bubble(b, a);
            }
        },
        fieldValue: function() {
            return this.$_list.find("input").last().val();
        },
        dataArray: function() {
            var b = [], c = this;
            return this.$_list.find(".ui-textboxlist-bit-done").each(function() {
                var d = a(this).text(), e = d.toLowerCase();
                -1 === a.inArray(e, c.options.blacklist) && (b[b.length] = d);
            }), b;
        }
    }));
});

define('require/css!styles/jquery/plugins/jquery.tinyscrollbar',[],function(){});
!function() {
    function a(a) {
        c.push(a), window.postMessage(d, "*");
    }
    function b(a) {
        if (a.source == window && a.data == d && (a.stopPropagation(), c.length > 0)) {
            var b = c.shift();
            b();
        }
    }
    var c = [], d = "zero-timeout-message", e = "function" == typeof window.postMessage && "function" == typeof window.addEventListener;
    e && window.addEventListener("message", b, !0), window.setZeroTimeout = e ? a : function(a) {
        window.setTimeout(a, 0);
    };
}(), function(a) {
    function b(b, c) {
        function d() {
            p.parent().triggerHandler("scroll.tiny", {
                hasOverflow: o.hasOverflow(),
                scrollRatio: o.getScrollRatio()
            }), r.obj.addClass("scrolling"), p.parent().addClass("scrolling-container"), B.setup(function() {
                r.obj.removeClass("scrolling"), p.parent().removeClass("scrolling-container");
            });
        }
        function e() {
            u.obj.css(w, n / r.ratio), q.obj[0][y] = n, A.start = u.obj.offset()[w];
            var a = x.toLowerCase();
            r.obj.css(a, t[c.axis]), t.obj.css(a, t[c.axis]), u.obj.css(a, u[c.axis]);
        }
        function f(b) {
            if (s.ratio < 1) {
                b = b || window.event;
                var e = b.wheelDelta ? b.wheelDelta / 120 : -b.detail / 3;
                n -= e * c.wheel, n = Math.min(s[c.axis] - q[c.axis], Math.max(0, n)), u.obj.css(w, n / r.ratio), 
                q.obj[0][y] = n, r.obj.addClass("scrolling"), d(), a.support.changeBubbles || (b = a.event.fix(b)), 
                b.preventDefault();
            }
        }
        function g(a) {
            return s.ratio < 1 && (z.now = Math.min(t[c.axis] - u[c.axis], Math.max(0, z.start + ((v ? a.pageX : a.pageY) - A.start))), 
            n = z.now * r.ratio, u.obj.css(w, z.now), q.obj[0][y] = n, d()), !1;
        }
        function h() {
            var a = this;
            return s.ratio < 1 && window.setZeroTimeout(function() {
                var b = s[c.axis] - q[c.axis];
                n = a[y], n = 0 > n ? 0 : n, n = n > b ? b : n, u.obj.css(w, n / r.ratio), d();
            }), !1;
        }
        function i() {
            return o.dragging = !1, a(document).unbind("mousemove", g), a(document).unbind("mouseup", i), 
            u.obj.unbind("mouseup", i), document.ontouchmove = u.obj[0].ontouchend = document.ontouchend = null, 
            !1;
        }
        function j(b) {
            o.dragging = !0, A.start = v ? b.pageX : b.pageY;
            var c = parseInt(u.obj.css(w), 10);
            return z.start = "auto" == c ? 0 : c, a(document).bind("mousemove", g), document.ontouchmove = function(b) {
                a(document).unbind("mousemove"), g(b.touches[0]);
            }, a(document).bind("mouseup", i), u.obj.bind("mouseup", i), u.obj[0].ontouchend = document.ontouchend = function(b) {
                a(document).unbind("mouseup"), u.obj.unbind("mouseup"), i(b.touches[0]);
            }, !1;
        }
        function k() {
            u.obj.bind("mousedown", j), u.obj[0].ontouchstart = function(a) {
                return a.preventDefault(), u.obj.unbind("mousedown"), j(a.touches[0]), !1;
            }, t.obj.bind("mouseup", g), c.scroll && this.addEventListener ? (p[0].addEventListener("DOMMouseScroll", f, !1), 
            p[0].addEventListener("mousewheel", f, !1)) : c.scroll && (p[0].onmousewheel = f), 
            q.obj.bind("scroll", h);
        }
        function l() {
            window.clearInterval(o.interval), p.unbind("destroyed", l);
        }
        function m() {
            return o.update(), k(), c.update && c.update > 0 && (o.interval = window.setInterval(function() {
                o.dragging || o.update("relative");
            }, c.update), p.bind("destroyed", l)), o;
        }
        var n, o = this, p = b, q = {
            obj: a(">.be-viewport", b)
        }, r = {
            obj: a(">.be-scrollbar", b)
        }, s = {
            obj: a(">.be-content", q.obj)
        }, t = {
            obj: a(".be-track", r.obj)
        }, u = {
            obj: a(".be-thumb", r.obj)
        }, v = "x" == c.axis, w = v ? "left" : "top", x = v ? "Width" : "Height", y = "scroll" + w.charAt(0).toUpperCase() + w.slice(1), z = {
            start: 0,
            now: 0
        }, A = {}, B = {
            remind: function(a) {
                a(), delete this.timeoutID;
            },
            setup: function(a) {
                this.cancel();
                var b = this;
                this.timeoutID = setTimeout(function() {
                    b.remind(a);
                }, c.wait);
            },
            cancel: function() {
                "number" == typeof this.timeoutID && (clearTimeout(this.timeoutID), delete this.timeoutID);
            }
        };
        return this.update = function(a) {
            var b = v ? "height" : "width";
            c.rigid && (p.width(p.parent().width()).height(p.parent().height()), s.obj.css(b, p[b]())), 
            q[c.axis] = q.obj[0]["client" + x], s[c.axis] = s.obj[0]["scroll" + x], s.ratio = q[c.axis] / s[c.axis], 
            q.obj.css(b, p[b]() + (c.rigid || s.ratio < 1 ? o.constructor[b] : 0)), r.obj.toggleClass("disable", s.ratio >= 1), 
            o.dragging && i(), p[s.ratio < 1 ? "addClass" : "removeClass"]("has-scrollbar"), 
            t[c.axis] = "auto" == c.size ? q[c.axis] : c.size, u[c.axis] = Math.min(t[c.axis], Math.max(0, "auto" == c.sizethumb ? t[c.axis] * s.ratio : c.sizethumb)), 
            r.ratio = "auto" == c.sizethumb ? s[c.axis] / t[c.axis] : (s[c.axis] - q[c.axis]) / (t[c.axis] - u[c.axis]), 
            n = "relative" == a && s.ratio <= 1 ? Math.min(s[c.axis] - q[c.axis], Math.max(0, n)) : 0, 
            n = "bottom" == a && s.ratio <= 1 ? s[c.axis] - q[c.axis] : isNaN(parseInt(y, 10)) ? n : parseInt(y, 10), 
            e();
        }, this.hasOverflow = function() {
            return s[c.axis] - q[c.axis] > 0;
        }, this.getRemaining = function() {
            return s[c.axis] - q[c.axis] - n;
        }, this.getScrollRatio = function() {
            return n / (s[c.axis] - q[c.axis]);
        }, this.destroy = function() {
            l();
            var a = s.obj.children().detach();
            p.parent().removeData("tsb").end().replaceWith(a);
        }, m();
    }
    var c = {
        axis: "y",
        wheel: 60,
        scroll: !1,
        rigid: !0,
        size: "auto",
        sizethumb: "auto",
        wait: 1e3,
        update: 0
    }, d = '<div class="be-scroll-container"><div class="be-scrollbar"><div class="be-track"><div class="be-thumb"></div></div></div><div class="be-viewport"><div class="be-content"></div></div>';
    a.fn.tinyscrollbar = function(e) {
        if (this.data("tsb")) return "destroy" === e ? void this.data("tsb").destroy() : (this.data("tsb").update(e), 
        this);
        if (!b.width) {
            var f = a('<div style="width:100px;height:100px;overflow:scroll;visibility:hidden;top:0;left:0;position:absolute"><div style="width:100%;height:100%"></div></div>').appendTo(document.body);
            b.width = f.width() - f.children().width(), b.height = f.height() - f.children().height() || b.width, 
            f.remove();
        }
        return "function" == typeof window.hasOwnProperty && window.hasOwnProperty("ontouchstart") || window.DocumentTouch && document instanceof DocumentTouch ? (this.css({
            "overflow-y": "scroll",
            "-webkit-overflow-scrolling": "touch"
        }), this) : (e = a.extend({}, c, e), this.each(function() {
            var c = a(this), f = c.children().detach();
            c.data("tsb", new b(a(d).appendTo(c).find(".be-content").append(f).end(), e));
        }), this);
    };
}(jQuery);
define("jquery/plugins/jquery.tinyscrollbar", function(){});


define('require/css!styles/networki/wip/creation',[],function(){});
define('be/View/Wip/Manage',[ "deprecated/pluck", "Core", "jquery", "nbd/Class", "nbd/event", "nbd/util/deparam", "be/charCounter", "be/form", "be/xhr", "hgn!templates/wip-option", "jquery/plugins/jquery.autoresize", "jquery/be/textbubble", "jquery/plugins/jquery.tinyscrollbar", "jquery/plugins/jquery.custominput", "jquery/plugins/jquery.ui.selectmenu", "jquery/plugins/jquery.tmpl", "jquery/plugins/jquery.validation", "css!styles/networki/wip/creation.css", "Fn" ], function(a, b, c, d, e, f, g, h, i, j) {
    "use strict";
    var k, l = c(document.body);
    return k = d.extend({
        loaded_wips: !1,
        user_wips_order: [],
        user_wips: {},
        user_wips_tags: [],
        user_wips_count: 0,
        $form: null,
        current_wip: null,
        current_revision: null,
        use_selectmenu: !0,
        tagsLimit: 15,
        TRACKING: {},
        init: function() {
            this.destroyDeletePopup = this.destroyDeletePopup.bind(this);
        },
        destroyDeletePopup: function() {
            this.$delete_pop && (this.$delete_pop.popup("destroy"), this.$delete_pop = null);
        },
        infoTemplate: function(a, b) {
            var d = this.current_wip || {};
            return c("#wip-info-tmpl").tmpl({
                wip: d,
                revision: a,
                image_params: b
            });
        },
        isCreating: function() {
            return !this.current_wip || c.isEmptyObject(this.current_wip);
        },
        track: function(a) {
            this.TRACKING.TYPES && this.TRACKING.TYPES[a] && i({
                url: "/portfolio/wips/track/" + this.TRACKING.TYPES[a],
                type: "POST"
            });
        },
        toggleTeamMenu: function(a) {
            var b = this.$form.find(".js-team"), d = c(a.currentTarget);
            +d.val() === this.constructor.PRIVACY.PUBLIC ? b.changeInput("enable") : (b.changeInput("value", 0), 
            b.changeInput("disable"));
        },
        fillInFormData: function(a, b) {
            var d = this.$pop ? this.$pop.find(".js-wip-info-container") : c(".js-wip-info-container"), e = this.current_wip || {}, f = a.title || e.title;
            d.find(".js-wip-image-preview").prop("src", b.imageData || b.image_path), d.find(".js-image-width").text(b.width), 
            d.find(".js-image-height").text(b.height), d.find(".js-wip-title").text(f).prop("value", f), 
            d.find(".js-wip-description").prop("value", a.description), d.find(".js-hidden-revision-id").prop("value", a.id);
        },
        loadUserWips: function() {
            var a = c("#wip_id-button"), b = function() {
                this.loading_wips = !1, a.data("spinner").stop();
            }.bind(this);
            if (!this.loading_wips && this.initialized) return this.loaded_wips === !0 ? void this.updateWipSelectOptions() : (a.spin(), 
            a.data().spinner.el && c(a.data().spinner.el).css({
                top: "14px"
            }), this.loading_wips = !0, this.getUserWips().then(function(a) {
                this.loaded_wips = !0, this.user_wips_order = a.user_wips_order, this.user_wips = a.user_wips, 
                this.updateWipSelectOptions(), b();
            }.bind(this), function() {
                throw b(), this;
            }));
        },
        getUserWips: function() {
            return i({
                url: "/portfolio/wips/user_owned",
                type: "get"
            });
        },
        onNewWorkRadioChange: function(a) {
            var b = +a.currentTarget.value, c = this.$form.find("#tags"), d = this.$form.find("#title"), e = this.$form.find("#visibility"), f = this.$form.find(".js-team"), g = [], h = "", i = this.constructor.PRIVACY.PUBLIC, j = 0;
            b ? (d.val(h), g.forEach(function(a) {
                c.textboxlist("addValue", a);
            }), e.changeInput("value", i).trigger("change"), f.changeInput("value", j)) : (h = d.val(), 
            g = c.textboxlist("dataArray"), i = e.val(), j = f.val()), this.$form.attr("new_wip", b);
        },
        populateFormWithSelectedWip: function(b) {
            var d, e = c(b.currentTarget), f = this.$form.find("#revision_id"), g = this.$form.find("#title"), h = this.$form.find(".js-wip-id"), i = this.$form.find(".js-team"), j = this.$form.find("#visibility"), k = this.$form.find("#tags"), l = e.val(), m = "public", n = [], o = 0, p = 0, q = {}, r = a(this.$form.find("#tags-favorites-list").find(".object-tag"), "value");
            "0" !== this.$form.find("#new_wip :checked").val() || f.val() || (this.use_selectmenu ? (d = this.isCreating() ? "#wip_id-button .wip-option-title" : "#title_view", 
            g.val(this.$form.find(d).text())) : g.val(h.find("option:selected").text())), this.isCreating() && (void 0 !== this.user_wips[l] && (m = this.user_wips[l].privacy, 
            n = this.user_wips[l].latest_tags, o = this.user_wips[l].mature_content, q = this.user_wips[l].admin_locks, 
            p = +this.user_wips[l].team_id), i.changeInput("value", p), j.changeInput("value", "public" === m ? this.constructor.PRIVACY.PUBLIC : this.constructor.PRIVACY.PRIVATE).trigger("change"), 
            this.$form.find("#mature").changeInput(1 === o ? "check" : "uncheck"), this.$form.find("#tags-list").find(".close-btn").click(), 
            n && n.length && c.each(n, function(a, b) {
                var d = c.trim(b);
                k.textboxlist("addValue", d), c.inArray(d, r) > -1 && c("#tags-favorites-list").find('.object-tag[value="' + d + '"]').addClass("hide");
            }), this.updateModerationLocks(q));
        },
        initInfo: function(a, b, d) {
            this.track("TYPE_UPLOAD"), a = a || {}, b = b || {}, this.initialized = !1, this.$form = this.getForm() || this.renderInfoForm(a, b, d);
            var e = this.user_wips_count, f = this.isCreating();
            return this.$form.addClass("wip-form"), this.initWipIdDropdown(), this.initTeam(), 
            this.initVisibility(), g.init(this.$form), this.$form.find("input").customInput(), 
            0 === e && this.$form.addClass("wip-form-create-wip-first"), f ? this.$form.find("#title").focus() : this.$form.attr("method", "PATCH"), 
            this.initInfoForm(a, b), f ? this.$form.find("#new_wip .form-radio").on("change", this.onNewWorkRadioChange.bind(this)) : this.current_revision ? (this.$form.addClass("wip-form-update-revision-existing"), 
            this.$form.find("#edit-wip-title").on("click", function() {
                this.$form.find("#title_view-container").hide(), this.$form.find("#title-container").show();
            }.bind(this)), this.updateModerationLocks(this.current_wip.admin_locks)) : this.$form.addClass("wip-form-create-revision-existing"), 
            c("#new_wip_0").on("change", this.loadUserWips.bind(this)), this.initTags(), c("#tags-list").on("blur", "input", function() {
                this.$form.find("#tags").textboxlist("dataArray").length <= this.tagsLimit && c(".formError.tags.limitHit").remove();
            }.bind(this)), this.$form.find("#tags-list").addClass("form-textarea"), this.updateWipSelectOptions(), 
            this.updateFormValues(a), this.updateFavoriteTags(a), this.initialized = !0, this.$form;
        },
        initWipIdDropdown: function() {
            var a = this.$form.find(".js-wip-id");
            this.use_selectmenu && a.selectmenu(), a.changeInput("disable").on("change", this.populateFormWithSelectedWip.bind(this));
        },
        initTeam: function() {
            var a = this.$form.find(".js-team");
            this.use_selectmenu && a.selectmenu();
        },
        initVisibility: function() {
            var a = this.$form.find(".js-visibility");
            this.use_selectmenu && a.selectmenu(), a.on("change", this.toggleTeamMenu.bind(this));
        },
        initTags: function() {
            var a = this.$form.find("#tags"), b = this.$form, d = this;
            a.textboxlist({
                min_length: 2,
                limit: this.tagsLimit
            }).bind("textboxlist.blacklisted", function(d, e) {
                var f = "<b>'" + e + "'</b> cannot be used as a tag because it is a creative field. Please enter it above.";
                c.validation.buildPrompt(b, a, f);
            }).bind("textboxlist.limitHit", function() {
                var e = "You may only select up to <b>" + d.tagsLimit + "</b> tags";
                c.validation.buildPrompt(b, a, e).addClass("limitHit");
            }).bind("textboxlist.numbersonly", function() {
                c.validation.buildPrompt(b, a, "You may not choose only numbers as tags");
            }).bind("textboxlist.min_length", function() {
                c.validation.buildPrompt(b, a, "You must enter at least two characters");
            }).bind("textboxlist.change", function() {
                c(".formError.tags").remove();
            });
        },
        updateWipSelectOptions: function() {
            var a = this, b = this.$form.find("#wip_id"), d = "";
            b.find(".form-option").not(".form-option-empty").remove(), d = c.trim(b.html()), 
            c.isArray(this.user_wips_order) && c.each(this.user_wips_order, function(b, e) {
                var f, g, h = a.user_wips[e];
                a.use_selectmenu ? (f = c("<div/>").append(j(h)).html(), g = c("<div/>").text(f).html()) : g = h.title, 
                d += '<option class="form-option" value="' + h.id + '">' + g + "</option>";
            }), b.html(d), this.use_selectmenu && b.selectmenu(), b.changeInput("enable").trigger("change");
        },
        initInfoForm: function(a, b) {
            var c = this, d = this.server_url;
            this.isCreating() || (d += "/" + this.current_wip.id), this.infoForm = h.extend({
                _getButtonContainer: function() {
                    return this.$form.find(".popup-form-controls, .form-controls");
                }
            }).init(this.$form.attr("action", d)).on("success", function(a) {
                c.current_wip = a.wip || c.current_wip, c.current_revision = a.revision || c.current_revision, 
                c.onInfoSuccess(a, this.toJSON().data, b), a.revision && e.trigger("wip.edited", c.current_wip), 
                a.wip || a.revision || c.track("TYPE_INFO");
            }), this.infoForm.commit = function(a) {
                return a.data.tags = a.data.tags.replace(/,/g, "|"), "function" == typeof c.modifyInfoData && c.modifyInfoData(a, b), 
                this;
            }, this.fillInFormData(a, b);
        },
        updateFormValues: function(a) {
            var b = [], c = this.isCreating(), d = c ? 1 : 0, e = this.$form, f = e.find("#tags"), g = e.find("#wip_id"), h = e.find("#visibility");
            h.changeInput("value", c || "public" === this.current_wip.privacy ? this.constructor.PRIVACY.PUBLIC : this.constructor.PRIVACY.PRIVATE).trigger("change"), 
            c || g.changeInput("value", this.current_wip.id), a.tags ? b = a.tags : !c && this.current_wip.latest_tags && (b = this.current_wip.latest_tags), 
            b.forEach(function(a) {
                f.textboxlist("addValue", a);
            }), e.find('#new_wip .form-radio[value="' + d + '"]').changeInput("check").trigger("change"), 
            !c && this.current_wip.mature_content && e.find("#mature").changeInput("check");
        },
        updateFavoriteTags: function(a) {
            var b = [], d = this.$form, e = d.find("#tags"), f = c("#tags-favorites-container"), g = c("#tags-favorites-toggle"), h = c("#tags-favorites-list"), i = c("#tags-favorites");
            0 !== this.user_wips_tags.length && (d.find("#tags-wrap").addClass("with-favorites"), 
            c.each(this.user_wips_tags, function(a, b) {
                d.find("#tags-favorites").append('<a class="object-tag left" value="' + b + '">' + b + "</a>");
            }), a.tags && (b = a.tags), b && b.length && (h.find(".object-tag").each(function() {
                var a = c(this), d = a.text();
                c.inArray(d, b) > -1 && a.addClass("hide");
            }), 0 === h.find(".object-tag").not(".hide").length && f.addClass("disabled")), 
            g.on("click", function() {
                return f.hasClass("disabled") ? !1 : void f.toggleClass("menu-open");
            }), l.on("click", function(a) {
                var b = c(a.target);
                0 === b.closest("#tags-favorites-container").length && f.removeClass("menu-open");
            }), h.off("click").on("click", ".object-tag", function() {
                var a = c(this);
                e.textboxlist("addValue", a.text()), a.addClass("hide"), 0 === h.find(".object-tag").not(".hide").length && (f.removeClass("menu-open"), 
                f.addClass("disabled"));
            }), e.on("textboxlist.removedBit", function(a, b) {
                var c = b, d = c.text(), e = h.find('.object-tag[value="' + d + '"]');
                e.removeClass("hide"), f.removeClass("disabled");
            }), i.height() > h.height() && h.width(h.width() + 40).height(h.height()).css({
                "padding-right": 0,
                overflow: "auto"
            }).tinyscrollbar());
        },
        updateModerationLocks: function(a) {
            if (!a) return !1;
            var b = this.$form, c = "";
            b.removeClass("wip-form-lock-mature").removeClass("wip-form-lock-privacy").removeClass("wip-form-lock-flagged").removeClass("wip-form-lock-dmca"), 
            a.mature_lock && (c += " wip-form-lock-mature"), a.privacy_lock && (c += " wip-form-lock-privacy"), 
            a.dmca_lock && (c += " wip-form-lock-dmca"), a.flagged_lock && (c += " wip-form-lock-flagged"), 
            c && b.addClass(c);
        }
    }, {
        PRIVACY: {
            PUBLIC: 1,
            PRIVATE: 2
        }
    });
});
define('be/disabledupload',[ "be/modal/simple" ], function(a) {
    return function(b, c) {
        return b.uploads && b.uploads.disabled === !0 ? (c && a({
            title: b.uploads.disabled_header || "Upload Maintenance",
            html: b.uploads.disabled_msg || "Please try again later",
            buttons: [ {
                label: "Okay",
                classes: [ "form-button-default", "js-close" ]
            } ],
            hideClose: !0
        }), !0) : !1;
    };
});

define("require/hgn!templates/be/uploadUnsupportedBrowser", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div>");t.b("\n" + i);t.b("  <span>Uploads are not supported for your browser version.</span>");t.b("\n" + i);t.b("  <br />");t.b("\n" + i);t.b("  <a href=\"https://help.behance.net/entries/21745635-What-browsers-are-supported-\">Please see our FAQ</a>");t.b("\n" + i);t.b("  for a list of supported browsers.");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('be/Controller/Dialog/browserNotSupported',[ "be/Modal", "hgn!templates/be/uploadUnsupportedBrowser" ], function(a, b) {
    "use strict";
    return function() {
        a.simple({
            title: "Unsupported browser version",
            html: b(),
            classes: [ "js-upload-unsupported-browser" ],
            buttons: [ {
                label: "OK",
                classes: [ "form-button-default", "js-close" ]
            } ]
        });
    };
});
define('Core/Popup',[ "Core" ], function(a) {
    return a.popup;
});
define('be/Image',[ "beff/Component" ], function(a) {
    "use strict";
    return a.extend({
        image: null,
        init: function() {
            var a = this;
            this.image = new window.Image(), this.image.onload = function() {
                a.trigger("load", this);
            }, this.image.onerror = function() {
                a.trigger("error", arguments);
            };
        },
        src: function(a) {
            this.image.src = a;
        }
    });
});
define('be/FileReader',[ "nbd/Promise", "beff/Component", "be/Image" ], function(a, b, c) {
    "use strict";
    return b.extend({
        Image: c,
        read: function(a) {
            this.reader.readAsDataURL(a);
        },
        load: function(b) {
            this.reader = new window.FileReader();
            var c = new a(), d = this;
            return this.reader.onload = function(a) {
                if (!b.type.match("image")) return void c.resolve({
                    name: a.target.name || b.name,
                    width: 0,
                    height: 0,
                    mode: "data",
                    mime: a.target.type || b.type,
                    result: a.target.result,
                    source: a.target.result.split(",")[1],
                    img: null
                });
                var e = new d.Image();
                e.on("load", function(d) {
                    var f = {
                        name: a.target.name || b.name,
                        width: a.target.width || d.width,
                        height: a.target.height || d.height,
                        mode: "data",
                        mime: a.target.type || b.type,
                        result: a.target.result,
                        source: a.target.result.split(",")[1],
                        img: e.image
                    };
                    c.resolve(f);
                }).on("error", function() {
                    c.reject(arguments);
                }).src(a.target.result);
            }, this.reader.onerror = function() {
                c.reject(arguments);
            }, this.read(b), c;
        }
    });
});
define('be/ImageUtils',[ "nbd/Promise" ], function(a) {
    return {
        imgToCanvasCrop: function(a, b) {
            var c = document.createElement("canvas"), d = b.w || b.x2 - b.x, e = b.h || b.y2 - b.y;
            return c.width = d, c.height = e, c.getContext("2d").drawImage(a, b.x, b.y, d, e, 0, 0, d, e), 
            c;
        },
        imgToCanvas: function(a) {
            var b = document.createElement("canvas");
            return b.width = a.width, b.height = a.height, b.getContext("2d").drawImage(a, 0, 0), 
            b;
        },
        canvasToImg: function(b, c) {
            var d = new window.Image(), e = new a();
            return d.onload = function() {
                e.resolve(d);
            }, d.onerror = function() {
                e.reject(arguments);
            }, d.src = b.toDataURL(c || "image/png"), e;
        },
        getCroppedImage: function(a, b) {
            var c = this.imgToCanvasCrop(a, b), d = this.getMimeType(a);
            return this.canvasToImg(c, d);
        },
        getMimeType: function(a) {
            var b = /image(.*)[;]/, c = b.exec(a.src), d = c[0];
            return d && (d = d.slice(0, -1)), d;
        }
    };
});
var qq = function(a) {
    "use strict";
    return {
        hide: function() {
            return a.style.display = "none", this;
        },
        attach: function(b, c) {
            return a.addEventListener ? a.addEventListener(b, c, !1) : a.attachEvent && a.attachEvent("on" + b, c), 
            function() {
                qq(a).detach(b, c);
            };
        },
        detach: function(b, c) {
            return a.removeEventListener ? a.removeEventListener(b, c, !1) : a.attachEvent && a.detachEvent("on" + b, c), 
            this;
        },
        contains: function(b) {
            return b ? a === b ? !0 : a.contains ? a.contains(b) : !!(8 & b.compareDocumentPosition(a)) : !1;
        },
        insertBefore: function(b) {
            return b.parentNode.insertBefore(a, b), this;
        },
        remove: function() {
            return a.parentNode.removeChild(a), this;
        },
        css: function(b) {
            if (null == a.style) throw new qq.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!");
            return null != b.opacity && "string" != typeof a.style.opacity && "undefined" != typeof a.filters && (b.filter = "alpha(opacity=" + Math.round(100 * b.opacity) + ")"), 
            qq.extend(a.style, b), this;
        },
        hasClass: function(b) {
            var c = new RegExp("(^| )" + b + "( |$)");
            return c.test(a.className);
        },
        addClass: function(b) {
            return qq(a).hasClass(b) || (a.className += " " + b), this;
        },
        removeClass: function(b) {
            var c = new RegExp("(^| )" + b + "( |$)");
            return a.className = a.className.replace(c, " ").replace(/^\s+|\s+$/g, ""), this;
        },
        getByClass: function(b) {
            var c, d = [];
            return a.querySelectorAll ? a.querySelectorAll("." + b) : (c = a.getElementsByTagName("*"), 
            qq.each(c, function(a, c) {
                qq(c).hasClass(b) && d.push(c);
            }), d);
        },
        children: function() {
            for (var b = [], c = a.firstChild; c; ) 1 === c.nodeType && b.push(c), c = c.nextSibling;
            return b;
        },
        setText: function(b) {
            return a.innerText = b, a.textContent = b, this;
        },
        clearText: function() {
            return qq(a).setText("");
        },
        hasAttribute: function(b) {
            var c;
            return a.hasAttribute ? a.hasAttribute(b) ? null == /^false$/i.exec(a.getAttribute(b)) : !1 : (c = a[b], 
            void 0 === c ? !1 : null == /^false$/i.exec(c));
        }
    };
};

!function() {
    "use strict";
    qq.log = function(a, b) {
        window.console && (b && "info" !== b ? window.console[b] ? window.console[b](a) : window.console.log("<" + b + "> " + a) : window.console.log(a));
    }, qq.isObject = function(a) {
        return a && !a.nodeType && "[object Object]" === Object.prototype.toString.call(a);
    }, qq.isFunction = function(a) {
        return "function" == typeof a;
    }, qq.isArray = function(a) {
        return "[object Array]" === Object.prototype.toString.call(a) || a && window.ArrayBuffer && a.buffer && a.buffer.constructor === ArrayBuffer;
    }, qq.isItemList = function(a) {
        return "[object DataTransferItemList]" === Object.prototype.toString.call(a);
    }, qq.isNodeList = function(a) {
        return "[object NodeList]" === Object.prototype.toString.call(a) || a.item && a.namedItem;
    }, qq.isString = function(a) {
        return "[object String]" === Object.prototype.toString.call(a);
    }, qq.trimStr = function(a) {
        return String.prototype.trim ? a.trim() : a.replace(/^\s+|\s+$/g, "");
    }, qq.format = function(a) {
        var b = Array.prototype.slice.call(arguments, 1), c = a, d = c.indexOf("{}");
        return qq.each(b, function(a, b) {
            var e = c.substring(0, d), f = c.substring(d + 2);
            return c = e + b + f, d = c.indexOf("{}", d + b.length), 0 > d ? !1 : void 0;
        }), c;
    }, qq.isFile = function(a) {
        return window.File && "[object File]" === Object.prototype.toString.call(a);
    }, qq.isFileList = function(a) {
        return window.FileList && "[object FileList]" === Object.prototype.toString.call(a);
    }, qq.isFileOrInput = function(a) {
        return qq.isFile(a) || qq.isInput(a);
    }, qq.isInput = function(a, b) {
        var c = function(a) {
            var c = a.toLowerCase();
            return b ? "file" !== c : "file" === c;
        };
        return window.HTMLInputElement && "[object HTMLInputElement]" === Object.prototype.toString.call(a) && a.type && c(a.type) ? !0 : a.tagName && "input" === a.tagName.toLowerCase() && a.type && c(a.type) ? !0 : !1;
    }, qq.isBlob = function(a) {
        return window.Blob && "[object Blob]" === Object.prototype.toString.call(a) ? !0 : void 0;
    }, qq.isXhrUploadSupported = function() {
        var a = document.createElement("input");
        return a.type = "file", void 0 !== a.multiple && "undefined" != typeof File && "undefined" != typeof FormData && "undefined" != typeof qq.createXhrInstance().upload;
    }, qq.createXhrInstance = function() {
        if (window.XMLHttpRequest) return new XMLHttpRequest();
        try {
            return new ActiveXObject("MSXML2.XMLHTTP.3.0");
        } catch (a) {
            return qq.log("Neither XHR or ActiveX are supported!", "error"), null;
        }
    }, qq.isFolderDropSupported = function(a) {
        return a.items && a.items.length > 0 && a.items[0].webkitGetAsEntry;
    }, qq.isFileChunkingSupported = function() {
        return !qq.androidStock() && qq.isXhrUploadSupported() && (void 0 !== File.prototype.slice || void 0 !== File.prototype.webkitSlice || void 0 !== File.prototype.mozSlice);
    }, qq.sliceBlob = function(a, b, c) {
        var d = a.slice || a.mozSlice || a.webkitSlice;
        return d.call(a, b, c);
    }, qq.arrayBufferToHex = function(a) {
        var b = "", c = new Uint8Array(a);
        return qq.each(c, function(a, c) {
            var d = c.toString(16);
            d.length < 2 && (d = "0" + d), b += d;
        }), b;
    }, qq.readBlobToHex = function(a, b, c) {
        var d = qq.sliceBlob(a, b, b + c), e = new FileReader(), f = new qq.Promise();
        return e.onload = function() {
            f.success(qq.arrayBufferToHex(e.result));
        }, e.onerror = f.failure, e.readAsArrayBuffer(d), f;
    }, qq.extend = function(a, b, c) {
        return qq.each(b, function(b, d) {
            c && qq.isObject(d) ? (void 0 === a[b] && (a[b] = {}), qq.extend(a[b], d, !0)) : a[b] = d;
        }), a;
    }, qq.override = function(a, b) {
        var c = {}, d = b(c);
        return qq.each(d, function(b, d) {
            void 0 !== a[b] && (c[b] = a[b]), a[b] = d;
        }), a;
    }, qq.indexOf = function(a, b, c) {
        if (a.indexOf) return a.indexOf(b, c);
        c = c || 0;
        var d = a.length;
        for (0 > c && (c += d); d > c; c += 1) if (a.hasOwnProperty(c) && a[c] === b) return c;
        return -1;
    }, qq.getUniqueId = function() {
        return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(a) {
            var b = 16 * Math.random() | 0, c = "x" == a ? b : 3 & b | 8;
            return c.toString(16);
        });
    }, qq.ie = function() {
        return -1 !== navigator.userAgent.indexOf("MSIE");
    }, qq.ie7 = function() {
        return -1 !== navigator.userAgent.indexOf("MSIE 7");
    }, qq.ie10 = function() {
        return -1 !== navigator.userAgent.indexOf("MSIE 10");
    }, qq.ie11 = function() {
        return -1 !== navigator.userAgent.indexOf("Trident") && -1 !== navigator.userAgent.indexOf("rv:11");
    }, qq.safari = function() {
        return void 0 !== navigator.vendor && -1 !== navigator.vendor.indexOf("Apple");
    }, qq.chrome = function() {
        return void 0 !== navigator.vendor && -1 !== navigator.vendor.indexOf("Google");
    }, qq.opera = function() {
        return void 0 !== navigator.vendor && -1 !== navigator.vendor.indexOf("Opera");
    }, qq.firefox = function() {
        return !qq.ie11() && -1 !== navigator.userAgent.indexOf("Mozilla") && void 0 !== navigator.vendor && "" === navigator.vendor;
    }, qq.windows = function() {
        return "Win32" === navigator.platform;
    }, qq.android = function() {
        return -1 !== navigator.userAgent.toLowerCase().indexOf("android");
    }, qq.androidStock = function() {
        return qq.android() && navigator.userAgent.toLowerCase().indexOf("chrome") < 0;
    }, qq.ios7 = function() {
        return qq.ios() && -1 !== navigator.userAgent.indexOf(" OS 7_");
    }, qq.ios = function() {
        return -1 !== navigator.userAgent.indexOf("iPad") || -1 !== navigator.userAgent.indexOf("iPod") || -1 !== navigator.userAgent.indexOf("iPhone");
    }, qq.preventDefault = function(a) {
        a.preventDefault ? a.preventDefault() : a.returnValue = !1;
    }, qq.toElement = function() {
        var a = document.createElement("div");
        return function(b) {
            a.innerHTML = b;
            var c = a.firstChild;
            return a.removeChild(c), c;
        };
    }(), qq.each = function(a, b) {
        var c, d;
        if (a) if (window.Storage && a.constructor === window.Storage) for (c = 0; c < a.length && (d = b(a.key(c), a.getItem(a.key(c))), 
        d !== !1); c++) ; else if (qq.isArray(a) || qq.isItemList(a) || qq.isNodeList(a)) for (c = 0; c < a.length && (d = b(c, a[c]), 
        d !== !1); c++) ; else if (qq.isString(a)) for (c = 0; c < a.length && (d = b(c, a.charAt(c)), 
        d !== !1); c++) ; else for (c in a) if (Object.prototype.hasOwnProperty.call(a, c) && (d = b(c, a[c]), 
        d === !1)) break;
    }, qq.bind = function(a, b) {
        if (qq.isFunction(a)) {
            var c = Array.prototype.slice.call(arguments, 2);
            return function() {
                var d = qq.extend([], c);
                return arguments.length && (d = d.concat(Array.prototype.slice.call(arguments))), 
                a.apply(b, d);
            };
        }
        throw new Error("first parameter must be a function!");
    }, qq.obj2url = function(a, b, c) {
        var d = [], e = "&", f = function(a, c) {
            var e = b ? /\[\]$/.test(b) ? b : b + "[" + c + "]" : c;
            "undefined" !== e && "undefined" !== c && d.push("object" == typeof a ? qq.obj2url(a, e, !0) : "[object Function]" === Object.prototype.toString.call(a) ? encodeURIComponent(e) + "=" + encodeURIComponent(a()) : encodeURIComponent(e) + "=" + encodeURIComponent(a));
        };
        return !c && b ? (e = /\?/.test(b) ? /\?$/.test(b) ? "" : "&" : "?", d.push(b), 
        d.push(qq.obj2url(a))) : "[object Array]" === Object.prototype.toString.call(a) && "undefined" != typeof a ? qq.each(a, function(a, b) {
            f(b, a);
        }) : "undefined" != typeof a && null !== a && "object" == typeof a ? qq.each(a, function(a, b) {
            f(b, a);
        }) : d.push(encodeURIComponent(b) + "=" + encodeURIComponent(a)), b ? d.join(e) : d.join(e).replace(/^&/, "").replace(/%20/g, "+");
    }, qq.obj2FormData = function(a, b, c) {
        return b || (b = new FormData()), qq.each(a, function(a, d) {
            a = c ? c + "[" + a + "]" : a, qq.isObject(d) ? qq.obj2FormData(d, b, a) : qq.isFunction(d) ? b.append(a, d()) : b.append(a, d);
        }), b;
    }, qq.obj2Inputs = function(a, b) {
        var c;
        return b || (b = document.createElement("form")), qq.obj2FormData(a, {
            append: function(a, d) {
                c = document.createElement("input"), c.setAttribute("name", a), c.setAttribute("value", d), 
                b.appendChild(c);
            }
        }), b;
    }, qq.parseJson = function(json) {
        return window.JSON && qq.isFunction(JSON.parse) ? JSON.parse(json) : eval("(" + json + ")");
    }, qq.getExtension = function(a) {
        var b = a.lastIndexOf(".") + 1;
        return b > 0 ? a.substr(b, a.length - b) : void 0;
    }, qq.getFilename = function(a) {
        return qq.isInput(a) ? a.value.replace(/.*(\/|\\)/, "") : qq.isFile(a) && null !== a.fileName && void 0 !== a.fileName ? a.fileName : a.name;
    }, qq.DisposeSupport = function() {
        var a = [];
        return {
            dispose: function() {
                var b;
                do b = a.shift(), b && b(); while (b);
            },
            attach: function() {
                var a = arguments;
                this.addDisposer(qq(a[0]).attach.apply(this, Array.prototype.slice.call(arguments, 1)));
            },
            addDisposer: function(b) {
                a.push(b);
            }
        };
    };
}(), function() {
    "use strict";
    qq.Error = function(a) {
        this.message = "[Fine Uploader " + qq.version + "] " + a;
    }, qq.Error.prototype = new Error();
}(), qq.version = "5.0.4", qq.supportedFeatures = function() {
    "use strict";
    function a() {
        var a, b = !0;
        try {
            a = document.createElement("input"), a.type = "file", qq(a).hide(), a.disabled && (b = !1);
        } catch (c) {
            b = !1;
        }
        return b;
    }
    function b() {
        return (qq.chrome() || qq.opera()) && void 0 !== navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/);
    }
    function c() {
        return (qq.chrome() || qq.opera()) && void 0 !== navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/);
    }
    function d() {
        if (window.XMLHttpRequest) {
            var a = qq.createXhrInstance();
            return void 0 !== a.withCredentials;
        }
        return !1;
    }
    function e() {
        return void 0 !== window.XDomainRequest;
    }
    function f() {
        return d() ? !0 : e();
    }
    function g() {
        return void 0 !== document.createElement("input").webkitdirectory;
    }
    var h, i, j, k, l, m, n, o, p, q, r, s, t, u;
    return h = a(), j = h && qq.isXhrUploadSupported(), i = j && !qq.androidStock(), 
    k = j && b(), l = j && qq.isFileChunkingSupported(), m = j && l && !!window.localStorage, 
    n = j && c(), o = h && (void 0 !== window.postMessage || j), q = d(), p = e(), r = f(), 
    s = g(), t = j && void 0 !== window.FileReader, u = function() {
        return j ? !(qq.androidStock() || qq.ios() && navigator.userAgent.indexOf("CriOS") >= 0) : !1;
    }(), {
        ajaxUploading: j,
        blobUploading: i,
        canDetermineSize: j,
        chunking: l,
        deleteFileCors: r,
        deleteFileCorsXdr: p,
        deleteFileCorsXhr: q,
        fileDrop: j,
        folderDrop: k,
        folderSelection: s,
        imagePreviews: t,
        imageValidation: t,
        itemSizeValidation: j,
        pause: l,
        progressBar: u,
        resume: m,
        scaling: t && i,
        tiffPreviews: qq.safari(),
        unlimitedScaledImageSize: !qq.ios(),
        uploading: h,
        uploadCors: o,
        uploadCustomHeaders: j,
        uploadNonMultipart: j,
        uploadViaPaste: n
    };
}(), qq.isGenericPromise = function(a) {
    "use strict";
    return !!(a && a.then && qq.isFunction(a.then));
}, qq.Promise = function() {
    "use strict";
    var a, b, c = [], d = [], e = [], f = 0;
    qq.extend(this, {
        then: function(e, g) {
            return 0 === f ? (e && c.push(e), g && d.push(g)) : -1 === f ? g && g.apply(null, b) : e && e.apply(null, a), 
            this;
        },
        done: function(c) {
            return 0 === f ? e.push(c) : c.apply(null, void 0 === b ? a : b), this;
        },
        success: function() {
            return f = 1, a = arguments, c.length && qq.each(c, function(b, c) {
                c.apply(null, a);
            }), e.length && qq.each(e, function(b, c) {
                c.apply(null, a);
            }), this;
        },
        failure: function() {
            return f = -1, b = arguments, d.length && qq.each(d, function(a, c) {
                c.apply(null, b);
            }), e.length && qq.each(e, function(a, c) {
                c.apply(null, b);
            }), this;
        }
    });
}, qq.BlobProxy = function(a, b) {
    "use strict";
    qq.extend(this, {
        referenceBlob: a,
        create: function() {
            return b(a);
        }
    });
}, qq.UploadButton = function(a) {
    "use strict";
    function b() {
        var a = document.createElement("input");
        return a.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME, d), f.multiple && a.setAttribute("multiple", ""), 
        f.folders && qq.supportedFeatures.folderSelection && a.setAttribute("webkitdirectory", ""), 
        f.acceptFiles && a.setAttribute("accept", f.acceptFiles), a.setAttribute("type", "file"), 
        a.setAttribute("name", f.name), qq(a).css({
            position: "absolute",
            right: 0,
            top: 0,
            fontFamily: "Arial",
            fontSize: "118px",
            margin: 0,
            padding: 0,
            cursor: "pointer",
            opacity: 0
        }), f.element.appendChild(a), e.attach(a, "change", function() {
            f.onChange(a);
        }), e.attach(a, "mouseover", function() {
            qq(f.element).addClass(f.hoverClass);
        }), e.attach(a, "mouseout", function() {
            qq(f.element).removeClass(f.hoverClass);
        }), e.attach(a, "focus", function() {
            qq(f.element).addClass(f.focusClass);
        }), e.attach(a, "blur", function() {
            qq(f.element).removeClass(f.focusClass);
        }), window.attachEvent && a.setAttribute("tabIndex", "-1"), a;
    }
    var c, d, e = new qq.DisposeSupport(), f = {
        element: null,
        multiple: !1,
        acceptFiles: null,
        folders: !1,
        name: "qqfile",
        onChange: function() {},
        hoverClass: "qq-upload-button-hover",
        focusClass: "qq-upload-button-focus"
    };
    qq.extend(f, a), d = qq.getUniqueId(), qq(f.element).css({
        position: "relative",
        overflow: "hidden",
        direction: "ltr"
    }), c = b(), qq.extend(this, {
        getInput: function() {
            return c;
        },
        getButtonId: function() {
            return d;
        },
        setMultiple: function(a) {
            a !== f.multiple && (a ? c.setAttribute("multiple", "") : c.removeAttribute("multiple"));
        },
        setAcceptFiles: function(a) {
            a !== f.acceptFiles && c.setAttribute("accept", a);
        },
        reset: function() {
            c.parentNode && qq(c).remove(), qq(f.element).removeClass(f.focusClass), c = b();
        }
    });
}, qq.UploadButton.BUTTON_ID_ATTR_NAME = "qq-button-id", qq.UploadData = function(a) {
    "use strict";
    function b(a) {
        if (qq.isArray(a)) {
            var b = [];
            return qq.each(a, function(a, c) {
                b.push(e[c]);
            }), b;
        }
        return e[a];
    }
    function c(a) {
        if (qq.isArray(a)) {
            var b = [];
            return qq.each(a, function(a, c) {
                b.push(e[f[c]]);
            }), b;
        }
        return e[f[a]];
    }
    function d(a) {
        var b = [], c = [].concat(a);
        return qq.each(c, function(a, c) {
            var d = g[c];
            void 0 !== d && qq.each(d, function(a, c) {
                b.push(e[c]);
            });
        }), b;
    }
    var e = [], f = {}, g = {}, h = {}, i = {};
    qq.extend(this, {
        addFile: function(b) {
            var c = b.status || qq.status.SUBMITTING, d = e.push({
                name: b.name,
                originalName: b.name,
                uuid: b.uuid,
                size: b.size || -1,
                status: c
            }) - 1;
            return b.batchId && (e[d].batchId = b.batchId, void 0 === i[b.batchId] && (i[b.batchId] = []), 
            i[b.batchId].push(d)), b.proxyGroupId && (e[d].proxyGroupId = b.proxyGroupId, void 0 === h[b.proxyGroupId] && (h[b.proxyGroupId] = []), 
            h[b.proxyGroupId].push(d)), e[d].id = d, f[b.uuid] = d, void 0 === g[c] && (g[c] = []), 
            g[c].push(d), a.onStatusChange(d, null, c), d;
        },
        retrieve: function(a) {
            return qq.isObject(a) && e.length ? void 0 !== a.id ? b(a.id) : void 0 !== a.uuid ? c(a.uuid) : a.status ? d(a.status) : void 0 : qq.extend([], e, !0);
        },
        reset: function() {
            e = [], f = {}, g = {}, i = {};
        },
        setStatus: function(b, c) {
            var d = e[b].status, f = qq.indexOf(g[d], b);
            g[d].splice(f, 1), e[b].status = c, void 0 === g[c] && (g[c] = []), g[c].push(b), 
            a.onStatusChange(b, d, c);
        },
        uuidChanged: function(a, b) {
            var c = e[a].uuid;
            e[a].uuid = b, f[b] = a, delete f[c];
        },
        updateName: function(a, b) {
            e[a].name = b;
        },
        updateSize: function(a, b) {
            e[a].size = b;
        },
        setParentId: function(a, b) {
            e[a].parentId = b;
        },
        getIdsInProxyGroup: function(a) {
            var b = e[a].proxyGroupId;
            return b ? h[b] : [];
        },
        getIdsInBatch: function(a) {
            var b = e[a].batchId;
            return i[b];
        }
    });
}, qq.status = {
    SUBMITTING: "submitting",
    SUBMITTED: "submitted",
    REJECTED: "rejected",
    QUEUED: "queued",
    CANCELED: "canceled",
    PAUSED: "paused",
    UPLOADING: "uploading",
    UPLOAD_RETRYING: "retrying upload",
    UPLOAD_SUCCESSFUL: "upload successful",
    UPLOAD_FAILED: "upload failed",
    DELETE_FAILED: "delete failed",
    DELETING: "deleting",
    DELETED: "deleted"
}, function() {
    "use strict";
    qq.basePublicApi = {
        addBlobs: function(a, b, c) {
            if (!qq.supportedFeatures.blobUploading) throw new qq.Error("Blob uploading is not supported in this browser!");
            if (a) {
                var d = [].concat(a), e = [], f = 0 === this._storedIds.length ? qq.getUniqueId() : this._currentBatchId, g = this;
                this._currentBatchId = f, qq.each(d, function(a, b) {
                    var c;
                    qq.isBlob(b) && !qq.isFileOrInput(b) ? c = {
                        blob: b,
                        name: g._options.blobs.defaultName
                    } : qq.isObject(b) && b.blob && b.name ? c = b : g.log("addBlobs: entry at index " + a + " is not a Blob or a BlobData object", "error"), 
                    c && g._handleNewFile(c, f, e);
                }), this._prepareItemsForUpload(e, b, c);
            } else this.log("undefined or non-array parameter passed into addBlobs", "error");
        },
        addFiles: function(a, b, c) {
            var d, e, f, g = [], h = 0 === this._storedIds.length ? qq.getUniqueId() : this._currentBatchId;
            if (this._currentBatchId = h, a) {
                for (qq.isFileList(a) || (a = [].concat(a)), d = 0; d < a.length; d += 1) if (e = a[d], 
                qq.isFileOrInput(e)) if (qq.isInput(e) && qq.supportedFeatures.ajaxUploading) for (f = 0; f < e.files.length; f++) this._handleNewFile(e.files[f], h, g); else this._handleNewFile(e, h, g); else this.log(e + " is not a File or INPUT element!  Ignoring!", "warn");
                this.log("Received " + g.length + " files or inputs."), this._prepareItemsForUpload(g, b, c);
            }
        },
        cancel: function(a) {
            this._handler.cancel(a);
        },
        cancelAll: function() {
            var a = [], b = this;
            qq.extend(a, this._storedIds), qq.each(a, function(a, c) {
                b.cancel(c);
            }), this._handler.cancelAll();
        },
        clearStoredFiles: function() {
            this._storedIds = [];
        },
        continueUpload: function(a) {
            var b = this._uploadData.retrieve({
                id: a
            });
            return qq.supportedFeatures.pause && this._options.chunking.enabled ? b.status === qq.status.PAUSED ? (this.log(qq.format("Paused file ID {} ({}) will be continued.  Not paused.", a, this.getName(a))), 
            this._uploadFile(a), !0) : (this.log(qq.format("Ignoring continue for file ID {} ({}).  Not paused.", a, this.getName(a)), "error"), 
            !1) : !1;
        },
        deleteFile: function(a) {
            return this._onSubmitDelete(a);
        },
        doesExist: function(a) {
            return this._handler.isValid(a);
        },
        drawThumbnail: function(a, b, c, d) {
            var e = new qq.Promise();
            if (this._imageGenerator) {
                var f = this._thumbnailUrls[a], g = {
                    scale: c > 0,
                    maxSize: c > 0 ? c : null
                };
                !d && qq.supportedFeatures.imagePreviews && (f = this.getFile(a)), null == f ? e.failure({
                    container: b,
                    error: "File or URL not found."
                }) : this._imageGenerator.generate(f, b, g).then(function(a) {
                    e.success(a);
                }, function(a, b) {
                    e.failure({
                        container: a,
                        error: b || "Problem generating thumbnail"
                    });
                });
            } else e.failure({
                container: b,
                error: "Missing image generator module"
            });
            return e;
        },
        getButton: function(a) {
            return this._getButton(this._buttonIdsForFileIds[a]);
        },
        getFile: function(a) {
            return this._handler.getFile(a) || null;
        },
        getInProgress: function() {
            return this._uploadData.retrieve({
                status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED ]
            }).length;
        },
        getName: function(a) {
            return this._uploadData.retrieve({
                id: a
            }).name;
        },
        getParentId: function(a) {
            var b = this.getUploads({
                id: a
            }), c = null;
            return b && void 0 !== b.parentId && (c = b.parentId), c;
        },
        getResumableFilesData: function() {
            return this._handler.getResumableFilesData();
        },
        getSize: function(a) {
            return this._uploadData.retrieve({
                id: a
            }).size;
        },
        getNetUploads: function() {
            return this._netUploaded;
        },
        getRemainingAllowedItems: function() {
            var a = this._options.validation.itemLimit;
            return a > 0 ? this._options.validation.itemLimit - this._netUploadedOrQueued : null;
        },
        getUploads: function(a) {
            return this._uploadData.retrieve(a);
        },
        getUuid: function(a) {
            return this._uploadData.retrieve({
                id: a
            }).uuid;
        },
        log: function(a, b) {
            !this._options.debug || b && "info" !== b ? b && "info" !== b && qq.log("[Fine Uploader " + qq.version + "] " + a, b) : qq.log("[Fine Uploader " + qq.version + "] " + a);
        },
        pauseUpload: function(a) {
            var b = this._uploadData.retrieve({
                id: a
            });
            if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) return !1;
            if (qq.indexOf([ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING ], b.status) >= 0) {
                if (this._handler.pause(a)) return this._uploadData.setStatus(a, qq.status.PAUSED), 
                !0;
                this.log(qq.format("Unable to pause file ID {} ({}).", a, this.getName(a)), "error");
            } else this.log(qq.format("Ignoring pause for file ID {} ({}).  Not in progress.", a, this.getName(a)), "error");
            return !1;
        },
        reset: function() {
            this.log("Resetting uploader..."), this._handler.reset(), this._storedIds = [], 
            this._autoRetries = [], this._retryTimeouts = [], this._preventRetries = [], this._thumbnailUrls = [], 
            qq.each(this._buttons, function(a, b) {
                b.reset();
            }), this._paramsStore.reset(), this._endpointStore.reset(), this._netUploadedOrQueued = 0, 
            this._netUploaded = 0, this._uploadData.reset(), this._buttonIdsForFileIds = [], 
            this._pasteHandler && this._pasteHandler.reset(), this._options.session.refreshOnReset && this._refreshSessionData(), 
            this._succeededSinceLastAllComplete = [], this._failedSinceLastAllComplete = [], 
            this._totalProgress && this._totalProgress.reset();
        },
        retry: function(a) {
            return this._manualRetry(a);
        },
        scaleImage: function(a, b) {
            var c = this;
            return qq.Scaler.prototype.scaleImage(a, b, {
                log: qq.bind(c.log, c),
                getFile: qq.bind(c.getFile, c),
                uploadData: c._uploadData
            });
        },
        setCustomHeaders: function(a, b) {
            this._customHeadersStore.set(a, b);
        },
        setDeleteFileCustomHeaders: function(a, b) {
            this._deleteFileCustomHeadersStore.set(a, b);
        },
        setDeleteFileEndpoint: function(a, b) {
            this._deleteFileEndpointStore.set(a, b);
        },
        setDeleteFileParams: function(a, b) {
            this._deleteFileParamsStore.set(a, b);
        },
        setEndpoint: function(a, b) {
            this._endpointStore.set(a, b);
        },
        setName: function(a, b) {
            this._uploadData.updateName(a, b);
        },
        setParams: function(a, b) {
            this._paramsStore.set(a, b);
        },
        setUuid: function(a, b) {
            return this._uploadData.uuidChanged(a, b);
        },
        uploadStoredFiles: function() {
            var a;
            if (0 === this._storedIds.length) this._itemError("noFilesError"); else for (;this._storedIds.length; ) a = this._storedIds.shift(), 
            this._uploadFile(a);
        }
    }, qq.basePrivateApi = {
        _addCannedFile: function(a) {
            var b = this._uploadData.addFile({
                uuid: a.uuid,
                name: a.name,
                size: a.size,
                status: qq.status.UPLOAD_SUCCESSFUL
            });
            return a.deleteFileEndpoint && this.setDeleteFileEndpoint(a.deleteFileEndpoint, b), 
            a.deleteFileParams && this.setDeleteFileParams(a.deleteFileParams, b), a.thumbnailUrl && (this._thumbnailUrls[b] = a.thumbnailUrl), 
            this._netUploaded++, this._netUploadedOrQueued++, b;
        },
        _annotateWithButtonId: function(a, b) {
            qq.isFile(a) && (a.qqButtonId = this._getButtonId(b));
        },
        _batchError: function(a) {
            this._options.callbacks.onError(null, null, a, void 0);
        },
        _createDeleteHandler: function() {
            var a = this;
            return new qq.DeleteFileAjaxRequester({
                method: this._options.deleteFile.method.toUpperCase(),
                maxConnections: this._options.maxConnections,
                uuidParamName: this._options.request.uuidName,
                customHeaders: this._deleteFileCustomHeadersStore,
                paramsStore: this._deleteFileParamsStore,
                endpointStore: this._deleteFileEndpointStore,
                demoMode: this._options.demoMode,
                cors: this._options.cors,
                log: qq.bind(a.log, a),
                onDelete: function(b) {
                    a._onDelete(b), a._options.callbacks.onDelete(b);
                },
                onDeleteComplete: function(b, c, d) {
                    a._onDeleteComplete(b, c, d), a._options.callbacks.onDeleteComplete(b, c, d);
                }
            });
        },
        _createPasteHandler: function() {
            var a = this;
            return new qq.PasteSupport({
                targetElement: this._options.paste.targetElement,
                callbacks: {
                    log: qq.bind(a.log, a),
                    pasteReceived: function(b) {
                        a._handleCheckedCallback({
                            name: "onPasteReceived",
                            callback: qq.bind(a._options.callbacks.onPasteReceived, a, b),
                            onSuccess: qq.bind(a._handlePasteSuccess, a, b),
                            identifier: "pasted image"
                        });
                    }
                }
            });
        },
        _createStore: function(a, b) {
            var c = {}, d = a, e = {}, f = function(a) {
                return qq.isObject(a) ? qq.extend({}, a) : a;
            }, g = function() {
                return qq.isFunction(b) ? b() : b;
            }, h = function(a, c) {
                b && qq.isObject(c) && qq.extend(c, g()), e[a] && qq.extend(c, e[a]);
            };
            return {
                set: function(a, b) {
                    null == b ? (c = {}, d = f(a)) : c[b] = f(a);
                },
                get: function(a) {
                    var b;
                    return b = null != a && c[a] ? c[a] : f(d), h(a, b), f(b);
                },
                addReadOnly: function(a, b) {
                    qq.isObject(c) && (e[a] = e[a] || {}, qq.extend(e[a], b));
                },
                remove: function(a) {
                    return delete c[a];
                },
                reset: function() {
                    c = {}, e = {}, d = a;
                }
            };
        },
        _createUploadDataTracker: function() {
            var a = this;
            return new qq.UploadData({
                getName: function(b) {
                    return a.getName(b);
                },
                getUuid: function(b) {
                    return a.getUuid(b);
                },
                getSize: function(b) {
                    return a.getSize(b);
                },
                onStatusChange: function(b, c, d) {
                    a._onUploadStatusChange(b, c, d), a._options.callbacks.onStatusChange(b, c, d), 
                    a._maybeAllComplete(b, d), a._totalProgress && setTimeout(function() {
                        a._totalProgress.onStatusChange(b, c, d);
                    }, 0);
                }
            });
        },
        _createUploadButton: function(a) {
            function b() {
                return qq.supportedFeatures.ajaxUploading ? qq.ios7() && c._isAllowedExtension(e, ".mov") ? !1 : void 0 === a.multiple ? c._options.multiple : a.multiple : !1;
            }
            var c = this, d = a.accept || this._options.validation.acceptFiles, e = a.allowedExtensions || this._options.validation.allowedExtensions, f = new qq.UploadButton({
                element: a.element,
                folders: a.folders,
                name: this._options.request.inputName,
                multiple: b(),
                acceptFiles: d,
                onChange: function(a) {
                    c._onInputChange(a);
                },
                hoverClass: this._options.classes.buttonHover,
                focusClass: this._options.classes.buttonFocus
            });
            return this._disposeSupport.addDisposer(function() {
                f.dispose();
            }), c._buttons.push(f), f;
        },
        _createUploadHandler: function(a, b) {
            var c = this, d = {}, e = {
                debug: this._options.debug,
                maxConnections: this._options.maxConnections,
                cors: this._options.cors,
                demoMode: this._options.demoMode,
                paramsStore: this._paramsStore,
                endpointStore: this._endpointStore,
                chunking: this._options.chunking,
                resume: this._options.resume,
                blobs: this._options.blobs,
                log: qq.bind(c.log, c),
                preventRetryParam: this._options.retry.preventRetryResponseProperty,
                onProgress: function(a, b, e, f) {
                    0 > e || 0 > f || (d[a] ? (d[a].loaded !== e || d[a].total !== f) && (c._onProgress(a, b, e, f), 
                    c._options.callbacks.onProgress(a, b, e, f)) : (c._onProgress(a, b, e, f), c._options.callbacks.onProgress(a, b, e, f)), 
                    d[a] = {
                        loaded: e,
                        total: f
                    });
                },
                onComplete: function(a, b, e, f) {
                    delete d[a];
                    var g = c.getUploads({
                        id: a
                    }).status;
                    if (g !== qq.status.UPLOAD_SUCCESSFUL && g !== qq.status.UPLOAD_FAILED) {
                        var h = c._onComplete(a, b, e, f);
                        h instanceof qq.Promise ? h.done(function() {
                            c._options.callbacks.onComplete(a, b, e, f);
                        }) : c._options.callbacks.onComplete(a, b, e, f);
                    }
                },
                onCancel: function(a, b, d) {
                    var e = new qq.Promise();
                    return c._handleCheckedCallback({
                        name: "onCancel",
                        callback: qq.bind(c._options.callbacks.onCancel, c, a, b),
                        onFailure: e.failure,
                        onSuccess: function() {
                            d.then(function() {
                                c._onCancel(a, b);
                            }), e.success();
                        },
                        identifier: a
                    }), e;
                },
                onUploadPrep: qq.bind(this._onUploadPrep, this),
                onUpload: function(a, b) {
                    c._onUpload(a, b), c._options.callbacks.onUpload(a, b);
                },
                onUploadChunk: function(a, b, d) {
                    c._onUploadChunk(a, d), c._options.callbacks.onUploadChunk(a, b, d);
                },
                onUploadChunkSuccess: function() {
                    c._options.callbacks.onUploadChunkSuccess.apply(c, arguments);
                },
                onResume: function(a, b, d) {
                    return c._options.callbacks.onResume(a, b, d);
                },
                onAutoRetry: function() {
                    return c._onAutoRetry.apply(c, arguments);
                },
                onUuidChanged: function(a, b) {
                    c.log("Server requested UUID change from '" + c.getUuid(a) + "' to '" + b + "'"), 
                    c.setUuid(a, b);
                },
                getName: qq.bind(c.getName, c),
                getUuid: qq.bind(c.getUuid, c),
                getSize: qq.bind(c.getSize, c),
                setSize: qq.bind(c._setSize, c),
                getDataByUuid: function(a) {
                    return c.getUploads({
                        uuid: a
                    });
                },
                isQueued: function(a) {
                    var b = c.getUploads({
                        id: a
                    }).status;
                    return b === qq.status.QUEUED || b === qq.status.SUBMITTED || b === qq.status.UPLOAD_RETRYING || b === qq.status.PAUSED;
                },
                getIdsInProxyGroup: c._uploadData.getIdsInProxyGroup,
                getIdsInBatch: c._uploadData.getIdsInBatch
            };
            return qq.each(this._options.request, function(a, b) {
                e[a] = b;
            }), e.customHeaders = this._customHeadersStore, a && qq.each(a, function(a, b) {
                e[a] = b;
            }), new qq.UploadHandlerController(e, b);
        },
        _fileOrBlobRejected: function(a) {
            this._netUploadedOrQueued--, this._uploadData.setStatus(a, qq.status.REJECTED);
        },
        _formatSize: function(a) {
            var b = -1;
            do a /= 1e3, b++; while (a > 999);
            return Math.max(a, .1).toFixed(1) + this._options.text.sizeSymbols[b];
        },
        _generateExtraButtonSpecs: function() {
            var a = this;
            this._extraButtonSpecs = {}, qq.each(this._options.extraButtons, function(b, c) {
                var d = c.multiple, e = qq.extend({}, a._options.validation, !0), f = qq.extend({}, c);
                void 0 === d && (d = a._options.multiple), f.validation && qq.extend(e, c.validation, !0), 
                qq.extend(f, {
                    multiple: d,
                    validation: e
                }, !0), a._initExtraButton(f);
            });
        },
        _getButton: function(a) {
            var b = this._extraButtonSpecs[a];
            return b ? b.element : a === this._defaultButtonId ? this._options.button : void 0;
        },
        _getButtonId: function(a) {
            var b, c, d = a;
            if (d instanceof qq.BlobProxy && (d = d.referenceBlob), d && !qq.isBlob(d)) {
                if (qq.isFile(d)) return d.qqButtonId;
                if ("input" === d.tagName.toLowerCase() && "file" === d.type.toLowerCase()) return d.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);
                if (b = d.getElementsByTagName("input"), qq.each(b, function(a, b) {
                    return "file" === b.getAttribute("type") ? (c = b, !1) : void 0;
                }), c) return c.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);
            }
        },
        _getNotFinished: function() {
            return this._uploadData.retrieve({
                status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED, qq.status.SUBMITTING, qq.status.SUBMITTED, qq.status.PAUSED ]
            }).length;
        },
        _getValidationBase: function(a) {
            var b = this._extraButtonSpecs[a];
            return b ? b.validation : this._options.validation;
        },
        _getValidationDescriptor: function(a) {
            return a.file instanceof qq.BlobProxy ? {
                name: qq.getFilename(a.file.referenceBlob),
                size: a.file.referenceBlob.size
            } : {
                name: this.getUploads({
                    id: a.id
                }).name,
                size: this.getUploads({
                    id: a.id
                }).size
            };
        },
        _getValidationDescriptors: function(a) {
            var b = this, c = [];
            return qq.each(a, function(a, d) {
                c.push(b._getValidationDescriptor(d));
            }), c;
        },
        _handleCameraAccess: function() {
            if (this._options.camera.ios && qq.ios()) {
                var a = "image/*;capture=camera", b = this._options.camera.button, c = b ? this._getButtonId(b) : this._defaultButtonId, d = this._options;
                c && c !== this._defaultButtonId && (d = this._extraButtonSpecs[c]), d.multiple = !1, 
                null === d.validation.acceptFiles ? d.validation.acceptFiles = a : d.validation.acceptFiles += "," + a, 
                qq.each(this._buttons, function(a, b) {
                    return b.getButtonId() === c ? (b.setMultiple(d.multiple), b.setAcceptFiles(d.acceptFiles), 
                    !1) : void 0;
                });
            }
        },
        _handleCheckedCallback: function(a) {
            var b = this, c = a.callback();
            return qq.isGenericPromise(c) ? (this.log(a.name + " - waiting for " + a.name + " promise to be fulfilled for " + a.identifier), 
            c.then(function(c) {
                b.log(a.name + " promise success for " + a.identifier), a.onSuccess(c);
            }, function() {
                a.onFailure ? (b.log(a.name + " promise failure for " + a.identifier), a.onFailure()) : b.log(a.name + " promise failure for " + a.identifier);
            })) : (c !== !1 ? a.onSuccess(c) : a.onFailure ? (this.log(a.name + " - return value was 'false' for " + a.identifier + ".  Invoking failure callback."), 
            a.onFailure()) : this.log(a.name + " - return value was 'false' for " + a.identifier + ".  Will not proceed."), 
            c);
        },
        _handleNewFile: function(a, b, c) {
            var d = this, e = qq.getUniqueId(), f = -1, g = qq.getFilename(a), h = a.blob || a, i = this._customNewFileHandler ? this._customNewFileHandler : qq.bind(d._handleNewFileGeneric, d);
            !qq.isInput(h) && h.size >= 0 && (f = h.size), i(h, g, e, f, c, b, this._options.request.uuidName, {
                uploadData: d._uploadData,
                paramsStore: d._paramsStore,
                addFileToHandler: function(a, b) {
                    d._handler.add(a, b), d._netUploadedOrQueued++, d._trackButton(a);
                }
            });
        },
        _handleNewFileGeneric: function(a, b, c, d, e, f) {
            var g = this._uploadData.addFile({
                uuid: c,
                name: b,
                size: d,
                batchId: f
            });
            this._handler.add(g, a), this._trackButton(g), this._netUploadedOrQueued++, e.push({
                id: g,
                file: a
            });
        },
        _handlePasteSuccess: function(a, b) {
            var c = a.type.split("/")[1], d = b;
            null == d && (d = this._options.paste.defaultName), d += "." + c, this.addBlobs({
                name: d,
                blob: a
            });
        },
        _initExtraButton: function(a) {
            var b = this._createUploadButton({
                element: a.element,
                multiple: a.multiple,
                accept: a.validation.acceptFiles,
                folders: a.folders,
                allowedExtensions: a.validation.allowedExtensions
            });
            this._extraButtonSpecs[b.getButtonId()] = a;
        },
        _initFormSupportAndParams: function() {
            this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this)), 
            this._formSupport && this._formSupport.attachedToForm ? (this._paramsStore = this._createStore(this._options.request.params, this._formSupport.getFormInputsAsObject), 
            this._options.autoUpload = this._formSupport.newAutoUpload, this._formSupport.newEndpoint && (this._options.request.endpoint = this._formSupport.newEndpoint)) : this._paramsStore = this._createStore(this._options.request.params);
        },
        _isDeletePossible: function() {
            return qq.DeleteFileAjaxRequester && this._options.deleteFile.enabled ? this._options.cors.expected ? qq.supportedFeatures.deleteFileCorsXhr ? !0 : qq.supportedFeatures.deleteFileCorsXdr && this._options.cors.allowXdr ? !0 : !1 : !0 : !1;
        },
        _isAllowedExtension: function(a, b) {
            var c = !1;
            return a.length ? (qq.each(a, function(a, d) {
                if (qq.isString(d)) {
                    var e = new RegExp("\\." + d + "$", "i");
                    if (null != b.match(e)) return c = !0, !1;
                }
            }), c) : !0;
        },
        _itemError: function(a, b, c) {
            function d(a, b) {
                g = g.replace(a, b);
            }
            var e, f, g = this._options.messages[a], h = [], i = [].concat(b), j = i[0], k = this._getButtonId(c), l = this._getValidationBase(k);
            return qq.each(l.allowedExtensions, function(a, b) {
                qq.isString(b) && h.push(b);
            }), e = h.join(", ").toLowerCase(), d("{file}", this._options.formatFileName(j)), 
            d("{extensions}", e), d("{sizeLimit}", this._formatSize(l.sizeLimit)), d("{minSizeLimit}", this._formatSize(l.minSizeLimit)), 
            d("{minWidth}", this._options.validation.image.minWidth), d("{maxWidth}", this._options.validation.image.maxWidth), 
            d("{minHeight}", this._options.validation.image.minHeight), d("{maxHeight}", this._options.validation.image.maxHeight), 
            f = g.match(/(\{\w+\})/g), null !== f && qq.each(f, function(a, b) {
                d(b, i[a]);
            }), this._options.callbacks.onError(null, j, g, void 0), g;
        },
        _manualRetry: function(a, b) {
            return this._onBeforeManualRetry(a) ? (this._netUploadedOrQueued++, this._uploadData.setStatus(a, qq.status.UPLOAD_RETRYING), 
            b ? b(a) : this._handler.retry(a), !0) : void 0;
        },
        _maybeAllComplete: function(a, b) {
            var c = this, d = this._getNotFinished();
            b === qq.status.UPLOAD_SUCCESSFUL ? this._succeededSinceLastAllComplete.push(a) : b === qq.status.UPLOAD_FAILED && this._failedSinceLastAllComplete.push(a), 
            0 === d && (this._succeededSinceLastAllComplete.length || this._failedSinceLastAllComplete.length) && setTimeout(function() {
                c._onAllComplete(c._succeededSinceLastAllComplete, c._failedSinceLastAllComplete);
            }, 0);
        },
        _maybeParseAndSendUploadError: function(a, b, c, d) {
            if (!c.success) if (d && 200 !== d.status && !c.error) this._options.callbacks.onError(a, b, "XHR returned response code " + d.status, d); else {
                var e = c.error ? c.error : this._options.text.defaultResponseError;
                this._options.callbacks.onError(a, b, e, d);
            }
        },
        _maybeProcessNextItemAfterOnValidateCallback: function(a, b, c, d, e) {
            var f = this;
            if (b.length > c) if (a || !this._options.validation.stopOnFirstInvalidFile) setTimeout(function() {
                var a = f._getValidationDescriptor(b[c]), g = f._getButtonId(b[c].file), h = f._getButton(g);
                f._handleCheckedCallback({
                    name: "onValidate",
                    callback: qq.bind(f._options.callbacks.onValidate, f, a, h),
                    onSuccess: qq.bind(f._onValidateCallbackSuccess, f, b, c, d, e),
                    onFailure: qq.bind(f._onValidateCallbackFailure, f, b, c, d, e),
                    identifier: "Item '" + a.name + "', size: " + a.size
                });
            }, 0); else if (!a) for (;c < b.length; c++) f._fileOrBlobRejected(b[c].id);
        },
        _onAllComplete: function(a, b) {
            this._totalProgress && this._totalProgress.onAllComplete(a, b, this._preventRetries), 
            this._options.callbacks.onAllComplete(qq.extend([], a), qq.extend([], b)), this._succeededSinceLastAllComplete = [], 
            this._failedSinceLastAllComplete = [];
        },
        _onAutoRetry: function(a, b, c, d, e) {
            var f = this;
            return f._preventRetries[a] = c[f._options.retry.preventRetryResponseProperty], 
            f._shouldAutoRetry(a, b, c) ? (f._maybeParseAndSendUploadError.apply(f, arguments), 
            f._options.callbacks.onAutoRetry(a, b, f._autoRetries[a]), f._onBeforeAutoRetry(a, b), 
            f._retryTimeouts[a] = setTimeout(function() {
                f.log("Retrying " + b + "..."), f._uploadData.setStatus(a, qq.status.UPLOAD_RETRYING), 
                e ? e(a) : f._handler.retry(a);
            }, 1e3 * f._options.retry.autoAttemptDelay), !0) : void 0;
        },
        _onBeforeAutoRetry: function(a, b) {
            this.log("Waiting " + this._options.retry.autoAttemptDelay + " seconds before retrying " + b + "...");
        },
        _onBeforeManualRetry: function(a) {
            var b = this._options.validation.itemLimit;
            if (this._preventRetries[a]) return this.log("Retries are forbidden for id " + a, "warn"), 
            !1;
            if (this._handler.isValid(a)) {
                var c = this.getName(a);
                return this._options.callbacks.onManualRetry(a, c) === !1 ? !1 : b > 0 && this._netUploadedOrQueued + 1 > b ? (this._itemError("retryFailTooManyItems"), 
                !1) : (this.log("Retrying upload for '" + c + "' (id: " + a + ")..."), !0);
            }
            return this.log("'" + a + "' is not a valid file ID", "error"), !1;
        },
        _onCancel: function(a) {
            this._netUploadedOrQueued--, clearTimeout(this._retryTimeouts[a]);
            var b = qq.indexOf(this._storedIds, a);
            !this._options.autoUpload && b >= 0 && this._storedIds.splice(b, 1), this._uploadData.setStatus(a, qq.status.CANCELED);
        },
        _onComplete: function(a, b, c, d) {
            return c.success ? (c.thumbnailUrl && (this._thumbnailUrls[a] = c.thumbnailUrl), 
            this._netUploaded++, this._uploadData.setStatus(a, qq.status.UPLOAD_SUCCESSFUL)) : (this._netUploadedOrQueued--, 
            this._uploadData.setStatus(a, qq.status.UPLOAD_FAILED), c[this._options.retry.preventRetryResponseProperty] === !0 && (this._preventRetries[a] = !0)), 
            this._maybeParseAndSendUploadError(a, b, c, d), c.success ? !0 : !1;
        },
        _onDelete: function(a) {
            this._uploadData.setStatus(a, qq.status.DELETING);
        },
        _onDeleteComplete: function(a, b, c) {
            var d = this.getName(a);
            c ? (this._uploadData.setStatus(a, qq.status.DELETE_FAILED), this.log("Delete request for '" + d + "' has failed.", "error"), 
            void 0 === b.withCredentials ? this._options.callbacks.onError(a, d, "Delete request failed", b) : this._options.callbacks.onError(a, d, "Delete request failed with response code " + b.status, b)) : (this._netUploadedOrQueued--, 
            this._netUploaded--, this._handler.expunge(a), this._uploadData.setStatus(a, qq.status.DELETED), 
            this.log("Delete request for '" + d + "' has succeeded."));
        },
        _onInputChange: function(a) {
            var b;
            if (qq.supportedFeatures.ajaxUploading) {
                for (b = 0; b < a.files.length; b++) this._annotateWithButtonId(a.files[b], a);
                this.addFiles(a.files);
            } else a.value.length > 0 && this.addFiles(a);
            qq.each(this._buttons, function(a, b) {
                b.reset();
            });
        },
        _onProgress: function(a, b, c, d) {
            this._totalProgress && this._totalProgress.onIndividualProgress(a, c, d);
        },
        _onSubmit: function() {},
        _onSubmitCallbackSuccess: function(a) {
            this._onSubmit.apply(this, arguments), this._uploadData.setStatus(a, qq.status.SUBMITTED), 
            this._onSubmitted.apply(this, arguments), this._options.callbacks.onSubmitted.apply(this, arguments), 
            this._options.autoUpload ? this._uploadFile(a) : this._storeForLater(a);
        },
        _onSubmitDelete: function(a, b, c) {
            var d, e = this.getUuid(a);
            return b && (d = qq.bind(b, this, a, e, c)), this._isDeletePossible() ? (this._handleCheckedCallback({
                name: "onSubmitDelete",
                callback: qq.bind(this._options.callbacks.onSubmitDelete, this, a),
                onSuccess: d || qq.bind(this._deleteHandler.sendDelete, this, a, e, c),
                identifier: a
            }), !0) : (this.log("Delete request ignored for ID " + a + ", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.", "warn"), 
            !1);
        },
        _onSubmitted: function() {},
        _onTotalProgress: function(a, b) {
            this._options.callbacks.onTotalProgress(a, b);
        },
        _onUploadPrep: function() {},
        _onUpload: function(a) {
            this._uploadData.setStatus(a, qq.status.UPLOADING);
        },
        _onUploadChunk: function() {},
        _onUploadStatusChange: function(a, b, c) {
            c === qq.status.PAUSED && clearTimeout(this._retryTimeouts[a]);
        },
        _onValidateBatchCallbackFailure: function(a) {
            var b = this;
            qq.each(a, function(a, c) {
                b._fileOrBlobRejected(c.id);
            });
        },
        _onValidateBatchCallbackSuccess: function(a, b, c, d, e) {
            var f, g = this._options.validation.itemLimit, h = this._netUploadedOrQueued;
            0 === g || g >= h ? b.length > 0 ? this._handleCheckedCallback({
                name: "onValidate",
                callback: qq.bind(this._options.callbacks.onValidate, this, a[0], e),
                onSuccess: qq.bind(this._onValidateCallbackSuccess, this, b, 0, c, d),
                onFailure: qq.bind(this._onValidateCallbackFailure, this, b, 0, c, d),
                identifier: "Item '" + b[0].file.name + "', size: " + b[0].file.size
            }) : this._itemError("noFilesError") : (this._onValidateBatchCallbackFailure(b), 
            f = this._options.messages.tooManyItemsError.replace(/\{netItems\}/g, h).replace(/\{itemLimit\}/g, g), 
            this._batchError(f));
        },
        _onValidateCallbackFailure: function(a, b, c, d) {
            var e = b + 1;
            this._fileOrBlobRejected(a[0].id, a[0].file.name), this._maybeProcessNextItemAfterOnValidateCallback(!1, a, e, c, d);
        },
        _onValidateCallbackSuccess: function(a, b, c, d) {
            var e = this, f = b + 1, g = this._getValidationDescriptor(a[b]);
            this._validateFileOrBlobData(a[b], g).then(function() {
                e._upload(a[b].id, c, d), e._maybeProcessNextItemAfterOnValidateCallback(!0, a, f, c, d);
            }, function() {
                e._maybeProcessNextItemAfterOnValidateCallback(!1, a, f, c, d);
            });
        },
        _prepareItemsForUpload: function(a, b, c) {
            if (0 === a.length) return void this._itemError("noFilesError");
            var d = this._getValidationDescriptors(a), e = this._getButtonId(a[0].file), f = this._getButton(e);
            this._handleCheckedCallback({
                name: "onValidateBatch",
                callback: qq.bind(this._options.callbacks.onValidateBatch, this, d, f),
                onSuccess: qq.bind(this._onValidateBatchCallbackSuccess, this, d, a, b, c, f),
                onFailure: qq.bind(this._onValidateBatchCallbackFailure, this, a),
                identifier: "batch validation"
            });
        },
        _preventLeaveInProgress: function() {
            var a = this;
            this._disposeSupport.attach(window, "beforeunload", function(b) {
                return a.getInProgress() ? (b = b || window.event, b.returnValue = a._options.messages.onLeave, 
                a._options.messages.onLeave) : void 0;
            });
        },
        _refreshSessionData: function() {
            var a = this, b = this._options.session;
            qq.Session && null != this._options.session.endpoint && (this._session || (qq.extend(b, this._options.cors), 
            b.log = qq.bind(this.log, this), b.addFileRecord = qq.bind(this._addCannedFile, this), 
            this._session = new qq.Session(b)), setTimeout(function() {
                a._session.refresh().then(function(b, c) {
                    a._options.callbacks.onSessionRequestComplete(b, !0, c);
                }, function(b, c) {
                    a._options.callbacks.onSessionRequestComplete(b, !1, c);
                });
            }, 0));
        },
        _setSize: function(a, b) {
            this._uploadData.updateSize(a, b), this._totalProgress && this._totalProgress.onNewSize(a);
        },
        _shouldAutoRetry: function(a) {
            var b = this._uploadData.retrieve({
                id: a
            });
            return !this._preventRetries[a] && this._options.retry.enableAuto && b.status !== qq.status.PAUSED && (void 0 === this._autoRetries[a] && (this._autoRetries[a] = 0), 
            this._autoRetries[a] < this._options.retry.maxAutoAttempts) ? (this._autoRetries[a] += 1, 
            !0) : !1;
        },
        _storeForLater: function(a) {
            this._storedIds.push(a);
        },
        _trackButton: function(a) {
            var b;
            b = qq.supportedFeatures.ajaxUploading ? this._handler.getFile(a).qqButtonId : this._getButtonId(this._handler.getInput(a)), 
            b && (this._buttonIdsForFileIds[a] = b);
        },
        _upload: function(a, b, c) {
            var d = this.getName(a);
            b && this.setParams(b, a), c && this.setEndpoint(c, a), this._handleCheckedCallback({
                name: "onSubmit",
                callback: qq.bind(this._options.callbacks.onSubmit, this, a, d),
                onSuccess: qq.bind(this._onSubmitCallbackSuccess, this, a, d),
                onFailure: qq.bind(this._fileOrBlobRejected, this, a, d),
                identifier: a
            });
        },
        _uploadFile: function(a) {
            this._handler.upload(a) || this._uploadData.setStatus(a, qq.status.QUEUED);
        },
        _validateFileOrBlobData: function(a, b) {
            var c = this, d = function() {
                return a.file instanceof qq.BlobProxy ? a.file.referenceBlob : a.file;
            }(), e = b.name, f = b.size, g = this._getButtonId(a.file), h = this._getValidationBase(g), i = new qq.Promise();
            return i.then(function() {}, function() {
                c._fileOrBlobRejected(a.id, e);
            }), qq.isFileOrInput(d) && !this._isAllowedExtension(h.allowedExtensions, e) ? (this._itemError("typeError", e, d), 
            i.failure()) : 0 === f ? (this._itemError("emptyError", e, d), i.failure()) : f > 0 && h.sizeLimit && f > h.sizeLimit ? (this._itemError("sizeError", e, d), 
            i.failure()) : f > 0 && f < h.minSizeLimit ? (this._itemError("minSizeError", e, d), 
            i.failure()) : (qq.ImageValidation && qq.supportedFeatures.imagePreviews && qq.isFile(d) ? new qq.ImageValidation(d, qq.bind(c.log, c)).validate(h.image).then(i.success, function(a) {
                c._itemError(a + "ImageError", e, d), i.failure();
            }) : i.success(), i);
        },
        _wrapCallbacks: function() {
            var a, b;
            a = this, b = function(b, c, d) {
                var e;
                try {
                    return c.apply(a, d);
                } catch (f) {
                    e = f.message || f.toString(), a.log("Caught exception in '" + b + "' callback - " + e, "error");
                }
            };
            for (var c in this._options.callbacks) !function() {
                var d, e;
                d = c, e = a._options.callbacks[d], a._options.callbacks[d] = function() {
                    return b(d, e, arguments);
                };
            }();
        }
    };
}(), function() {
    "use strict";
    qq.FineUploaderBasic = function(a) {
        var b = this;
        this._options = {
            debug: !1,
            button: null,
            multiple: !0,
            maxConnections: 3,
            disableCancelForFormUploads: !1,
            autoUpload: !0,
            request: {
                endpoint: "/server/upload",
                params: {},
                paramsInBody: !0,
                customHeaders: {},
                forceMultipart: !0,
                inputName: "qqfile",
                uuidName: "qquuid",
                totalFileSizeName: "qqtotalfilesize",
                filenameParam: "qqfilename"
            },
            validation: {
                allowedExtensions: [],
                sizeLimit: 0,
                minSizeLimit: 0,
                itemLimit: 0,
                stopOnFirstInvalidFile: !0,
                acceptFiles: null,
                image: {
                    maxHeight: 0,
                    maxWidth: 0,
                    minHeight: 0,
                    minWidth: 0
                }
            },
            callbacks: {
                onSubmit: function() {},
                onSubmitted: function() {},
                onComplete: function() {},
                onAllComplete: function() {},
                onCancel: function() {},
                onUpload: function() {},
                onUploadChunk: function() {},
                onUploadChunkSuccess: function() {},
                onResume: function() {},
                onProgress: function() {},
                onTotalProgress: function() {},
                onError: function() {},
                onAutoRetry: function() {},
                onManualRetry: function() {},
                onValidateBatch: function() {},
                onValidate: function() {},
                onSubmitDelete: function() {},
                onDelete: function() {},
                onDeleteComplete: function() {},
                onPasteReceived: function() {},
                onStatusChange: function() {},
                onSessionRequestComplete: function() {}
            },
            messages: {
                typeError: "{file} has an invalid extension. Valid extension(s): {extensions}.",
                sizeError: "{file} is too large, maximum file size is {sizeLimit}.",
                minSizeError: "{file} is too small, minimum file size is {minSizeLimit}.",
                emptyError: "{file} is empty, please select files again without it.",
                noFilesError: "No files to upload.",
                tooManyItemsError: "Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",
                maxHeightImageError: "Image is too tall.",
                maxWidthImageError: "Image is too wide.",
                minHeightImageError: "Image is not tall enough.",
                minWidthImageError: "Image is not wide enough.",
                retryFailTooManyItems: "Retry failed - you have reached your file limit.",
                onLeave: "The files are being uploaded, if you leave now the upload will be canceled."
            },
            retry: {
                enableAuto: !1,
                maxAutoAttempts: 3,
                autoAttemptDelay: 5,
                preventRetryResponseProperty: "preventRetry"
            },
            classes: {
                buttonHover: "qq-upload-button-hover",
                buttonFocus: "qq-upload-button-focus"
            },
            chunking: {
                enabled: !1,
                concurrent: {
                    enabled: !1
                },
                paramNames: {
                    partIndex: "qqpartindex",
                    partByteOffset: "qqpartbyteoffset",
                    chunkSize: "qqchunksize",
                    totalFileSize: "qqtotalfilesize",
                    totalParts: "qqtotalparts"
                },
                partSize: 2e6,
                success: {
                    endpoint: null
                }
            },
            resume: {
                enabled: !1,
                recordsExpireIn: 7,
                paramNames: {
                    resuming: "qqresume"
                }
            },
            formatFileName: function(a) {
                return void 0 !== a && a.length > 33 && (a = a.slice(0, 19) + "..." + a.slice(-14)), 
                a;
            },
            text: {
                defaultResponseError: "Upload failure reason unknown",
                sizeSymbols: [ "kB", "MB", "GB", "TB", "PB", "EB" ]
            },
            deleteFile: {
                enabled: !1,
                method: "DELETE",
                endpoint: "/server/upload",
                customHeaders: {},
                params: {}
            },
            cors: {
                expected: !1,
                sendCredentials: !1,
                allowXdr: !1
            },
            blobs: {
                defaultName: "misc_data"
            },
            paste: {
                targetElement: null,
                defaultName: "pasted_image"
            },
            camera: {
                ios: !1,
                button: null
            },
            extraButtons: [],
            session: {
                endpoint: null,
                params: {},
                customHeaders: {},
                refreshOnReset: !0
            },
            form: {
                element: "qq-form",
                autoUpload: !1,
                interceptSubmit: !0
            },
            scaling: {
                sendOriginal: !0,
                orient: !0,
                defaultType: null,
                defaultQuality: 80,
                failureText: "Failed to scale",
                includeExif: !1,
                sizes: []
            }
        }, qq.extend(this._options, a, !0), this._buttons = [], this._extraButtonSpecs = {}, 
        this._buttonIdsForFileIds = [], this._wrapCallbacks(), this._disposeSupport = new qq.DisposeSupport(), 
        this._storedIds = [], this._autoRetries = [], this._retryTimeouts = [], this._preventRetries = [], 
        this._thumbnailUrls = [], this._netUploadedOrQueued = 0, this._netUploaded = 0, 
        this._uploadData = this._createUploadDataTracker(), this._initFormSupportAndParams(), 
        this._customHeadersStore = this._createStore(this._options.request.customHeaders), 
        this._deleteFileCustomHeadersStore = this._createStore(this._options.deleteFile.customHeaders), 
        this._deleteFileParamsStore = this._createStore(this._options.deleteFile.params), 
        this._endpointStore = this._createStore(this._options.request.endpoint), this._deleteFileEndpointStore = this._createStore(this._options.deleteFile.endpoint), 
        this._handler = this._createUploadHandler(), this._deleteHandler = qq.DeleteFileAjaxRequester && this._createDeleteHandler(), 
        this._options.button && (this._defaultButtonId = this._createUploadButton({
            element: this._options.button
        }).getButtonId()), this._generateExtraButtonSpecs(), this._handleCameraAccess(), 
        this._options.paste.targetElement && (qq.PasteSupport ? this._pasteHandler = this._createPasteHandler() : this.log("Paste support module not found", "error")), 
        this._preventLeaveInProgress(), this._imageGenerator = qq.ImageGenerator && new qq.ImageGenerator(qq.bind(this.log, this)), 
        this._refreshSessionData(), this._succeededSinceLastAllComplete = [], this._failedSinceLastAllComplete = [], 
        this._scaler = qq.Scaler && new qq.Scaler(this._options.scaling, qq.bind(this.log, this)) || {}, 
        this._scaler.enabled && (this._customNewFileHandler = qq.bind(this._scaler.handleNewFile, this._scaler)), 
        qq.TotalProgress && qq.supportedFeatures.progressBar && (this._totalProgress = new qq.TotalProgress(qq.bind(this._onTotalProgress, this), function(a) {
            var c = b._uploadData.retrieve({
                id: a
            });
            return c && c.size || 0;
        }));
    }, qq.FineUploaderBasic.prototype = qq.basePublicApi, qq.extend(qq.FineUploaderBasic.prototype, qq.basePrivateApi);
}(), qq.AjaxRequester = function(a) {
    "use strict";
    function b() {
        return qq.indexOf([ "GET", "POST", "HEAD" ], w.method) >= 0;
    }
    function c() {
        var a = !1;
        return qq.each(a, function(b, c) {
            return qq.indexOf([ "Accept", "Accept-Language", "Content-Language", "Content-Type" ], c) < 0 ? (a = !0, 
            !1) : void 0;
        }), a;
    }
    function d(a) {
        return w.cors.expected && void 0 === a.withCredentials;
    }
    function e() {
        var a;
        return (window.XMLHttpRequest || window.ActiveXObject) && (a = qq.createXhrInstance(), 
        void 0 === a.withCredentials && (a = new XDomainRequest())), a;
    }
    function f(a, b) {
        var c = v[a].xhr;
        return c || (c = b ? b : w.cors.expected ? e() : qq.createXhrInstance(), v[a].xhr = c), 
        c;
    }
    function g(a) {
        var b, c = qq.indexOf(u, a), d = w.maxConnections;
        delete v[a], u.splice(c, 1), u.length >= d && d > c && (b = u[d - 1], j(b));
    }
    function h(a, b) {
        var c = f(a), e = w.method, h = b === !0;
        g(a), h ? s(e + " request for " + a + " has failed", "error") : d(c) || q(c.status) || (h = !0, 
        s(e + " request for " + a + " has failed - response code " + c.status, "error")), 
        w.onComplete(a, c, h);
    }
    function i(a) {
        var b, c = v[a].additionalParams, d = w.mandatedParams;
        return w.paramsStore.get && (b = w.paramsStore.get(a)), c && qq.each(c, function(a, c) {
            b = b || {}, b[a] = c;
        }), d && qq.each(d, function(a, c) {
            b = b || {}, b[a] = c;
        }), b;
    }
    function j(a, b) {
        var c, e = f(a, b), g = w.method, h = i(a), j = v[a].payload;
        return w.onSend(a), c = k(a, h), d(e) ? (e.onload = n(a), e.onerror = o(a)) : e.onreadystatechange = l(a), 
        m(a), e.open(g, c, !0), w.cors.expected && w.cors.sendCredentials && !d(e) && (e.withCredentials = !0), 
        p(a), s("Sending " + g + " request for " + a), j ? e.send(j) : t || !h ? e.send() : e.send(h && w.contentType && w.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded") >= 0 ? qq.obj2url(h, "") : h && w.contentType && w.contentType.toLowerCase().indexOf("application/json") >= 0 ? JSON.stringify(h) : h), 
        e;
    }
    function k(a, b) {
        var c = w.endpointStore.get(a), d = v[a].addToPath;
        return void 0 != d && (c += "/" + d), t && b ? qq.obj2url(b, c) : c;
    }
    function l(a) {
        return function() {
            4 === f(a).readyState && h(a);
        };
    }
    function m(a) {
        var b = w.onProgress;
        b && (f(a).upload.onprogress = function(c) {
            c.lengthComputable && b(a, c.loaded, c.total);
        });
    }
    function n(a) {
        return function() {
            h(a);
        };
    }
    function o(a) {
        return function() {
            h(a, !0);
        };
    }
    function p(a) {
        var e = f(a), g = w.customHeaders, h = v[a].additionalHeaders || {}, i = w.method, j = {};
        d(e) || (w.acceptHeader && e.setRequestHeader("Accept", w.acceptHeader), w.allowXRequestedWithAndCacheControl && (w.cors.expected && b() && !c(g) || (e.setRequestHeader("X-Requested-With", "XMLHttpRequest"), 
        e.setRequestHeader("Cache-Control", "no-cache"))), !w.contentType || "POST" !== i && "PUT" !== i || e.setRequestHeader("Content-Type", w.contentType), 
        qq.extend(j, qq.isFunction(g) ? g(a) : g), qq.extend(j, h), qq.each(j, function(a, b) {
            e.setRequestHeader(a, b);
        }));
    }
    function q(a) {
        return qq.indexOf(w.successfulResponseCodes[w.method], a) >= 0;
    }
    function r(a, b, c, d, e, f) {
        v[a] = {
            addToPath: c,
            additionalParams: d,
            additionalHeaders: e,
            payload: f
        };
        var g = u.push(a);
        return g <= w.maxConnections ? j(a, b) : void 0;
    }
    var s, t, u = [], v = {}, w = {
        acceptHeader: null,
        validMethods: [ "POST" ],
        method: "POST",
        contentType: "application/x-www-form-urlencoded",
        maxConnections: 3,
        customHeaders: {},
        endpointStore: {},
        paramsStore: {},
        mandatedParams: {},
        allowXRequestedWithAndCacheControl: !0,
        successfulResponseCodes: {
            DELETE: [ 200, 202, 204 ],
            POST: [ 200, 204 ],
            GET: [ 200 ]
        },
        cors: {
            expected: !1,
            sendCredentials: !1
        },
        log: function() {},
        onSend: function() {},
        onComplete: function() {},
        onProgress: null
    };
    if (qq.extend(w, a), s = w.log, qq.indexOf(w.validMethods, w.method) < 0) throw new Error("'" + w.method + "' is not a supported method for this type of request!");
    t = "GET" === w.method || "DELETE" === w.method, qq.extend(this, {
        initTransport: function(a) {
            var b, c, d, e, f;
            return {
                withPath: function(a) {
                    return b = a, this;
                },
                withParams: function(a) {
                    return c = a, this;
                },
                withHeaders: function(a) {
                    return d = a, this;
                },
                withPayload: function(a) {
                    return e = a, this;
                },
                withCacheBuster: function() {
                    return f = !0, this;
                },
                send: function(g) {
                    return f && qq.indexOf([ "GET", "DELETE" ], w.method) >= 0 && (c.qqtimestamp = new Date().getTime()), 
                    r(a, g, b, c, d, e);
                }
            };
        },
        canceled: function(a) {
            g(a);
        }
    });
}, qq.UploadHandler = function(a) {
    "use strict";
    var b = a.proxy, c = {}, d = b.onCancel, e = b.getName;
    qq.extend(this, {
        add: function(a, b) {
            c[a] = b, c[a].temp = {};
        },
        cancel: function(a) {
            var b = this, f = new qq.Promise(), g = d(a, e(a), f);
            g.then(function() {
                b.isValid(a) && (c[a].canceled = !0, b.expunge(a)), f.success();
            });
        },
        expunge: function(a) {
            delete c[a];
        },
        getThirdPartyFileId: function(a) {
            return c[a].key;
        },
        isValid: function(a) {
            return void 0 !== c[a];
        },
        reset: function() {
            c = {};
        },
        _getFileState: function(a) {
            return c[a];
        },
        _setThirdPartyFileId: function(a, b) {
            c[a].key = b;
        },
        _wasCanceled: function(a) {
            return !!c[a].canceled;
        }
    });
}, qq.UploadHandlerController = function(a, b) {
    "use strict";
    var c, d, e, f = this, g = !1, h = !1, i = {
        paramsStore: {},
        maxConnections: 3,
        chunking: {
            enabled: !1,
            multiple: {
                enabled: !1
            }
        },
        log: function() {},
        onProgress: function() {},
        onComplete: function() {},
        onCancel: function() {},
        onUploadPrep: function() {},
        onUpload: function() {},
        onUploadChunk: function() {},
        onUploadChunkSuccess: function() {},
        onAutoRetry: function() {},
        onResume: function() {},
        onUuidChanged: function() {},
        getName: function() {},
        setSize: function() {},
        isQueued: function() {},
        getIdsInProxyGroup: function() {},
        getIdsInBatch: function() {}
    }, j = {
        done: function(a, b, c, d) {
            var f = e._getChunkData(a, b);
            e._getFileState(a).attemptingResume = !1, delete e._getFileState(a).temp.chunkProgress[b], 
            e._getFileState(a).loaded += f.size, i.onUploadChunkSuccess(a, e._getChunkDataForCallback(f), c, d);
        },
        finalize: function(a) {
            var b = i.getSize(a), c = i.getName(a);
            d("All chunks have been uploaded for " + a + " - finalizing...."), e.finalizeChunks(a).then(function(f, g) {
                d("Finalize successful for " + a);
                var h = m.normalizeResponse(f, !0);
                i.onProgress(a, c, b, b), e._maybeDeletePersistedChunkData(a), m.cleanup(a, h, g);
            }, function(b, e) {
                var f = m.normalizeResponse(b, !1);
                d("Problem finalizing chunks for file ID " + a + " - " + f.error, "error"), f.reset && j.reset(a), 
                i.onAutoRetry(a, c, f, e) || m.cleanup(a, f, e);
            });
        },
        hasMoreParts: function(a) {
            return !!e._getFileState(a).chunking.remaining.length;
        },
        nextPart: function(a) {
            var b = e._getFileState(a).chunking.remaining.shift();
            return b >= e._getTotalChunks(a) && (b = null), b;
        },
        reset: function(a) {
            d("Server or callback has ordered chunking effort to be restarted on next attempt for item ID " + a, "error"), 
            e._maybeDeletePersistedChunkData(a), e.reevaluateChunking(a), e._getFileState(a).loaded = 0;
        },
        sendNext: function(a) {
            var b = i.getSize(a), c = i.getName(a), f = j.nextPart(a), g = e._getChunkData(a, f), l = e._getFileState(a).attemptingResume, n = e._getFileState(a).chunking.inProgress || [];
            null == e._getFileState(a).loaded && (e._getFileState(a).loaded = 0), l && i.onResume(a, c, g) === !1 && (j.reset(a), 
            f = j.nextPart(a), g = e._getChunkData(a, f), l = !1), null == f && 0 === n.length ? j.finalize(a) : (d("Sending chunked upload request for item " + a + ": bytes " + (g.start + 1) + "-" + g.end + " of " + b), 
            i.onUploadChunk(a, c, e._getChunkDataForCallback(g)), n.push(f), e._getFileState(a).chunking.inProgress = n, 
            h && k.open(a, f), h && k.available() && e._getFileState(a).chunking.remaining.length && j.sendNext(a), 
            e.uploadChunk(a, f, l).then(function(b, c) {
                d("Chunked upload request succeeded for " + a + ", chunk " + f), e.clearCachedChunk(a, f);
                var g = e._getFileState(a).chunking.inProgress || [], h = m.normalizeResponse(b, !0), i = qq.indexOf(g, f);
                d(qq.format("Chunk {} for file {} uploaded successfully.", f, a)), j.done(a, f, h, c), 
                i >= 0 && g.splice(i, 1), e._maybePersistChunkedState(a), j.hasMoreParts(a) || 0 !== g.length ? j.hasMoreParts(a) && j.sendNext(a) : j.finalize(a);
            }, function(b, g) {
                d("Chunked upload request failed for " + a + ", chunk " + f), e.clearCachedChunk(a, f);
                var l = m.normalizeResponse(b, !1);
                if (l.reset) j.reset(a); else {
                    var n = qq.indexOf(e._getFileState(a).chunking.inProgress, f);
                    n >= 0 && (e._getFileState(a).chunking.inProgress.splice(n, 1), e._getFileState(a).chunking.remaining.unshift(f));
                }
                e._getFileState(a).temp.ignoreFailure || (h && (e._getFileState(a).temp.ignoreFailure = !0, 
                qq.each(e._getXhrs(a), function(a, b) {
                    b.abort();
                }), e.moveInProgressToRemaining(a), k.free(a, !0)), i.onAutoRetry(a, c, l, g) || m.cleanup(a, l, g));
            }).done(function() {
                e.clearXhr(a, f);
            }));
        }
    }, k = {
        _open: [],
        _openChunks: {},
        _waiting: [],
        available: function() {
            var a = i.maxConnections, b = 0, c = 0;
            return qq.each(k._openChunks, function(a, d) {
                b++, c += d.length;
            }), a - (k._open.length - b + c);
        },
        free: function(a, b) {
            var c, f = !b, g = qq.indexOf(k._waiting, a), h = qq.indexOf(k._open, a);
            delete k._openChunks[a], m.getProxyOrBlob(a) instanceof qq.BlobProxy && (d("Generated blob upload has ended for " + a + ", disposing generated blob."), 
            delete e._getFileState(a).file), g >= 0 ? k._waiting.splice(g, 1) : f && h >= 0 && (k._open.splice(h, 1), 
            c = k._waiting.shift(), c >= 0 && (k._open.push(c), m.start(c)));
        },
        getWaitingOrConnected: function() {
            var a = [];
            return qq.each(k._openChunks, function(b, c) {
                c && c.length && a.push(parseInt(b));
            }), qq.each(k._open, function(b, c) {
                k._openChunks[c] || a.push(parseInt(c));
            }), a = a.concat(k._waiting);
        },
        isUsingConnection: function(a) {
            return qq.indexOf(k._open, a) >= 0;
        },
        open: function(a, b) {
            return null == b && k._waiting.push(a), k.available() ? (null == b ? (k._waiting.pop(), 
            k._open.push(a)) : !function() {
                var c = k._openChunks[a] || [];
                c.push(b), k._openChunks[a] = c;
            }(), !0) : !1;
        },
        reset: function() {
            k._waiting = [], k._open = [];
        }
    }, l = {
        send: function(a, b) {
            e._getFileState(a).loaded = 0, d("Sending simple upload request for " + a), e.uploadFile(a).then(function(c, e) {
                d("Simple upload request succeeded for " + a);
                var f = m.normalizeResponse(c, !0), g = i.getSize(a);
                i.onProgress(a, b, g, g), m.maybeNewUuid(a, f), m.cleanup(a, f, e);
            }, function(c, e) {
                d("Simple upload request failed for " + a);
                var f = m.normalizeResponse(c, !1);
                i.onAutoRetry(a, b, f, e) || m.cleanup(a, f, e);
            });
        }
    }, m = {
        cancel: function(a) {
            d("Cancelling " + a), i.paramsStore.remove(a), k.free(a);
        },
        cleanup: function(a, b, c) {
            var d = i.getName(a);
            i.onComplete(a, d, b, c), e._getFileState(a) && e._clearXhrs && e._clearXhrs(a), 
            k.free(a);
        },
        getProxyOrBlob: function(a) {
            return e.getProxy && e.getProxy(a) || e.getFile && e.getFile(a);
        },
        initHandler: function() {
            var a = b ? qq[b] : qq.traditional, c = qq.supportedFeatures.ajaxUploading ? "Xhr" : "Form";
            e = new a[c + "UploadHandler"](i, {
                getDataByUuid: i.getDataByUuid,
                getName: i.getName,
                getSize: i.getSize,
                getUuid: i.getUuid,
                log: d,
                onCancel: i.onCancel,
                onProgress: i.onProgress,
                onUuidChanged: i.onUuidChanged
            }), e._removeExpiredChunkingRecords && e._removeExpiredChunkingRecords();
        },
        isDeferredEligibleForUpload: function(a) {
            return i.isQueued(a);
        },
        maybeDefer: function(a, b) {
            return b && !e.getFile(a) && b instanceof qq.BlobProxy ? (i.onUploadPrep(a), d("Attempting to generate a blob on-demand for " + a), 
            b.create().then(function(b) {
                d("Generated an on-demand blob for " + a), e.updateBlob(a, b), i.setSize(a, b.size), 
                e.reevaluateChunking(a), m.maybeSendDeferredFiles(a);
            }, function(b) {
                var e = {};
                b && (e.error = b), d(qq.format("Failed to generate blob for ID {}.  Error message: {}.", a, b), "error"), 
                i.onComplete(a, i.getName(a), qq.extend(e, c), null), m.maybeSendDeferredFiles(a), 
                k.free(a);
            }), !1) : m.maybeSendDeferredFiles(a);
        },
        maybeSendDeferredFiles: function(a) {
            var b = i.getIdsInProxyGroup(a), c = !1;
            return b && b.length ? (d("Maybe ready to upload proxy group file " + a), qq.each(b, function(b, d) {
                if (m.isDeferredEligibleForUpload(d) && e.getFile(d)) c = d === a, m.now(d); else if (m.isDeferredEligibleForUpload(d)) return !1;
            })) : (c = !0, m.now(a)), c;
        },
        maybeNewUuid: function(a, b) {
            void 0 !== b.newUuid && i.onUuidChanged(a, b.newUuid);
        },
        normalizeResponse: function(a, b) {
            var c = a;
            return qq.isObject(a) || (c = {}, qq.isString(a) && !b && (c.error = a)), c.success = b, 
            c;
        },
        now: function(a) {
            var b = i.getName(a);
            if (!f.isValid(a)) throw new qq.Error(a + " is not a valid file ID to upload!");
            i.onUpload(a, b), g && e._shouldChunkThisFile(a) ? j.sendNext(a) : l.send(a, b);
        },
        start: function(a) {
            var b = m.getProxyOrBlob(a);
            return b ? m.maybeDefer(a, b) : (m.now(a), !0);
        }
    };
    qq.extend(this, {
        add: function() {
            e.add.apply(this, arguments);
        },
        upload: function(a) {
            return k.open(a) ? m.start(a) : !1;
        },
        retry: function(a) {
            return h && (e._getFileState(a).temp.ignoreFailure = !1), k.isUsingConnection(a) ? m.start(a) : f.upload(a);
        },
        cancel: function(a) {
            var b = e.cancel(a);
            qq.isGenericPromise(b) ? b.then(function() {
                m.cancel(a);
            }) : b !== !1 && m.cancel(a);
        },
        cancelAll: function() {
            var a = k.getWaitingOrConnected();
            if (a.length) for (var b = a.length - 1; b >= 0; b--) f.cancel(a[b]);
            k.reset();
        },
        getFile: function(a) {
            return e.getProxy && e.getProxy(a) ? e.getProxy(a).referenceBlob : e.getFile && e.getFile(a);
        },
        isProxied: function(a) {
            return !(!e.getProxy || !e.getProxy(a));
        },
        getInput: function(a) {
            return e.getInput ? e.getInput(a) : void 0;
        },
        reset: function() {
            d("Resetting upload handler"), f.cancelAll(), k.reset(), e.reset();
        },
        expunge: function(a) {
            return f.isValid(a) ? e.expunge(a) : void 0;
        },
        isValid: function(a) {
            return e.isValid(a);
        },
        getResumableFilesData: function() {
            return e.getResumableFilesData ? e.getResumableFilesData() : [];
        },
        getThirdPartyFileId: function(a) {
            return f.isValid(a) ? e.getThirdPartyFileId(a) : void 0;
        },
        pause: function(a) {
            return f.isResumable(a) && e.pause && f.isValid(a) && e.pause(a) ? (k.free(a), e.moveInProgressToRemaining(a), 
            !0) : !1;
        },
        isResumable: function(a) {
            return !!e.isResumable && e.isResumable(a);
        }
    }), qq.extend(i, a), d = i.log, g = i.chunking.enabled && qq.supportedFeatures.chunking, 
    h = g && i.chunking.concurrent.enabled, c = function() {
        var a = {};
        return a[i.preventRetryParam] = !0, a;
    }(), m.initHandler();
}, qq.FormUploadHandler = function(a) {
    "use strict";
    function b(a) {
        delete k[a], m && (clearTimeout(l[a]), delete l[a], q.stopReceivingMessages(a));
        var b = document.getElementById(g._getIframeName(a));
        b && (b.setAttribute("src", "javascript:false;"), qq(b).remove());
    }
    function c(a) {
        return a.split("_")[0];
    }
    function d(a) {
        var b = qq.toElement("<iframe src='javascript:false;' name='" + a + "' />");
        return b.setAttribute("id", a), b.style.display = "none", document.body.appendChild(b), 
        b;
    }
    function e(a, b) {
        var d = a.id, e = c(d), f = o(e);
        j[f] = b, k[e] = qq(a).attach("load", function() {
            g.getInput(e) && (p("Received iframe load event for CORS upload request (iframe name " + d + ")"), 
            l[d] = setTimeout(function() {
                var a = "No valid message received from loaded iframe for iframe name " + d;
                p(a, "error"), b({
                    error: a
                });
            }, 1e3));
        }), q.receiveMessage(d, function(a) {
            p("Received the following window message: '" + a + "'");
            var b, e = c(d), f = g._parseJsonResponse(e, a), h = f.uuid;
            h && j[h] ? (p("Handling response for iframe name " + d), clearTimeout(l[d]), delete l[d], 
            g._detachLoadEvent(d), b = j[h], delete j[h], q.stopReceivingMessages(d), b(f)) : h || p("'" + a + "' does not contain a UUID - ignoring.");
        });
    }
    var f = a.options, g = this, h = a.proxy, i = qq.getUniqueId(), j = {}, k = {}, l = {}, m = f.isCors, n = f.inputName, o = h.getUuid, p = h.log, q = new qq.WindowReceiveMessage({
        log: p
    });
    qq.extend(this, new qq.UploadHandler(a)), qq.override(this, function(a) {
        return {
            add: function(b, c) {
                a.add(b, {
                    input: c
                }), c.setAttribute("name", n), c.parentNode && qq(c).remove();
            },
            expunge: function(c) {
                b(c), a.expunge(c);
            },
            isValid: function(b) {
                return a.isValid(b) && void 0 !== g._getFileState(b).input;
            }
        };
    }), qq.extend(this, {
        _attachLoadEvent: function(a, b) {
            var c;
            m ? e(a, b) : k[a.id] = qq(a).attach("load", function() {
                if (p("Received response for " + a.id), a.parentNode) {
                    try {
                        if (a.contentDocument && a.contentDocument.body && "false" == a.contentDocument.body.innerHTML) return;
                    } catch (d) {
                        p("Error when attempting to access iframe during handling of upload response (" + d.message + ")", "error"), 
                        c = {
                            success: !1
                        };
                    }
                    b(c);
                }
            });
        },
        _createIframe: function(a) {
            var b = g._getIframeName(a);
            return d(b);
        },
        _detachLoadEvent: function(a) {
            void 0 !== k[a] && (k[a](), delete k[a]);
        },
        _getIframeName: function(a) {
            return a + "_" + i;
        },
        getInput: function(a) {
            return g._getFileState(a).input;
        },
        _initFormForUpload: function(a) {
            var b = a.method, c = a.endpoint, d = a.params, e = a.paramsInBody, f = a.targetName, g = qq.toElement("<form method='" + b + "' enctype='multipart/form-data'></form>"), h = c;
            return e ? qq.obj2Inputs(d, g) : h = qq.obj2url(d, c), g.setAttribute("action", h), 
            g.setAttribute("target", f), g.style.display = "none", document.body.appendChild(g), 
            g;
        }
    });
}, qq.XhrUploadHandler = function(a) {
    "use strict";
    function b(a) {
        qq.each(c._getXhrs(a), function(b, d) {
            var e = c._getAjaxRequester(a, b);
            d.onreadystatechange = null, d.upload.onprogress = null, d.abort(), e && e.canceled && e.canceled(a);
        });
    }
    var c = this, d = a.options.namespace, e = a.proxy, f = a.options.chunking, g = a.options.resume, h = f && a.options.chunking.enabled && qq.supportedFeatures.chunking, i = g && a.options.resume.enabled && h && qq.supportedFeatures.resume, j = e.getName, k = e.getSize, l = e.getUuid, m = e.getEndpoint, n = e.getDataByUuid, o = e.onUuidChanged, p = e.onProgress, q = e.log;
    qq.extend(this, new qq.UploadHandler(a)), qq.override(this, function(a) {
        return {
            add: function(b, d) {
                if (qq.isFile(d) || qq.isBlob(d)) a.add(b, {
                    file: d
                }); else {
                    if (!(d instanceof qq.BlobProxy)) throw new Error("Passed obj is not a File, Blob, or proxy");
                    a.add(b, {
                        proxy: d
                    });
                }
                c._initTempState(b), i && c._maybePrepareForResume(b);
            },
            expunge: function(d) {
                b(d), c._maybeDeletePersistedChunkData(d), c._clearXhrs(d), a.expunge(d);
            }
        };
    }), qq.extend(this, {
        clearCachedChunk: function(a, b) {
            delete c._getFileState(a).temp.cachedChunks[b];
        },
        clearXhr: function(a, b) {
            var d = c._getFileState(a).temp;
            d.xhrs && delete d.xhrs[b], d.ajaxRequesters && delete d.ajaxRequesters[b];
        },
        finalizeChunks: function(a, b) {
            var d = c._getTotalChunks(a) - 1, e = c._getXhr(a, d);
            return b ? new qq.Promise().success(b(e), e) : new qq.Promise().success({}, e);
        },
        getFile: function(a) {
            return c.isValid(a) && c._getFileState(a).file;
        },
        getProxy: function(a) {
            return c.isValid(a) && c._getFileState(a).proxy;
        },
        getResumableFilesData: function() {
            var a = [];
            return c._iterateResumeRecords(function(b, d) {
                c.moveInProgressToRemaining(null, d.chunking.inProgress, d.chunking.remaining);
                var e = {
                    name: d.name,
                    remaining: d.chunking.remaining,
                    size: d.size,
                    uuid: d.uuid
                };
                d.key && (e.key = d.key), a.push(e);
            }), a;
        },
        isResumable: function(a) {
            return !!f && c.isValid(a) && !c._getFileState(a).notResumable;
        },
        moveInProgressToRemaining: function(a, b, d) {
            var e = b || c._getFileState(a).chunking.inProgress, f = d || c._getFileState(a).chunking.remaining;
            e && (e.reverse(), qq.each(e, function(a, b) {
                f.unshift(b);
            }), e.length = 0);
        },
        pause: function(a) {
            return c.isValid(a) ? (q(qq.format("Aborting XHR upload for {} '{}' due to pause instruction.", a, j(a))), 
            c._getFileState(a).paused = !0, b(a), !0) : void 0;
        },
        reevaluateChunking: function(a) {
            if (f && c.isValid(a)) {
                var b, d = c._getFileState(a);
                if (delete d.chunking, d.chunking = {}, b = c._getTotalChunks(a), b > 1) {
                    d.chunking.enabled = !0, d.chunking.parts = b, d.chunking.remaining = [];
                    for (var e = 0; b > e; e++) d.chunking.remaining.push(e);
                    c._initTempState(a);
                } else d.chunking.enabled = !1;
            }
        },
        updateBlob: function(a, b) {
            c.isValid(a) && (c._getFileState(a).file = b);
        },
        _clearXhrs: function(a) {
            var b = c._getFileState(a).temp;
            qq.each(b.ajaxRequesters, function(a) {
                delete b.ajaxRequesters[a];
            }), qq.each(b.xhrs, function(a) {
                delete b.xhrs[a];
            });
        },
        _createXhr: function(a, b) {
            return c._registerXhr(a, b, qq.createXhrInstance());
        },
        _getAjaxRequester: function(a, b) {
            var d = null == b ? -1 : b;
            return c._getFileState(a).temp.ajaxRequesters[d];
        },
        _getChunkData: function(a, b) {
            var d = f.partSize, e = k(a), g = c.getFile(a), h = d * b, i = h + d >= e ? e : h + d, j = c._getTotalChunks(a), l = this._getFileState(a).temp.cachedChunks, m = l[b] || qq.sliceBlob(g, h, i);
            return l[b] = m, {
                part: b,
                start: h,
                end: i,
                count: j,
                blob: m,
                size: i - h
            };
        },
        _getChunkDataForCallback: function(a) {
            return {
                partIndex: a.part,
                startByte: a.start + 1,
                endByte: a.end,
                totalParts: a.count
            };
        },
        _getLocalStorageId: function(a) {
            var b = "5.0", c = j(a), e = k(a), g = f.partSize, h = m(a);
            return qq.format("qq{}resume{}-{}-{}-{}-{}", d, b, c, e, g, h);
        },
        _getMimeType: function(a) {
            return c.getFile(a).type;
        },
        _getPersistableData: function(a) {
            return c._getFileState(a).chunking;
        },
        _getTotalChunks: function(a) {
            if (f) {
                var b = k(a), c = f.partSize;
                return Math.ceil(b / c);
            }
        },
        _getXhr: function(a, b) {
            var d = null == b ? -1 : b;
            return c._getFileState(a).temp.xhrs[d];
        },
        _getXhrs: function(a) {
            return c._getFileState(a).temp.xhrs;
        },
        _iterateResumeRecords: function(a) {
            i && qq.each(localStorage, function(b, c) {
                if (0 === b.indexOf(qq.format("qq{}resume-", d))) {
                    var e = JSON.parse(c);
                    a(b, e);
                }
            });
        },
        _initTempState: function(a) {
            c._getFileState(a).temp = {
                ajaxRequesters: {},
                chunkProgress: {},
                xhrs: {},
                cachedChunks: {}
            };
        },
        _markNotResumable: function(a) {
            c._getFileState(a).notResumable = !0;
        },
        _maybeDeletePersistedChunkData: function(a) {
            var b;
            return i && c.isResumable(a) && (b = c._getLocalStorageId(a), b && localStorage.getItem(b)) ? (localStorage.removeItem(b), 
            !0) : !1;
        },
        _maybePrepareForResume: function(a) {
            var b, d, e = c._getFileState(a);
            i && void 0 === e.key && (b = c._getLocalStorageId(a), d = localStorage.getItem(b), 
            d && (d = JSON.parse(d), n(d.uuid) ? c._markNotResumable(a) : (q(qq.format("Identified file with ID {} and name of {} as resumable.", a, j(a))), 
            o(a, d.uuid), e.key = d.key, e.chunking = d.chunking, e.loaded = d.loaded, e.attemptingResume = !0, 
            c.moveInProgressToRemaining(a))));
        },
        _maybePersistChunkedState: function(a) {
            var b, d, e = c._getFileState(a);
            i && c.isResumable(a) && (b = c._getLocalStorageId(a), d = {
                name: j(a),
                size: k(a),
                uuid: l(a),
                key: e.key,
                chunking: e.chunking,
                loaded: e.loaded,
                lastUpdated: Date.now()
            }, localStorage.setItem(b, JSON.stringify(d)));
        },
        _registerProgressHandler: function(a, b, d) {
            var e = c._getXhr(a, b), f = j(a), g = {
                simple: function(b, c) {
                    var d = k(a);
                    b === c ? p(a, f, d, d) : p(a, f, b >= d ? d - 1 : b, d);
                },
                chunked: function(e, g) {
                    var h = c._getFileState(a).temp.chunkProgress, i = c._getFileState(a).loaded, j = e, l = g, m = k(a), n = j - (l - d), o = i;
                    h[b] = n, qq.each(h, function(a, b) {
                        o += b;
                    }), p(a, f, o, m);
                }
            };
            e.upload.onprogress = function(a) {
                if (a.lengthComputable) {
                    var b = null == d ? "simple" : "chunked";
                    g[b](a.loaded, a.total);
                }
            };
        },
        _registerXhr: function(a, b, d, e) {
            var f = null == b ? -1 : b, g = c._getFileState(a).temp;
            return g.xhrs = g.xhrs || {}, g.ajaxRequesters = g.ajaxRequesters || {}, g.xhrs[f] = d, 
            e && (g.ajaxRequesters[f] = e), d;
        },
        _removeExpiredChunkingRecords: function() {
            var a = g.recordsExpireIn;
            c._iterateResumeRecords(function(b, c) {
                var d = new Date(c.lastUpdated);
                d.setDate(d.getDate() + a), d.getTime() <= Date.now() && (q("Removing expired resume record with key " + b), 
                localStorage.removeItem(b));
            });
        },
        _shouldChunkThisFile: function(a) {
            var b = c._getFileState(a);
            return b.chunking || c.reevaluateChunking(a), b.chunking.enabled;
        }
    });
}, qq.WindowReceiveMessage = function(a) {
    "use strict";
    var b = {
        log: function() {}
    }, c = {};
    qq.extend(b, a), qq.extend(this, {
        receiveMessage: function(a, b) {
            var d = function(a) {
                b(a.data);
            };
            window.postMessage ? c[a] = qq(window).attach("message", d) : log("iframe message passing not supported in this browser!", "error");
        },
        stopReceivingMessages: function(a) {
            if (window.postMessage) {
                var b = c[a];
                b && b();
            }
        }
    });
}, function() {
    "use strict";
    qq.uiPublicApi = {
        clearStoredFiles: function() {
            this._parent.prototype.clearStoredFiles.apply(this, arguments), this._templating.clearFiles();
        },
        addExtraDropzone: function(a) {
            this._dnd && this._dnd.setupExtraDropzone(a);
        },
        removeExtraDropzone: function(a) {
            return this._dnd ? this._dnd.removeDropzone(a) : void 0;
        },
        getItemByFileId: function(a) {
            return this._templating.getFileContainer(a);
        },
        reset: function() {
            this._parent.prototype.reset.apply(this, arguments), this._templating.reset(), !this._options.button && this._templating.getButton() && (this._defaultButtonId = this._createUploadButton({
                element: this._templating.getButton()
            }).getButtonId()), this._dnd && (this._dnd.dispose(), this._dnd = this._setupDragAndDrop()), 
            this._totalFilesInBatch = 0, this._filesInBatchAddedToUi = 0, this._setupClickAndEditEventHandlers();
        },
        setName: function(a, b) {
            var c = this._options.formatFileName(b);
            this._parent.prototype.setName.apply(this, arguments), this._templating.updateFilename(a, c);
        },
        pauseUpload: function(a) {
            var b = this._parent.prototype.pauseUpload.apply(this, arguments);
            return b && this._templating.uploadPaused(a), b;
        },
        continueUpload: function(a) {
            var b = this._parent.prototype.continueUpload.apply(this, arguments);
            return b && this._templating.uploadContinued(a), b;
        },
        getId: function(a) {
            return this._templating.getFileId(a);
        },
        getDropTarget: function(a) {
            var b = this.getFile(a);
            return b.qqDropTarget;
        }
    }, qq.uiPrivateApi = {
        _getButton: function(a) {
            var b = this._parent.prototype._getButton.apply(this, arguments);
            return b || a === this._defaultButtonId && (b = this._templating.getButton()), b;
        },
        _removeFileItem: function(a) {
            this._templating.removeFile(a);
        },
        _setupClickAndEditEventHandlers: function() {
            this._fileButtonsClickHandler = qq.FileButtonsClickHandler && this._bindFileButtonsClickEvent(), 
            this._focusinEventSupported = !qq.firefox(), this._isEditFilenameEnabled() && (this._filenameClickHandler = this._bindFilenameClickEvent(), 
            this._filenameInputFocusInHandler = this._bindFilenameInputFocusInEvent(), this._filenameInputFocusHandler = this._bindFilenameInputFocusEvent());
        },
        _setupDragAndDrop: function() {
            var a = this, b = this._options.dragAndDrop.extraDropzones, c = this._templating, d = c.getDropZone();
            return d && b.push(d), new qq.DragAndDrop({
                dropZoneElements: b,
                allowMultipleItems: this._options.multiple,
                classes: {
                    dropActive: this._options.classes.dropActive
                },
                callbacks: {
                    processingDroppedFiles: function() {
                        c.showDropProcessing();
                    },
                    processingDroppedFilesComplete: function(b, d) {
                        c.hideDropProcessing(), qq.each(b, function(a, b) {
                            b.qqDropTarget = d;
                        }), b.length && a.addFiles(b, null, null);
                    },
                    dropError: function(b, c) {
                        a._itemError(b, c);
                    },
                    dropLog: function(b, c) {
                        a.log(b, c);
                    }
                }
            });
        },
        _bindFileButtonsClickEvent: function() {
            var a = this;
            return new qq.FileButtonsClickHandler({
                templating: this._templating,
                log: function(b, c) {
                    a.log(b, c);
                },
                onDeleteFile: function(b) {
                    a.deleteFile(b);
                },
                onCancel: function(b) {
                    a.cancel(b);
                },
                onRetry: function(b) {
                    qq(a._templating.getFileContainer(b)).removeClass(a._classes.retryable), a._templating.hideRetry(b), 
                    a.retry(b);
                },
                onPause: function(b) {
                    a.pauseUpload(b);
                },
                onContinue: function(b) {
                    a.continueUpload(b);
                },
                onGetName: function(b) {
                    return a.getName(b);
                }
            });
        },
        _isEditFilenameEnabled: function() {
            return this._templating.isEditFilenamePossible() && !this._options.autoUpload && qq.FilenameClickHandler && qq.FilenameInputFocusHandler && qq.FilenameInputFocusHandler;
        },
        _filenameEditHandler: function() {
            var a = this, b = this._templating;
            return {
                templating: b,
                log: function(b, c) {
                    a.log(b, c);
                },
                onGetUploadStatus: function(b) {
                    return a.getUploads({
                        id: b
                    }).status;
                },
                onGetName: function(b) {
                    return a.getName(b);
                },
                onSetName: function(b, c) {
                    a.setName(b, c);
                },
                onEditingStatusChange: function(a, c) {
                    var d = qq(b.getEditInput(a)), e = qq(b.getFileContainer(a));
                    c ? (d.addClass("qq-editing"), b.hideFilename(a), b.hideEditIcon(a)) : (d.removeClass("qq-editing"), 
                    b.showFilename(a), b.showEditIcon(a)), e.addClass("qq-temp").removeClass("qq-temp");
                }
            };
        },
        _onUploadStatusChange: function(a, b, c) {
            this._parent.prototype._onUploadStatusChange.apply(this, arguments), this._isEditFilenameEnabled() && this._templating.getFileContainer(a) && c !== qq.status.SUBMITTED && (this._templating.markFilenameEditable(a), 
            this._templating.hideEditIcon(a));
        },
        _bindFilenameInputFocusInEvent: function() {
            var a = qq.extend({}, this._filenameEditHandler());
            return new qq.FilenameInputFocusInHandler(a);
        },
        _bindFilenameInputFocusEvent: function() {
            var a = qq.extend({}, this._filenameEditHandler());
            return new qq.FilenameInputFocusHandler(a);
        },
        _bindFilenameClickEvent: function() {
            var a = qq.extend({}, this._filenameEditHandler());
            return new qq.FilenameClickHandler(a);
        },
        _storeForLater: function(a) {
            this._parent.prototype._storeForLater.apply(this, arguments), this._templating.hideSpinner(a);
        },
        _onAllComplete: function() {
            this._parent.prototype._onAllComplete.apply(this, arguments), this._templating.resetTotalProgress();
        },
        _onSubmit: function(a, b) {
            var c = this.getFile(a);
            c && c.qqPath && this._options.dragAndDrop.reportDirectoryPaths && this._paramsStore.addReadOnly(a, {
                qqpath: c.qqPath
            }), this._parent.prototype._onSubmit.apply(this, arguments), this._addToList(a, b);
        },
        _onSubmitted: function(a) {
            this._isEditFilenameEnabled() && (this._templating.markFilenameEditable(a), this._templating.showEditIcon(a), 
            this._focusinEventSupported || this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(a)));
        },
        _onProgress: function(a, b, c, d) {
            this._parent.prototype._onProgress.apply(this, arguments), this._templating.updateProgress(a, c, d), 
            100 === Math.round(c / d * 100) ? (this._templating.hideCancel(a), this._templating.hidePause(a), 
            this._templating.hideProgress(a), this._templating.setStatusText(a, this._options.text.waitingForResponse), 
            this._displayFileSize(a)) : this._displayFileSize(a, c, d);
        },
        _onTotalProgress: function(a, b) {
            this._parent.prototype._onTotalProgress.apply(this, arguments), this._templating.updateTotalProgress(a, b);
        },
        _onComplete: function(a, b, c) {
            function d(b) {
                g && (f.setStatusText(a), qq(g).removeClass(h._classes.retrying), f.hideProgress(a), 
                (!h._options.disableCancelForFormUploads || qq.supportedFeatures.ajaxUploading) && f.hideCancel(a), 
                f.hideSpinner(a), b.success ? h._markFileAsSuccessful(a) : (qq(g).addClass(h._classes.fail), 
                f.isRetryPossible() && !h._preventRetries[a] && (qq(g).addClass(h._classes.retryable), 
                f.showRetry(a)), h._controlFailureTextDisplay(a, b)));
            }
            var e = this._parent.prototype._onComplete.apply(this, arguments), f = this._templating, g = f.getFileContainer(a), h = this;
            return e instanceof qq.Promise ? e.done(function(a) {
                d(a);
            }) : d(c), e;
        },
        _markFileAsSuccessful: function(a) {
            var b = this._templating;
            this._isDeletePossible() && b.showDeleteButton(a), qq(b.getFileContainer(a)).addClass(this._classes.success), 
            this._maybeUpdateThumbnail(a);
        },
        _onUploadPrep: function(a) {
            this._parent.prototype._onUploadPrep.apply(this, arguments), this._templating.showSpinner(a);
        },
        _onUpload: function(a) {
            var b = this._parent.prototype._onUpload.apply(this, arguments);
            return this._templating.showSpinner(a), b;
        },
        _onUploadChunk: function(a, b) {
            this._parent.prototype._onUploadChunk.apply(this, arguments), b.partIndex > 0 && this._handler.isResumable(a) && this._templating.allowPause(a);
        },
        _onCancel: function(a) {
            this._parent.prototype._onCancel.apply(this, arguments), this._removeFileItem(a), 
            0 === this._getNotFinished() && this._templating.resetTotalProgress();
        },
        _onBeforeAutoRetry: function(a) {
            var b, c, d;
            this._parent.prototype._onBeforeAutoRetry.apply(this, arguments), this._showCancelLink(a), 
            this._options.retry.showAutoRetryNote && (b = this._autoRetries[a], c = this._options.retry.maxAutoAttempts, 
            d = this._options.retry.autoRetryNote.replace(/\{retryNum\}/g, b), d = d.replace(/\{maxAuto\}/g, c), 
            this._templating.setStatusText(a, d), qq(this._templating.getFileContainer(a)).addClass(this._classes.retrying));
        },
        _onBeforeManualRetry: function(a) {
            return this._parent.prototype._onBeforeManualRetry.apply(this, arguments) ? (this._templating.resetProgress(a), 
            qq(this._templating.getFileContainer(a)).removeClass(this._classes.fail), this._templating.setStatusText(a), 
            this._templating.showSpinner(a), this._showCancelLink(a), !0) : (qq(this._templating.getFileContainer(a)).addClass(this._classes.retryable), 
            this._templating.showRetry(a), !1);
        },
        _onSubmitDelete: function(a) {
            var b = qq.bind(this._onSubmitDeleteSuccess, this);
            this._parent.prototype._onSubmitDelete.call(this, a, b);
        },
        _onSubmitDeleteSuccess: function() {
            this._options.deleteFile.forceConfirm ? this._showDeleteConfirm.apply(this, arguments) : this._sendDeleteRequest.apply(this, arguments);
        },
        _onDeleteComplete: function(a, b, c) {
            this._parent.prototype._onDeleteComplete.apply(this, arguments), this._templating.hideSpinner(a), 
            c ? (this._templating.setStatusText(a, this._options.deleteFile.deletingFailedText), 
            this._templating.showDeleteButton(a)) : this._removeFileItem(a);
        },
        _sendDeleteRequest: function(a) {
            this._templating.hideDeleteButton(a), this._templating.showSpinner(a), this._templating.setStatusText(a, this._options.deleteFile.deletingStatusText), 
            this._deleteHandler.sendDelete.apply(this, arguments);
        },
        _showDeleteConfirm: function(a) {
            var b, c = this.getName(a), d = this._options.deleteFile.confirmMessage.replace(/\{filename\}/g, c), e = (this.getUuid(a), 
            arguments), f = this;
            b = this._options.showConfirm(d), qq.isGenericPromise(b) ? b.then(function() {
                f._sendDeleteRequest.apply(f, e);
            }) : b !== !1 && f._sendDeleteRequest.apply(f, e);
        },
        _addToList: function(a, b, c) {
            var d, e = 0, f = this._handler.isProxied(a) && this._options.scaling.hideScaled;
            f || (this._options.display.prependFiles && (this._totalFilesInBatch > 1 && this._filesInBatchAddedToUi > 0 && (e = this._filesInBatchAddedToUi - 1), 
            d = {
                index: e
            }), c || (this._options.disableCancelForFormUploads && !qq.supportedFeatures.ajaxUploading && this._templating.disableCancel(), 
            this._options.multiple || (this._handler.cancelAll(), this._clearList())), this._templating.addFile(a, this._options.formatFileName(b), d), 
            c ? this._thumbnailUrls[a] && this._templating.updateThumbnail(a, this._thumbnailUrls[a], !0) : this._templating.generatePreview(a, this.getFile(a)), 
            this._filesInBatchAddedToUi += 1, (c || this._options.display.fileSizeOnSubmit && qq.supportedFeatures.ajaxUploading) && this._displayFileSize(a));
        },
        _clearList: function() {
            this._templating.clearFiles(), this.clearStoredFiles();
        },
        _displayFileSize: function(a, b, c) {
            var d = this.getSize(a), e = this._formatSize(d);
            d >= 0 && (void 0 !== b && void 0 !== c && (e = this._formatProgress(b, c)), this._templating.updateSize(a, e));
        },
        _formatProgress: function(a, b) {
            function c(a, b) {
                d = d.replace(a, b);
            }
            var d = this._options.text.formatProgress;
            return c("{percent}", Math.round(a / b * 100)), c("{total_size}", this._formatSize(b)), 
            d;
        },
        _controlFailureTextDisplay: function(a, b) {
            var c, d, e, f, g;
            c = this._options.failedUploadTextDisplay.mode, d = this._options.failedUploadTextDisplay.maxChars, 
            e = this._options.failedUploadTextDisplay.responseProperty, "custom" === c ? (f = b[e], 
            f ? f.length > d && (g = f.substring(0, d) + "...") : f = this._options.text.failUpload, 
            this._templating.setStatusText(a, g || f), this._options.failedUploadTextDisplay.enableTooltip && this._showTooltip(a, f)) : "default" === c ? this._templating.setStatusText(a, this._options.text.failUpload) : "none" !== c && this.log("failedUploadTextDisplay.mode value of '" + c + "' is not valid", "warn");
        },
        _showTooltip: function(a, b) {
            this._templating.getFileContainer(a).title = b;
        },
        _showCancelLink: function(a) {
            (!this._options.disableCancelForFormUploads || qq.supportedFeatures.ajaxUploading) && this._templating.showCancel(a);
        },
        _itemError: function() {
            var a = this._parent.prototype._itemError.apply(this, arguments);
            this._options.showMessage(a);
        },
        _batchError: function(a) {
            this._parent.prototype._batchError.apply(this, arguments), this._options.showMessage(a);
        },
        _setupPastePrompt: function() {
            var a = this;
            this._options.callbacks.onPasteReceived = function() {
                var b = a._options.paste.namePromptMessage, c = a._options.paste.defaultName;
                return a._options.showPrompt(b, c);
            };
        },
        _fileOrBlobRejected: function() {
            this._totalFilesInBatch -= 1, this._parent.prototype._fileOrBlobRejected.apply(this, arguments);
        },
        _prepareItemsForUpload: function(a) {
            this._totalFilesInBatch = a.length, this._filesInBatchAddedToUi = 0, this._parent.prototype._prepareItemsForUpload.apply(this, arguments);
        },
        _maybeUpdateThumbnail: function(a) {
            var b = this._thumbnailUrls[a];
            this._templating.updateThumbnail(a, b);
        },
        _addCannedFile: function() {
            var a = this._parent.prototype._addCannedFile.apply(this, arguments);
            return this._addToList(a, this.getName(a), !0), this._templating.hideSpinner(a), 
            this._templating.hideCancel(a), this._markFileAsSuccessful(a), a;
        },
        _setSize: function(a, b) {
            this._parent.prototype._setSize.apply(this, arguments), this._templating.updateSize(a, this._formatSize(b));
        }
    };
}(), qq.FineUploader = function(a, b) {
    "use strict";
    this._parent = b ? qq[b].FineUploaderBasic : qq.FineUploaderBasic, this._parent.apply(this, arguments), 
    qq.extend(this._options, {
        element: null,
        button: null,
        listElement: null,
        dragAndDrop: {
            extraDropzones: [],
            reportDirectoryPaths: !1
        },
        text: {
            formatProgress: "{percent}% of {total_size}",
            failUpload: "Upload failed",
            waitingForResponse: "Processing...",
            paused: "Paused"
        },
        template: "qq-template",
        classes: {
            retrying: "qq-upload-retrying",
            retryable: "qq-upload-retryable",
            success: "qq-upload-success",
            fail: "qq-upload-fail",
            editable: "qq-editable",
            hide: "qq-hide",
            dropActive: "qq-upload-drop-area-active"
        },
        failedUploadTextDisplay: {
            mode: "default",
            maxChars: 50,
            responseProperty: "error",
            enableTooltip: !0
        },
        messages: {
            tooManyFilesError: "You may only drop one file",
            unsupportedBrowser: "Unrecoverable error - this browser does not permit file uploading of any kind."
        },
        retry: {
            showAutoRetryNote: !0,
            autoRetryNote: "Retrying {retryNum}/{maxAuto}..."
        },
        deleteFile: {
            forceConfirm: !1,
            confirmMessage: "Are you sure you want to delete {filename}?",
            deletingStatusText: "Deleting...",
            deletingFailedText: "Delete failed"
        },
        display: {
            fileSizeOnSubmit: !1,
            prependFiles: !1
        },
        paste: {
            promptForName: !1,
            namePromptMessage: "Please name this image"
        },
        thumbnails: {
            placeholders: {
                waitUntilResponse: !1,
                notAvailablePath: null,
                waitingPath: null
            }
        },
        scaling: {
            hideScaled: !1
        },
        showMessage: function(a) {
            setTimeout(function() {
                window.alert(a);
            }, 0);
        },
        showConfirm: function(a) {
            return window.confirm(a);
        },
        showPrompt: function(a, b) {
            return window.prompt(a, b);
        }
    }, !0), qq.extend(this._options, a, !0), this._templating = new qq.Templating({
        log: qq.bind(this.log, this),
        templateIdOrEl: this._options.template,
        containerEl: this._options.element,
        fileContainerEl: this._options.listElement,
        button: this._options.button,
        imageGenerator: this._imageGenerator,
        classes: {
            hide: this._options.classes.hide,
            editable: this._options.classes.editable
        },
        placeholders: {
            waitUntilUpdate: this._options.thumbnails.placeholders.waitUntilResponse,
            thumbnailNotAvailable: this._options.thumbnails.placeholders.notAvailablePath,
            waitingForThumbnail: this._options.thumbnails.placeholders.waitingPath
        },
        text: this._options.text
    }), !qq.supportedFeatures.uploading || this._options.cors.expected && !qq.supportedFeatures.uploadCors ? this._templating.renderFailure(this._options.messages.unsupportedBrowser) : (this._wrapCallbacks(), 
    this._templating.render(), this._classes = this._options.classes, !this._options.button && this._templating.getButton() && (this._defaultButtonId = this._createUploadButton({
        element: this._templating.getButton()
    }).getButtonId()), this._setupClickAndEditEventHandlers(), qq.DragAndDrop && qq.supportedFeatures.fileDrop && (this._dnd = this._setupDragAndDrop()), 
    this._options.paste.targetElement && this._options.paste.promptForName && (qq.PasteSupport ? this._setupPastePrompt() : this.log("Paste support module not found.", "error")), 
    this._totalFilesInBatch = 0, this._filesInBatchAddedToUi = 0);
}, qq.extend(qq.FineUploader.prototype, qq.basePublicApi), qq.extend(qq.FineUploader.prototype, qq.basePrivateApi), 
qq.extend(qq.FineUploader.prototype, qq.uiPublicApi), qq.extend(qq.FineUploader.prototype, qq.uiPrivateApi), 
qq.Templating = function(a) {
    "use strict";
    function b() {
        var a, b, c, d, e, f, g, h, i;
        if (A("Parsing template"), null == P.templateIdOrEl) throw new Error("You MUST specify either a template element or ID!");
        if (qq.isString(P.templateIdOrEl)) {
            if (a = document.getElementById(P.templateIdOrEl), null === a) throw new Error(qq.format("Cannot find template script at ID '{}'!", P.templateIdOrEl));
            b = a.innerHTML;
        } else {
            if (void 0 === P.templateIdOrEl.innerHTML) throw new Error("You have specified an invalid value for the template option!  It must be an ID or an Element.");
            b = P.templateIdOrEl.innerHTML;
        }
        if (b = qq.trimStr(b), d = document.createElement("div"), d.appendChild(qq.toElement(b)), 
        P.button && (f = qq(d).getByClass(Q.button)[0], f && qq(f).remove()), qq.DragAndDrop && qq.supportedFeatures.fileDrop || (i = qq(d).getByClass(Q.dropProcessing)[0], 
        i && qq(i).remove()), g = qq(d).getByClass(Q.drop)[0], g && !qq.DragAndDrop && (A("DnD module unavailable.", "info"), 
        qq(g).remove()), g && !qq.supportedFeatures.fileDrop && qq(g).hasAttribute(M) && qq(g).css({
            display: "none"
        }), h = qq(d).getByClass(Q.thumbnail)[0], G ? h && (O = parseInt(h.getAttribute(K)), 
        O = O > 0 ? O : null, H = qq(h).hasAttribute(L)) : h && qq(h).remove(), G = G && h, 
        B = qq(d).getByClass(Q.editFilenameInput).length > 0, C = qq(d).getByClass(Q.retry).length > 0, 
        c = qq(d).getByClass(Q.list)[0], null == c) throw new Error("Could not find the file list container in the template!");
        return e = c.innerHTML, c.innerHTML = "", A("Template parsing complete"), {
            template: qq.trimStr(d.innerHTML),
            fileTemplate: qq.trimStr(e)
        };
    }
    function c(a) {
        return qq(F).getByClass(J + a)[0];
    }
    function d(a, b) {
        return a && qq(a).getByClass(b)[0];
    }
    function e(a, b) {
        var c = F, d = c.firstChild;
        b > 0 && (d = qq(c).children()[b].nextSibling), c.insertBefore(a, d);
    }
    function f(a) {
        return d(c(a), Q.cancel);
    }
    function g(a) {
        return d(c(a), Q.pause);
    }
    function h(a) {
        return d(c(a), Q.continueButton);
    }
    function i(a) {
        return null == a ? d(E, Q.totalProgressBarContainer) || d(E, Q.totalProgressBar) : d(c(a), Q.progressBarContainer) || d(c(a), Q.progressBar);
    }
    function j(a) {
        return d(c(a), Q.spinner);
    }
    function k(a) {
        return d(c(a), Q.editNameIcon);
    }
    function l(a) {
        return d(c(a), Q.size);
    }
    function m(a) {
        return d(c(a), Q.deleteButton);
    }
    function n(a) {
        return d(c(a), Q.retry);
    }
    function o(a) {
        return d(c(a), Q.file);
    }
    function p() {
        return d(E, Q.dropProcessing);
    }
    function q(a) {
        return G && d(c(a), Q.thumbnail);
    }
    function r(a) {
        a && qq(a).addClass(P.classes.hide);
    }
    function s(a) {
        a && qq(a).removeClass(P.classes.hide);
    }
    function t(a, b) {
        var c = i(a), d = null == a ? Q.totalProgressBar : Q.progressBar;
        c && !qq(c).hasClass(d) && (c = qq(c).getByClass(d)[0]), c && qq(c).css({
            width: b + "%"
        });
    }
    function u() {
        var a = P.placeholders.thumbnailNotAvailable, b = P.placeholders.waitingForThumbnail, c = {
            maxSize: O,
            scale: H
        };
        G && (a ? P.imageGenerator.generate(a, new Image(), c).then(function(a) {
            S.success(a);
        }, function() {
            S.failure(), A("Problem loading 'not available' placeholder image at " + a, "error");
        }) : S.failure(), b ? P.imageGenerator.generate(b, new Image(), c).then(function(a) {
            T.success(a);
        }, function() {
            T.failure(), A("Problem loading 'waiting for thumbnail' placeholder image at " + b, "error");
        }) : T.failure());
    }
    function v(a) {
        var b = new qq.Promise();
        return T.then(function(c) {
            x(c, a), a.src ? b.success() : (a.src = c.src, a.onload = function() {
                s(a), b.success();
            });
        }, function() {
            r(a), b.success();
        }), b;
    }
    function w(a, b) {
        var c = R[a] || new qq.Promise().failure(), d = new qq.Promise();
        return S.then(function(a) {
            c.then(function() {
                d.success();
            }, function() {
                x(a, b), b.onload = function() {
                    d.success();
                }, b.src = a.src, s(b);
            });
        }), d;
    }
    function x(a, b) {
        var c = a.style.maxWidth, d = a.style.maxHeight;
        d && c && !b.style.maxWidth && !b.style.maxHeight && qq(b).css({
            maxWidth: c,
            maxHeight: d
        });
    }
    function y(a, b) {
        var c = q(a), d = q(b);
        A(qq.format("ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.", a, b, b)), 
        R[b].then(function() {
            R[a].success(), A(qq.format("Now using previously generated thumbnail created for ID {} on ID {}.", b, a)), 
            c.src = d.src, s(c);
        }, function() {
            R[a].failure(), P.placeholders.waitUntilUpdate || w(a, c);
        });
    }
    function z(a, b, c) {
        var d = q(a);
        return A("Generating new thumbnail for " + a), b.qqThumbnailId = a, P.imageGenerator.generate(b, d, c).then(function() {
            s(d), R[a].success();
        }, function() {
            R[a].failure(), P.placeholders.waitUntilUpdate || w(a, d);
        });
    }
    var A, B, C, D, E, F, G, H, I = "qq-file-id", J = "qq-file-id-", K = "qq-max-size", L = "qq-server-scale", M = "qq-hide-dropzone", N = !1, O = -1, P = {
        log: null,
        templateIdOrEl: "qq-template",
        containerEl: null,
        fileContainerEl: null,
        button: null,
        imageGenerator: null,
        classes: {
            hide: "qq-hide",
            editable: "qq-editable"
        },
        placeholders: {
            waitUntilUpdate: !1,
            thumbnailNotAvailable: null,
            waitingForThumbnail: null
        },
        text: {
            paused: "Paused"
        }
    }, Q = {
        button: "qq-upload-button-selector",
        drop: "qq-upload-drop-area-selector",
        list: "qq-upload-list-selector",
        progressBarContainer: "qq-progress-bar-container-selector",
        progressBar: "qq-progress-bar-selector",
        totalProgressBarContainer: "qq-total-progress-bar-container-selector",
        totalProgressBar: "qq-total-progress-bar-selector",
        file: "qq-upload-file-selector",
        spinner: "qq-upload-spinner-selector",
        size: "qq-upload-size-selector",
        cancel: "qq-upload-cancel-selector",
        pause: "qq-upload-pause-selector",
        continueButton: "qq-upload-continue-selector",
        deleteButton: "qq-upload-delete-selector",
        retry: "qq-upload-retry-selector",
        statusText: "qq-upload-status-text-selector",
        editFilenameInput: "qq-edit-filename-selector",
        editNameIcon: "qq-edit-filename-icon-selector",
        dropProcessing: "qq-drop-processing-selector",
        dropProcessingSpinner: "qq-drop-processing-spinner-selector",
        thumbnail: "qq-thumbnail-selector"
    }, R = {}, S = new qq.Promise(), T = new qq.Promise();
    qq.extend(P, a), A = P.log, E = P.containerEl, G = void 0 !== P.imageGenerator, 
    D = b(), u(), qq.extend(this, {
        render: function() {
            A("Rendering template in DOM."), E.innerHTML = D.template, r(p()), this.hideTotalProgress(), 
            F = P.fileContainerEl || d(E, Q.list), A("Template rendering complete");
        },
        renderFailure: function(a) {
            var b = qq.toElement(a);
            E.innerHTML = "", E.appendChild(b);
        },
        reset: function() {
            this.render();
        },
        clearFiles: function() {
            F.innerHTML = "";
        },
        disableCancel: function() {
            N = !0;
        },
        addFile: function(a, b, c) {
            var f = qq.toElement(D.fileTemplate), j = d(f, Q.file);
            qq(f).addClass(J + a), j && qq(j).setText(b), f.setAttribute(I, a), c ? e(f, c.index) : F.appendChild(f), 
            r(i(a)), r(l(a)), r(m(a)), r(n(a)), r(g(a)), r(h(a)), N && this.hideCancel(a);
        },
        removeFile: function(a) {
            qq(c(a)).remove();
        },
        getFileId: function(a) {
            var b = a;
            if (b) {
                for (;null == b.getAttribute(I); ) b = b.parentNode;
                return parseInt(b.getAttribute(I));
            }
        },
        getFileList: function() {
            return F;
        },
        markFilenameEditable: function(a) {
            var b = o(a);
            b && qq(b).addClass(P.classes.editable);
        },
        updateFilename: function(a, b) {
            var c = o(a);
            c && qq(c).setText(b);
        },
        hideFilename: function(a) {
            r(o(a));
        },
        showFilename: function(a) {
            s(o(a));
        },
        isFileName: function(a) {
            return qq(a).hasClass(Q.file);
        },
        getButton: function() {
            return P.button || d(E, Q.button);
        },
        hideDropProcessing: function() {
            r(p());
        },
        showDropProcessing: function() {
            s(p());
        },
        getDropZone: function() {
            return d(E, Q.drop);
        },
        isEditFilenamePossible: function() {
            return B;
        },
        hideRetry: function(a) {
            r(n(a));
        },
        isRetryPossible: function() {
            return C;
        },
        showRetry: function(a) {
            s(n(a));
        },
        getFileContainer: function(a) {
            return c(a);
        },
        showEditIcon: function(a) {
            var b = k(a);
            b && qq(b).addClass(P.classes.editable);
        },
        hideEditIcon: function(a) {
            var b = k(a);
            b && qq(b).removeClass(P.classes.editable);
        },
        isEditIcon: function(a) {
            return qq(a).hasClass(Q.editNameIcon);
        },
        getEditInput: function(a) {
            return d(c(a), Q.editFilenameInput);
        },
        isEditInput: function(a) {
            return qq(a).hasClass(Q.editFilenameInput);
        },
        updateProgress: function(a, b, c) {
            var d, e = i(a);
            e && (d = Math.round(b / c * 100), 100 === d ? r(e) : s(e), t(a, d));
        },
        updateTotalProgress: function(a, b) {
            this.updateProgress(null, a, b);
        },
        hideProgress: function(a) {
            var b = i(a);
            b && r(b);
        },
        hideTotalProgress: function() {
            this.hideProgress();
        },
        resetProgress: function(a) {
            t(a, 0);
        },
        resetTotalProgress: function() {
            this.resetProgress();
        },
        showCancel: function(a) {
            if (!N) {
                var b = f(a);
                b && qq(b).removeClass(P.classes.hide);
            }
        },
        hideCancel: function(a) {
            r(f(a));
        },
        isCancel: function(a) {
            return qq(a).hasClass(Q.cancel);
        },
        allowPause: function(a) {
            s(g(a)), r(h(a));
        },
        uploadPaused: function(a) {
            this.setStatusText(a, P.text.paused), this.allowContinueButton(a), r(j(a));
        },
        hidePause: function(a) {
            r(g(a));
        },
        isPause: function(a) {
            return qq(a).hasClass(Q.pause);
        },
        isContinueButton: function(a) {
            return qq(a).hasClass(Q.continueButton);
        },
        allowContinueButton: function(a) {
            s(h(a)), r(g(a));
        },
        uploadContinued: function(a) {
            this.setStatusText(a, ""), this.allowPause(a), s(j(a));
        },
        showDeleteButton: function(a) {
            s(m(a));
        },
        hideDeleteButton: function(a) {
            r(m(a));
        },
        isDeleteButton: function(a) {
            return qq(a).hasClass(Q.deleteButton);
        },
        isRetry: function(a) {
            return qq(a).hasClass(Q.retry);
        },
        updateSize: function(a, b) {
            var c = l(a);
            c && (s(c), qq(c).setText(b));
        },
        setStatusText: function(a, b) {
            var e = d(c(a), Q.statusText);
            e && (null == b ? qq(e).clearText() : qq(e).setText(b));
        },
        hideSpinner: function(a) {
            r(j(a));
        },
        showSpinner: function(a) {
            s(j(a));
        },
        generatePreview: function(a, b) {
            var c = b && b.qqThumbnailId, d = q(a), e = {
                maxSize: O,
                scale: !0,
                orient: !0
            };
            qq.supportedFeatures.imagePreviews ? d && v(d).done(function() {
                R[a] = new qq.Promise(), null != c ? y(a, c) : z(a, b, e);
            }) : d && v(d);
        },
        updateThumbnail: function(a, b, c) {
            var d = q(a), e = {
                maxSize: O,
                scale: H
            };
            if (d) {
                if (b) return c && v(d), P.imageGenerator.generate(b, d, e).then(function() {
                    s(d);
                }, function() {
                    w(a, d);
                });
                w(a, d);
            }
        }
    });
}, qq.traditional = qq.traditional || {}, qq.traditional.FormUploadHandler = function(a, b) {
    "use strict";
    function c(a) {
        var b = {};
        try {
            b = qq.parseJson(a);
        } catch (c) {
            i("Error when attempting to parse iframe upload response (" + c.message + ")", "error");
        }
        return b;
    }
    function d(a, b) {
        var d;
        try {
            var e = b.contentDocument || b.contentWindow.document, f = e.body.innerHTML;
            i("converting iframe's innerHTML to JSON"), i("innerHTML = " + f), f && f.match(/^<pre/i) && (f = e.body.firstChild.firstChild.nodeValue), 
            d = c(f);
        } catch (g) {
            i("Error when attempting to parse form upload response (" + g.message + ")", "error"), 
            d = {
                success: !1
            };
        }
        return d;
    }
    function e(b, c) {
        var d = a.paramsStore.get(b), e = a.demoMode ? "GET" : "POST", i = a.endpointStore.get(b), j = g(b);
        return d[a.uuidName] = h(b), d[a.filenameParam] = j, f._initFormForUpload({
            method: e,
            endpoint: i,
            params: d,
            paramsInBody: a.paramsInBody,
            targetName: c.name
        });
    }
    var f = this, g = b.getName, h = b.getUuid, i = b.log;
    this.uploadFile = function(b) {
        var c, g = f.getInput(b), h = f._createIframe(b), j = new qq.Promise();
        return c = e(b, h), c.appendChild(g), f._attachLoadEvent(h, function(c) {
            i("iframe loaded");
            var e = c ? c : d(b, h);
            f._detachLoadEvent(b), a.cors.expected || qq(h).remove(), e.success ? j.success(e) : j.failure(e);
        }), i("Sending upload request for " + b), c.submit(), qq(c).remove(), j;
    }, qq.extend(this, new qq.FormUploadHandler({
        options: {
            isCors: a.cors.expected,
            inputName: a.inputName
        },
        proxy: {
            onCancel: a.onCancel,
            getName: g,
            getUuid: h,
            log: i
        }
    }));
}, qq.traditional = qq.traditional || {}, qq.traditional.XhrUploadHandler = function(a, b) {
    "use strict";
    var c = this, d = b.getName, e = b.getSize, f = b.getUuid, g = b.log, h = a.forceMultipart || a.paramsInBody, i = function(b, c, f) {
        var g = e(b), i = d(b);
        c[a.chunking.paramNames.partIndex] = f.part, c[a.chunking.paramNames.partByteOffset] = f.start, 
        c[a.chunking.paramNames.chunkSize] = f.size, c[a.chunking.paramNames.totalParts] = f.count, 
        c[a.totalFileSizeName] = g, h && (c[a.filenameParam] = i);
    }, j = new qq.traditional.AllChunksDoneAjaxRequester({
        cors: a.cors,
        endpoint: a.chunking.success.endpoint,
        log: g
    }), k = function(a, b) {
        var c = new qq.Promise();
        return b.onreadystatechange = function() {
            if (4 === b.readyState) {
                var d = n(a, b);
                d.success ? c.success(d.response, b) : c.failure(d.response, b);
            }
        }, c;
    }, l = function(b) {
        var g = a.paramsStore.get(b), h = d(b), i = e(b);
        return g[a.uuidName] = f(b), g[a.filenameParam] = h, g[a.totalFileSizeName] = i, 
        g[a.chunking.paramNames.totalParts] = c._getTotalChunks(b), g;
    }, m = function(a, b) {
        return a.status < 200 || a.status > 299 || b.success === !1 || !Object.keys(b).length || b.reset;
    }, n = function(a, b) {
        var c;
        return g("xhr - server response received for " + a), g("responseText = " + b.responseText), 
        c = o(!0, b), {
            success: !m(b, c),
            response: c
        };
    }, o = function(a, b) {
        var c = {};
        try {
            g(qq.format("Received response status {} with body: {}", b.status, b.responseText)), 
            c = qq.parseJson(b.responseText);
        } catch (d) {
            a && g("Error when attempting to parse xhr response text (" + d.message + ")", "error");
        }
        return c;
    }, p = function(b) {
        var d = new qq.Promise();
        return j.complete(b, c._createXhr(b), l(b), a.customHeaders.get(b)).then(function(a) {
            d.success(o(!1, a), a);
        }, function(a) {
            d.failure(o(!1, a), a);
        }), d;
    }, q = function(b, c, g, i) {
        var j = new FormData(), k = a.paramsStore.method || (a.demoMode ? "GET" : "POST"), l = a.endpointStore.get(i), m = d(i), n = e(i);
        return b[a.uuidName] = f(i), b[a.filenameParam] = m, h && (b[a.totalFileSizeName] = n), 
        a.paramsInBody || (h || (b[a.inputName] = m), l = qq.obj2url(b, l)), c.open(k, l, !0), 
        a.cors.expected && a.cors.sendCredentials && (c.withCredentials = !0), h ? (a.paramsInBody && qq.obj2FormData(b, j), 
        j.append(a.inputName, g), j) : g;
    }, r = function(b, d) {
        var e = a.customHeaders.get(b), f = c.getFile(b);
        d.setRequestHeader("Accept", "application/json"), d.setRequestHeader("X-Requested-With", "XMLHttpRequest"), 
        d.setRequestHeader("Cache-Control", "no-cache"), h || (d.setRequestHeader("Content-Type", "application/octet-stream"), 
        d.setRequestHeader("X-Mime-Type", f.type)), qq.each(e, function(a, b) {
            d.setRequestHeader(a, b);
        });
    };
    qq.extend(this, {
        uploadChunk: function(b, d, f) {
            {
                var g, h, j, l = c._getChunkData(b, d), m = c._createXhr(b, d);
                e(b);
            }
            return g = k(b, m), c._registerProgressHandler(b, d, l.size), j = a.paramsStore.get(b), 
            i(b, j, l), f && (j[a.resume.paramNames.resuming] = !0), h = q(j, m, l.blob, b), 
            r(b, m), m.send(h), g;
        },
        uploadFile: function(b) {
            var d, e, f, g, h = c.getFile(b);
            return e = c._createXhr(b), c._registerProgressHandler(b), d = k(b, e), f = a.paramsStore.get(b), 
            g = q(f, e, h, b), r(b, e), e.send(g), d;
        }
    }), qq.extend(this, new qq.XhrUploadHandler({
        options: qq.extend({
            namespace: "traditional"
        }, a),
        proxy: qq.extend({
            getEndpoint: a.endpointStore.get
        }, b)
    })), qq.override(this, function(b) {
        return {
            finalizeChunks: function(c) {
                return a.chunking.success.endpoint ? p(c) : b.finalizeChunks(c, qq.bind(o, this, !0));
            }
        };
    });
}, qq.traditional.AllChunksDoneAjaxRequester = function(a) {
    "use strict";
    var b, c = "POST", d = {
        cors: {
            allowXdr: !1,
            expected: !1,
            sendCredentials: !1
        },
        endpoint: null,
        log: function() {}
    }, e = {}, f = {
        get: function() {
            return d.endpoint;
        }
    };
    qq.extend(d, a), b = qq.extend(this, new qq.AjaxRequester({
        acceptHeader: "application/json",
        validMethods: [ c ],
        method: c,
        successfulResponseCodes: function() {
            var a = {};
            return a[c] = [ 200, 201, 202 ], a;
        }(),
        endpointStore: f,
        allowXRequestedWithAndCacheControl: !1,
        cors: d.cors,
        log: d.log,
        onComplete: function(a, b, c) {
            var d = e[a];
            delete e[a], c ? d.failure(b) : d.success(b);
        }
    })), qq.extend(this, {
        complete: function(a, c, f, g) {
            var h = new qq.Promise();
            return d.log("Submitting All Chunks Done request for " + a), e[a] = h, b.initTransport(a).withParams(f).withHeaders(g).send(c), 
            h;
        }
    });
}, qq.PasteSupport = function(a) {
    "use strict";
    function b(a) {
        return a.type && 0 === a.type.indexOf("image/");
    }
    function c() {
        qq(e.targetElement).attach("paste", function(a) {
            var c = a.clipboardData;
            c && qq.each(c.items, function(a, c) {
                if (b(c)) {
                    var d = c.getAsFile();
                    e.callbacks.pasteReceived(d);
                }
            });
        });
    }
    function d() {
        f && f();
    }
    var e, f;
    e = {
        targetElement: null,
        callbacks: {
            log: function() {},
            pasteReceived: function() {}
        }
    }, qq.extend(e, a), c(), qq.extend(this, {
        reset: function() {
            d();
        }
    });
}, qq.DragAndDrop = function(a) {
    "use strict";
    function b(a, b) {
        var c = Array.prototype.slice.call(a);
        j.callbacks.dropLog("Grabbed " + a.length + " dropped files."), b.dropDisabled(!1), 
        j.callbacks.processingDroppedFilesComplete(c, b.getElement());
    }
    function c(a) {
        var b = new qq.Promise();
        return a.isFile ? a.file(function(c) {
            var d = a.name, e = a.fullPath, f = e.indexOf(d);
            e = e.substr(0, f), "/" === e.charAt(0) && (e = e.substr(1)), c.qqPath = e, n.push(c), 
            b.success();
        }, function(c) {
            j.callbacks.dropLog("Problem parsing '" + a.fullPath + "'.  FileError code " + c.code + ".", "error"), 
            b.failure();
        }) : a.isDirectory && d(a).then(function(a) {
            var d = a.length;
            qq.each(a, function(a, e) {
                c(e).done(function() {
                    d -= 1, 0 === d && b.success();
                });
            }), a.length || b.success();
        }, function(c) {
            j.callbacks.dropLog("Problem parsing '" + a.fullPath + "'.  FileError code " + c.code + ".", "error"), 
            b.failure();
        }), b;
    }
    function d(a, b, c, e) {
        var f = e || new qq.Promise(), g = b || a.createReader();
        return g.readEntries(function(b) {
            var e = c ? c.concat(b) : b;
            b.length ? setTimeout(function() {
                d(a, g, e, f);
            }, 0) : f.success(e);
        }, f.failure), f;
    }
    function e(a, b) {
        var d = [], e = new qq.Promise();
        return j.callbacks.processingDroppedFiles(), b.dropDisabled(!0), a.files.length > 1 && !j.allowMultipleItems ? (j.callbacks.processingDroppedFilesComplete([]), 
        j.callbacks.dropError("tooManyFilesError", ""), b.dropDisabled(!1), e.failure()) : (n = [], 
        qq.isFolderDropSupported(a) ? qq.each(a.items, function(a, b) {
            var f = b.webkitGetAsEntry();
            f && (f.isFile ? n.push(b.getAsFile()) : d.push(c(f).done(function() {
                d.pop(), 0 === d.length && e.success();
            })));
        }) : n = a.files, 0 === d.length && e.success()), e;
    }
    function f(a) {
        var c = new qq.UploadDropZone({
            HIDE_ZONES_EVENT_NAME: k,
            element: a,
            onEnter: function(b) {
                qq(a).addClass(j.classes.dropActive), b.stopPropagation();
            },
            onLeaveNotDescendants: function() {
                qq(a).removeClass(j.classes.dropActive);
            },
            onDrop: function(a) {
                e(a.dataTransfer, c).then(function() {
                    b(n, c);
                }, function() {
                    j.callbacks.dropLog("Drop event DataTransfer parsing failed.  No files will be uploaded.", "error");
                });
            }
        });
        return o.addDisposer(function() {
            c.dispose();
        }), qq(a).hasAttribute(l) && qq(a).hide(), m.push(c), c;
    }
    function g(a) {
        var b;
        return qq.each(a.dataTransfer.types, function(a, c) {
            return "Files" === c ? (b = !0, !1) : void 0;
        }), b;
    }
    function h(a) {
        return qq.firefox() ? !a.relatedTarget : qq.safari() ? a.x < 0 || a.y < 0 : 0 === a.x && 0 === a.y;
    }
    function i() {
        var a = j.dropZoneElements, b = function() {
            setTimeout(function() {
                qq.each(a, function(a, b) {
                    qq(b).hasAttribute(l) && qq(b).hide(), qq(b).removeClass(j.classes.dropActive);
                });
            }, 10);
        };
        qq.each(a, function(b, c) {
            var d = f(c);
            !a.length || qq.ie() && !qq.ie10() || o.attach(document, "dragenter", function(b) {
                !d.dropDisabled() && g(b) && qq.each(a, function(a, b) {
                    b instanceof HTMLElement && qq(b).css({
                        display: "block"
                    });
                });
            });
        }), o.attach(document, "dragleave", function(a) {
            h(a) && b();
        }), o.attach(qq(document).children()[0], "mouseenter", function() {
            b();
        }), o.attach(document, "drop", function(a) {
            a.preventDefault(), b();
        }), o.attach(document, k, b);
    }
    var j, k = "qq-hidezones", l = "qq-hide-dropzone", m = [], n = [], o = new qq.DisposeSupport();
    j = {
        dropZoneElements: [],
        allowMultipleItems: !0,
        classes: {
            dropActive: null
        },
        callbacks: new qq.DragAndDrop.callbacks()
    }, qq.extend(j, a, !0), i(), qq.extend(this, {
        setupExtraDropzone: function(a) {
            j.dropZoneElements.push(a), f(a);
        },
        removeDropzone: function(a) {
            var b, c = j.dropZoneElements;
            for (b in c) if (c[b] === a) return c.splice(b, 1);
        },
        dispose: function() {
            o.dispose(), qq.each(m, function(a, b) {
                b.dispose();
            });
        }
    });
}, qq.DragAndDrop.callbacks = function() {
    "use strict";
    return {
        processingDroppedFiles: function() {},
        processingDroppedFilesComplete: function() {},
        dropError: function(a, b) {
            qq.log("Drag & drop error code '" + a + " with these specifics: '" + b + "'", "error");
        },
        dropLog: function(a, b) {
            qq.log(a, b);
        }
    };
}, qq.UploadDropZone = function(a) {
    "use strict";
    function b() {
        return qq.safari() || qq.firefox() && qq.windows();
    }
    function c() {
        k || (b ? l.attach(document, "dragover", function(a) {
            a.preventDefault();
        }) : l.attach(document, "dragover", function(a) {
            a.dataTransfer && (a.dataTransfer.dropEffect = "none", a.preventDefault());
        }), k = !0);
    }
    function d(a) {
        if (qq.ie() && !qq.ie10()) return !1;
        var b, c = a.dataTransfer, d = qq.safari();
        return b = qq.ie10() || qq.ie11() ? !0 : "none" !== c.effectAllowed, c && b && (c.files || !d && c.types.contains && c.types.contains("Files"));
    }
    function e(a) {
        return void 0 !== a && (j = a), j;
    }
    function f() {
        function a() {
            b = document.createEvent("Event"), b.initEvent(h.HIDE_ZONES_EVENT_NAME, !0, !0);
        }
        var b;
        if (window.CustomEvent) try {
            b = new CustomEvent(h.HIDE_ZONES_EVENT_NAME);
        } catch (c) {
            a();
        } else a();
        document.dispatchEvent(b);
    }
    function g() {
        l.attach(i, "dragover", function(a) {
            if (d(a)) {
                var b = qq.ie() || qq.ie11() ? null : a.dataTransfer.effectAllowed;
                a.dataTransfer.dropEffect = "move" === b || "linkMove" === b ? "move" : "copy", 
                a.stopPropagation(), a.preventDefault();
            }
        }), l.attach(i, "dragenter", function(a) {
            if (!e()) {
                if (!d(a)) return;
                h.onEnter(a);
            }
        }), l.attach(i, "dragleave", function(a) {
            if (d(a)) {
                h.onLeave(a);
                var b = document.elementFromPoint(a.clientX, a.clientY);
                qq(this).contains(b) || h.onLeaveNotDescendants(a);
            }
        }), l.attach(i, "drop", function(a) {
            if (!e()) {
                if (!d(a)) return;
                a.preventDefault(), a.stopPropagation(), h.onDrop(a), f();
            }
        });
    }
    var h, i, j, k, l = new qq.DisposeSupport();
    h = {
        element: null,
        onEnter: function() {},
        onLeave: function() {},
        onLeaveNotDescendants: function() {},
        onDrop: function() {}
    }, qq.extend(h, a), i = h.element, c(), g(), qq.extend(this, {
        dropDisabled: function(a) {
            return e(a);
        },
        dispose: function() {
            l.dispose();
        },
        getElement: function() {
            return i;
        }
    });
}, qq.DeleteFileAjaxRequester = function(a) {
    "use strict";
    function b() {
        return "POST" === d.method.toUpperCase() ? {
            _method: "DELETE"
        } : {};
    }
    var c, d = {
        method: "DELETE",
        uuidParamName: "qquuid",
        endpointStore: {},
        maxConnections: 3,
        customHeaders: function() {
            return {};
        },
        paramsStore: {},
        demoMode: !1,
        cors: {
            expected: !1,
            sendCredentials: !1
        },
        log: function() {},
        onDelete: function() {},
        onDeleteComplete: function() {}
    };
    qq.extend(d, a), c = qq.extend(this, new qq.AjaxRequester({
        acceptHeader: "application/json",
        validMethods: [ "POST", "DELETE" ],
        method: d.method,
        endpointStore: d.endpointStore,
        paramsStore: d.paramsStore,
        mandatedParams: b(),
        maxConnections: d.maxConnections,
        customHeaders: function(a) {
            return d.customHeaders.get(a);
        },
        demoMode: d.demoMode,
        log: d.log,
        onSend: d.onDelete,
        onComplete: d.onDeleteComplete,
        cors: d.cors
    })), qq.extend(this, {
        sendDelete: function(a, b, e) {
            var f = e || {};
            d.log("Submitting delete file request for " + a), "DELETE" === d.method ? c.initTransport(a).withPath(b).withParams(f).send() : (f[d.uuidParamName] = b, 
            c.initTransport(a).withParams(f).send());
        }
    });
}, function() {
    function a(a) {
        var b = a.naturalWidth, c = a.naturalHeight;
        if (b * c > 1048576) {
            var d = document.createElement("canvas");
            d.width = d.height = 1;
            var e = d.getContext("2d");
            return e.drawImage(a, -b + 1, 0), 0 === e.getImageData(0, 0, 1, 1).data[3];
        }
        return !1;
    }
    function b(a, b, c) {
        var d = document.createElement("canvas");
        d.width = 1, d.height = c;
        var e = d.getContext("2d");
        e.drawImage(a, 0, 0);
        for (var f = e.getImageData(0, 0, 1, c).data, g = 0, h = c, i = c; i > g; ) {
            var j = f[4 * (i - 1) + 3];
            0 === j ? h = i : g = i, i = h + g >> 1;
        }
        var k = i / c;
        return 0 === k ? 1 : k;
    }
    function c(a, b, c) {
        var d = document.createElement("canvas"), f = b.mime || "image/jpeg";
        return e(a, d, b, c), d.toDataURL(f, b.quality || .8);
    }
    function d(a) {
        var b = 5241e3;
        if (!qq.ios()) throw new qq.Error("Downsampled dimensions can only be reliably calculated for iOS!");
        return a.origHeight * a.origWidth > b ? {
            newHeight: Math.round(Math.sqrt(b * (a.origHeight / a.origWidth))),
            newWidth: Math.round(Math.sqrt(b * (a.origWidth / a.origHeight)))
        } : void 0;
    }
    function e(c, e, g, h) {
        var i = c.naturalWidth, j = c.naturalHeight, k = g.width, l = g.height, m = e.getContext("2d");
        if (m.save(), !qq.supportedFeatures.unlimitedScaledImageSize) {
            var n = d({
                origWidth: k,
                origHeight: l
            });
            n && (qq.log(qq.format("Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h", k, l, n.newWidth, n.newHeight), "warn"), 
            k = n.newWidth, l = n.newHeight);
        }
        if (f(e, k, l, g.orientation), qq.ios()) {
            var o = a(c);
            o && (i /= 2, j /= 2);
            var p = 1024, q = document.createElement("canvas");
            q.width = q.height = p;
            for (var r = q.getContext("2d"), s = h ? b(c, i, j) : 1, t = Math.ceil(p * k / i), u = Math.ceil(p * l / j / s), v = 0, w = 0; j > v; ) {
                for (var x = 0, y = 0; i > x; ) r.clearRect(0, 0, p, p), r.drawImage(c, -x, -v), 
                m.drawImage(q, 0, 0, p, p, y, w, t, u), x += p, y += t;
                v += p, w += u;
            }
            m.restore(), q = r = null;
        } else m.drawImage(c, 0, 0, k, l);
        e.qqImageRendered && e.qqImageRendered();
    }
    function f(a, b, c, d) {
        switch (d) {
          case 5:
          case 6:
          case 7:
          case 8:
            a.width = c, a.height = b;
            break;

          default:
            a.width = b, a.height = c;
        }
        var e = a.getContext("2d");
        switch (d) {
          case 2:
            e.translate(b, 0), e.scale(-1, 1);
            break;

          case 3:
            e.translate(b, c), e.rotate(Math.PI);
            break;

          case 4:
            e.translate(0, c), e.scale(1, -1);
            break;

          case 5:
            e.rotate(.5 * Math.PI), e.scale(1, -1);
            break;

          case 6:
            e.rotate(.5 * Math.PI), e.translate(0, -c);
            break;

          case 7:
            e.rotate(.5 * Math.PI), e.translate(b, -c), e.scale(-1, 1);
            break;

          case 8:
            e.rotate(-.5 * Math.PI), e.translate(-b, 0);
        }
    }
    function g(a, b) {
        if (window.Blob && a instanceof Blob) {
            var c = new Image(), d = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;
            if (!d) throw Error("No createObjectURL function found to create blob url");
            c.src = d.createObjectURL(a), this.blob = a, a = c;
        }
        if (!a.naturalWidth && !a.naturalHeight) {
            var e = this;
            a.onload = function() {
                var a = e.imageLoadListeners;
                a && (e.imageLoadListeners = null, setTimeout(function() {
                    for (var b = 0, c = a.length; c > b; b++) a[b]();
                }, 0));
            }, a.onerror = b, this.imageLoadListeners = [];
        }
        this.srcImage = a;
    }
    g.prototype.render = function(a, b) {
        if (this.imageLoadListeners) {
            var d = this;
            return void this.imageLoadListeners.push(function() {
                d.render(a, b);
            });
        }
        b = b || {};
        var f = this.srcImage.naturalWidth, g = this.srcImage.naturalHeight, h = b.width, i = b.height, j = b.maxWidth, k = b.maxHeight, l = !this.blob || "image/jpeg" === this.blob.type;
        h && !i ? i = g * h / f << 0 : i && !h ? h = f * i / g << 0 : (h = f, i = g), j && h > j && (h = j, 
        i = g * h / f << 0), k && i > k && (i = k, h = f * i / g << 0);
        var m = {
            width: h,
            height: i
        };
        for (var n in b) m[n] = b[n];
        var o = a.tagName.toLowerCase();
        "img" === o ? a.src = c(this.srcImage, m, l) : "canvas" === o && e(this.srcImage, a, m, l), 
        "function" == typeof this.onrender && this.onrender(a);
    }, qq.MegaPixImage = g;
}(), qq.ImageGenerator = function(a) {
    "use strict";
    function b(a) {
        return "img" === a.tagName.toLowerCase();
    }
    function c(a) {
        return "canvas" === a.tagName.toLowerCase();
    }
    function d() {
        return void 0 !== new Image().crossOrigin;
    }
    function e() {
        var a = document.createElement("canvas");
        return a.getContext && a.getContext("2d");
    }
    function f(a) {
        var b = a.split("/"), c = b[b.length - 1], d = qq.getExtension(c);
        switch (d = d && d.toLowerCase()) {
          case "jpeg":
          case "jpg":
            return "image/jpeg";

          case "png":
            return "image/png";

          case "bmp":
            return "image/bmp";

          case "gif":
            return "image/gif";

          case "tiff":
          case "tif":
            return "image/tiff";
        }
    }
    function g(a) {
        var b, c, d, e = document.createElement("a");
        return e.href = a, b = e.protocol, d = e.port, c = e.hostname, b.toLowerCase() !== window.location.protocol.toLowerCase() ? !0 : c.toLowerCase() !== window.location.hostname.toLowerCase() ? !0 : d === window.location.port || qq.ie() ? !1 : !0;
    }
    function h(b, c) {
        b.onload = function() {
            b.onload = null, b.onerror = null, c.success(b);
        }, b.onerror = function() {
            b.onload = null, b.onerror = null, a("Problem drawing thumbnail!", "error"), c.failure(b, "Problem drawing thumbnail!");
        };
    }
    function i(a, b) {
        a.qqImageRendered = function() {
            b.success(a);
        };
    }
    function j(d, e) {
        var f = b(d) || c(d);
        return b(d) ? h(d, e) : c(d) ? i(d, e) : (e.failure(d), a(qq.format("Element container of type {} is not supported!", d.tagName), "error")), 
        f;
    }
    function k(b, c, d) {
        var e = new qq.Promise(), f = new qq.Identify(b, a), g = d.maxSize, h = null == d.orient ? !0 : d.orient, i = function() {
            c.onerror = null, c.onload = null, a("Could not render preview, file may be too large!", "error"), 
            e.failure(c, "Browser cannot render image!");
        };
        return f.isPreviewable().then(function(d) {
            var f = {
                parse: function() {
                    return new qq.Promise().success();
                }
            }, k = h ? new qq.Exif(b, a) : f, l = new qq.MegaPixImage(b, i);
            j(c, e) && k.parse().then(function(a) {
                var b = a && a.Orientation;
                l.render(c, {
                    maxWidth: g,
                    maxHeight: g,
                    orientation: b,
                    mime: d
                });
            }, function(b) {
                a(qq.format("EXIF data could not be parsed ({}).  Assuming orientation = 1.", b)), 
                l.render(c, {
                    maxWidth: g,
                    maxHeight: g,
                    mime: d
                });
            });
        }, function() {
            a("Not previewable"), e.failure(c, "Not previewable");
        }), e;
    }
    function l(a, b, c, d) {
        var e = new Image(), h = new qq.Promise();
        j(e, h), g(a) && (e.crossOrigin = "anonymous"), e.src = a, h.then(function() {
            j(b, c);
            var g = new qq.MegaPixImage(e);
            g.render(b, {
                maxWidth: d,
                maxHeight: d,
                mime: f(a)
            });
        });
    }
    function m(a, b, c, d) {
        j(b, c), qq(b).css({
            maxWidth: d + "px",
            maxHeight: d + "px"
        }), b.src = a;
    }
    function n(a, f, h) {
        var i = new qq.Promise(), k = h.scale, n = k ? h.maxSize : null;
        return k && b(f) ? e() ? g(a) && !d() ? m(a, f, i, n) : l(a, f, i, n) : m(a, f, i, n) : c(f) ? l(a, f, i, n) : j(f, i) && (f.src = a), 
        i;
    }
    qq.extend(this, {
        generate: function(b, c, d) {
            return qq.isString(b) ? (a("Attempting to update thumbnail based on server response."), 
            n(b, c, d || {})) : (a("Attempting to draw client-side image preview."), k(b, c, d || {}));
        }
    }), this._testing = {}, this._testing.isImg = b, this._testing.isCanvas = c, this._testing.isCrossOrigin = g, 
    this._testing.determineMimeOfFileName = f;
}, qq.Exif = function(a, b) {
    "use strict";
    function c(a) {
        for (var b = 0, c = 0; a.length > 0; ) b += parseInt(a.substring(0, 2), 16) * Math.pow(2, c), 
        a = a.substring(2, a.length), c += 8;
        return b;
    }
    function d(b, c) {
        var e = b, f = c;
        return void 0 === e && (e = 2, f = new qq.Promise()), qq.readBlobToHex(a, e, 4).then(function(a) {
            var b = /^ffe([0-9])/.exec(a);
            if (b) if ("1" !== b[1]) {
                var c = parseInt(a.slice(4, 8), 16);
                d(e + c + 2, f);
            } else f.success(e); else f.failure("No EXIF header to be found!");
        }), f;
    }
    function e() {
        var b = new qq.Promise();
        return qq.readBlobToHex(a, 0, 6).then(function(a) {
            0 !== a.indexOf("ffd8") ? b.failure("Not a valid JPEG!") : d().then(function(a) {
                b.success(a);
            }, function(a) {
                b.failure(a);
            });
        }), b;
    }
    function f(b) {
        var c = new qq.Promise();
        return qq.readBlobToHex(a, b + 10, 2).then(function(a) {
            c.success("4949" === a);
        }), c;
    }
    function g(b, d) {
        var e = new qq.Promise();
        return qq.readBlobToHex(a, b + 18, 2).then(function(a) {
            return d ? e.success(c(a)) : void e.success(parseInt(a, 16));
        }), e;
    }
    function h(b, c) {
        var d = b + 20, e = 12 * c;
        return qq.readBlobToHex(a, d, e);
    }
    function i(a) {
        for (var b = [], c = 0; c + 24 <= a.length; ) b.push(a.slice(c, c + 24)), c += 24;
        return b;
    }
    function j(a, b) {
        var d = 16, e = qq.extend([], k), f = {};
        return qq.each(b, function(b, g) {
            var h, i, j, k = g.slice(0, 4), m = a ? c(k) : parseInt(k, 16), n = e.indexOf(m);
            return n >= 0 && (i = l[m].name, j = l[m].bytes, h = g.slice(d, d + 2 * j), f[i] = a ? c(h) : parseInt(h, 16), 
            e.splice(n, 1)), 0 === e.length ? !1 : void 0;
        }), f;
    }
    var k = [ 274 ], l = {
        274: {
            name: "Orientation",
            bytes: 2
        }
    };
    qq.extend(this, {
        parse: function() {
            var c = new qq.Promise(), d = function(a) {
                b(qq.format("EXIF header parse failed: '{}' ", a)), c.failure(a);
            };
            return e().then(function(e) {
                b(qq.format("Moving forward with EXIF header parsing for '{}'", void 0 === a.name ? "blob" : a.name)), 
                f(e).then(function(a) {
                    b(qq.format("EXIF Byte order is {} endian", a ? "little" : "big")), g(e, a).then(function(f) {
                        b(qq.format("Found {} APP1 directory entries", f)), h(e, f).then(function(d) {
                            var e = i(d), f = j(a, e);
                            b("Successfully parsed some EXIF tags"), c.success(f);
                        }, d);
                    }, d);
                }, d);
            }, d), c;
        }
    }), this._testing = {}, this._testing.parseLittleEndian = c;
}, qq.Identify = function(a, b) {
    "use strict";
    function c(a, b) {
        var c = !1, d = [].concat(a);
        return qq.each(d, function(a, d) {
            return 0 === b.indexOf(d) ? (c = !0, !1) : void 0;
        }), c;
    }
    qq.extend(this, {
        isPreviewable: function() {
            var d = this, e = new qq.Promise(), f = !1, g = void 0 === a.name ? "blob" : a.name;
            return b(qq.format("Attempting to determine if {} can be rendered in this browser", g)), 
            b("First pass: check type attribute of blob object."), this.isPreviewableSync() ? (b("Second pass: check for magic bytes in file header."), 
            qq.readBlobToHex(a, 0, 4).then(function(a) {
                qq.each(d.PREVIEWABLE_MIME_TYPES, function(b, d) {
                    return c(d, a) ? (("image/tiff" !== b || qq.supportedFeatures.tiffPreviews) && (f = !0, 
                    e.success(b)), !1) : void 0;
                }), b(qq.format("'{}' is {} able to be rendered in this browser", g, f ? "" : "NOT")), 
                f || e.failure();
            }, function() {
                b("Error reading file w/ name '" + g + "'.  Not able to be rendered in this browser."), 
                e.failure();
            })) : e.failure(), e;
        },
        isPreviewableSync: function() {
            var c = a.type, d = qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES), c) >= 0, e = !1, f = void 0 === a.name ? "blob" : a.name;
            return d && (e = "image/tiff" === c ? qq.supportedFeatures.tiffPreviews : !0), !e && b(f + " is not previewable in this browser per the blob's type attr"), 
            e;
        }
    });
}, qq.Identify.prototype.PREVIEWABLE_MIME_TYPES = {
    "image/jpeg": "ffd8ff",
    "image/gif": "474946",
    "image/png": "89504e",
    "image/bmp": "424d",
    "image/tiff": [ "49492a00", "4d4d002a" ]
}, qq.ImageValidation = function(a, b) {
    "use strict";
    function c(a) {
        var b = !1;
        return qq.each(a, function(a, c) {
            return c > 0 ? (b = !0, !1) : void 0;
        }), b;
    }
    function d() {
        var c = new qq.Promise();
        return new qq.Identify(a, b).isPreviewable().then(function() {
            var d = new Image(), e = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;
            e ? (d.onerror = function() {
                b("Cannot determine dimensions for image.  May be too large.", "error"), c.failure();
            }, d.onload = function() {
                c.success({
                    width: this.width,
                    height: this.height
                });
            }, d.src = e.createObjectURL(a)) : (b("No createObjectURL function available to generate image URL!", "error"), 
            c.failure());
        }, c.failure), c;
    }
    function e(a, b) {
        var c;
        return qq.each(a, function(a, d) {
            if (d > 0) {
                var e = /(max|min)(Width|Height)/.exec(a), f = e[2].charAt(0).toLowerCase() + e[2].slice(1), g = b[f];
                switch (e[1]) {
                  case "min":
                    if (d > g) return c = a, !1;
                    break;

                  case "max":
                    if (g > d) return c = a, !1;
                }
            }
        }), c;
    }
    this.validate = function(a) {
        var f = new qq.Promise();
        return b("Attempting to validate image."), c(a) ? d().then(function(b) {
            var c = e(a, b);
            c ? f.failure(c) : f.success();
        }, f.success) : f.success(), f;
    };
}, qq.Session = function(a) {
    "use strict";
    function b(a) {
        return qq.isArray(a) ? !0 : void d.log("Session response is not an array.", "error");
    }
    function c(a, c, e, f) {
        var g = !1;
        c = c && b(a), c && qq.each(a, function(a, b) {
            if (null == b.uuid) g = !0, d.log(qq.format("Session response item {} did not include a valid UUID - ignoring.", a), "error"); else if (null == b.name) g = !0, 
            d.log(qq.format("Session response item {} did not include a valid name - ignoring.", a), "error"); else try {
                return d.addFileRecord(b), !0;
            } catch (c) {
                g = !0, d.log(c.message, "error");
            }
            return !1;
        }), f[c && !g ? "success" : "failure"](a, e);
    }
    var d = {
        endpoint: null,
        params: {},
        customHeaders: {},
        cors: {},
        addFileRecord: function() {},
        log: function() {}
    };
    qq.extend(d, a, !0), this.refresh = function() {
        var a = new qq.Promise(), b = function(b, d, e) {
            c(b, d, e, a);
        }, e = qq.extend({}, d), f = new qq.SessionAjaxRequester(qq.extend(e, {
            onComplete: b
        }));
        return f.queryServer(), a;
    };
}, qq.SessionAjaxRequester = function(a) {
    "use strict";
    function b(a, b, c) {
        var e = null;
        if (null != b.responseText) try {
            e = qq.parseJson(b.responseText);
        } catch (f) {
            d.log("Problem parsing session response: " + f.message, "error"), c = !0;
        }
        d.onComplete(e, !c, b);
    }
    var c, d = {
        endpoint: null,
        customHeaders: {},
        params: {},
        cors: {
            expected: !1,
            sendCredentials: !1
        },
        onComplete: function() {},
        log: function() {}
    };
    qq.extend(d, a), c = qq.extend(this, new qq.AjaxRequester({
        acceptHeader: "application/json",
        validMethods: [ "GET" ],
        method: "GET",
        endpointStore: {
            get: function() {
                return d.endpoint;
            }
        },
        customHeaders: d.customHeaders,
        log: d.log,
        onComplete: b,
        cors: d.cors
    })), qq.extend(this, {
        queryServer: function() {
            var a = qq.extend({}, d.params);
            d.log("Session query request."), c.initTransport("sessionRefresh").withParams(a).withCacheBuster().send();
        }
    });
}, qq.FormSupport = function(a, b, c) {
    "use strict";
    function d(a) {
        a.getAttribute("action") && (h.newEndpoint = a.getAttribute("action"));
    }
    function e(a, b) {
        return !a.checkValidity || a.checkValidity() ? !0 : (c("Form did not pass validation checks - will not upload.", "error"), 
        void b());
    }
    function f(a) {
        var c = a.submit;
        qq(a).attach("submit", function(d) {
            d = d || window.event, d.preventDefault ? d.preventDefault() : d.returnValue = !1, 
            e(a, c) && b();
        }), a.submit = function() {
            e(a, c) && b();
        };
    }
    function g(a) {
        return a && (qq.isString(a) && (a = document.getElementById(a)), a && (c("Attaching to form element."), 
        d(a), i && f(a))), a;
    }
    var h = this, i = a.interceptSubmit, j = a.element, k = a.autoUpload;
    qq.extend(this, {
        newEndpoint: null,
        newAutoUpload: k,
        attachedToForm: !1,
        getFormInputsAsObject: function() {
            return null == j ? null : h._form2Obj(j);
        }
    }), j = g(j), this.attachedToForm = !!j;
}, qq.extend(qq.FormSupport.prototype, {
    _form2Obj: function(a) {
        "use strict";
        var b = {}, c = function(a) {
            var b = [ "button", "image", "reset", "submit" ];
            return qq.indexOf(b, a.toLowerCase()) < 0;
        }, d = function(a) {
            return qq.indexOf([ "checkbox", "radio" ], a.toLowerCase()) >= 0;
        }, e = function(a) {
            return d(a.type) && !a.checked ? !0 : a.disabled && "hidden" !== a.type.toLowerCase();
        }, f = function(a) {
            var b = null;
            return qq.each(qq(a).children(), function(a, c) {
                return "option" === c.tagName.toLowerCase() && c.selected ? (b = c.value, !1) : void 0;
            }), b;
        };
        return qq.each(a.elements, function(a, d) {
            if (!qq.isInput(d, !0) && "textarea" !== d.tagName.toLowerCase() || !c(d.type) || e(d)) {
                if ("select" === d.tagName.toLowerCase() && !e(d)) {
                    var g = f(d);
                    null !== g && (b[d.name] = g);
                }
            } else b[d.name] = d.value;
        }), b;
    }
}), qq.Scaler = function(a, b) {
    "use strict";
    var c = a.sendOriginal, d = a.orient, e = a.defaultType, f = a.defaultQuality / 100, g = a.failureText, h = a.includeExif, i = this._getSortedSizes(a.sizes);
    qq.extend(this, {
        enabled: qq.supportedFeatures.scaling && i.length > 0,
        getFileRecords: function(a, j, k) {
            var l = this, m = [], n = k.blob ? k.blob : k, o = new qq.Identify(n, b);
            return o.isPreviewableSync() ? (qq.each(i, function(a, c) {
                var i = l._determineOutputType({
                    defaultType: e,
                    requestedType: c.type,
                    refType: n.type
                });
                m.push({
                    uuid: qq.getUniqueId(),
                    name: l._getName(j, {
                        name: c.name,
                        type: i,
                        refType: n.type
                    }),
                    blob: new qq.BlobProxy(n, qq.bind(l._generateScaledImage, l, {
                        maxSize: c.maxSize,
                        orient: d,
                        type: i,
                        quality: f,
                        failedText: g,
                        includeExif: h,
                        log: b
                    }))
                });
            }), c && m.push({
                uuid: a,
                name: j,
                blob: n
            })) : m.push({
                uuid: a,
                name: j,
                blob: n
            }), m;
        },
        handleNewFile: function(a, b, c, d, e, f, g, h) {
            var i = this, j = (a.qqButtonId || a.blob && a.blob.qqButtonId, []), k = null, l = h.addFileToHandler, m = h.uploadData, n = h.paramsStore, o = qq.getUniqueId();
            qq.each(i.getFileRecords(c, b, a), function(b, c) {
                var f, h = a, i = d;
                c.blob instanceof qq.BlobProxy && (h = c.blob, i = -1), f = m.addFile({
                    uuid: c.uuid,
                    name: c.name,
                    size: i,
                    batchId: g,
                    proxyGroupId: o
                }), c.blob instanceof qq.BlobProxy ? j.push(f) : k = f, l(f, h), e.push({
                    id: f,
                    file: h
                });
            }), null !== k && (qq.each(j, function(a, b) {
                var c = {
                    qqparentuuid: m.retrieve({
                        id: k
                    }).uuid,
                    qqparentsize: m.retrieve({
                        id: k
                    }).size
                };
                c[f] = m.retrieve({
                    id: b
                }).uuid, m.setParentId(b, k), n.addReadOnly(b, c);
            }), j.length && !function() {
                var a = {};
                a[f] = m.retrieve({
                    id: k
                }).uuid, n.addReadOnly(k, a);
            }());
        }
    });
}, qq.extend(qq.Scaler.prototype, {
    scaleImage: function(a, b, c) {
        "use strict";
        if (!qq.supportedFeatures.scaling) throw new qq.Error("Scaling is not supported in this browser!");
        var d = new qq.Promise(), e = c.log, f = c.getFile(a), g = c.uploadData.retrieve({
            id: a
        }), h = g && g.name, i = g && g.uuid, j = {
            sendOriginal: !1,
            orient: b.orient,
            defaultType: b.type || null,
            defaultQuality: b.quality,
            failedToScaleText: "Unable to scale",
            sizes: [ {
                name: "",
                maxSize: b.maxSize
            } ]
        }, k = new qq.Scaler(j, e);
        return qq.Scaler && qq.supportedFeatures.imagePreviews && f ? qq.bind(function() {
            var b = k.getFileRecords(i, h, f)[0];
            b && b.blob instanceof qq.BlobProxy ? b.blob.create().then(d.success, d.failure) : (e(a + " is not a scalable image!", "error"), 
            d.failure());
        }, this)() : (d.failure(), e("Could not generate requested scaled image for " + a + ".  Scaling is either not possible in this browser, or the file could not be located.", "error")), 
        d;
    },
    _determineOutputType: function(a) {
        "use strict";
        var b = a.requestedType, c = a.defaultType, d = a.refType;
        return c || b ? b && qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES), b) >= 0 ? "image/tiff" === b ? qq.supportedFeatures.tiffPreviews ? b : c : b : c : "image/jpeg" !== d ? "image/png" : d;
    },
    _getName: function(a, b) {
        "use strict";
        var c = a.lastIndexOf("."), d = b.type || "image/png", e = b.refType, f = "", g = qq.getExtension(a), h = "";
        return b.name && b.name.trim().length && (h = " (" + b.name + ")"), c >= 0 ? (f = a.substr(0, c), 
        e !== d && (g = d.split("/")[1]), f += h + "." + g) : f = a + h, f;
    },
    _getSortedSizes: function(a) {
        "use strict";
        return a = qq.extend([], a), a.sort(function(a, b) {
            return a.maxSize > b.maxSize ? 1 : a.maxSize < b.maxSize ? -1 : 0;
        });
    },
    _generateScaledImage: function(a, b) {
        "use strict";
        var c = this, d = a.log, e = a.maxSize, f = a.orient, g = a.type, h = a.quality, i = a.failedText, j = a.includeExif && "image/jpeg" === b.type && "image/jpeg" === g, k = new qq.Promise(), l = new qq.ImageGenerator(d), m = document.createElement("canvas");
        return d("Attempting to generate scaled version for " + b.name), l.generate(b, m, {
            maxSize: e,
            orient: f
        }).then(function() {
            var a = m.toDataURL(g, h), e = function() {
                d("Success generating scaled version for " + b.name);
                var e = c._dataUriToBlob(a);
                k.success(e);
            };
            j ? c._insertExifHeader(b, a, d).then(function(b) {
                a = b, e();
            }, function() {
                d("Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.", "error"), 
                e();
            }) : e();
        }, function() {
            d("Failed attempt to generate scaled version for " + b.name, "error"), k.failure(i);
        }), k;
    },
    _insertExifHeader: function(a, b, c) {
        "use strict";
        var d = new FileReader(), e = new qq.Promise(), f = "";
        return d.onload = function() {
            f = d.result, e.success(ExifRestorer.restore(f, b));
        }, d.onerror = function() {
            c("Problem reading " + a.name + " during attempt to transfer EXIF data to scaled version.", "error"), 
            e.failure();
        }, d.readAsDataURL(a), e;
    },
    _dataUriToBlob: function(a) {
        "use strict";
        var b, c, d, e;
        return b = a.split(",")[0].indexOf("base64") >= 0 ? atob(a.split(",")[1]) : decodeURI(a.split(",")[1]), 
        c = a.split(",")[0].split(":")[1].split(";")[0], d = new ArrayBuffer(b.length), 
        e = new Uint8Array(d), qq.each(b, function(a, b) {
            e[a] = b.charCodeAt(0);
        }), this._createBlob(d, c);
    },
    _createBlob: function(a, b) {
        "use strict";
        var c = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, d = c && new c();
        return d ? (d.append(a), d.getBlob(b)) : new Blob([ a ], {
            type: b
        });
    }
});

var ExifRestorer = function() {
    var a = {};
    return a.KEY_STR = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", 
    a.encode64 = function(a) {
        var b, c, d, e, f, g = "", h = "", i = "", j = 0;
        do b = a[j++], c = a[j++], h = a[j++], d = b >> 2, e = (3 & b) << 4 | c >> 4, f = (15 & c) << 2 | h >> 6, 
        i = 63 & h, isNaN(c) ? f = i = 64 : isNaN(h) && (i = 64), g = g + this.KEY_STR.charAt(d) + this.KEY_STR.charAt(e) + this.KEY_STR.charAt(f) + this.KEY_STR.charAt(i), 
        b = c = h = "", d = e = f = i = ""; while (j < a.length);
        return g;
    }, a.restore = function(a, b) {
        var c = "data:image/jpeg;base64,";
        if (!a.match(c)) return b;
        var d = this.decode64(a.replace(c, "")), e = this.slice2Segments(d), f = this.exifManipulation(b, e);
        return c + this.encode64(f);
    }, a.exifManipulation = function(a, b) {
        var c = this.getExifArray(b), d = this.insertExif(a, c), e = new Uint8Array(d);
        return e;
    }, a.getExifArray = function(a) {
        for (var b, c = 0; c < a.length; c++) if (b = a[c], 255 == b[0] & 225 == b[1]) return b;
        return [];
    }, a.insertExif = function(a, b) {
        var c = a.replace("data:image/jpeg;base64,", ""), d = this.decode64(c), e = d.indexOf(255, 3), f = d.slice(0, e), g = d.slice(e), h = f;
        return h = h.concat(b), h = h.concat(g);
    }, a.slice2Segments = function(a) {
        for (var b = 0, c = []; ;) {
            if (255 == a[b] & 218 == a[b + 1]) break;
            if (255 == a[b] & 216 == a[b + 1]) b += 2; else {
                var d = 256 * a[b + 2] + a[b + 3], e = b + d + 2, f = a.slice(b, e);
                c.push(f), b = e;
            }
            if (b > a.length) break;
        }
        return c;
    }, a.decode64 = function(a) {
        var b, c, d, e, f, g = "", h = "", i = 0, j = [], k = /[^A-Za-z0-9\+\/\=]/g;
        if (k.exec(a)) throw new Error("There were invalid base64 characters in the input text.  Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='");
        a = a.replace(/[^A-Za-z0-9\+\/\=]/g, "");
        do d = this.KEY_STR.indexOf(a.charAt(i++)), e = this.KEY_STR.indexOf(a.charAt(i++)), 
        f = this.KEY_STR.indexOf(a.charAt(i++)), h = this.KEY_STR.indexOf(a.charAt(i++)), 
        b = d << 2 | e >> 4, c = (15 & e) << 4 | f >> 2, g = (3 & f) << 6 | h, j.push(b), 
        64 != f && j.push(c), 64 != h && j.push(g), b = c = g = "", d = e = f = h = ""; while (i < a.length);
        return j;
    }, a;
}();

qq.TotalProgress = function(a, b) {
    "use strict";
    var c = {}, d = 0, e = 0, f = -1, g = -1, h = function(b, c) {
        (b !== f || c !== g) && a(b, c), f = b, g = c;
    }, i = function(a, b) {
        var c = !0;
        return qq.each(a, function(a, d) {
            return qq.indexOf(b, d) >= 0 ? (c = !1, !1) : void 0;
        }), c;
    }, j = function(a) {
        m(a, -1, -1), delete c[a];
    }, k = function(a, b, c) {
        (0 === b.length || i(b, c)) && (h(e, e), this.reset());
    }, l = function(a) {
        var d = b(a);
        d > 0 && (m(a, 0, d), c[a] = {
            loaded: 0,
            total: d
        });
    }, m = function(a, b, f) {
        var g = c[a] ? c[a].loaded : 0, i = c[a] ? c[a].total : 0;
        -1 === b && -1 === f ? (d -= g, e -= i) : (b && (d += b - g), f && (e += f - i)), 
        h(d, e);
    };
    qq.extend(this, {
        onAllComplete: k,
        onStatusChange: function(a, b, c) {
            c === qq.status.CANCELED || c === qq.status.REJECTED ? j(a) : c === qq.status.SUBMITTING && l(a);
        },
        onIndividualProgress: function(a, b, d) {
            m(a, b, d), c[a] = {
                loaded: b,
                total: d
            };
        },
        onNewSize: function(a) {
            l(a);
        },
        reset: function() {
            c = {}, d = 0, e = 0;
        }
    });
}, qq.UiEventHandler = function(a, b) {
    "use strict";
    function c(a) {
        d.attach(a, e.eventType, function(a) {
            a = a || window.event;
            var b = a.target || a.srcElement;
            e.onHandled(b, a);
        });
    }
    var d = new qq.DisposeSupport(), e = {
        eventType: "click",
        attachTo: null,
        onHandled: function() {}
    };
    qq.extend(this, {
        addHandler: function(a) {
            c(a);
        },
        dispose: function() {
            d.dispose();
        }
    }), qq.extend(b, {
        getFileIdFromItem: function(a) {
            return a.qqFileId;
        },
        getDisposeSupport: function() {
            return d;
        }
    }), qq.extend(e, a), e.attachTo && c(e.attachTo);
}, qq.FileButtonsClickHandler = function(a) {
    "use strict";
    function b(a, b) {
        qq.each(e, function(c, e) {
            var f, g = c.charAt(0).toUpperCase() + c.slice(1);
            return d.templating["is" + g](a) ? (f = d.templating.getFileId(a), qq.preventDefault(b), 
            d.log(qq.format("Detected valid file button click event on file '{}', ID: {}.", d.onGetName(f), f)), 
            e(f), !1) : void 0;
        });
    }
    var c = {}, d = {
        templating: null,
        log: function() {},
        onDeleteFile: function() {},
        onCancel: function() {},
        onRetry: function() {},
        onPause: function() {},
        onContinue: function() {},
        onGetName: function() {}
    }, e = {
        cancel: function(a) {
            d.onCancel(a);
        },
        retry: function(a) {
            d.onRetry(a);
        },
        deleteButton: function(a) {
            d.onDeleteFile(a);
        },
        pause: function(a) {
            d.onPause(a);
        },
        continueButton: function(a) {
            d.onContinue(a);
        }
    };
    qq.extend(d, a), d.eventType = "click", d.onHandled = b, d.attachTo = d.templating.getFileList(), 
    qq.extend(this, new qq.UiEventHandler(d, c));
}, qq.FilenameClickHandler = function(a) {
    "use strict";
    function b(a, b) {
        if (d.templating.isFileName(a) || d.templating.isEditIcon(a)) {
            var e = d.templating.getFileId(a), f = d.onGetUploadStatus(e);
            f === qq.status.SUBMITTED && (d.log(qq.format("Detected valid filename click event on file '{}', ID: {}.", d.onGetName(e), e)), 
            qq.preventDefault(b), c.handleFilenameEdit(e, a, !0));
        }
    }
    var c = {}, d = {
        templating: null,
        log: function() {},
        classes: {
            file: "qq-upload-file",
            editNameIcon: "qq-edit-filename-icon"
        },
        onGetUploadStatus: function() {},
        onGetName: function() {}
    };
    qq.extend(d, a), d.eventType = "click", d.onHandled = b, qq.extend(this, new qq.FilenameEditHandler(d, c));
}, qq.FilenameInputFocusInHandler = function(a, b) {
    "use strict";
    function c(a) {
        if (d.templating.isEditInput(a)) {
            var c = d.templating.getFileId(a), e = d.onGetUploadStatus(c);
            e === qq.status.SUBMITTED && (d.log(qq.format("Detected valid filename input focus event on file '{}', ID: {}.", d.onGetName(c), c)), 
            b.handleFilenameEdit(c, a));
        }
    }
    var d = {
        templating: null,
        onGetUploadStatus: function() {},
        log: function() {}
    };
    b || (b = {}), d.eventType = "focusin", d.onHandled = c, qq.extend(d, a), qq.extend(this, new qq.FilenameEditHandler(d, b));
}, qq.FilenameInputFocusHandler = function(a) {
    "use strict";
    a.eventType = "focus", a.attachTo = null, qq.extend(this, new qq.FilenameInputFocusInHandler(a, {}));
}, qq.FilenameEditHandler = function(a, b) {
    "use strict";
    function c(a) {
        var b = h.onGetName(a), c = b.lastIndexOf(".");
        return c > 0 && (b = b.substr(0, c)), b;
    }
    function d(a) {
        var b = h.onGetName(a);
        return qq.getExtension(b);
    }
    function e(a, b) {
        var c, e = a.value;
        void 0 !== e && qq.trimStr(e).length > 0 && (c = d(b), void 0 !== c && (e = e + "." + c), 
        h.onSetName(b, e)), h.onEditingStatusChange(b, !1);
    }
    function f(a, c) {
        b.getDisposeSupport().attach(a, "blur", function() {
            e(a, c);
        });
    }
    function g(a, c) {
        b.getDisposeSupport().attach(a, "keyup", function(b) {
            var d = b.keyCode || b.which;
            13 === d && e(a, c);
        });
    }
    var h = {
        templating: null,
        log: function() {},
        onGetUploadStatus: function() {},
        onGetName: function() {},
        onSetName: function() {},
        onEditingStatusChange: function() {}
    };
    qq.extend(h, a), h.attachTo = h.templating.getFileList(), qq.extend(this, new qq.UiEventHandler(h, b)), 
    qq.extend(b, {
        handleFilenameEdit: function(a, b, d) {
            var e = h.templating.getEditInput(a);
            h.onEditingStatusChange(a, !0), e.value = c(a), d && e.focus(), f(e, a), g(e, a);
        }
    });
};
define("vendor/misc/fineuploader", (function (global) {
    return function () {
        var ret, fn;
        return ret || global.qq;
    };
}(this)));

define('be/Uploader',[ "jquery", "page_config", "page_constants", "nbd/util/async", "nbd/util/extend", "beff/Component", "be/csrfCookie", "be/disabledupload", "be/FileReader", "be/handleResponse", "be/ImageUtils", "be/Modal", "vendor/misc/fineuploader" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
    "use strict";
    return c.IMAGE || (c = {
        IMAGE: {}
    }), f.extend({
        uploadDialog: null,
        options: {
            button: null,
            crop: !0,
            submitAfterCrop: !0,
            autoUpload: !0,
            request: {
                endpoint: c.IMAGE.UPLOAD_URL,
                inputName: c.IMAGE.UPLOAD_KEY,
                customHeaders: {
                    "X-BCP": g.get()
                }
            },
            multiple: !1,
            maxConnections: 1,
            validation: {
                allowedExtensions: c.IMAGE.EXTENSIONS,
                sizeLimit: c.IMAGE.LIMIT,
                image: {
                    minHeight: c.IMAGE.HEIGHT,
                    minWidth: c.IMAGE.WIDTH
                },
                accept: "image/*"
            },
            messages: {
                typeError: "Please upload a file with these extensions: {extensions}.",
                sizeError: "{file} is too large, the maximum file size is {sizeLimit}.",
                minSizeError: "{file} is too small, please choose an image that is at least {minSizeLimit} pixels.",
                emptyError: "{file} is empty, please select another image.",
                noFilesError: "You did not select any files to upload",
                tooManyItemsError: "You have uploaded ({netItems}) images. Please upload {itemLimit} image(s) at a time.",
                maxHeightImageError: "Please choose an image that is less than {maxHeight} pixels tall.",
                maxWidthImageError: "Please choose an image that is less than {maxWidth} pixels wide.",
                minHeightImageError: "Please choose an image that is at least {minHeight} pixels tall.",
                minWidthImageError: "Please choose an image that is at least {minWidth} pixels wide.",
                retryFailTooManyItems: "You have reached your upload limit. Please check back later to upload more images.",
                onLeave: "The files are being uploaded, if you leave now the upload will be canceled."
            },
            text: {
                defaultResponseError: ""
            }
        },
        init: function(c) {
            var d = this;
            if (this.config = {
                callbacks: {
                    onSubmit: this._onSubmit.bind(this),
                    onProgress: this._onProgress.bind(this),
                    onComplete: this._onComplete.bind(this),
                    onCancel: this._onCancel.bind(this),
                    onError: this._onError.bind(this),
                    onAllComplete: this._onAllComplete.bind(this)
                }
            }, a.extend(!0, this.config, this.options, c), !this.config.button) throw new Error("button not supplied");
            a(this.config.button).on("click", function() {
                return h(b, !0) ? !1 : d._isBrowserSupported() ? void 0 : (d.trigger("unsupportedBrowser"), 
                !1);
            }), this.uploader = new m.FineUploaderBasic(this.config);
        },
        bind: function(a) {
            return this.uploadDialog = a, this;
        },
        reset: function() {
            this.uploader.reset();
        },
        getInput: function(a) {
            return this._getButton(a).getInput();
        },
        setDropElement: function(a) {
            var b = this.uploader;
            return this.dropZone = new m.DragAndDrop({
                dropZoneElements: [ a ],
                callbacks: {
                    processingDroppedFiles: function() {},
                    processingDroppedFilesComplete: function(a) {
                        b.addFiles(a);
                    }
                }
            }), this;
        },
        choose: function(b) {
            a(this.getInput(b)).click();
        },
        getOptions: function() {
            return this.uploader._options;
        },
        getUploadsByStatus: function(a) {
            return this.uploader.getUploads({
                status: a
            });
        },
        cancelAll: function() {
            return this.uploader.cancelAll();
        },
        formatSize: function(a) {
            return this.uploader._formatSize(a);
        },
        hasSubmittedUploads: function() {
            return this.getUploadsByStatus(m.status.SUBMITTED).length;
        },
        _isBrowserSupported: function() {
            return !!window.FileReader;
        },
        getUploads: function() {
            return this.uploader.getUploads();
        },
        getUrl: function() {
            return this.uploader._endpointStore.get("url");
        },
        setParams: function(a) {
            return this.params = this.params || {}, e(this.params, a), this.uploader.setParams(this.params), 
            this;
        },
        setMethod: function(a) {
            return this.uploader._paramsStore.method = a, this;
        },
        setUrl: function(a) {
            return this.uploader.setEndpoint(a), this;
        },
        setMultiple: function(a, b) {
            return this._getButton(b).setMultiple(a), this;
        },
        uploadStoredFiles: function() {
            return this.uploader.uploadStoredFiles(), this.uploading.promise();
        },
        retry: function(a) {
            return this.uploader.retry(a), this.uploading.promise();
        },
        retryLast: function() {
            var a = this.getUploads(), b = a[a.length - 1];
            return this.retry(b.id);
        },
        _getButton: function(a) {
            return this.uploader._buttons[a || 0];
        },
        _onSubmit: function(b) {
            var c = new i(), e = this, f = this._getFile(b);
            return f.id = f.id || b, this.uploading = a.Deferred(), this.uploadDialog && (this.uploading.progress(this.uploadDialog.onProgress.bind(this.uploadDialog)), 
            this.uploadDialog.render()), c.load(f).then(function(a) {
                return f.image = a, e.trigger("submit", f), a;
            }).then(function(a) {
                if (!e.config.crop) return !0;
                if (e.uploadDialog) return e.uploadDialog.cropImage(a).then(function(c) {
                    e.cropImage(b, c).then(function(b) {
                        d(function() {
                            e.trigger("crop", {
                                img: a.img,
                                croppedImg: b,
                                cropCoords: c
                            });
                        });
                    }), e.config.submitAfterCrop || e.uploadDialog.hide();
                }, function(a) {
                    throw e._onError(b, f.name, a), new Error();
                });
            });
        },
        _getImageData: function(a) {
            return this.uploader.getFile(a).image;
        },
        cropImage: function(a, b) {
            return this.setParams({
                crop_x: b.x,
                crop_x2: b.x2,
                crop_y: b.y,
                crop_y2: b.y2
            }), k.getCroppedImage(this._getImageData(a).img, b);
        },
        _getFile: function(a) {
            return this.uploader.getFile(a);
        },
        _onProgress: function(a, b, c, d) {
            this.uploading.notify(c, d), this.trigger("progress", {
                id: a,
                name: b,
                loaded: c,
                total: d
            });
        },
        _onComplete: function(b, c, d) {
            if (d.success !== !1) {
                this.uploading.resolve(d);
                var e = a.extend({}, d, {
                    id: b,
                    image: this._getImageData(b)
                });
                this.trigger("complete", e), this.uploadDialog && this.uploadDialog.hide();
            }
        },
        _onCancel: function(a, b) {
            var c = {
                id: a,
                name: b
            };
            this.uploading.reject(c), this.trigger("cancel", c);
        },
        getErrorMessage: function(a, b) {
            return a ? a.responseJSON.messages ? j.singleError(a) : "" : b || "";
        },
        _fixXhr: function(a) {
            if (a && !a.responseJSON) try {
                a.responseJSON = JSON.parse(a.responseText);
            } catch (b) {
                a.responseJSON = {};
            }
            return a;
        },
        _onAllComplete: function() {
            this.trigger("allComplete");
        },
        _onError: function(a, b, c, d) {
            d = this._fixXhr(d), c = this.getErrorMessage(d, c), c && this.uploadDialog && this.uploadDialog.onError(c), 
            this.trigger("error", {
                id: a,
                name: b,
                message: c,
                xhr: d
            }), this.uploading && this.uploading.reject(d ? d.responseJSON : c);
        }
    });
});

define('require/css!styles/utils/fileuploader',[],function(){});
define('utils/FileUploaderMgr',[ "jquery", "be/Uploader", "be/handleResponse", "css!styles/utils/fileuploader" ], function(a, b, c) {
    "use strict";
    return {
        FILE_TYPES: {
            image: {
                exts: [ "jpg", "jpeg", "png", "gif" ],
                limit: "5MB"
            },
            video: {
                exts: [ "mov", "avi", "flv", "asf", "m4v", "mp4", "3gp", "3g2", "mj2", "wmv", "mpg" ],
                limit: "50MB"
            },
            audio: {
                exts: [ "mp3" ],
                limit: "20MB"
            },
            resume: {
                exts: [ "doc", "docx", "txt", "pdf", "rtf" ],
                limit: "10MB"
            },
            contacts: {
                exts: [ "csv" ],
                limit: "10MB"
            },
            favicon: {
                exts: [ "jpg", "gif", "png", "jpeg", "ico" ],
                limit: "3MB"
            }
        },
        ERRORS: {
            NO_RESPONSE: 600
        },
        uploaders: {},
        add: function(d, e) {
            e = e || {};
            var f = this, g = a("#" + d + "-button"), h = a("#" + d + "-button-container"), i = a("#" + d + "-content"), j = !1, k = {}, l = !1, m = 0, n = {}, o = "", p = {
                debug: !1,
                auto_center: !0,
                auto_error: !0,
                auto_error_remove: !0,
                auto_cancel: !0,
                auto_uploading_remove: !0,
                file_queue_limit: 0,
                onSubmit: function(b) {
                    ++m, l = g.find("input")[0];
                    var c = b.id, e = b.name, j = d + "-" + c, n = window.attachEvent ? 1 : l.files.length;
                    return f.uploaders[d].files[c] = {
                        index: c,
                        name: e,
                        id_prefix: d,
                        indexed_prefix: j,
                        size: !1
                    }, k.multiple === !0 && k.file_queue_limit > 0 && n > k.file_queue_limit ? (m === n && (r("FL", "You may only upload " + k.file_queue_limit + " file(s) at a time.", c), 
                    g.trigger("fileQueueError", [ f.uploaders[d].files[c], m, n ])), !1) : (i.removeClass("js-upload-content-error"), 
                    i.find(".uploader-error").remove(), k.auto_cancel && a("#" + j + "-cancel").bind("click", function() {
                        f.userCancel(c, d);
                    }), window.attachEvent && this.onProgress(c, e, 0, 1), k.auto_error_remove && a("#" + j + "-uploader-error").remove(), 
                    h.hide(), g.trigger("fileQueued", [ f.uploaders[d].files[c], d ]), q(f.uploaders[d].files[c], !1, !0), 
                    k.auto_center && f.verticalCenter(i), m === n && (m = 0, g.trigger("fileDialogComplete", [ n ])), 
                    void g.trigger("submitSuccess", b));
                },
                onProgress: function(b) {
                    var c = b.id, e = (b.name, b.loaded), j = b.total, l = f.getFile(d, c), m = e / j, o = Math.round(100 * m), p = a("#" + l.id_prefix + "-" + c + "-percent"), r = a("#" + l.id_prefix + "-" + c + "-bar"), s = a("#" + l.id_prefix + "-" + c + "-bar-bg"), t = a("#" + l.id_prefix + "-" + c + "-status"), u = r.width(), v = Math.round(u * m), w = g.data("percents");
                    return w[c] = o, g.data("percents", w), window.attachEvent && 0 === e ? (p.hide(), 
                    s.length && s.addClass("js-upload-progress-gif"), void (t.length && t.html("Upload in progress...").addClass("uploader_file_progress").removeClass("uploader_file_queued"))) : (q(l, j, n[l.indexed_prefix] !== !0), 
                    n[l.indexed_prefix] = !0, 1 === m ? (s.length && s.removeClass("ui-corner-left").addClass("ui-corner").stop().animate({
                        queue: !1,
                        width: v + "px",
                        duration: 1
                    }), p.length && p.html("100%"), t.length && g.trigger("uploadProcessing", [ l, e ]), 
                    p.removeClass("uploading"), k.auto_uploading_remove && a("#" + l.indexed_prefix + "-uploading").remove(), 
                    h.show(), k.auto_center && f.verticalCenter(i), void g.trigger("uploadProgress", [ l, e ])) : (p.length && (k.auto_error_remove && a("#" + l.indexed_prefix + "-uploader-error").remove(), 
                    p.html(o + "%")), s.length && (s.stop(), l.last_progress_width && (s[0].style.width = l.last_progress_width + "px"), 
                    s.animate({
                        queue: !1,
                        width: v + "px",
                        duration: 1
                    }), l.last_progress_width = v), t.length && t.html("Upload in progress...").addClass("uploader_file_progress").removeClass("uploader_file_queued"), 
                    void g.trigger("uploadProgress", [ l, e ])));
                },
                onComplete: function(b) {
                    if ("object" != typeof b) return r({
                        message: "Unknown server error"
                    });
                    var e = f.uploaders[d].uploader, h = e._getFile(b.id), i = a.extend({
                        file: h
                    }, b);
                    return i.valid && "no" !== i.valid ? void g.trigger("uploadSuccess", i) : r({
                        message: i.error_msg || c.singleError(i)
                    });
                },
                onCancel: function(b) {
                    var c = d + "-" + b, e = f.uploaders[d].files[b];
                    a("#" + c + "-uploading").remove(), a("#" + c + "-uploader-error").remove(), g.trigger("userCancel", [ b, d, e ]), 
                    h.show(), k.auto_center && f.verticalCenter(i);
                }
            }, q = function(b, c, d) {
                var e = !1, h = a("#" + b.indexed_prefix + "-file-info");
                if (h.length) {
                    if (d !== !0) return;
                    h.remove();
                }
                c && (b.size = c), e = a(f.getFileHtml(b)), g.data("$file_html", e), a("#" + b.indexed_prefix + "-cancel").before(e), 
                g.trigger("fileHtmlAdded", [ b ]), k.auto_center && f.verticalCenter(i);
            }, r = function(a) {
                var b = "Error", c = a.message, e = a.id;
                i.find(".uploader-error").remove(), c = c.replace(/&lt;/g, "<").replace(/&gt;/g, ">"), 
                g.trigger("generalError", [ b, c, f.getFile(d, e) ]), k.auto_center && f.verticalCenter(i, !0);
            };
            if (this.error = r, !g.length) throw "Unable to find upload button: #" + d + "-button";
            var s = {
                button: g[0],
                multiple: !0,
                maxConnections: 1,
                validation: {
                    allowedExtensions: this.FILE_TYPES.image.exts
                },
                request: {
                    endpoint: g.closest(".js-upload-form").attr("action")
                }
            };
            if (a.extend(!0, s, e), k = a.extend(!0, p, e), "undefined" == typeof s.validation.sizeLimit) for (o in f.FILE_TYPES) f.FILE_TYPES[o].exts === s.validation.allowedExtensions && (s.validation.sizeLimit = f.getByteSize(f.FILE_TYPES[o].limit));
            return o = s.validation.allowedExtensions.join("s, "), s.validation.allowedExtensions.length > 1 && (o = o.replace(/(.+),/, "$1, and")), 
            j = new b(s).on("complete", p.onComplete).on("error", r).on("submit", p.onSubmit).on("progress", p.onProgress).on("cancel", p.onCancel).on("unsupportedBrowser", function() {
                g.trigger("unsupportedBrowser");
            }), j.getOptions().messages.typeError = "{file} is an invalid file type. Only " + o + "s are allowed.", 
            l = g.find("input")[0], g.data("percents", {}), k.auto_center === !0 && this.verticalCenter(i), 
            i.show(), this.uploaders[d] = {
                $upload_button: g,
                uploader: j,
                files: {}
            }, g.bind("generalError", function(b, c, e, i) {
                if (k.auto_error) {
                    var j = a('<div id="' + i.indexed_prefix + '-uploader-error" class="' + i.id_prefix + '-uploader-error uploader-error messages"></div>'), l = "" !== c ? c + ": " + e : e, m = a("#" + d + "-content");
                    m.find("." + d + "-uploader-error").remove(), m.prepend(j), j.html(f.getErrorHtml(l)), 
                    k.auto_error_remove && a("#" + i.indexed_prefix + "-uploading").remove(), h.show(), 
                    g.trigger("generalErrorComplete", [ c, e, i ]);
                }
            }).bind("uploadProcessing", function(b, c) {
                var d;
                a.fn.spin && (d = a("<div>").spin()), a("#" + c.indexed_prefix + "-uploading-indicator").hide(), 
                a("#" + c.indexed_prefix + "-status").html("Upload processing...").before(d);
            }), g;
        },
        getUploader: function(a) {
            var b;
            try {
                if (b = this.uploaders[a].uploader, !b) throw "";
            } catch (c) {
                b = {
                    id_prefix: a,
                    indexed_prefix: "no-file-" + a
                };
            }
            return b;
        },
        getCustomData: function(a, b) {
            var c = this.getUploader(a);
            return c._options.custom_data[b];
        },
        setCustomData: function(a, b, c) {
            var d = this.getUploader(a);
            return d._options.custom_data[b] = c, d._options.custom_data[b];
        },
        getFile: function(a, b) {
            var c;
            try {
                if (c = this.uploaders[a].files[b], !c) throw "";
            } catch (d) {
                c = {
                    index: "no-file",
                    name: "none",
                    id_prefix: a,
                    indexed_prefix: "no-file-" + a,
                    size: !1
                };
            }
            return c;
        },
        getByteSize: function(a) {
            var b, c;
            if (b = parseInt(a, 10), c = /([MmKkGg])[bB]?/.exec(a)[1], !b) return 0;
            switch (c.toLowerCase()) {
              case "g":
                b *= 1024;

              case "m":
                b *= 1024;

              case "k":
                b *= 1024;
            }
            return b;
        },
        userCancel: function(a, b) {
            try {
                this.getUploader(b)._handler.cancel(a);
            } catch (c) {
                this.getUploader(b)._options.onCancel(a);
            }
        },
        getProgressHtml: function(a) {
            return '<div id="' + a + '-uploading" class="uploader_uploading_file ui-corner"><div id="' + a + '-uploading-position" class="uploader_uploading_position cfix"><div id="' + a + '-status" class="uploader_uploading_status uploader_file_queued">File is queued for upload.</div><div id="' + a + '-uploading-indicator" class="uploader_uploading_indicator cfix"><div id="' + a + '-bar" class="uploader_uploading_bar ui-corner"><div id="' + a + '-bar-bg" class="uploader_uploading_bg ui-corner"></div></div><div id="' + a + '-percent" class="uploader_uploading_percent uploading">0%</div></div><input type="button" value="Cancel" id="' + a + '-cancel" class="uploader_uploading_cancel form-button-dark dark-button-shadow form-button form-submit form-button-cancel" /></div></div>';
        },
        getFileHtml: function(b) {
            var c = a.formatNumberCommas || a.Core.formatNumberCommas, d = '<div id="' + b.id_prefix + "-" + b.index + '-file-info" class="uploader_file_info"><div class="uploader_file_info_line"><span class="small-text">Name:</span><span class="default-font"> ' + b.name + "</span></div>";
            return !window.attachEvent && b.size && (d += '<div class="uploader_file_info_line"><span class="small-text">Size:</span><span class="default-font"> ' + c(b.size) + " bytes</span></div>"), 
            d += "</div>";
        },
        getErrorHtml: function(a) {
            var b = !1, c = typeof a;
            return "undefined" === c && (a = {}, c = "object"), "string" !== c && (a = a.msg && "" !== a.msg ? a.msg : 'An unexpected error has occured, please try again. If the problem persists, please <a href="http://behancenetwork.zendesk.com/" target="_blank">contact support</a>', 
            b = a.head && "" !== a.head ? a.head : "Unexpected Error"), b = b || "Uploading Failed", 
            '<div class="uploader_error_head">' + b + '</div><div class="uploader_error ui-corner cfix error"><div class="icon icon-status-error sprite-site-elements"></div><div class="small-text">' + a + "</div></div>";
        },
        getProcessingHtml: function(a, b) {
            var c = a ? a.name : "Your " + b, d = c + " is now being processed... one moment please...";
            return '<div id="' + a.indexed_prefix + '-processing-wrap" class="processing_wrap"><div id="' + a.indexed_prefix + '-processing" class="uploader_file_processing">' + d + "</div></div>";
        },
        verticalCenter: function(a, b) {
            if (a.length) {
                a[0].style.paddingTop = 0;
                var c = a.closest(".js-upload-content"), d = 0, e = 0, f = 0, g = 0, h = 0, i = 0;
                return b ? c.addClass("js-upload-content-error") : c.removeClass("js-upload-content-error"), 
                d = a.parent().height(), e = a.height(), f = d / 2, g = e / 2, h = f - g, 0 > h && (h = 0), 
                i = Math.round(h) + "px", a[0].style.paddingTop = i, !0;
            }
        }
    };
});
define('be/View/Wip/Manage/Popup',[ "jquery", "nbd/Promise", "nbd/event", "be/buttons", "be/Modal", "be/xhr", "be/View/Wip/Manage", "be/disabledupload", "be/window", "be/Controller/Dialog/browserNotSupported", "lib/showMessages", "Core", "Core/Popup", "vendor/misc/history", "wip/popup", "utils/FileUploaderMgr", "jquery/plugins/jquery.fancybox" ], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
    "use strict";
    var q, r = a(document.body);
    return q = g.extend({
        server_url: "/v2/wips",
        $pop: null,
        init: function() {
            this._super.apply(this, arguments), o.init(), this.destroyPopup = this.destroyPopup.bind(this), 
            this.showViewPopup = this.showViewPopup.bind(this), this.bindDelete();
        },
        bindDelete: function() {
            var b = this;
            r.on("click", ".js-wip-delete", function() {
                var e, g = a(this), h = g.data("id"), i = g.data("revisionId"), j = !1, l = {
                    header: "Delete this Revision?",
                    description: "Are you sure you want to delete this revision? All feedback on this revision will also be deleted.",
                    innerClass: "delete-confirmation-popup",
                    confirm_btn: !0,
                    cancel_btn: !0,
                    close_btn: !1,
                    removeAll: !1,
                    blockingDiv: !0,
                    innerZIndex: 2101,
                    outerZIndex: 2100
                };
                return j = g.hasClass("js-wip-delete-all"), j === !0 && (l.header = "Delete this Work in Progress?", 
                l.description = "Are you sure you want to delete this entire Work in Progress? All revisions of this WIP, <br/>and any feedback, will also be deleted."), 
                b.$delete_pop = e = m(l), e.find(".form-button-confirm").on("click", function() {
                    var e = a(".delete-confirmation-popup #popup-btn-wrap"), g = {
                        wip_id: h,
                        revision_id: i
                    };
                    j && (g.delete_all = 1), d.hide(e, "Deleting..."), f({
                        url: "/portfolio/wips?" + a.param(g),
                        type: "DELETE"
                    }).then(function(f) {
                        return f.valid ? (f.wip ? b.user_wips[f.wip.id] = f.wip : (delete b.user_wips[h], 
                        b.user_wips_order.splice(a.inArray(h, b.user_wips_order), 1)), f.user_wips_count && (b.user_wips_count = f.user_wips_count), 
                        b.destroyPopup(), void (j ? c.trigger("wip.deleted", h) : f.wip ? (n.replaceState({
                            wip: {}
                        }, null, "/wip/" + h), c.trigger("wip.revision.deleted", f.wip, i)) : (o.singleton.reset(), 
                        c.trigger("wip.deleted", h, !0)))) : (d.show(e), void k(e, f.messages));
                    });
                }), e.find(".form-button-cancel").on("click", b.destroyDeletePopup), !1;
            });
        },
        render: function(b, c, d) {
            var e = this;
            return a.fancybox.showLoading(), a.ajax({
                type: "GET",
                url: "/portfolio/wips/load",
                data: {
                    wip_id: b
                },
                error: function() {
                    a.fancybox.hideLoading();
                }
            }).done(function(f) {
                return h(f, !0) ? void a.fancybox.hideLoading() : (a("#wip-templates-container").remove(), 
                r.append(f.html), f.tracking_consants && (e.TRACKING = f.tracking_consants), f.user_wips_count && (e.user_wips_count = f.user_wips_count), 
                f.URLS && (e.URLS = f.URLS), f.IMAGE && (e.IMAGE = f.IMAGE), f.current_wip && (b = parseFloat(b), 
                e.current_wip = f.current_wip, e.user_wips[b] = f.current_wip, e.user_wips_order.push(b), 
                c && e.current_wip.revisions && e.current_wip.revisions[c] && (e.current_revision = e.current_wip.revisions[c])), 
                f.user_wips_tags && (e.user_wips_tags = f.user_wips_tags), a.fancybox.hideLoading(), 
                void (e.current_revision && d ? e.initInfo(e.current_revision, {
                    width: e.current_revision.images.normal_resolution.width,
                    height: e.current_revision.images.normal_resolution.height,
                    image_path: e.current_revision.images.normal_resolution.url
                }) : e.showUploadPopup()));
            });
        },
        showUploadPopup: function() {
            this.$pop = m({
                innerClass: "wip-upload-popup",
                header: "Upload Work In Progress & Get Feedback!",
                innerZIndex: 2001,
                outerZIndex: 2e3,
                save_btn: !0,
                close_btn: !0
            }), this.$pop.find(".popup-content").html(a("#wip-upload-tmpl").html());
            var b = a(this.infoTemplate()).addClass("hide");
            this.$pop.find(".popup-content").append(b), this.$pop.popup("position"), this.user_wips_count ? this.$pop.addClass("standard-wip-container") : this.$pop.addClass("first-wip-creation").find(".sell-points-container").append(a("#wip-uploader-container")), 
            this.constructor._uploadManager.add("wip-image", {
                validation: {
                    sizeLimit: this.constructor._uploadManager.getByteSize("12MB"),
                    accept: "*.jpg;*.jpeg;*.png;*.gif",
                    image: {
                        minHeight: this.IMAGE.HEIGHT,
                        minWidth: this.IMAGE.WIDTH
                    }
                },
                multiple: !1,
                autoUpload: !1,
                crop: !1,
                request: {
                    inputName: "image",
                    params: {
                        entity: "wip_image"
                    }
                },
                form: {
                    element: this.$pop.find("form").get(0)
                }
            }).on("generalError", function() {
                a("#wip-image-button-container").show(), a(".wip-uploader-text").hide(), this.$pop.popup("position");
            }.bind(this)).on("unsupportedBrowser", function() {
                this.destroyPopup(), j();
            }.bind(this)).on("uploadProgress", function() {
                a("#wip-image-button-container").hide(), this.$pop.find(".wip-uploader-text").length && this.$pop.find(".wip-uploader-text").remove(), 
                this.$pop.find(".sell-point").length && (this.$pop.find(".sell-point, .sell-image-container, .popup-header").remove(), 
                this.$pop.removeClass("first-wip-sell")), this.$pop.popup("position");
            }.bind(this)).on("submitSuccess", function(a, b) {
                var c = {
                    image: b.name
                }, d = {
                    imageData: b.image.result,
                    name: b.name,
                    width: b.image.width,
                    height: b.image.height
                };
                this.$pop.find(".js-uploader-container").hide(), this.$pop.find(".js-sell-container").hide(), 
                this.initInfo(c, d);
            }.bind(this)), this.$pop.find(".popup-form-controls").hide(), this.$pop.find(".popup-close").on("click", this.destroyPopup), 
            this.$pop.popup("position");
        },
        updateFormValues: function() {
            this._super.apply(this, arguments), this.isCreating() || this.$pop.find(".popup-header").text("Edit Information"), 
            this.$pop.popup("position");
        },
        onCreation: function(b) {
            var c, d = this, e = this.$form;
            e.find("#popup-btn-wrap").slideUp(100), b.messages && (k(this.$pop.find("#popup-form"), b.messages), 
            this.$pop.popup("position")), 1 === b.valid && ("1" !== d.form_params.new_wip && d.user_wips_order.splice(a.inArray(b.wip.id, d.user_wips_order), 1), 
            d.user_wips_order.unshift(b.wip.id), c = b.revision.tags, a.each(c, function(b, c) {
                -1 === a.inArray(c, d.user_wips_tags) && d.user_wips_tags.unshift(c);
            }), setTimeout(function() {
                var a = d.isCreating() && "public" === b.wip.privacy ? !0 : !1;
                d.destroyPopup(), d.current_wip = b.wip, d.current_revision = b.revision, d.showViewPopup(a, !0);
            }, 2e3));
        },
        initInfo: function(b, c) {
            var d = this, e = this._super(b, c);
            return this.current_revision ? (this.$pop.find(".popup-form-controls").removeClass("right-buttons").append('<span data-revision-id="' + this.current_revision.id + '" data-id="' + this.current_wip.id + '" class="fake-link controls-delete-link right js-wip-delete">Delete This Revision</span>'), 
            this.$pop.find(".form-submit").text("Save")) : e.find(".popup-form-controls").addClass("right-buttons form-controls").find(".form-submit").text("Continue"), 
            e.find(".form-button-cancel").on("click", this.destroyPopup), this.$pop.addClass("wip-info-popup").find(".popup-header").text("Upload a Work In Progress").show(), 
            e.find(".popup-form-controls, .form-controls").show(), this.$pop.find(".js-wip-info-container").removeClass("hide"), 
            this.$pop.popup("position"), e.find(".js-wip-title").focus(), this.infoForm.commit = function(c) {
                d.infoFormPromise = null;
                var g = d.constructor._uploadManager.getUploader("wip-image");
                return c.data.tags = c.data.tags.replace(/,/g, "|"), d._convertParamsForApi(c), 
                d.isCreating() && a("#new_wip_0").is(":checked") && c.data.wip_id && (c.url = c.url + "/" + c.data.wip_id), 
                e.find("#tags").val(c.data.tags), d.isCreating() || !b.id ? (d.infoFormPromise = g.setUrl(c.url).setParams(c.data).retryLast(), 
                d.infoFormPromise) : (d.infoFormPromise = f(c).then(function() {
                    var a = {
                        description: c.data.description,
                        tags: c.data.tags
                    };
                    return f({
                        type: "PUT",
                        url: c.url + "/" + b.id,
                        data: a
                    });
                }), d.infoFormPromise);
            }, e;
        },
        _convertParamsForApi: function(a) {
            a.data.team_id = a.data.team || 0, a.data.privacy = 1 === +a.data.visibility ? "public" : "private", 
            delete a.data.team, delete a.data.visibility;
        },
        onInfoSuccess: function(a) {
            if (a.wip) this.user_wips[a.wip.id] = a.wip; else if (this.isCreating() && a.revision) i.setLocation(a.revision.url); else if (a.revision && i.getLocation("href") === this.current_wip.url || !a.revision && !a.wip) return void i.reloadLocation();
            this.showViewPopup(), this.destroyPopup();
        },
        getForm: function() {
            return this.$pop ? this.$pop.find("form") : null;
        },
        renderInfoForm: function(a, b) {
            return this.$pop = m({
                header: "Upload a Work In Progress",
                description: this.infoTemplate(a, b),
                outerDiv: !1,
                save_btn: !0,
                close_btn: !1,
                cancel_btn: !0,
                innerClass: "wip-info-popup",
                innerZIndex: 2001,
                outerZIndex: 2e3
            }), this.$pop.find("form");
        },
        destroyPopup: function() {
            this.current_revision = null, this.current_wip = null, this.$pop && (this.$pop.popup("destroy"), 
            this.$pop = null), this.destroyDeletePopup();
        },
        showViewPopup: function(a, b) {
            var c = this.current_wip.url, d = {};
            d.wip = {
                current_title: document.title,
                current_url: window.location.href,
                share: a
            }, a && (c += "?share=1");
            try {
                void 0 !== window._gaq && window._gaq.push([ "_trackPageview", c ]);
            } catch (e) {}
            b ? window.location.replace(c) : i.setLocation(c);
        }
    }, {
        _uploadManager: p
    });
});
define('wip/create',[ "jquery", "be/View/Wip/Manage/Popup" ], function(a, b) {
    "use strict";
    var c = new b();
    return a(window).on("statechange", c.destroyPopup), c;
});
define('profile/user/View/Wip',[ "jquery", "profile/View/Content", "hgn!templates/lib/_wipCover", "nbd/util/pipe", "wip/popup", "be/decorator/waitsforimages", "be/layout/mason", "wip/create", "nbd/event", "profile/lib/spinner" ], function(a, b, c, d, e, f, g, h, i, j) {
    "use strict";
    function k(a) {
        g.ready() || g.init(a, {
            toggleQuery: "all and (max-width: 499px)",
            isFitWidth: !0
        });
    }
    var l, m = !1;
    return l = e.init(), b.extend({
        rendered: function() {
            this.fatclick(), this.picturefill();
        },
        bind: function() {
            var b = location.href;
            this.$parent.on("click", ".js-wip-edit", function(b) {
                h.render(a(this).data("id"), a(this).data("revisionId"), !0), b.preventDefault();
            }).on("mousedown", ".js-wip-promote", function() {
                m = !0;
            }).on("click", ".js-wip-create", function() {
                h.render();
            }), i.on("wip.deleted", function() {
                location.href = b;
            }).on("wip.edited wip.created wip.revision.deleted", function() {
                location.href = b;
            }).on("wip.share.cancel wip.share.success", function(a) {
                return m ? void (m = !1) : void l.redirect("/wip/" + a.id, !1, !0);
            }), this.on("prerender init", function() {
                j.show();
            }).on("init postrender", function(a, b) {
                k(a), g.append(b).then(j.hide.bind(j));
            }.bind(this));
        },
        unbind: function() {
            this.off(), g.destroy(), this.$parent.off("click", ".js-wip-edit").off("click", ".js-wip-promote");
        },
        template: d(c, a)
    });
});

define("require/hgn!templates/lib/_covers/_actions", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");if(t.s(t.d("actions.0",c,p,1),c,p,0,14,112,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"project-actors\">");t.b("\n" + i);t.b("  <span class=\"project-actors-label show-phone\">Activity by:</span>");t.b("\n" + i);});c.pop();}if(t.s(t.f("actions",c,p,1),c,p,0,141,2983,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div data-type=\"");t.b(t.v(t.f("type",c,p,0)));t.b("\" class=\"user-item user-item-action ");t.b(t.v(t.f("type",c,p,0)));t.b(" relative cfix");if(t.s(t.f("comment",c,p,1),c,p,0,238,257,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" tooltipi-container");});c.pop();}t.b("\">");t.b("\n");t.b("\n" + i);if(t.s(t.f("user",c,p,1),c,p,0,286,432,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a target=\"_blank\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"user-image relative js-mini-profile\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);t.b("      <img src=\"");t.b(t.v(t.d("images.50",c,p,0)));t.b("\">");t.b("\n" + i);t.b("    </a>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(t.s(t.f("team",c,p,1),c,p,0,456,586,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a target=\"_blank\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"user-image relative\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);t.b("      <img src=\"");t.b(t.v(t.d("images.50",c,p,0)));t.b("\">");t.b("\n" + i);t.b("    </a>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(t.s(t.f("site",c,p,1),c,p,0,610,751,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a target=\"_blank\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"user-image relative js-mini-profile\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);t.b("      <img src=\"");t.b(t.v(t.f("icon",c,p,0)));t.b("\">");t.b("\n" + i);t.b("    </a>");t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("    <div class=\"user-info\">");t.b("\n");t.b("\n" + i);if(t.s(t.f("published",c,p,1),c,p,0,939,1160,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span class=\"action-label new-tag\">new</span>");t.b("\n" + i);t.b("        <a href=\"");t.b(t.v(t.d("user.url",c,p,0)));t.b("\" class=\"user-name\">");t.b(t.v(t.d("user.display_name",c,p,0)));t.b("</a>");t.b("\n" + i);t.b("        <a class=\"user-name-hover see-all-work\" href=\"");t.b(t.v(t.d("user.url",c,p,0)));t.b("\">See All Work</a>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(t.s(t.f("edited",c,p,1),c,p,0,1193,1432,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span class=\"action-label beicons-pre beicons-pre-edit\"></span>");t.b("\n" + i);t.b("        <a href=\"");t.b(t.v(t.d("user.url",c,p,0)));t.b("\" class=\"user-name\">");t.b(t.v(t.d("user.display_name",c,p,0)));t.b("</a>");t.b("\n" + i);t.b("        <a class=\"user-name-hover see-all-work\" href=\"");t.b(t.v(t.d("user.url",c,p,0)));t.b("\">See All Work</a>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(t.s(t.f("appreciated",c,p,1),c,p,0,1467,1756,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span class=\"action-label beicons-pre beicons-pre-thumb\"></span>");t.b("\n" + i);t.b("        <div class=\"user-name\">");t.b(t.v(t.d("user.display_name",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("        <a data-id=\"");t.b(t.v(t.d("user.id",c,p,0)));t.b("\" href=\"");t.b(t.v(t.d("user.url",c,p,0)));t.b(t.v(t.d("constants.APPRECIATED",c,p,0)));t.b("\" class=\"user-name-hover see-all-appreciations\">See All Appreciations</a>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(t.s(t.f("featured",c,p,1),c,p,0,1793,2031,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span class=\"action-label beicons-pre beicons-pre-badge\"></span>");t.b("\n" + i);t.b("        <div class=\"user-name\">");t.b(t.v(t.d("site.name",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("        <a data-id=\"");t.b(t.v(t.d("site.id",c,p,0)));t.b("\" href=\"");t.b(t.v(t.d("site.url",c,p,0)));t.b("\" class=\"site-name-hover view-gallery\">View Gallery</a>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(t.s(t.f("team",c,p,1),c,p,0,2061,2298,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span class=\"action-label new-tag\">new</span>");t.b("\n" + i);t.b("        <div class=\"user-name\">");t.b(t.v(t.d("team.display_name",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("        <a data-id=\"");t.b(t.v(t.d("team.id",c,p,0)));t.b("\" href=\"");t.b(t.v(t.d("team.url",c,p,0)));t.b("\" class=\"site-name-hover view-gallery\">See All Work From Team</a>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(t.s(t.f("collection",c,p,1),c,p,0,2330,2591,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span class=\"action-label beicons-pre beicons-pre-collection\"></span>");t.b("\n" + i);t.b("        <div class=\"user-name unselectable\">");t.b(t.v(t.d("user.display_name",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("        <a class=\"user-name-hover see-collection\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">");t.b("\n" + i);t.b("          See Collection");t.b("\n" + i);t.b("        </a>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(t.s(t.f("comment",c,p,1),c,p,0,2626,2948,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <span class=\"action-label beicons-pre beicons-pre-comment\"></span>");t.b("\n" + i);t.b("        <div class=\"user-name unselectable\">");t.b(t.v(t.d("user.display_name",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("        <div class=\"user-name-hover unselectable tooltipi-container\">");t.b(t.v(t.d("user.display_name",c,p,0)));t.b("\n" + i);t.b("          <div class=\"tooltipi see-comment\">");t.b(t.v(t.f("comment",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("        </div>");t.b("\n" + i);});c.pop();}t.b("    </div>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);});c.pop();}if(t.s(t.d("actions.0",c,p,1),c,p,0,3010,3018,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("</div>");t.b("\n" + i);});c.pop();}return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/lib/_projectCoverMinimal", ["hogan", "require/hgn!templates/lib/_covers/_actions"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"js-item cover-block stream-item project-cover-minimal cfix\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);if(t.s(t.f("new",c,p,1),c,p,0,100,146,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <span class=\"project-new-ribbon\"></span>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(t.s(t.f("project",c,p,1),c,p,0,170,2099,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"cover-img\">");t.b("\n" + i);t.b("    <a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"cover-img-link\">");t.b("\n" + i);t.b("      <div data-picture=\"\" data-alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\">");t.b("\n" + i);if(t.s(t.d("covers.404",c,p,1),c,p,0,314,664,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-src=\"");t.b(t.v(t.d("covers.404",c,p,0)));t.b("\" data-class=\"cover-img-el cover-img-2x\" data-title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-media=\"(-webkit-min-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("          (min--moz-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("          (-o-min-device-pixel-ratio: 4/3),");t.b("\n" + i);t.b("          (min-device-pixel-ratio: 1.3),");t.b("\n" + i);t.b("          (min-resolution: 1.3dppx)\"></div>");t.b("\n" + i);});c.pop();}if(!t.s(t.d("covers.404",c,p,1),c,p,1,0,0,"")){t.b("          <div alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" data-src=\"");t.b(t.v(t.d("covers.202",c,p,0)));t.b("\" data-class=\"cover-img-el cover-img-standard\" data-title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\"></div>");t.b("\n" + i);};t.b("      </div>");t.b("\n" + i);t.b("      <noscript><img alt=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" src=\"");t.b(t.v(t.d("covers.202",c,p,0)));t.b("\" class=\"cover-img-el cover-img-standard\"></noscript>");t.b("\n" + i);t.b("    </a>");t.b("\n" + i);t.b("  </div>");t.b("\n");t.b("\n" + i);t.b("  <div class=\"cover-info-stats\">");t.b("\n" + i);t.b("    <div class=\"cover-info\">");t.b("\n" + i);t.b("      <div class=\"cover-name\">");t.b("\n" + i);t.b("        <a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"projectName cover-name-link\">");t.b(t.v(t.f("name",c,p,0)));t.b("</a>");t.b("\n" + i);t.b("      </div>");t.b("\n");t.b("\n" + i);t.b("      <div class=\"cover-by-wrap");if(t.s(t.d("owners.1",c,p,1),c,p,0,1242,1260,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" multiple-cover-by");});c.pop();}t.b("\">");t.b("\n" + i);t.b("        <div class=\"cover-by\">by</div>");t.b("\n" + i);t.b("          ");if(t.s(t.d("owners.1",c,p,1),c,p,0,1338,1859,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"multiple-owners-list tooltipi-container\">Multiple Owners<ul class=\"tooltipi tooltipi-white-links\">");t.b("\n" + i);if(t.s(t.f("owners",c,p,1),c,p,0,1472,1826,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("            <li class=\"clear\">");t.b("\n" + i);t.b("              <a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"multiple-owner-link js-mini-profile\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);t.b("                <span class=\"multiple-owner-image-container\">");t.b("\n" + i);t.b("                    <img class=\"multiple-owner-image\" src=\"");t.b(t.v(t.d("images.50",c,p,0)));t.b("\" />");t.b("\n" + i);t.b("                </span>");t.b(t.v(t.f("display_name",c,p,0)));t.b("\n" + i);t.b("              </a>");t.b("\n" + i);t.b("            </li>");t.b("\n" + i);});c.pop();}t.b("          </ul></div>");});c.pop();}t.b("\n");t.b("\n" + i);if(!t.s(t.d("owners.1",c,p,1),c,p,1,0,0,"")){t.b("          <a href=\"");t.b(t.v(t.d("owners.0.url",c,p,0)));t.b("\" class=\"cover-link project-owner js-mini-profile\" data-id=\"");t.b(t.v(t.d("owners.0.id",c,p,0)));t.b("\">");t.b(t.v(t.d("owners.0.display_name",c,p,0)));t.b("</a>");t.b("\n" + i);};t.b("      </div>");t.b("\n" + i);t.b("    </div>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b(t.rp("<lib/_covers/_actions0",c,p,"  "));t.b("\n" + i);if(t.s(t.f("project",c,p,1),c,p,0,2158,3192,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <div class=\"project-appreciations cover-owner-footer-wrap cfix\">");t.b("\n" + i);t.b("    <div class=\"cover-stat-wrap project-appreciations-count cover-stat-appreciations beicons-pre beicons-pre-thumb\">");t.b(t.v(t.d("stats.appreciations",c,p,0)));t.b("</div>");t.b("\n");t.b("\n" + i);t.b("    <div class=\"project-owner-footer hide-phone\">");t.b("\n");t.b("\n" + i);t.b("      <span class=\"project-by-label\">By:</span>");t.b("\n" + i);t.b("      ");if(t.s(t.d("owners.1",c,p,1),c,p,0,2491,2972,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<div class=\"multiple-owners-list tooltipi-container\">Multiple Owners<ul class=\"tooltipi tooltipi-white-links\">");t.b("\n" + i);if(t.s(t.f("owners",c,p,1),c,p,0,2621,2943,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <li class=\"clear\">");t.b("\n" + i);t.b("          <a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" class=\"multiple-owner-link js-mini-profile\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);t.b("            <span class=\"multiple-owner-image-container\">");t.b("\n" + i);t.b("                <img class=\"multiple-owner-image\" src=\"");t.b(t.v(t.d("images.50",c,p,0)));t.b("\" />");t.b("\n" + i);t.b("            </span>");t.b(t.v(t.f("display_name",c,p,0)));t.b("\n" + i);t.b("          </a>");t.b("\n" + i);t.b("        </li>");t.b("\n" + i);});c.pop();}t.b("      </ul></div>");});c.pop();}t.b("\n");t.b("\n" + i);if(!t.s(t.d("owners.1",c,p,1),c,p,1,0,0,"")){t.b("        <a href=\"");t.b(t.v(t.d("owners.0.url",c,p,0)));t.b("\" class=\"project-owner single-owner js-mini-profile\" data-id=\"");t.b(t.v(t.d("owners.0.id",c,p,0)));t.b("\">");t.b(t.v(t.d("owners.0.display_name",c,p,0)));t.b("</a>");t.b("\n" + i);};t.b("    </div>");t.b("\n");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<lib/_covers/_actions0":{name:"lib/_covers/_actions", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "lib/_covers/_actions": arguments[1].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('profile/View/Appreciated',[ "jquery", "profile/View/Content", "hgn!templates/lib/_projectCoverMinimal", "nbd/util/pipe", "project/popup" ], function(a, b, c, d, e) {
    "use strict";
    return e.init(), b.extend({
        rendered: function() {
            this.fatclick(), this.picturefill();
        },
        template: d(c, a)
    });
});
define('be/trait/dialogForm',[ "nbd/util/extend", "be/form", "be/buttons", "lib/xhr", "hgn!templates/html" ], function(a, b, c, d, e) {
    "use strict";
    return {
        mustache: e,
        templateData: function() {
            return a({
                buttons: [ {
                    label: "Okay",
                    classes: [ "form-button-default", "form-submit" ]
                }, {
                    label: "Cancel",
                    classes: [ "form-button-cancel", "js-cancel" ]
                } ]
            }, this._model.data());
        },
        rendered: function() {
            var a = ".popup-buttons, .js-popup-buttons", c = this.$view.find("form"), d = this.$view.filter(".popup"), e = c.length && c.find(a).length ? c : d;
            this._super(), this.$view.on("click", ".js-cancel", this.destroy.bind(this)), this.form = b.extend({
                hideButtonText: this._controller.waitingText
            }).init(e), this.$buttons = this.$view.find(a), this.form.commit = this.commit.bind(this);
        },
        commit: function(a) {
            return d(a).then(this.destroy.bind(this), function(a) {
                throw a;
            }.bind(this));
        }
    };
});
define('be/Controller/Dialog/Form',[ "be/Controller/Dialog/Roulette", "be/View/Dialog/Layover", "be/View/Dialog/Popup", "be/trait/dialogForm" ], function(a, b, c, d) {
    "use strict";
    var e = c.extend(d);
    return a.extend({}, {
        VIEW_CLASS: {
            phone: b.extend(d),
            tablet: e,
            desktop: e
        }
    });
});

define("require/hgn!templates/form/hidden", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<input type=hidden data-validate=\"");t.b(t.v(t.f("validate",c,p,0)));t.b("\" class=\"form-hidden");if(t.s(t.f("classes",c,p,1),c,p,0,78,84,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" ");t.b(t.v(t.d(".",c,p,0)));});c.pop();}t.b("\" id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" name=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" value=\"");t.b(t.v(t.f("value",c,p,0)));t.b("\">");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/collections/coowners", ["hogan", "require/hgn!templates/form/hidden"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form action=\"");t.b(t.v(t.f("action",c,p,0)));t.b("\">");t.b("\n" + i);t.b("  <div class=\"coowners-wrap js-coowners-wrap cfix\">");t.b("\n" + i);t.b("    <div class=\"coowners-inputs\">");t.b("\n" + i);t.b("    <label for=\"owner-name\">Who co-owns this collection?</label>");t.b("\n" + i);t.b("    <input type=\"text\" id=\"owner-name\" class=\"js-coowners coowners-input form-text form-text-normal\" />");t.b("\n");t.b("\n" + i);t.b("    <div class=\"coowner-note\">NOTE: Co-owners have full editing privileges for collections.</div>");t.b("\n");t.b("\n" + i);t.b("    </div>");t.b("\n");t.b("\n" + i);t.b("    <ul class=\"js-coowners-list coowners-list listselector_selections\"></ul>");t.b("\n" + i);t.b("  </div>");t.b("\n");t.b("\n" + i);if(t.s(t.f("id",c,p,1),c,p,0,490,514,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<form/hidden0",c,p,"  "));});c.pop();}t.b("\n" + i);if(t.s(t.f("owners",c,p,1),c,p,0,536,560,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<form/hidden1",c,p,"  "));});c.pop();}t.b("</form>");t.b("\n");return t.fl(); },partials: {"<form/hidden0":{name:"form/hidden", partials: {}, subs: {  }},"<form/hidden1":{name:"form/hidden", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "form/hidden": arguments[1].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/collections/coownersSelection", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"cfix cowner-list-item\">");t.b("\n" + i);t.b("  <div class=\"listselector-selection ui-textboxlist-bit ui-textboxlist-bit-done cfix\">");t.b("\n" + i);t.b("    <img class=\"image\" src=\"");t.b(t.v(t.f("image",c,p,0)));t.b("\">");t.b("\n");t.b("\n" + i);t.b("    <div class=\"ui-textboxlist-selection-display\">");t.b(t.v(t.f("label",c,p,0)));t.b("</div>");t.b("\n" + i);if(t.s(t.f("remove",c,p,1),c,p,0,244,358,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <a alt=\"Remove\" title=\"Remove\" class=\"js-delete closeX close-btn ui-textboxlist-deletebutton\">Remove</a>");t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("  </div>");t.b("\n");t.b("\n" + i);if(t.s(t.f("confirmed",c,p,1),c,p,0,397,524,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <span class=\"ownership-status confirmed\"><span class=\"beicons\">e</span> <span class=\"hide-phone\">Confirmed!</span></span>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(t.s(t.f("awaiting",c,p,1),c,p,0,555,610,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("  <span class=\"ownership-status\">Awaiting...</span>");t.b("\n" + i);});c.pop();}t.b("</li>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/collections/coownersOption", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<li class=\"ui-menu-item coowners-menu-item listselector-option listselector-option-user cfix\">");t.b("\n" + i);t.b("  <a class=\"autocomplete-link\"><!-- this tag required for ui.menu -->");t.b("\n" + i);t.b("    <img class=\"image\" alt=\"");t.b(t.v(t.f("label",c,p,0)));t.b("\" src=\"");t.b(t.v(t.f("image",c,p,0)));t.b("\">");t.b("\n" + i);t.b("    <div title=\"");t.b(t.v(t.f("username",c,p,0)));t.b("\" class=\"name listselector-option-display\">");t.b(t.v(t.f("label",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("    <div class=\"small-text\">");t.b(t.v(t.f("username",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("  </a>");t.b("\n" + i);t.b("</li>");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('profile/lib/coowners',[ "page_constants", "jquery", "lib/xhr", "be/Controller/Dialog/Form", "profile/lib/coordinator", "hgn!templates/collections/coowners", "hgn!templates/collections/coownersSelection", "hgn!templates/collections/coownersOption", "jquery/be/autoselect" ], function(a, b, c, d, e, f, g, h) {
    function i() {
        n.empty(), s.forEach(function(a) {
            var c = b(g(a));
            c.find(".js-delete").on("click", function() {
                s = s.filter(function(b) {
                    return a !== b;
                }), t.splice(t.indexOf(a.value), 1), i();
            }), n.append(c);
        }), o.val(t.join("|"));
    }
    function j(b) {
        l = new d({
            title: "Invite Co-Owners",
            classes: [ "collection-coowner" ],
            html: f({
                action: a.COLLECTIONS.OWNER_URL,
                id: {
                    id: "id",
                    value: b
                },
                owners: {
                    id: "owners",
                    value: t.join("|")
                },
                note: {
                    id: "note",
                    label: "Add a Note",
                    validate: "optional,Generic"
                }
            }),
            buttons: [ {
                label: "Save",
                classes: [ "form-button", "form-button-default", "form-submit" ]
            } ]
        }), l.render(), m = l._view.$view, n = m.find(".js-coowners-list"), r = m.find(".js-coowners"), 
        o = m.find("#owners"), p = m.find("#note"), q = l._view.$view.find("form"), r.autoselect({
            itemTemplate: h,
            source: function(a, b) {
                var d = a.term;
                c({
                    url: "/users/ngram?search=" + encodeURIComponent(d),
                    type: "GET"
                }).then(function(a) {
                    var c = a.users.filter(function(a) {
                        return -1 === t.indexOf(a.id);
                    }).map(function(a) {
                        return {
                            label: a.n,
                            value: a.id,
                            image: a.i,
                            username: a.u,
                            remove: !0
                        };
                    });
                    b(c);
                }, b.bind(b, []));
            }
        }).on("autoselectselect", function(a, b) {
            var c = b.item;
            s.push(c), t.push(c.value), i();
        }), k = r.autoselect({
            widget: !0,
            appendTo: ".js-coowners-wrap"
        }), i();
    }
    var k, l, m, n, o, p, q, r, s = [], t = [];
    return function(b) {
        return c({
            type: "GET",
            url: a.COLLECTIONS.OWNER_DATA_URL,
            data: {
                id: b
            }
        }).then(function(a) {
            a.owners && a.ids || e.trigger("error", "Failed to get owner information"), s = a.owners, 
            t = a.ids, j(b);
        }, function() {
            e.trigger("error", "Failed to get owner information");
        });
    };
});

define("require/hgn!templates/collections/rename", ["hogan", "require/hgn!templates/form/hidden", "require/hgn!templates/form/text"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<form action=\"");t.b(t.v(t.f("action",c,p,0)));t.b("\" class=\"js-rename-form\">");t.b("\n" + i);if(t.s(t.f("id",c,p,1),c,p,0,57,77,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<form/hidden0",c,p,""));});c.pop();}if(t.s(t.f("title",c,p,1),c,p,0,95,113,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<form/text1",c,p,""));});c.pop();}t.b("</form>");return t.fl(); },partials: {"<form/hidden0":{name:"form/hidden", partials: {}, subs: {  }},"<form/text1":{name:"form/text", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "form/hidden": arguments[1].template,"form/text": arguments[2].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('profile/lib/CollectionLib',[ "page_constants", "jquery", "nbd/trait/promise", "lib/xhr", "be/modal/validate", "be/Controller/Dialog/Form", "profile/lib/coordinator", "profile/lib/decorateModal", "profile/lib/coowners", "hgn!templates/collections/rename" ], function(a, b, c, d, e, f, g, h, i, j) {
    "use strict";
    return {
        rename: function(b, d) {
            var e, i, k = new c(), l = {
                title: "Rename Collection",
                html: j({
                    title: {
                        value: d || "",
                        id: "title",
                        classes: [ "form-text-xlarge", "rename-input" ],
                        validate: "Generic"
                    },
                    id: {
                        id: "id",
                        value: b
                    },
                    action: a.COLLECTIONS.RENAME_URL
                }),
                buttons: [ {
                    label: "Rename",
                    classes: [ "form-submit", "form-button-default" ]
                }, {
                    label: "Cancel",
                    classes: [ "form-button-cancel", "js-cancel" ]
                } ]
            };
            return b || g.trigger("error", "Unable to rename. Please refresh and try again"), 
            i = new f(h(l)), i.render(), i._view.form.commit = function(a) {
                return i._view.commit(a).then(function() {
                    k.resolve(e.val());
                }, k.reject);
            }, e = i._view.$view.find("#title"), k;
        },
        addOwners: function(a) {
            return i(a);
        },
        togglePrivacy: function(b) {
            return d({
                url: a.COLLECTIONS.PRIVACY_URL,
                data: {
                    id: b
                },
                type: "POST"
            }).then(function(a) {
                if (!a || !a.collection) throw new Error();
                return a;
            });
        },
        "delete": function(b) {
            var c = {
                title: "Delete Collection",
                html: '<span class="delete-copy">Are you sure you want to delete this collection?</span>',
                buttons: [ {
                    label: "Delete",
                    classes: [ "form-button-default", "js-confirm" ]
                }, {
                    label: "Cancel",
                    classes: [ "form-button-cancel", "js-cancel" ]
                } ]
            };
            return e(h(c), {
                waitingText: "Deleting...",
                promiseGenerator: function() {
                    return d({
                        url: a.COLLECTIONS.DELETE_URL,
                        data: {
                            id: b
                        },
                        type: "POST"
                    });
                }
            });
        },
        leave: function(b) {
            var c = {
                title: "Remove From My Collections",
                html: '<span class="delete-copy">Are you sure you want to remove yourself from this collection?</span>',
                buttons: [ {
                    label: "Remove",
                    classes: [ "form-button-default", "js-confirm" ]
                }, {
                    label: "Cancel",
                    classes: [ "form-button-cancel", "js-cancel" ]
                } ]
            };
            return e(h(c), {
                waitingText: "Removing...",
                promiseGenerator: function() {
                    return d({
                        url: a.COLLECTIONS.LEAVE_URL,
                        data: {
                            id: b
                        },
                        type: "POST"
                    });
                }
            });
        }
    };
});

define("require/hgn!templates/profile/user/_overlays/_collectionOverlay", ["hogan", "require/hgn!templates/lib/_editButton"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"controls-overlay hide-phone hide-tablet\">");t.b("\n" + i);t.b("  <div class=\"controls-overlay-action controls-overlay-menu tooltipi-container\">");t.b("\n" + i);t.b(t.rp("<lib/_editButton0",c,p,"    "));t.b("    <ul class=\"tooltipi tooltipi-white controls-overlay-menu-items\">");t.b("\n" + i);t.b("      <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("        <a href=\"#\" data-id=");t.b(t.v(t.f("id",c,p,0)));t.b(" class=\"js-collection-rename beicons-pre beicons-pre-rename\">");t.b("\n" + i);t.b("          Rename");t.b("\n" + i);t.b("        </a>");t.b("\n" + i);t.b("      </li>");t.b("\n" + i);t.b("      <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("        <a href=\"#\" data-id=");t.b(t.v(t.f("id",c,p,0)));t.b(" class=\"js-collection-privacy beicons-pre beicons-pre-privacy\">");t.b("\n" + i);if(t.s(t.f("public",c,p,1),c,p,0,580,614,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          Make Private");t.b("\n" + i);});c.pop();}if(!t.s(t.f("public",c,p,1),c,p,1,0,0,"")){t.b("          Make Public");t.b("\n" + i);};t.b("        </a>");t.b("\n" + i);t.b("      </li>");t.b("\n" + i);t.b("      <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("        <a href=\"#\" data-id=");t.b(t.v(t.f("id",c,p,0)));t.b(" class=\"js-collection-owners beicons-pre beicons-pre-owner\">");t.b("\n" + i);t.b("          Add Owner");t.b("\n" + i);t.b("        </a>");t.b("\n" + i);t.b("      </li>");t.b("\n" + i);t.b("      <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("        <a href=\"#\" data-id=");t.b(t.v(t.f("id",c,p,0)));t.b(" class=\"js-collection-delete beicons-pre beicons-pre-delete\">");t.b("\n" + i);t.b("          Delete");t.b("\n" + i);t.b("        </a>");t.b("\n" + i);t.b("      </li>");t.b("\n" + i);t.b("    </ul>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<lib/_editButton0":{name:"lib/_editButton", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "lib/_editButton": arguments[1].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/lib/_covers/_galleryProjects", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<");if(t.s(t.f("unlink",c,p,1),c,p,0,12,15,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("div");});c.pop();}if(!t.s(t.f("unlink",c,p,1),c,p,1,0,0,"")){t.b("a target=\"_blank\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\"");};t.b(" class=\"gallery-projects-wrap left cfix user-view-link\">");t.b("\n" + i);t.b("  <div class=\"project-cover-container\">");t.b("\n" + i);if(t.s(t.f("project_covers",c,p,1),c,p,0,200,473,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <div class=\"project-cover-wrap");if(!t.s(t.d(".",c,p,1),c,p,1,0,0,"")){t.b(" empty");};t.b("\">");t.b("\n" + i);t.b("        <img class=\"project-cover");if(!t.s(t.d(".",c,p,1),c,p,1,0,0,"")){t.b(" empty");};t.b("\" src=\"");if(t.s(t.d(".",c,p,1),c,p,0,404,411,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.v(t.f("url",c,p,0)));});c.pop();}if(!t.s(t.d(".",c,p,1),c,p,1,0,0,"")){t.b(t.v(t.d("project_covers.0.url",c,p,0)));};t.b("\">");t.b("\n" + i);t.b("      </div>");t.b("\n" + i);});c.pop();}if(!t.s(t.f("project_covers",c,p,1),c,p,1,0,0,"")){t.b("      <div class=\"project-cover-wrap empty\"></div>");t.b("\n" + i);t.b("      <div class=\"project-cover-wrap empty\"></div>");t.b("\n" + i);t.b("      <div class=\"project-cover-wrap empty\"></div>");t.b("\n" + i);};t.b("  </div>");t.b("\n" + i);if(!t.s(t.f("unlink",c,p,1),c,p,1,0,0,"")){t.b("  <div class=\"gallery-cover-overlay\">");t.b("\n" + i);t.b("    <div class=\"gallery-cover-overlay-text\">");t.b(t.v(t.f("gallery_text",c,p,0)));if(!t.s(t.f("gallery_text",c,p,1),c,p,1,0,0,"")){t.b("View Profile");};t.b("&nbsp;<span class=\"rarr\">&rarr;</span></div>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);};t.b("</");if(t.s(t.f("unlink",c,p,1),c,p,0,942,945,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("div");});c.pop();}if(!t.s(t.f("unlink",c,p,1),c,p,1,0,0,"")){t.b("a");};t.b(">");t.b("\n");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/lib/_covers/_lock", ["hogan"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<span class=\"beicons-pre beicons-pre-lock-small private js-lock\"></span>");return t.fl(); },partials: {}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = {  "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/lib/_collectionCover", ["hogan", "require/hgn!templates/profile/user/_overlays/_collectionOverlay", "require/hgn!templates/lib/_covers/_galleryProjects", "require/hgn!templates/lib/_covers/_lock", "require/hgn!templates/lib/_follow/_button"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div id=\"collection_");t.b(t.v(t.f("id",c,p,0)));t.b("\" data-id=");t.b(t.v(t.f("id",c,p,0)));t.b(" class=\"js-item js-collection-cover cover-block bordered-item list-item collection-block gallery-item-block editable cfix\" collection_id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n");t.b("\n" + i);if(t.s(t.f("is_editable",c,p,1),c,p,0,208,264,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<profile/user/_overlays/_collectionOverlay0",c,p,"    "));});c.pop();}t.b("\n" + i);t.b(t.rp("<lib/_covers/_galleryProjects1",c,p,"  "));t.b("\n" + i);t.b("  <div class=\"gallery-info-wrap left\">");t.b("\n" + i);t.b("    ");if(!t.s(t.f("public",c,p,1),c,p,1,0,0,"")){t.b(t.rp("<lib/_covers/_lock2",c,p,""));};t.b("<a class=\"gallery-name js-collection-title\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">");t.b(t.v(t.f("title",c,p,0)));t.b("</a>");t.b("\n" + i);t.b("    <div class=\"gallery-owner-wrap relative\">");t.b("\n" + i);if(t.s(t.f("multiple_owners",c,p,1),c,p,0,552,1021,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <div class=\"multiple-owners-list tooltipi-container\">");t.b("\n" + i);t.b("          <span class=\"owner-name\">Multiple Owners</span>");t.b("\n" + i);t.b("          <ul class=\"tooltipi tooltipi-white-links\">");t.b("\n" + i);if(t.s(t.f("owners",c,p,1),c,p,0,749,972,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("              <li class=\"clear\"><a class=\"multiple-owner-link\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\"><span class=\"multiple-owner-image-container\"><img class=\"multiple-owner-image\" src=\"");t.b(t.v(t.d("images.50",c,p,0)));t.b("\"></span>");t.b(t.v(t.f("display_name",c,p,0)));t.b("</a></li>");t.b("\n" + i);});c.pop();}t.b("          </ul>");t.b("\n" + i);t.b("        </div>");t.b("\n" + i);});c.pop();}if(!t.s(t.f("multiple_owners",c,p,1),c,p,1,0,0,"")){if(t.s(t.f("owners",c,p,1),c,p,0,1088,1209,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("          <span class=\"gallery-owned-by\">by </span><a class=\"gallery-owner\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\">");t.b(t.v(t.f("display_name",c,p,0)));t.b("</a>");t.b("\n" + i);});c.pop();}};t.b("    </div> <!-- .gallery-owner-wrap -->");t.b("\n" + i);if(t.s(t.f("stats",c,p,1),c,p,0,1302,1715,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"gallery-stats hide-phone cfix\">");t.b("\n" + i);t.b("      <div class=\"left gallery-stats-items-count\">");t.b("\n" + i);t.b("        <span class=\"beicons-pre beicons-pre-collection\">");t.b("\n" + i);t.b("          ");t.b(t.v(t.f("items",c,p,0)));t.b("\n" + i);t.b("        </span>");t.b("\n" + i);t.b("      </div>");t.b("\n" + i);t.b("      <div class=\"left gallery-stats-followers-count gallery-stat-divided\">");t.b("\n" + i);t.b("        <span class=\"left beicons-pre beicons-pre-followers\">");t.b("\n" + i);t.b("          ");t.b(t.v(t.f("followers",c,p,0)));t.b("\n" + i);t.b("        </span>");t.b("\n" + i);t.b("      </div>");t.b("\n" + i);t.b("    </div>");t.b("\n" + i);});c.pop();}if(!t.s(t.f("is_owner",c,p,1),c,p,1,0,0,"")){t.b(t.rp("<lib/_follow/_button3",c,p,""));};t.b("\n" + i);t.b("  </div> <!-- /.gallery-info-wrap -->");t.b("\n");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<profile/user/_overlays/_collectionOverlay0":{name:"profile/user/_overlays/_collectionOverlay", partials: {}, subs: {  }},"<lib/_covers/_galleryProjects1":{name:"lib/_covers/_galleryProjects", partials: {}, subs: {  }},"<lib/_covers/_lock2":{name:"lib/_covers/_lock", partials: {}, subs: {  }},"<lib/_follow/_button3":{name:"lib/_follow/_button", partials: {}, subs: { "type": function(c,p,t,i) {t.b("collection");},"size": function(c,p,t,i) {t.b("form-button-small");},"follow": function(c,p,t,i) {t.b("Follow <span class=\"hide-phone\">Collection</span>");},"following": function(c,p,t,i) {t.b("Following <span class=\"hide-phone\">Collection</span>");},"unfollow": function(c,p,t,i) {t.b("Unfollow <span class=\"hide-phone\">Collection</span>&nbsp;");} }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "profile/user/_overlays/_collectionOverlay": arguments[1].template,"lib/_covers/_galleryProjects": arguments[2].template,"lib/_covers/_lock": arguments[3].template,"lib/_follow/_button": arguments[4].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('profile/View/Collection',[ "jquery", "nbd/util/pipe", "be/follow", "profile/lib/CollectionLib", "profile/lib/coordinator", "profile/lib/emptyTemplateData", "profile/lib/model", "profile/View/Content", "hgn!templates/lib/_collectionCover", "hgn!templates/lib/_covers/_lock" ], function(a, b, c, d, e, f, g, h, i, j) {
    "use strict";
    var k = function() {
        var b = this;
        this.$parent.on("click", ".js-collection-delete", function() {
            var c = a(this).data("id");
            return d["delete"](c).then(function(d) {
                a(".js-collection-cover[data-id=" + c + "]").remove(), d.has_more || b.setEmpty(f);
            }), !1;
        });
    }, l = function() {
        this.$parent.on("click", ".js-collection-rename", function() {
            var b = a(this), c = b.data("id"), e = b.closest(".js-collection-cover"), f = e.find(".js-collection-title"), g = f.text();
            return d.rename(c, g).then(function(a) {
                f.text(a);
            }), !1;
        });
    }, m = function() {
        this.$parent.on("click", ".js-collection-privacy", function() {
            var b = a(this), c = b.data("id"), f = b.closest(".js-collection-cover");
            return d.togglePrivacy(c).then(function(a) {
                var c;
                a.collection["public"] ? (c = "Make Private", f.find(".js-lock").remove()) : (c = "Make Public", 
                f.find(".js-collection-title").before(j())), b.text(c);
            }, function() {
                e.trigger("error", "Unable to change privacy. Please refresh and try again");
            }), !1;
        });
    }, n = function() {
        this.$parent.on("click", ".js-collection-owners", function() {
            var b = a(this).data("id");
            return d.addOwners(b), !1;
        });
    };
    return h.extend({
        rendered: function() {
            this.picturefill(), c.init(this.$parent);
        },
        bind: function() {
            g.get("is_profile_owner") && (k.call(this), l.call(this), m.call(this), n.call(this));
        },
        unbind: function() {
            g.get("is_profile_owner") && this.$parent.off("click", ".js-collection-owners").off("click", ".js-collection-rename").off("click", ".js-collection-privacy").off("click", ".js-collection-delete");
        },
        template: b(i, a)
    });
});
define('profile/View/CollectionFollowing',[ "jquery", "profile/View/Content", "hgn!templates/lib/_collectionCover", "be/follow", "nbd/util/pipe" ], function(a, b, c, d, e) {
    "use strict";
    return b.extend({
        rendered: function() {
            this.picturefill(), d.init(this.$parent);
        },
        template: e(c, a)
    });
});

define("require/hgn!templates/profile/team/_overlays/_memberOverlay", ["hogan", "require/hgn!templates/lib/_reorderButton", "require/hgn!templates/lib/_editButton"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div class=\"controls-overlay hide-phone hide-tablet\">");t.b("\n" + i);t.b(t.rp("<lib/_reorderButton0",c,p,"  "));t.b("  <div class=\"controls-overlay-action controls-overlay-menu tooltipi-container\">");t.b("\n" + i);t.b(t.rp("<lib/_editButton1",c,p,"    "));t.b("    <ul class=\"tooltipi tooltipi-white controls-overlay-menu-items\">");t.b("\n" + i);if(!t.s(t.f("is_profile_owner",c,p,1),c,p,1,0,0,"")){t.b("      <li class=\"controls-overlay-menu-item js-team-member-role-item");if(t.s(t.d("team_member.is_admin",c,p,1),c,p,0,380,385,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" hide");});c.pop();}t.b("\">");t.b("\n" + i);t.b("        <a href=\"#\" class=\"js-team-member-role-link beicons-pre beicons-pre-settings\" data-role=\"admin\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);t.b("          Make Admin");t.b("\n" + i);t.b("        </a>");t.b("\n" + i);t.b("      </li>");t.b("\n" + i);t.b("      <li class=\"controls-overlay-menu-item js-team-member-role-item");if(!t.s(t.d("team_member.is_admin",c,p,1),c,p,1,0,0,"")){t.b(" hide");};t.b("\">");t.b("\n" + i);t.b("        <a href=\"#\" class=\"js-team-member-role-link beicons-pre beicons-pre-settings\" data-role=\"member\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);t.b("          Remove Admin");t.b("\n" + i);t.b("        </a>");t.b("\n" + i);t.b("      </li>");t.b("\n" + i);};t.b("      <li class=\"controls-overlay-menu-item\">");t.b("\n" + i);t.b("        <a href=\"#\" class=\"js-team-member-remove beicons-pre beicons-pre-delete\" data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\">");t.b("\n" + i);t.b("          ");if(!t.s(t.f("is_profile_owner",c,p,1),c,p,1,0,0,"")){t.b("Remove");};if(t.s(t.f("is_profile_owner",c,p,1),c,p,0,1130,1140,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("Leave Team");});c.pop();}t.b("\n" + i);t.b("        </a>");t.b("\n" + i);t.b("      </li>");t.b("\n" + i);t.b("    </ul>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<lib/_reorderButton0":{name:"lib/_reorderButton", partials: {}, subs: {  }},"<lib/_editButton1":{name:"lib/_editButton", partials: {}, subs: {  }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "lib/_reorderButton": arguments[1].template,"lib/_editButton": arguments[2].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/lib/_profileGallery", ["hogan", "require/hgn!templates/profile/team/_overlays/_memberOverlay", "require/hgn!templates/lib/_covers/_galleryProjects"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b("<div data-id=\"");t.b(t.v(t.f("id",c,p,0)));t.b("\" class=\"js-item list-item js-profile-gallery-cover cfix user-row editable\" id=\"user-");t.b(t.v(t.f("id",c,p,0)));t.b("\"");if(t.s(t.f("ordinal_id",c,p,1),c,p,0,127,157,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" data-ordinal=\"");t.b(t.v(t.f("ordinal_id",c,p,0)));t.b("\"");});c.pop();}t.b(">");t.b("\n" + i);if(t.s(t.f("is_editable",c,p,1),c,p,0,192,244,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(t.rp("<profile/team/_overlays/_memberOverlay0",c,p,"    "));});c.pop();}t.b("  <");if(t.s(t.f("unlink",c,p,1),c,p,0,275,278,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("div");});c.pop();}if(!t.s(t.f("unlink",c,p,1),c,p,1,0,0,"")){t.b("a target=\"_blank\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\"");};t.b(" class=\"user-image-wrap user-image-link left relative\">");t.b("\n");t.b("\n" + i);if(t.s(t.f("team",c,p,1),c,p,0,413,469,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("      <img src=\"");t.b(t.v(t.d("images.50",c,p,0)));t.b("\" class=\"team-image\">");t.b("\n" + i);});c.pop();}t.b("    <img src=\"");t.b(t.v(t.d("images.115",c,p,0)));t.b("\" class=\"user-image\">");t.b("\n");t.b("\n" + i);t.b("  </");if(t.s(t.f("unlink",c,p,1),c,p,0,545,548,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("div");});c.pop();}if(!t.s(t.f("unlink",c,p,1),c,p,1,0,0,"")){t.b("a");};t.b(">");t.b("\n");t.b("\n" + i);t.b("  <div class=\"user-info-wrap left\">");t.b("\n" + i);t.b("    <");if(t.s(t.f("unlink",c,p,1),c,p,0,637,641,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("span");});c.pop();}if(!t.s(t.f("unlink",c,p,1),c,p,1,0,0,"")){t.b("a target=\"_blank\" href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\"");};t.b(" class=\"user-name text-ellipsis");if(t.s(t.f("is_team_profile",c,p,1),c,p,0,757,770,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" team-profile");});c.pop();}t.b("\">");t.b(t.v(t.f("display_name",c,p,0)));t.b("</");if(t.s(t.f("unlink",c,p,1),c,p,0,821,825,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("span");});c.pop();}if(!t.s(t.f("unlink",c,p,1),c,p,1,0,0,"")){t.b("a");};t.b(">");t.b("\n" + i);t.b("    ");if(t.s(t.f("is_team_profile",c,p,1),c,p,0,885,1015,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("<a href=\"");t.b(t.v(t.d("PAGE_URLS.TEAM_ONBOARDING",c,p,0)));t.b("\" class=\"team-badge");if(t.s(t.f("verified",c,p,1),c,p,0,955,992,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" beicons-pre beicons-pre-check-circle");});c.pop();}t.b("\">Team</a>");});c.pop();}t.b("\n" + i);if(t.s(t.d("location.string",c,p,1),c,p,0,1060,1360,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"user-location hide-phone\">");t.b("\n" + i);t.b("      <span class=\"user-label\">Location: </span>");t.b("\n" + i);t.b("      <");if(t.s(t.f("unlink",c,p,1),c,p,0,1171,1175,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("span");});c.pop();}if(!t.s(t.f("unlink",c,p,1),c,p,1,0,0,"")){t.b("a target=\"_blank\" href=\"");t.b(t.v(t.d("location.link",c,p,0)));t.b("\" class=\"location-link\"");};t.b(">");t.b(t.v(t.d("location.string",c,p,0)));t.b("</");if(t.s(t.f("unlink",c,p,1),c,p,0,1305,1309,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("span");});c.pop();}if(!t.s(t.f("unlink",c,p,1),c,p,1,0,0,"")){t.b("a");};t.b(">");t.b("\n" + i);t.b("    </div>");t.b("\n" + i);});c.pop();}t.b("\n" + i);if(t.s(t.d("field_links.0",c,p,1),c,p,0,1404,1775,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("    <div class=\"user-fields\">");t.b("\n" + i);t.b("      <span class=\"user-label hide-phone\">Fields: </span>");t.b("\n" + i);if(t.s(t.f("field_links",c,p,1),c,p,0,1515,1721,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("        <");if(t.s(t.f("unlink",c,p,1),c,p,0,1536,1540,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("span");});c.pop();}if(!t.s(t.f("unlink",c,p,1),c,p,1,0,0,"")){t.b("a href=\"");t.b(t.v(t.f("url",c,p,0)));t.b("\" title=\"");t.b(t.v(t.f("name",c,p,0)));t.b("\" class=\"field-link\"");};t.b(">");t.b(t.v(t.f("name",c,p,0)));t.b("</");if(t.s(t.f("unlink",c,p,1),c,p,0,1647,1651,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("span");});c.pop();}if(!t.s(t.f("unlink",c,p,1),c,p,1,0,0,"")){t.b("a");};t.b(">");if(t.s(t.f("separate",c,p,1),c,p,0,1699,1701,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(", ");});c.pop();}t.b("\n" + i);});c.pop();}t.b("    </div> <!-- .user-fields -->");t.b("\n" + i);});c.pop();}t.b("\n" + i);t.b("    <div class=\"user-follow-stats cfix\">");t.b("\n");t.b("\n" + i);t.sub("follow_button",c,p,i);t.b("\n" + i);t.b("      <div class=\"user-stats hide-phone");if(t.s(t.f("is_profile_owner",c,p,1),c,p,0,1941,1946,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" self");});c.pop();}t.b("\">");t.b("\n");t.b("\n" + i);t.b("        <span class=\"cover-stat cover-stat-");t.b(t.v(t.d("footer.top_title",c,p,0)));t.b(" ");if(t.s(t.d("footer.highlighted",c,p,1),c,p,0,2058,2080,"{{ }}")){t.rs(c,p,function(c,p,t){t.b("cover-stat-highlighted");});c.pop();}if(t.s(t.d("footer.top_icon",c,p,1),c,p,0,2123,2167,"{{ }}")){t.rs(c,p,function(c,p,t){t.b(" beicons-pre beicons-pre-");t.b(t.v(t.d("footer.top_icon",c,p,0)));});c.pop();}t.b("\">");t.b("\n" + i);t.b("          ");t.b(t.v(t.d("footer.top_value",c,p,0)));t.b("\n" + i);t.b("        </span>");t.b("\n" + i);t.b("        <span class=\"cover-stat cover-stat-");t.b(t.v(t.d("footer.bottom_title",c,p,0)));t.b(" hide-phone beicons-pre beicons-pre-");t.b(t.v(t.d("footer.bottom_icon",c,p,0)));t.b("\">");t.b("\n" + i);t.b("          ");t.b(t.v(t.d("footer.bottom_value",c,p,0)));t.b("\n" + i);t.b("        </span>");t.b("\n");t.b("\n" + i);t.b("      </div>");t.b("\n");t.b("\n" + i);t.b("    </div> <!-- .user-follow-stats -->");t.b("\n");t.b("\n" + i);t.b("  </div> <!-- .user-info-wrap -->");t.b("\n");t.b("\n" + i);t.b(t.rp("<lib/_covers/_galleryProjects1",c,p,"  "));t.b("\n" + i);t.b("</div>");t.b("\n");return t.fl(); },partials: {"<profile/team/_overlays/_memberOverlay0":{name:"profile/team/_overlays/_memberOverlay", partials: {}, subs: {  }},"<lib/_covers/_galleryProjects1":{name:"lib/_covers/_galleryProjects", partials: {}, subs: {  }}}, subs: { "follow_button": function(c,p,t,i) {} }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "profile/team/_overlays/_memberOverlay": arguments[1].template,"lib/_covers/_galleryProjects": arguments[2].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 

define("require/hgn!templates/lib/_profileGalleryUser", ["hogan", "require/hgn!templates/lib/_profileGallery", "require/hgn!templates/lib/_follow/_buttonUserSmall"], function(hogan){ var tmpl = new hogan.Template({code: function (c,p,i) { var t=this;t.b(i=i||"");t.b(t.rp("<lib/_profileGallery1",c,p,""));return t.fl(); },partials: {"<lib/_profileGallery1":{name:"lib/_profileGallery", partials: {"<follow_buttonlib/_follow/_buttonUserSmall0":{name:"lib/_follow/_buttonUserSmall", partials: {}, subs: {  }}}, subs: { "follow_button": function(c,p,t,i) {t.b(t.rp("<follow_buttonlib/_follow/_buttonUserSmall0",c,p,"    "));} }}}, subs: {  }}, "", hogan), extend = function(a, b) { for (var k in b) { a[k] = b[k]; } return a; }, parts = { "lib/_profileGallery": arguments[1].template,"lib/_follow/_buttonUserSmall": arguments[2].template, "": null}, render = function() { return tmpl.render.apply(tmpl, arguments); }; tmpl.ri = function(context, partials, indent) { return this.r(context, extend(parts, partials), indent); }; render.template = tmpl; return render;}); 
define('profile/View/Follower',[ "jquery", "profile/View/Content", "hgn!templates/lib/_profileGalleryUser", "be/follow", "nbd/util/pipe" ], function(a, b, c, d, e) {
    "use strict";
    return b.extend({
        rendered: function() {
            this.picturefill(), d.init(this.$parent);
        },
        template: e(c, a)
    });
});
define('profile/user/lib/viewMap',[ "profile/user/View/Project", "profile/user/View/Wip", "profile/View/Appreciated", "profile/View/Collection", "profile/View/CollectionFollowing", "profile/View/Follower" ], function(a, b, c, d, e, f) {
    "use strict";
    var g = {
        projects: a,
        wip: b,
        followers: f,
        following: f,
        team_members: f,
        collections: d,
        collections_following: e,
        appreciated: c
    };
    return function(a) {
        return g[a];
    };
});
require([ "jquery", "be/miniprofile", "profile/Controller/MemberDrafts", "profile/lib/activeSection", "profile/lib/emptyTemplateData", "profile/user/lib/emptyTemplateMap", "profile/user/lib/bindings", "profile/user/lib/viewMap" ], function(a, b, c, d, e, f, g, h) {
    "use strict";
    b.init(), g.init(a(".js-profile")), c.init(a(".js-project-dropdown-toggle")), d.init(h, f, e);
});
define("profile/user", function(){});


(function(g) { 
  g._cssWritten = g._cssWritten || []; 
  if (g._cssWritten.indexOf('profile/user') != -1) return; 
  g._cssWritten.push('profile/user');  for (var c in requirejs.s.contexts) { requirejs.s.contexts[c].nextTick = function(f){f()} } 
  require(['css', 'require/normalize', 'require'], function(css, normalize, req) { 
    var pathname = window.location.pathname.split('/'); 
    pathname.pop(); 
    pathname = pathname.join('/') + '/'; 
    var baseParts = req.toUrl('base_url').split('/'); 
    baseParts.pop(); 
    var baseUrl = baseParts.join('/') + '/'; 
    baseUrl = normalize.convertURIBase(baseUrl, pathname, '/'); 
    if (baseUrl.substr(0, 1) != '/') 
      baseUrl = '/' + baseUrl; 
    css.inject(normalize('.popup.mini-profile:before{width:20px;height:20px;background:#fff;box-shadow:-2px -2px 4px -2px rgba(0,0,0,0.4);content:\'\';position:absolute;z-index:-1;}.popup.mini-profile.top-right:before,.popup.mini-profile.top-left:before{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg);top:-8px;}.popup.mini-profile.bottom-right:before,.popup.mini-profile.bottom-left:before{-webkit-transform:rotate(-134deg);-moz-transform:rotate(-134deg);-ms-transform:rotate(-134deg);-o-transform:rotate(-134deg);transform:rotate(-134deg);bottom:-8px;}.popup.mini-profile.top-right:before,.popup.mini-profile.bottom-right:before{right:45px;}.popup.mini-profile.top-left:before,.popup.mini-profile.bottom-left:before{left:45px;}.mini-profile-wrap{width:331px;}.mini-profile-wrap .gallery-projects-wrap{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;background:#fff;border:1px solid #d9d9d9;border-radius:4px;padding:4px 3px 4px 1px;position:relative;text-decoration:none;width:361px;}.mini-profile-wrap .gallery-projects-wrap .gallery-cover-overlay{background:#0088f5;background:-webkit-gradient(linear,0% 0%,0% 100%,from(rgba(0,156,252,0.75)),to(rgba(0,116,238,0.75)));background:-webkit-linear-gradient(0% 0%,0% 100%,from(rgba(0,156,252,0.75)),to(rgba(0,116,238,0.75)));background:-moz-linear-gradient(center top,rgba(0,156,252,0.75),rgba(0,116,238,0.75));background:linear-gradient(rgba(0,156,252,0.75),rgba(0,116,238,0.75));-moz-transition:opacity 0.15s ease-in;-webkit-transition:opacity 0.15s ease-in;transition:opacity 0.15s ease-in;border:1px solid #356bca;border-radius:4px;bottom:0;color:#fff;font-size:16px;left:0;opacity:0;position:absolute;right:0;text-align:center;text-decoration:none !important;text-shadow:1px 2px 0 #0a4fb9;text-transform:uppercase;top:0;}.ie .mini-profile-wrap .gallery-projects-wrap .gallery-cover-overlay{display:none;font-weight:bold;}.mini-profile-wrap .gallery-projects-wrap:hover .gallery-cover-overlay{opacity:1;}.ie .mini-profile-wrap .gallery-projects-wrap:hover .gallery-cover-overlay{background:rgba(0,156,252,0.75);display:block;}.mini-profile-wrap .gallery-projects-wrap .gallery-cover-overlay-text{-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);-webkit-transform:translateY(-50%);transform:translateY(-50%);position:absolute;top:50%;width:100%;}.mini-profile-wrap .gallery-projects-wrap .project-cover-wrap{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;background:#f3f3f3;border-left:3px solid #fff;float:left;height:90px;overflow:hidden;width:33.3%;}.mini-profile-wrap .gallery-projects-wrap .project-cover-wrap .project-cover{border-radius:0;box-shadow:none;margin:0;vertical-align:top;visibility:visible;width:100%;}.mini-profile-wrap .gallery-projects-wrap .project-cover-wrap.empty .project-cover{display:none;}.mini-profile-wrap .gallery-projects-wrap-4{width:479px;}.mini-profile-wrap .gallery-projects-wrap-4 .project-cover-wrap{width:25%;}.mini-profile-wrap .gallery-projects-wrap-4 .project-cover-wrap:nth-child(n+5){display:none;}.mini-profile-wrap .gallery-projects-wrap-2{width:242px;}.mini-profile-wrap .gallery-projects-wrap-2 .project-cover-wrap{width:50%;}.mini-profile-wrap .gallery-projects-wrap-2 .project-cover-wrap:nth-child(n+3){display:none;}.mini-profile-wrap .user-image-wrap,.mini-profile-wrap .user-image{width:35px;height:35px;}.mini-profile-wrap .user-image-wrap{background:#f3f3f3;display:block;float:left;margin:0 10px 0 0;padding:0;}.mini-profile-wrap .user-info{display:inline-block;max-width:160px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.mini-profile-wrap .user-name{color:#3c3c3c;display:block;font-size:14px;padding-bottom:3px;}.mini-profile-wrap .location-link{color:#6f6f6f;font-size:13px;}.mini-profile-wrap .location-link:before{margin-right:3px;}.mini-profile-wrap .follow-button-container{float:right;width:auto !important;}.mini-profile-wrap .gallery-projects-wrap{float:left;margin:0 0 10px;width:331px;}.mini-profile-wrap .gallery-projects-wrap .project-cover-wrap{display:block !important;height:82px;width:108px;}.mini-profile-wrap .user-stats-followed{float:inherit;}.mini-profile-wrap .user-info-container{display:inline-block;}.mini-profile-wrap .stats-wrap{color:#adadad;font-size:13px;font-weight:bold;margin-bottom:-2px;}.mini-profile-wrap .cover-stat{margin-right:10px;}.mini-profile-wrap .cover-stat:before{margin-right:2px;}.fancybox-tmp iframe,.fancybox-tmp object{vertical-align:top;padding:0;margin:0;}.fancybox-wrap{position:absolute;top:0;left:0;z-index:1002;}.fancybox-outer{padding:0;margin:0;background:#f9f9f9;color:#444;text-shadow:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;}.fancybox-opened{z-index:1003;}.fancybox-opened .fancybox-outer{-webkit-box-shadow:0 10px 25px rgba(0,0,0,0.5);-moz-box-shadow:0 10px 25px rgba(0,0,0,0.5);box-shadow:0 10px 25px rgba(0,0,0,0.5);}.fancybox-inner{width:100%;height:100%;padding:0;margin:0;position:relative;outline:none;overflow:hidden;}.fancybox-error{color:#444;font:14px/20px \"Helvetica Neue\",Helvetica,Arial,sans-serif;margin:0;padding:10px;}.fancybox-image,.fancybox-iframe{display:block;width:100%;height:100%;border:0;padding:0;margin:0;vertical-align:top;}.fancybox-image{max-width:100%;max-height:100%;}#fancybox-loading{position:fixed;top:50%;left:50%;margin-top:-21px;margin-left:-21px;width:42px;height:42px;background:url(\'//a2.behance.net/img/jquery/plugins/fancybox/loading.gif?cb=1774823406\');opacity:0.8;cursor:pointer;z-index:1010;}.fancybox-close,.fancybox-prev span,.fancybox-next span{background-image:url(\'//a2.behance.net/img/jquery/plugins/fancybox/sprite.png?cb=1774823406\');}.fancybox-close{position:absolute;top:-18px;right:-18px;width:36px;height:36px;cursor:pointer;z-index:1004;}.fancybox-prev,.fancybox-next{position:absolute;top:0;width:40%;height:100%;cursor:pointer;background:transparent url(\'//a2.behance.net/img/jquery/blank.gif?cb=1774823406\');z-index:1003;}.fancybox-prev{left:0;}.fancybox-next{right:0;}.fancybox-prev span,.fancybox-next span{position:absolute;top:50%;left:-9999px;width:36px;height:36px;margin-top:-18px;cursor:pointer;z-index:1003;}.fancybox-prev span{background-position:0 -36px;}.fancybox-next span{background-position:0 -72px;}.fancybox-prev:hover,.fancybox-next:hover{visibility:visible;}.fancybox-prev:hover span{left:20px;}.fancybox-next:hover span{left:auto;right:20px;}.fancybox-tmp{position:absolute;top:-9999px;left:-9999px;padding:0;overflow:visible;visibility:hidden;}#fancybox-overlay{position:absolute;top:0;left:0;overflow:hidden;display:none;z-index:1001;background:#000;}.fancybox-title{visibility:hidden;font:normal 13px/20px \"Helvetica Neue\",Helvetica,Arial,sans-serif;position:relative;text-shadow:none;z-index:1005;}.fancybox-opened .fancybox-title{visibility:visible;}.fancybox-title-float-wrap{position:absolute;bottom:0;right:50%;margin-bottom:-35px;z-index:1003;text-align:center;}.fancybox-title-float-wrap .child{display:inline-block;margin-right:-100%;padding:2px 20px;background:transparent;background:rgba(0,0,0,0.8);-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;text-shadow:0 1px 2px #222;color:#FFF;font-weight:bold;line-height:24px;white-space:nowrap;}.fancybox-title-outside-wrap{position:relative;margin-top:10px;color:#fff;}.fancybox-title-inside-wrap{margin-top:10px;}.fancybox-title-over-wrap{position:absolute;bottom:0;left:0;color:#fff;padding:10px;background:#000;background:rgba(0,0,0,.8);}.be-scroll-container{width:100%;height:100%;position:relative;overflow:hidden;}.be-viewport{width:100%;height:100%;overflow:auto;position:absolute;}.be-viewport::-webkit-scrollbar{display:none;}.be-content{position:relative;}.be-scrollbar{position:absolute;right:0;width:10px;z-index:1;margin:0 5px;}.be-scrollbar.scrolling .be-thumb{background:rgba(0,0,0,0.1);}.be-scrollbar.disable{display:none;}.be-track{height:100%;position:relative;padding:0 1px;}.be-thumb{width:100%;cursor:pointer;overflow:hidden;position:absolute;top:0;-moz-border-radius:4px;border-radius:4px;}.fancy-uploader .uploader_uploading_bar{background:#ededed;background:-webkit-gradient(linear,0% 0%,0% 100%,from(gainsboro),to(white));background:-webkit-linear-gradient(0% 0%,0% 100%,from(gainsboro),to(white));background:-moz-linear-gradient(center top,gainsboro,white);background:linear-gradient(#dcdcdc,#ffffff);}.fancy-uploader .uploader_uploading_bg{background:#007aff;background:-webkit-gradient(linear,0% 0%,0% 100%,from(#0096ff),to(#005eff));background:-webkit-linear-gradient(0% 0%,0% 100%,from(#0096ff),to(#005eff));background:-moz-linear-gradient(center top,#0096ff,#005eff);background:linear-gradient(#0096ff,#005eff);border:1px solid #1256ce;box-shadow:inset 0 1px 0 rgba(255,255,255,0.2);margin:-1px 0 0 -1px;min-width:3%;position:relative;}.fancy-uploader .upload-progressbar-wrap{background:none !important;padding:15px 70px 0;}.fancy-uploader .uploader_error_head,.fancy-uploader .uploader_uploading_status{font-size:20px;margin-bottom:10px;}.fancy-uploader .uploader_uploading_file .form-button{display:none;}.fancy-uploader .uploader_uploading_bar{border:1px solid #bdbdbd;float:none !important;margin-right:auto !important;width:330px;}.fancy-uploader .uploader_uploading_bar,.fancy-uploader .uploader_uploading_bg{border-radius:11.5px;height:21px;}.fancy-uploader .uploader_uploading_percent{font-size:14px;}.fancy-uploader .uploader_file_info_name{display:none;}.controls-delete-link{color:#df2626;font-size:12px;margin-top:5px;}.controls-delete-link:hover{color:#df2626;text-decoration:underline;}.controls-delete-link:before{content:\"\\D7\";display:inline-block;font-size:18px;font-weight:bold;margin-right:5px;}#nsfw-tooltip{padding-bottom:10px;}#nsfw-tooltip .tooltipi{bottom:32px;left:-106px;top:auto;width:230px;}.nsfw-tooltip{white-space:normal !important;}.nsfw-warning-notice{background:#e11c1c;background:-webkit-gradient(linear,0% 0%,0% 100%,from(#f62f2f),to(#cc0909));background:-webkit-linear-gradient(0% 0%,0% 100%,from(#f62f2f),to(#cc0909));background:-moz-linear-gradient(center top,#f62f2f,#cc0909);background:linear-gradient(#f62f2f,#cc0909);color:#fff;padding:10px;width:392px;}.nsfw-warning-notice .tooltipi{bottom:20px;font-size:12px;font-weight:normal;text-align:left;top:auto;width:280px;}.nsfw-warning-notice .pointer{padding-top:10px;}.ui-selectmenu-wip .form-option-empty{display:none;}.ui-selectmenu-wip .form-option{border-top:1px solid #e3e3e3;}.ui-selectmenu-wip .form-option:first-child{border-top:0;}.ui-selectmenu-wip .form-option.ui-selectmenu-item-selected a{background:#e7f2ff;color:#1769ff;}.ui-selectmenu-wip .form-option.ui-selectmenu-item-selected a .wip-option-title{color:#1769ff;}.ui-selectmenu-wip .form-option.ui-state-disabled .wip-option-wrap{opacity:.3;}.ui-selectmenu-wip .form-option a{color:#3c3c3c;padding:10px;}.ui-selectmenu-wip .form-option .wip-option-image-wrap{margin-right:12px;position:relative;}.ui-selectmenu-wip .form-option .wip-option-info-wrap{padding:5px 0;}.ui-selectmenu-wip .form-option .wip-option-title{color:#3c3c3c;font-size:16px;margin-bottom:2px;max-width:300px;}.ui-selectmenu-wip .form-option .wip-option-subtitle,.ui-selectmenu-wip .form-option .wip-option-count{color:#666;font-size:12px;font-weight:normal;margin-top:3px;}.ui-selectmenu-wip.ui-selectmenu-open a:focus,.ui-selectmenu-wip.ui-selectmenu-open li.ui-selectmenu-item-focus a,.ui-selectmenu-wip.ui-selectmenu-open li.ui-selectmenu-item-selected a{background:#f5f5f5;color:#3c3c3c;}.ui-selectmenu-wip.ui-selectmenu-open:hover li.ui-selectmenu-item-selected a,.ui-selectmenu-wip.ui-selectmenu-open li.ui-selectmenu-item-selected a{background:#e7f2ff;color:#3c3c3c;}.ui-selectmenu-wip.ui-selectmenu-open:hover li.ui-selectmenu-item-selected a .wip-option-title,.ui-selectmenu-wip.ui-selectmenu-open li.ui-selectmenu-item-selected a .wip-option-title{color:#1769ff;}.ui-selectmenu-wip .ui-selectmenu-status .wip-option-image-wrap,.ui-selectmenu-wip .ui-selectmenu-status .wip-option-subtitle,.ui-selectmenu-wip .ui-selectmenu-status .wip-option-count{display:none;}.wip-sprite{background:url(\"//a2.behance.net/img/wip/wip-sprite.png?cb=1774823406\");display:inline-block;vertical-align:middle;}#wip-sell-container .sell-image-container{width:300px;height:212px;background-color:#fff;background-position:0 -38px;margin-right:20px;padding:3px;}#wip-sell-container .sell-point{font-size:14px;line-height:20px;margin-bottom:20px;}#wip-image-button{font-size:18px;height:44px;line-height:42px;}.first-wip-creation #wip-image-button{font-size:14px;height:34px;line-height:32px;}#wip-image-button-container{width:auto;}.wip-upload-popup .wip-uploader-text{text-align:center;}.wip-upload-popup .wip-uploader-title{color:#333;font-size:20px;font-weight:bold;margin-bottom:10px;}.wip-upload-popup .wip-uploader-subtitle{color:#696969;font-size:16px;margin-bottom:20px;}.wip-upload-popup .popup-header,.wip-upload-popup #wip-sell-container{display:none;}.standard-wip-container #wip-uploader-container{padding:5px 50px 15px;}.standard-wip-container .wip-uploader-text{margin-bottom:30px;}.first-wip-creation .popup-header,.first-wip-creation #wip-sell-container{display:block;}.first-wip-creation .wip-uploader-text{display:none;}.first-wip-creation #wip-image-form{background:none;padding:20px 0;}.first-wip-creation .sell-points-container{width:345px;}#wip-uploader .messages{margin:0;}#wip-info-container .form-label{color:#333;font-size:13px;font-weight:bold;line-height:19px;padding-bottom:0;}#wip-info-container .wip-info{width:415px;}#wip-info-container #new_wip{margin-bottom:20px;}#wip-info-container .form-text,#wip-info-container .form-textarea{width:100%;}#wip-info-container .form-textarea{height:80px;}#wip-info-container .ui-textboxlist{height:auto;min-height:62px;}#wip-info-container #title-container{margin-top:-5px;}#wip-info-container #title-container .form-label{float:left;}#wip-info-container #title-container .character-counter{line-height:19px;text-align:right;}#wip-info-container #title-container .counter-normal{color:#5fa03b;}#wip-info-container #title-container .letters-remaining{display:none;}#wip-info-container #title-container .form-text{clear:both;}#wip-info-container #title_view-container{border-bottom:1px solid #dedede;margin:0 0 20px;max-width:406px;}#wip-info-container #title_edit{height:22px;line-height:22px;}#wip-info-container #title_view{font-size:17px;line-height:19px;max-width:340px;padding-bottom:10px;}#wip-info-container .wip-text-divider{width:1px;height:15px;background:#ccc;display:inline-block;margin:0 10px;top:2px;}.wip-image-preview{margin:0 40px 10px 0;}#wip-settings-dropdowns{width:100%;}.wip-settings-dropdown{width:-webkit-calc(50% - 15px) ;width:calc(50% - 15px) ;float:left;}.wip-settings-dropdown .form-label{display:block;}.wip-settings-dropdown .form-item{width:100%;}.wip-settings-dropdown .ui-selectmenu{display:inline-block;margin-top:8px;vertical-align:middle;width:100% !important;}#visibility-settings{margin-right:15px;}#teams-settings{margin-left:15px;}.ui-selectmenu-menu.naked{display:none !important;}#new_wip{border-bottom:1px solid #dedede;margin:0 0 20px;}#new_wip .form-item{display:inline-block;margin:0 20px 10px -5px;}#new_wip .form-label{font-size:17px;}#new_wip .form-label.checked{color:#1769ff;}#wip_id-container .form-label{display:block;margin-bottom:5px;margin-top:-5px;}#wip_id-button{width:100% !important;}#wip_id-container{margin-bottom:16px;}#wip_id-menu{max-width:414px;min-width:414px;position:fixed !important;}.wip-info-popup .popup-inner-wrap{padding-top:30px;}.wip-info-popup .wip-image-preview{border-radius:3px;max-height:380px;max-width:210px;}.wip-info-popup .wip-form-create-wip-first #new_wip{display:none;}.wip-info-popup .wip-form[new_wip=\'1\'] #title_view-container,.wip-info-popup .wip-form[new_wip=\'1\'] #wip_id-container{display:none;}.wip-info-popup .wip-form[new_wip=\'1\'] #title-container{display:block;}.wip-info-popup .wip-form[new_wip=\'0\'] #title_view-container,.wip-info-popup .wip-form[new_wip=\'0\'] #title-container{display:none;}.wip-info-popup .wip-form[new_wip=\'0\'] #wip_id-container{display:block;}.wip-info-popup .wip-form-create-revision-existing #title_view-container{display:block;}.wip-info-popup .wip-form-create-revision-existing #title_edit,.wip-info-popup .wip-form-create-revision-existing #new_wip,.wip-info-popup .wip-form-create-revision-existing #wip_id-container,.wip-info-popup .wip-form-create-revision-existing #title-container{display:none;}.wip-info-popup .wip-form-update-revision-existing #new_wip,.wip-info-popup .wip-form-update-revision-existing #title-container,.wip-info-popup .wip-form-update-revision-existing #wip_id-container{display:none;}.wip-info-popup .wip-form-update-revision-existing #title_edit,.wip-info-popup .wip-form-update-revision-existing #title_view-container,.wip-info-popup .wip-form-update-revision-existing #mature-container{display:block;}.wip-info-popup #mature-container{clear:both;}.wip-info-popup .wip-form-lock-mature #mature-container{display:none;}.wip-info-popup .wip-form-lock-mature #mature-warning-container{display:block;}.wip-info-popup .wip-form-lock-privacy #visibility-settings,.wip-info-popup .wip-form-lock-privacy #mature-container,.wip-info-popup .wip-form-lock-privacy #mature-warning-container{display:none;}.wip-info-popup .wip-form-lock-privacy #privacy-warning-container{display:block;}.wip-info-popup .wip-form-lock-dmca #visibility-settings{display:none;}.wip-info-popup .wip-form-lock-dmca #dmca-warning-container{display:block;}.wip-form-lock-flagged #visibility-settings{display:none;}.formError.tags{margin-top:24px;}#tags-list{height:63px !important;overflow:auto;}#tags-favorites{max-width:85%;}#tags-favorites .object-tag{max-width:100%;word-wrap:break-word;}#tags-wrap .ui-textboxlist{max-width:400px;width:400px;}#tags-wrap.with-favorites #tags-container{float:left;width:373px;}#tags-wrap.with-favorites #tags-container .ui-textboxlist{max-width:357px;width:357px;}#tags-wrap.with-favorites #tags-favorites-container{display:block;}#tags-favorites-container{display:none;float:left;width:34px;}#tags-favorites-toggle{display:block;height:31px;margin-top:32px;position:relative;width:34px;}#tags-favorites-container.menu-open #tags-favorites-toggle{border-radius:4px 4px 0 0;}#tags-favorites-container.disabled #tags-favorites-toggle,#tags-favorites-container.disabled #tags-favorites-toggle:hover{background:#c8c8c8;background:-webkit-gradient(linear,0% 0%,0% 100%,from(#d4d4d4),to(#bcbcbc));background:-webkit-linear-gradient(0% 0%,0% 100%,from(#d4d4d4),to(#bcbcbc));background:-moz-linear-gradient(center top,#d4d4d4,#bcbcbc);background:linear-gradient(#d4d4d4,#bcbcbc);border-color:#b9b9b9;border-radius:4px;cursor:default;}#tags-favorites-list{visibility:hidden;opacity:0;-moz-transition:visibility 0s linear 0.1s,opacity 0.2s linear;-webkit-transition:visibility 0s linear,opacity 0.2s linear;-webkit-transition-delay:0.1s,0s;transition:visibility 0s linear 0.1s,opacity 0.2s linear;-webkit-backface-visibility:hidden;background:#fff;border:1px solid #e3e3e3;border-radius:2px;box-shadow:1px 1px 3px #dfdfdf;max-height:148px;overflow:hidden;padding:7px 7px 0;position:absolute;right:0;width:250px;z-index:400;}#tags-favorites-container.menu-open #tags-favorites-list{visibility:visible;opacity:1;-moz-transition:visibility 0s linear 0s,opacity 0.2s linear;-webkit-transition:visibility 0s linear,opacity 0.2s linear;-webkit-transition-delay:0s,0s;transition:visibility 0s linear 0s,opacity 0.2s linear;-webkit-backface-visibility:hidden;}#tags-favorites-container.disabled #tags-favorites-list{display:none !important;}.be-scroll-container .be-thumb{-moz-transition:opacity 0.15s linear;-webkit-transition:opacity 0.15s linear;transition:opacity 0.15s linear;background:rgba(0,0,0,0.1);right:2px;width:5px;}.tinyscroll-hover-handle .be-thumb{-moz-transition:opacity 0.15s linear;-webkit-transition:opacity 0.15s linear;transition:opacity 0.15s linear;opacity:0;}.tinyscroll-hover-handle:hover .be-thumb{opacity:1;}.js-upload-button .upload-icon,.js-upload-button .upload-text{display:inline-block;}.js-upload-button .upload-icon{width:21px;height:15px;background-image:url(\'//a2.behance.net/img/network/site/sprite.png?cb=1774823406\');background-position:-497px -266px;top:2px;position:relative;margin-right:5px;}.js-upload-button.upload-embed .upload-icon{background:url(\'//a2.behance.net/img/site/elements.png?cb=1774823406\');width:11px;height:15px;background-position:-341px -108px;top:3px;margin-right:8px;}.js-upload-form{color:#FFFFFF;display:block;background:transparent url(//a2.behance.net/img/site/bg-medium.png?cb=1774823406) repeat 0 0;}.js-upload-form.js-upload-form-transparent,.js-upload-form.js-upload-form-light{color:inherit;}.js-upload-form.js-upload-form-transparent{background:none;}.js-upload-form.js-upload-form-light{background:transparent url(//a2.behance.net/img/site/bg-light.png?cb=1774823406) repeat 0 0;}.js-upload-form-image .js-upload-button-container{width:93px;}.js-upload-form-image .js-upload-button-container{width:140px;}.js-upload-form-image .js-upload-button-container{width:133px;}.js-upload-button-container{margin:0 auto;}.js-upload-content{display:none;}.uploader_error_head,.uploader_uploading_status{font-size:15px;font-weight:bold;padding-bottom:7px;}.uploader_error .small-text{color:#3b3b3b;width:215px;}.uploader_uploading_percent{font-size:20px;font-weight:bold;padding-top:1px;line-height:20px;}.uploader_uploading_bar{background-color:#FFF;}.uploader_uploading_bg,.uploader_uploading_bar{height:22px;}.uploader_uploading_bg{width:0px;overflow:hidden;background-image:url(\'//a2.behance.net/img/swfupload/progress-22.gif?cb=1774823406\');}.uploader_uploading_bg.js-upload-progress-gif{background:transparent url(//a2.behance.net/img/uploads/progress-bar-default.gif?cb=1774823406) repeat 0 0;width:auto;}.uploader_uploading_bar{width:215px;margin-right:10px;margin-bottom:7px;}.uploader_uploading_bar,.uploader_uploading_percent{float:left;}.uploader_file_info .small-text{text-transform:uppercase;font-weight:bold;}.uploader_file_info_line{margin-bottom:5px;}.uploader_file_info{margin-bottom:5px;}.uploader_spinner{width:20px;height:20px;margin:0px -10px 0px -35px;float:left;}.js-upload-content-error{width:295px;}#upload-media .js-upload-content-error{width:inherit;}.js-upload-content-error .js-upload-button-container{margin:0;}.uploader_error{background-color:#EFD7D9;padding:10px;margin:0px 30px 10px 0px;}.uploader_error .icon{margin-right:5px;}.uploader_error div{float:left;}#profile-image-form{width:520px;height:138px;}#profile-image-form .js-upload-content-error,#profile-image-form .uploader_uploading_position{padding-left:120px;}#background-upload-image .uploader_uploading_file{margin-left:5px;}#tab-content-background #editor-background-form-container.js-upload-form-error,#tab-content-background #editor-background-form-container.sidebyside{margin-left:0;}#tab-content-background #editor-background-form-container.js-upload-form-error,#tab-content-background #editor-background-form-container.queued{margin-left:130px;}#background-error-cancel{margin-left:100px;bottom:0;}#editor-background-button-container{width:93px;}#project-cover-form{width:590px;height:243px;}#project-cover-form .js-upload-content-error,#project-cover-form .uploader_uploading_position{padding-left:180px;}#upload-queue .uploader_uploading_file{background:none;}#upload-queue .file-name{float:left;width:150px;}#upload-queue .percent{float:right;width:200px;}#upload-queue .uploader_file_info,#upload-queue .uploader_uploading_status,#upload-queue .uploader_uploading_indicator{float:left;}#upload-queue .uploader_uploading_indicator{width:170;margin-left:20px;}#upload-queue .uploader_uploading_cancel{float:right;}#upload-queue li,#upload-queue li .uploader_uploading_percent,#upload-queue li .uploader_uploading_status,#upload-queue li .status-error,#upload-queue li .uploader_file_progress{font-size:11px;font-family:Arial,Helvetica;font-weight:normal;}#upload-queue li{border-bottom:solid 1px #A7A7A7;padding-bottom:10px;margin-bottom:10px;}#upload-queue li:last-child{border:0px;}#upload-queue li .uploader_file_info .small-text{text-transform:inherit;}#upload-queue .uploader_file_info .default-font{width:150px;overflow:hidden;display:block;float:right;margin-left:5px;}#upload-queue .uploader_file_info .small-text{font-weight:bold;}#upload-queue .uploader_uploading_status{width:196px;text-align:right;}#upload-queue .uploader_uploading_bar{width:130px;}#upload-queue .uploader_uploading_percent{margin-left:5px;}#upload-queue .uploader_uploading_indicator div{float:left;}#upload-queue .uploader_uploading_bg,#upload-queue .uploader_uploading_bar{height:14px;}#upload-queue .uploader_uploading_bg{width:0px;overflow:hidden;background-image:url(\'//a2.behance.net/img/swfupload/progress-22.gif?cb=1774823406\');}#upload-queue .status-success,#upload-queue .status-error{width:175px;}#upload-queue .icon-status-error,#upload-queue .icon-status-success{margin-left:5px;}#company-logo-form-container,#company_logo-form-container{float:left;}#company-logo-form,#company_logo-form{width:470px;min-height:140px;}#company-logo-form .js-upload-content-error,#company-logo-form .uploader_uploading_position,#company_logo-form .js-upload-content-error,#company_logo-form .uploader_uploading_position{padding-left:120px;}#forum-button-container{margin:0;}#forum-form-container{margin-bottom:20px;margin-top:20px;}#group-banner-button-container{margin:0;float:left;}#group-banner-preview,#banner-gallery li{width:540px;}#group-banner-uploader-area .uploader_uploading_file{margin:0 10px;position:relative;top:10px;height:110px;}#group-banner-uploader-area .uploader_uploading_position{padding-top:10px;}#group-banner-preview .uploader-error{width:290px;margin:0px auto;}#group-banner-uploader-area .white-frame,#group-banner-preview-bg{width:560px;height:130px;background-color:#FFF;margin-bottom:15px;}#group-banner-uploader-area .js-upload-form.uploader_uploading_file{padding:0px 0px 0px 150px;}#group-banner-uploader-area #preview-crop{width:auto !important;float:left;}#group-banner-form-container,#group-banner-form{float:left;}#group-banner-uploader-area .pcrop-buttons-wrap input{margin-top:0px;}#group-banner-uploader-area .jcrop-holder{margin-bottom:15px;}', baseUrl, pathname)); 
  }); 
  for (var c in requirejs.s.contexts) { requirejs.s.contexts[c].nextTick = requirejs.nextTick; } 
})(this);